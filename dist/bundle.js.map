{"version":3,"file":"bundle.js","sources":["../node_modules/pdfjs-dist/build/pdf.mjs","../src/main.js"],"sourcesContent":["/**\n * @licstart The following is the entire license notice for the\n * JavaScript code in this page\n *\n * Copyright 2024 Mozilla Foundation\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n * @licend The above is the entire license notice for the\n * JavaScript code in this page\n */\n\n/**\n * pdfjsVersion = 5.3.93\n * pdfjsBuild = cbeef3233\n */\n\n;// ./src/shared/util.js\nconst isNodeJS = typeof process === \"object\" && process + \"\" === \"[object process]\" && !process.versions.nw && !(process.versions.electron && process.type && process.type !== \"browser\");\nconst FONT_IDENTITY_MATRIX = [0.001, 0, 0, 0.001, 0, 0];\nconst LINE_FACTOR = 1.35;\nconst LINE_DESCENT_FACTOR = 0.35;\nconst BASELINE_FACTOR = LINE_DESCENT_FACTOR / LINE_FACTOR;\nconst RenderingIntentFlag = {\n  ANY: 0x01,\n  DISPLAY: 0x02,\n  PRINT: 0x04,\n  SAVE: 0x08,\n  ANNOTATIONS_FORMS: 0x10,\n  ANNOTATIONS_STORAGE: 0x20,\n  ANNOTATIONS_DISABLE: 0x40,\n  IS_EDITING: 0x80,\n  OPLIST: 0x100\n};\nconst AnnotationMode = {\n  DISABLE: 0,\n  ENABLE: 1,\n  ENABLE_FORMS: 2,\n  ENABLE_STORAGE: 3\n};\nconst AnnotationEditorPrefix = \"pdfjs_internal_editor_\";\nconst AnnotationEditorType = {\n  DISABLE: -1,\n  NONE: 0,\n  FREETEXT: 3,\n  HIGHLIGHT: 9,\n  STAMP: 13,\n  INK: 15,\n  SIGNATURE: 101\n};\nconst AnnotationEditorParamsType = {\n  RESIZE: 1,\n  CREATE: 2,\n  FREETEXT_SIZE: 11,\n  FREETEXT_COLOR: 12,\n  FREETEXT_OPACITY: 13,\n  INK_COLOR: 21,\n  INK_THICKNESS: 22,\n  INK_OPACITY: 23,\n  HIGHLIGHT_COLOR: 31,\n  HIGHLIGHT_DEFAULT_COLOR: 32,\n  HIGHLIGHT_THICKNESS: 33,\n  HIGHLIGHT_FREE: 34,\n  HIGHLIGHT_SHOW_ALL: 35,\n  DRAW_STEP: 41\n};\nconst PermissionFlag = {\n  PRINT: 0x04,\n  MODIFY_CONTENTS: 0x08,\n  COPY: 0x10,\n  MODIFY_ANNOTATIONS: 0x20,\n  FILL_INTERACTIVE_FORMS: 0x100,\n  COPY_FOR_ACCESSIBILITY: 0x200,\n  ASSEMBLE: 0x400,\n  PRINT_HIGH_QUALITY: 0x800\n};\nconst TextRenderingMode = {\n  FILL: 0,\n  STROKE: 1,\n  FILL_STROKE: 2,\n  INVISIBLE: 3,\n  FILL_ADD_TO_PATH: 4,\n  STROKE_ADD_TO_PATH: 5,\n  FILL_STROKE_ADD_TO_PATH: 6,\n  ADD_TO_PATH: 7,\n  FILL_STROKE_MASK: 3,\n  ADD_TO_PATH_FLAG: 4\n};\nconst util_ImageKind = {\n  GRAYSCALE_1BPP: 1,\n  RGB_24BPP: 2,\n  RGBA_32BPP: 3\n};\nconst AnnotationType = {\n  TEXT: 1,\n  LINK: 2,\n  FREETEXT: 3,\n  LINE: 4,\n  SQUARE: 5,\n  CIRCLE: 6,\n  POLYGON: 7,\n  POLYLINE: 8,\n  HIGHLIGHT: 9,\n  UNDERLINE: 10,\n  SQUIGGLY: 11,\n  STRIKEOUT: 12,\n  STAMP: 13,\n  CARET: 14,\n  INK: 15,\n  POPUP: 16,\n  FILEATTACHMENT: 17,\n  SOUND: 18,\n  MOVIE: 19,\n  WIDGET: 20,\n  SCREEN: 21,\n  PRINTERMARK: 22,\n  TRAPNET: 23,\n  WATERMARK: 24,\n  THREED: 25,\n  REDACT: 26\n};\nconst AnnotationReplyType = {\n  GROUP: \"Group\",\n  REPLY: \"R\"\n};\nconst AnnotationFlag = {\n  INVISIBLE: 0x01,\n  HIDDEN: 0x02,\n  PRINT: 0x04,\n  NOZOOM: 0x08,\n  NOROTATE: 0x10,\n  NOVIEW: 0x20,\n  READONLY: 0x40,\n  LOCKED: 0x80,\n  TOGGLENOVIEW: 0x100,\n  LOCKEDCONTENTS: 0x200\n};\nconst AnnotationFieldFlag = {\n  READONLY: 0x0000001,\n  REQUIRED: 0x0000002,\n  NOEXPORT: 0x0000004,\n  MULTILINE: 0x0001000,\n  PASSWORD: 0x0002000,\n  NOTOGGLETOOFF: 0x0004000,\n  RADIO: 0x0008000,\n  PUSHBUTTON: 0x0010000,\n  COMBO: 0x0020000,\n  EDIT: 0x0040000,\n  SORT: 0x0080000,\n  FILESELECT: 0x0100000,\n  MULTISELECT: 0x0200000,\n  DONOTSPELLCHECK: 0x0400000,\n  DONOTSCROLL: 0x0800000,\n  COMB: 0x1000000,\n  RICHTEXT: 0x2000000,\n  RADIOSINUNISON: 0x2000000,\n  COMMITONSELCHANGE: 0x4000000\n};\nconst AnnotationBorderStyleType = {\n  SOLID: 1,\n  DASHED: 2,\n  BEVELED: 3,\n  INSET: 4,\n  UNDERLINE: 5\n};\nconst AnnotationActionEventType = {\n  E: \"Mouse Enter\",\n  X: \"Mouse Exit\",\n  D: \"Mouse Down\",\n  U: \"Mouse Up\",\n  Fo: \"Focus\",\n  Bl: \"Blur\",\n  PO: \"PageOpen\",\n  PC: \"PageClose\",\n  PV: \"PageVisible\",\n  PI: \"PageInvisible\",\n  K: \"Keystroke\",\n  F: \"Format\",\n  V: \"Validate\",\n  C: \"Calculate\"\n};\nconst DocumentActionEventType = {\n  WC: \"WillClose\",\n  WS: \"WillSave\",\n  DS: \"DidSave\",\n  WP: \"WillPrint\",\n  DP: \"DidPrint\"\n};\nconst PageActionEventType = {\n  O: \"PageOpen\",\n  C: \"PageClose\"\n};\nconst VerbosityLevel = {\n  ERRORS: 0,\n  WARNINGS: 1,\n  INFOS: 5\n};\nconst OPS = {\n  dependency: 1,\n  setLineWidth: 2,\n  setLineCap: 3,\n  setLineJoin: 4,\n  setMiterLimit: 5,\n  setDash: 6,\n  setRenderingIntent: 7,\n  setFlatness: 8,\n  setGState: 9,\n  save: 10,\n  restore: 11,\n  transform: 12,\n  moveTo: 13,\n  lineTo: 14,\n  curveTo: 15,\n  curveTo2: 16,\n  curveTo3: 17,\n  closePath: 18,\n  rectangle: 19,\n  stroke: 20,\n  closeStroke: 21,\n  fill: 22,\n  eoFill: 23,\n  fillStroke: 24,\n  eoFillStroke: 25,\n  closeFillStroke: 26,\n  closeEOFillStroke: 27,\n  endPath: 28,\n  clip: 29,\n  eoClip: 30,\n  beginText: 31,\n  endText: 32,\n  setCharSpacing: 33,\n  setWordSpacing: 34,\n  setHScale: 35,\n  setLeading: 36,\n  setFont: 37,\n  setTextRenderingMode: 38,\n  setTextRise: 39,\n  moveText: 40,\n  setLeadingMoveText: 41,\n  setTextMatrix: 42,\n  nextLine: 43,\n  showText: 44,\n  showSpacedText: 45,\n  nextLineShowText: 46,\n  nextLineSetSpacingShowText: 47,\n  setCharWidth: 48,\n  setCharWidthAndBounds: 49,\n  setStrokeColorSpace: 50,\n  setFillColorSpace: 51,\n  setStrokeColor: 52,\n  setStrokeColorN: 53,\n  setFillColor: 54,\n  setFillColorN: 55,\n  setStrokeGray: 56,\n  setFillGray: 57,\n  setStrokeRGBColor: 58,\n  setFillRGBColor: 59,\n  setStrokeCMYKColor: 60,\n  setFillCMYKColor: 61,\n  shadingFill: 62,\n  beginInlineImage: 63,\n  beginImageData: 64,\n  endInlineImage: 65,\n  paintXObject: 66,\n  markPoint: 67,\n  markPointProps: 68,\n  beginMarkedContent: 69,\n  beginMarkedContentProps: 70,\n  endMarkedContent: 71,\n  beginCompat: 72,\n  endCompat: 73,\n  paintFormXObjectBegin: 74,\n  paintFormXObjectEnd: 75,\n  beginGroup: 76,\n  endGroup: 77,\n  beginAnnotation: 80,\n  endAnnotation: 81,\n  paintImageMaskXObject: 83,\n  paintImageMaskXObjectGroup: 84,\n  paintImageXObject: 85,\n  paintInlineImageXObject: 86,\n  paintInlineImageXObjectGroup: 87,\n  paintImageXObjectRepeat: 88,\n  paintImageMaskXObjectRepeat: 89,\n  paintSolidColorImageMask: 90,\n  constructPath: 91,\n  setStrokeTransparent: 92,\n  setFillTransparent: 93,\n  rawFillPath: 94\n};\nconst DrawOPS = {\n  moveTo: 0,\n  lineTo: 1,\n  curveTo: 2,\n  closePath: 3\n};\nconst PasswordResponses = {\n  NEED_PASSWORD: 1,\n  INCORRECT_PASSWORD: 2\n};\nlet verbosity = VerbosityLevel.WARNINGS;\nfunction setVerbosityLevel(level) {\n  if (Number.isInteger(level)) {\n    verbosity = level;\n  }\n}\nfunction getVerbosityLevel() {\n  return verbosity;\n}\nfunction info(msg) {\n  if (verbosity >= VerbosityLevel.INFOS) {\n    console.log(`Info: ${msg}`);\n  }\n}\nfunction warn(msg) {\n  if (verbosity >= VerbosityLevel.WARNINGS) {\n    console.log(`Warning: ${msg}`);\n  }\n}\nfunction unreachable(msg) {\n  throw new Error(msg);\n}\nfunction assert(cond, msg) {\n  if (!cond) {\n    unreachable(msg);\n  }\n}\nfunction _isValidProtocol(url) {\n  switch (url?.protocol) {\n    case \"http:\":\n    case \"https:\":\n    case \"ftp:\":\n    case \"mailto:\":\n    case \"tel:\":\n      return true;\n    default:\n      return false;\n  }\n}\nfunction createValidAbsoluteUrl(url, baseUrl = null, options = null) {\n  if (!url) {\n    return null;\n  }\n  if (options && typeof url === \"string\") {\n    if (options.addDefaultProtocol && url.startsWith(\"www.\")) {\n      const dots = url.match(/\\./g);\n      if (dots?.length >= 2) {\n        url = `http://${url}`;\n      }\n    }\n    if (options.tryConvertEncoding) {\n      try {\n        url = stringToUTF8String(url);\n      } catch {}\n    }\n  }\n  const absoluteUrl = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return _isValidProtocol(absoluteUrl) ? absoluteUrl : null;\n}\nfunction updateUrlHash(url, hash, allowRel = false) {\n  const res = URL.parse(url);\n  if (res) {\n    res.hash = hash;\n    return res.href;\n  }\n  if (allowRel && createValidAbsoluteUrl(url, \"http://example.com\")) {\n    return url.split(\"#\", 1)[0] + `${hash ? `#${hash}` : \"\"}`;\n  }\n  return \"\";\n}\nfunction shadow(obj, prop, value, nonSerializable = false) {\n  Object.defineProperty(obj, prop, {\n    value,\n    enumerable: !nonSerializable,\n    configurable: true,\n    writable: false\n  });\n  return value;\n}\nconst BaseException = function BaseExceptionClosure() {\n  function BaseException(message, name) {\n    this.message = message;\n    this.name = name;\n  }\n  BaseException.prototype = new Error();\n  BaseException.constructor = BaseException;\n  return BaseException;\n}();\nclass PasswordException extends BaseException {\n  constructor(msg, code) {\n    super(msg, \"PasswordException\");\n    this.code = code;\n  }\n}\nclass UnknownErrorException extends BaseException {\n  constructor(msg, details) {\n    super(msg, \"UnknownErrorException\");\n    this.details = details;\n  }\n}\nclass InvalidPDFException extends BaseException {\n  constructor(msg) {\n    super(msg, \"InvalidPDFException\");\n  }\n}\nclass ResponseException extends BaseException {\n  constructor(msg, status, missing) {\n    super(msg, \"ResponseException\");\n    this.status = status;\n    this.missing = missing;\n  }\n}\nclass FormatError extends BaseException {\n  constructor(msg) {\n    super(msg, \"FormatError\");\n  }\n}\nclass AbortException extends BaseException {\n  constructor(msg) {\n    super(msg, \"AbortException\");\n  }\n}\nfunction bytesToString(bytes) {\n  if (typeof bytes !== \"object\" || bytes?.length === undefined) {\n    unreachable(\"Invalid argument for bytesToString\");\n  }\n  const length = bytes.length;\n  const MAX_ARGUMENT_COUNT = 8192;\n  if (length < MAX_ARGUMENT_COUNT) {\n    return String.fromCharCode.apply(null, bytes);\n  }\n  const strBuf = [];\n  for (let i = 0; i < length; i += MAX_ARGUMENT_COUNT) {\n    const chunkEnd = Math.min(i + MAX_ARGUMENT_COUNT, length);\n    const chunk = bytes.subarray(i, chunkEnd);\n    strBuf.push(String.fromCharCode.apply(null, chunk));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToBytes(str) {\n  if (typeof str !== \"string\") {\n    unreachable(\"Invalid argument for stringToBytes\");\n  }\n  const length = str.length;\n  const bytes = new Uint8Array(length);\n  for (let i = 0; i < length; ++i) {\n    bytes[i] = str.charCodeAt(i) & 0xff;\n  }\n  return bytes;\n}\nfunction string32(value) {\n  return String.fromCharCode(value >> 24 & 0xff, value >> 16 & 0xff, value >> 8 & 0xff, value & 0xff);\n}\nfunction objectSize(obj) {\n  return Object.keys(obj).length;\n}\nfunction isLittleEndian() {\n  const buffer8 = new Uint8Array(4);\n  buffer8[0] = 1;\n  const view32 = new Uint32Array(buffer8.buffer, 0, 1);\n  return view32[0] === 1;\n}\nfunction isEvalSupported() {\n  try {\n    new Function(\"\");\n    return true;\n  } catch {\n    return false;\n  }\n}\nclass util_FeatureTest {\n  static get isLittleEndian() {\n    return shadow(this, \"isLittleEndian\", isLittleEndian());\n  }\n  static get isEvalSupported() {\n    return shadow(this, \"isEvalSupported\", isEvalSupported());\n  }\n  static get isOffscreenCanvasSupported() {\n    return shadow(this, \"isOffscreenCanvasSupported\", typeof OffscreenCanvas !== \"undefined\");\n  }\n  static get isImageDecoderSupported() {\n    return shadow(this, \"isImageDecoderSupported\", typeof ImageDecoder !== \"undefined\");\n  }\n  static get platform() {\n    const {\n      platform,\n      userAgent\n    } = navigator;\n    return shadow(this, \"platform\", {\n      isAndroid: userAgent.includes(\"Android\"),\n      isLinux: platform.includes(\"Linux\"),\n      isMac: platform.includes(\"Mac\"),\n      isWindows: platform.includes(\"Win\"),\n      isFirefox: userAgent.includes(\"Firefox\")\n    });\n  }\n  static get isCSSRoundSupported() {\n    return shadow(this, \"isCSSRoundSupported\", globalThis.CSS?.supports?.(\"width: round(1.5px, 1px)\"));\n  }\n}\nconst hexNumbers = Array.from(Array(256).keys(), n => n.toString(16).padStart(2, \"0\"));\nclass Util {\n  static makeHexColor(r, g, b) {\n    return `#${hexNumbers[r]}${hexNumbers[g]}${hexNumbers[b]}`;\n  }\n  static scaleMinMax(transform, minMax) {\n    let temp;\n    if (transform[0]) {\n      if (transform[0] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[0];\n      minMax[2] *= transform[0];\n      if (transform[3] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[3];\n      minMax[3] *= transform[3];\n    } else {\n      temp = minMax[0];\n      minMax[0] = minMax[1];\n      minMax[1] = temp;\n      temp = minMax[2];\n      minMax[2] = minMax[3];\n      minMax[3] = temp;\n      if (transform[1] < 0) {\n        temp = minMax[1];\n        minMax[1] = minMax[3];\n        minMax[3] = temp;\n      }\n      minMax[1] *= transform[1];\n      minMax[3] *= transform[1];\n      if (transform[2] < 0) {\n        temp = minMax[0];\n        minMax[0] = minMax[2];\n        minMax[2] = temp;\n      }\n      minMax[0] *= transform[2];\n      minMax[2] *= transform[2];\n    }\n    minMax[0] += transform[4];\n    minMax[1] += transform[5];\n    minMax[2] += transform[4];\n    minMax[3] += transform[5];\n  }\n  static transform(m1, m2) {\n    return [m1[0] * m2[0] + m1[2] * m2[1], m1[1] * m2[0] + m1[3] * m2[1], m1[0] * m2[2] + m1[2] * m2[3], m1[1] * m2[2] + m1[3] * m2[3], m1[0] * m2[4] + m1[2] * m2[5] + m1[4], m1[1] * m2[4] + m1[3] * m2[5] + m1[5]];\n  }\n  static applyTransform(p, m, pos = 0) {\n    const p0 = p[pos];\n    const p1 = p[pos + 1];\n    p[pos] = p0 * m[0] + p1 * m[2] + m[4];\n    p[pos + 1] = p0 * m[1] + p1 * m[3] + m[5];\n  }\n  static applyTransformToBezier(p, transform, pos = 0) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    for (let i = 0; i < 6; i += 2) {\n      const pI = p[pos + i];\n      const pI1 = p[pos + i + 1];\n      p[pos + i] = pI * m0 + pI1 * m2 + m4;\n      p[pos + i + 1] = pI * m1 + pI1 * m3 + m5;\n    }\n  }\n  static applyInverseTransform(p, m) {\n    const p0 = p[0];\n    const p1 = p[1];\n    const d = m[0] * m[3] - m[1] * m[2];\n    p[0] = (p0 * m[3] - p1 * m[2] + m[2] * m[5] - m[4] * m[3]) / d;\n    p[1] = (-p0 * m[1] + p1 * m[0] + m[4] * m[1] - m[5] * m[0]) / d;\n  }\n  static axialAlignedBoundingBox(rect, transform, output) {\n    const m0 = transform[0];\n    const m1 = transform[1];\n    const m2 = transform[2];\n    const m3 = transform[3];\n    const m4 = transform[4];\n    const m5 = transform[5];\n    const r0 = rect[0];\n    const r1 = rect[1];\n    const r2 = rect[2];\n    const r3 = rect[3];\n    let a0 = m0 * r0 + m4;\n    let a2 = a0;\n    let a1 = m0 * r2 + m4;\n    let a3 = a1;\n    let b0 = m3 * r1 + m5;\n    let b2 = b0;\n    let b1 = m3 * r3 + m5;\n    let b3 = b1;\n    if (m1 !== 0 || m2 !== 0) {\n      const m1r0 = m1 * r0;\n      const m1r2 = m1 * r2;\n      const m2r1 = m2 * r1;\n      const m2r3 = m2 * r3;\n      a0 += m2r1;\n      a3 += m2r1;\n      a1 += m2r3;\n      a2 += m2r3;\n      b0 += m1r0;\n      b3 += m1r0;\n      b1 += m1r2;\n      b2 += m1r2;\n    }\n    output[0] = Math.min(output[0], a0, a1, a2, a3);\n    output[1] = Math.min(output[1], b0, b1, b2, b3);\n    output[2] = Math.max(output[2], a0, a1, a2, a3);\n    output[3] = Math.max(output[3], b0, b1, b2, b3);\n  }\n  static inverseTransform(m) {\n    const d = m[0] * m[3] - m[1] * m[2];\n    return [m[3] / d, -m[1] / d, -m[2] / d, m[0] / d, (m[2] * m[5] - m[4] * m[3]) / d, (m[4] * m[1] - m[5] * m[0]) / d];\n  }\n  static singularValueDecompose2dScale(matrix, output) {\n    const m0 = matrix[0];\n    const m1 = matrix[1];\n    const m2 = matrix[2];\n    const m3 = matrix[3];\n    const a = m0 ** 2 + m1 ** 2;\n    const b = m0 * m2 + m1 * m3;\n    const c = m2 ** 2 + m3 ** 2;\n    const first = (a + c) / 2;\n    const second = Math.sqrt(first ** 2 - (a * c - b ** 2));\n    output[0] = Math.sqrt(first + second || 1);\n    output[1] = Math.sqrt(first - second || 1);\n  }\n  static normalizeRect(rect) {\n    const r = rect.slice(0);\n    if (rect[0] > rect[2]) {\n      r[0] = rect[2];\n      r[2] = rect[0];\n    }\n    if (rect[1] > rect[3]) {\n      r[1] = rect[3];\n      r[3] = rect[1];\n    }\n    return r;\n  }\n  static intersect(rect1, rect2) {\n    const xLow = Math.max(Math.min(rect1[0], rect1[2]), Math.min(rect2[0], rect2[2]));\n    const xHigh = Math.min(Math.max(rect1[0], rect1[2]), Math.max(rect2[0], rect2[2]));\n    if (xLow > xHigh) {\n      return null;\n    }\n    const yLow = Math.max(Math.min(rect1[1], rect1[3]), Math.min(rect2[1], rect2[3]));\n    const yHigh = Math.min(Math.max(rect1[1], rect1[3]), Math.max(rect2[1], rect2[3]));\n    if (yLow > yHigh) {\n      return null;\n    }\n    return [xLow, yLow, xHigh, yHigh];\n  }\n  static pointBoundingBox(x, y, minMax) {\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static rectBoundingBox(x0, y0, x1, y1, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x1);\n    minMax[1] = Math.min(minMax[1], y0, y1);\n    minMax[2] = Math.max(minMax[2], x0, x1);\n    minMax[3] = Math.max(minMax[3], y0, y1);\n  }\n  static #getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, t, minMax) {\n    if (t <= 0 || t >= 1) {\n      return;\n    }\n    const mt = 1 - t;\n    const tt = t * t;\n    const ttt = tt * t;\n    const x = mt * (mt * (mt * x0 + 3 * t * x1) + 3 * tt * x2) + ttt * x3;\n    const y = mt * (mt * (mt * y0 + 3 * t * y1) + 3 * tt * y2) + ttt * y3;\n    minMax[0] = Math.min(minMax[0], x);\n    minMax[1] = Math.min(minMax[1], y);\n    minMax[2] = Math.max(minMax[2], x);\n    minMax[3] = Math.max(minMax[3], y);\n  }\n  static #getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, a, b, c, minMax) {\n    if (Math.abs(a) < 1e-12) {\n      if (Math.abs(b) >= 1e-12) {\n        this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, -c / b, minMax);\n      }\n      return;\n    }\n    const delta = b ** 2 - 4 * c * a;\n    if (delta < 0) {\n      return;\n    }\n    const sqrtDelta = Math.sqrt(delta);\n    const a2 = 2 * a;\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b + sqrtDelta) / a2, minMax);\n    this.#getExtremumOnCurve(x0, x1, x2, x3, y0, y1, y2, y3, (-b - sqrtDelta) / a2, minMax);\n  }\n  static bezierBoundingBox(x0, y0, x1, y1, x2, y2, x3, y3, minMax) {\n    minMax[0] = Math.min(minMax[0], x0, x3);\n    minMax[1] = Math.min(minMax[1], y0, y3);\n    minMax[2] = Math.max(minMax[2], x0, x3);\n    minMax[3] = Math.max(minMax[3], y0, y3);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-x0 + 3 * (x1 - x2) + x3), 6 * (x0 - 2 * x1 + x2), 3 * (x1 - x0), minMax);\n    this.#getExtremum(x0, x1, x2, x3, y0, y1, y2, y3, 3 * (-y0 + 3 * (y1 - y2) + y3), 6 * (y0 - 2 * y1 + y2), 3 * (y1 - y0), minMax);\n  }\n}\nconst PDFStringTranslateTable = (/* unused pure expression or super */ null && ([0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2d8, 0x2c7, 0x2c6, 0x2d9, 0x2dd, 0x2db, 0x2da, 0x2dc, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0x2022, 0x2020, 0x2021, 0x2026, 0x2014, 0x2013, 0x192, 0x2044, 0x2039, 0x203a, 0x2212, 0x2030, 0x201e, 0x201c, 0x201d, 0x2018, 0x2019, 0x201a, 0x2122, 0xfb01, 0xfb02, 0x141, 0x152, 0x160, 0x178, 0x17d, 0x131, 0x142, 0x153, 0x161, 0x17e, 0, 0x20ac]));\nfunction stringToPDFString(str, keepEscapeSequence = false) {\n  if (str[0] >= \"\\xEF\") {\n    let encoding;\n    if (str[0] === \"\\xFE\" && str[1] === \"\\xFF\") {\n      encoding = \"utf-16be\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xFF\" && str[1] === \"\\xFE\") {\n      encoding = \"utf-16le\";\n      if (str.length % 2 === 1) {\n        str = str.slice(0, -1);\n      }\n    } else if (str[0] === \"\\xEF\" && str[1] === \"\\xBB\" && str[2] === \"\\xBF\") {\n      encoding = \"utf-8\";\n    }\n    if (encoding) {\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(str);\n        const decoded = decoder.decode(buffer);\n        if (keepEscapeSequence || !decoded.includes(\"\\x1b\")) {\n          return decoded;\n        }\n        return decoded.replaceAll(/\\x1b[^\\x1b]*(?:\\x1b|$)/g, \"\");\n      } catch (ex) {\n        warn(`stringToPDFString: \"${ex}\".`);\n      }\n    }\n  }\n  const strBuf = [];\n  for (let i = 0, ii = str.length; i < ii; i++) {\n    const charCode = str.charCodeAt(i);\n    if (!keepEscapeSequence && charCode === 0x1b) {\n      while (++i < ii && str.charCodeAt(i) !== 0x1b) {}\n      continue;\n    }\n    const code = PDFStringTranslateTable[charCode];\n    strBuf.push(code ? String.fromCharCode(code) : str.charAt(i));\n  }\n  return strBuf.join(\"\");\n}\nfunction stringToUTF8String(str) {\n  return decodeURIComponent(escape(str));\n}\nfunction utf8StringToString(str) {\n  return unescape(encodeURIComponent(str));\n}\nfunction isArrayEqual(arr1, arr2) {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  for (let i = 0, ii = arr1.length; i < ii; i++) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction getModificationDate(date = new Date()) {\n  const buffer = [date.getUTCFullYear().toString(), (date.getUTCMonth() + 1).toString().padStart(2, \"0\"), date.getUTCDate().toString().padStart(2, \"0\"), date.getUTCHours().toString().padStart(2, \"0\"), date.getUTCMinutes().toString().padStart(2, \"0\"), date.getUTCSeconds().toString().padStart(2, \"0\")];\n  return buffer.join(\"\");\n}\nlet NormalizeRegex = null;\nlet NormalizationMap = null;\nfunction normalizeUnicode(str) {\n  if (!NormalizeRegex) {\n    NormalizeRegex = /([\\u00a0\\u00b5\\u037e\\u0eb3\\u2000-\\u200a\\u202f\\u2126\\ufb00-\\ufb04\\ufb06\\ufb20-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufba1\\ufba4-\\ufba9\\ufbae-\\ufbb1\\ufbd3-\\ufbdc\\ufbde-\\ufbe7\\ufbea-\\ufbf8\\ufbfc-\\ufbfd\\ufc00-\\ufc5d\\ufc64-\\ufcf1\\ufcf5-\\ufd3d\\ufd88\\ufdf4\\ufdfa-\\ufdfb\\ufe71\\ufe77\\ufe79\\ufe7b\\ufe7d]+)|(\\ufb05+)/gu;\n    NormalizationMap = new Map([[\"ﬅ\", \"ſt\"]]);\n  }\n  return str.replaceAll(NormalizeRegex, (_, p1, p2) => p1 ? p1.normalize(\"NFKC\") : NormalizationMap.get(p2));\n}\nfunction getUuid() {\n  if (typeof crypto.randomUUID === \"function\") {\n    return crypto.randomUUID();\n  }\n  const buf = new Uint8Array(32);\n  crypto.getRandomValues(buf);\n  return bytesToString(buf);\n}\nconst AnnotationPrefix = \"pdfjs_internal_id_\";\nfunction _isValidExplicitDest(validRef, validName, dest) {\n  if (!Array.isArray(dest) || dest.length < 2) {\n    return false;\n  }\n  const [page, zoom, ...args] = dest;\n  if (!validRef(page) && !Number.isInteger(page)) {\n    return false;\n  }\n  if (!validName(zoom)) {\n    return false;\n  }\n  const argsLen = args.length;\n  let allowNull = true;\n  switch (zoom.name) {\n    case \"XYZ\":\n      if (argsLen < 2 || argsLen > 3) {\n        return false;\n      }\n      break;\n    case \"Fit\":\n    case \"FitB\":\n      return argsLen === 0;\n    case \"FitH\":\n    case \"FitBH\":\n    case \"FitV\":\n    case \"FitBV\":\n      if (argsLen > 1) {\n        return false;\n      }\n      break;\n    case \"FitR\":\n      if (argsLen !== 4) {\n        return false;\n      }\n      allowNull = false;\n      break;\n    default:\n      return false;\n  }\n  for (const arg of args) {\n    if (typeof arg === \"number\" || allowNull && arg === null) {\n      continue;\n    }\n    return false;\n  }\n  return true;\n}\nfunction MathClamp(v, min, max) {\n  return Math.min(Math.max(v, min), max);\n}\nfunction toHexUtil(arr) {\n  if (Uint8Array.prototype.toHex) {\n    return arr.toHex();\n  }\n  return Array.from(arr, num => hexNumbers[num]).join(\"\");\n}\nfunction toBase64Util(arr) {\n  if (Uint8Array.prototype.toBase64) {\n    return arr.toBase64();\n  }\n  return btoa(bytesToString(arr));\n}\nfunction fromBase64Util(str) {\n  if (Uint8Array.fromBase64) {\n    return Uint8Array.fromBase64(str);\n  }\n  return stringToBytes(atob(str));\n}\nif (typeof Promise.try !== \"function\") {\n  Promise.try = function (fn, ...args) {\n    return new Promise(resolve => {\n      resolve(fn(...args));\n    });\n  };\n}\nif (typeof Math.sumPrecise !== \"function\") {\n  Math.sumPrecise = function (numbers) {\n    return numbers.reduce((a, b) => a + b, 0);\n  };\n}\n\n;// ./src/display/display_utils.js\n\nconst SVG_NS = \"http://www.w3.org/2000/svg\";\nclass PixelsPerInch {\n  static CSS = 96.0;\n  static PDF = 72.0;\n  static PDF_TO_CSS_UNITS = this.CSS / this.PDF;\n}\nasync function fetchData(url, type = \"text\") {\n  if (isValidFetchUrl(url, document.baseURI)) {\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(response.statusText);\n    }\n    switch (type) {\n      case \"arraybuffer\":\n        return response.arrayBuffer();\n      case \"blob\":\n        return response.blob();\n      case \"json\":\n        return response.json();\n    }\n    return response.text();\n  }\n  return new Promise((resolve, reject) => {\n    const request = new XMLHttpRequest();\n    request.open(\"GET\", url, true);\n    request.responseType = type;\n    request.onreadystatechange = () => {\n      if (request.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n      if (request.status === 200 || request.status === 0) {\n        switch (type) {\n          case \"arraybuffer\":\n          case \"blob\":\n          case \"json\":\n            resolve(request.response);\n            return;\n        }\n        resolve(request.responseText);\n        return;\n      }\n      reject(new Error(request.statusText));\n    };\n    request.send(null);\n  });\n}\nclass PageViewport {\n  constructor({\n    viewBox,\n    userUnit,\n    scale,\n    rotation,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  }) {\n    this.viewBox = viewBox;\n    this.userUnit = userUnit;\n    this.scale = scale;\n    this.rotation = rotation;\n    this.offsetX = offsetX;\n    this.offsetY = offsetY;\n    scale *= userUnit;\n    const centerX = (viewBox[2] + viewBox[0]) / 2;\n    const centerY = (viewBox[3] + viewBox[1]) / 2;\n    let rotateA, rotateB, rotateC, rotateD;\n    rotation %= 360;\n    if (rotation < 0) {\n      rotation += 360;\n    }\n    switch (rotation) {\n      case 180:\n        rotateA = -1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = 1;\n        break;\n      case 90:\n        rotateA = 0;\n        rotateB = 1;\n        rotateC = 1;\n        rotateD = 0;\n        break;\n      case 270:\n        rotateA = 0;\n        rotateB = -1;\n        rotateC = -1;\n        rotateD = 0;\n        break;\n      case 0:\n        rotateA = 1;\n        rotateB = 0;\n        rotateC = 0;\n        rotateD = -1;\n        break;\n      default:\n        throw new Error(\"PageViewport: Invalid rotation, must be a multiple of 90 degrees.\");\n    }\n    if (dontFlip) {\n      rotateC = -rotateC;\n      rotateD = -rotateD;\n    }\n    let offsetCanvasX, offsetCanvasY;\n    let width, height;\n    if (rotateA === 0) {\n      offsetCanvasX = Math.abs(centerY - viewBox[1]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerX - viewBox[0]) * scale + offsetY;\n      width = (viewBox[3] - viewBox[1]) * scale;\n      height = (viewBox[2] - viewBox[0]) * scale;\n    } else {\n      offsetCanvasX = Math.abs(centerX - viewBox[0]) * scale + offsetX;\n      offsetCanvasY = Math.abs(centerY - viewBox[1]) * scale + offsetY;\n      width = (viewBox[2] - viewBox[0]) * scale;\n      height = (viewBox[3] - viewBox[1]) * scale;\n    }\n    this.transform = [rotateA * scale, rotateB * scale, rotateC * scale, rotateD * scale, offsetCanvasX - rotateA * scale * centerX - rotateC * scale * centerY, offsetCanvasY - rotateB * scale * centerX - rotateD * scale * centerY];\n    this.width = width;\n    this.height = height;\n  }\n  get rawDims() {\n    const dims = this.viewBox;\n    return shadow(this, \"rawDims\", {\n      pageWidth: dims[2] - dims[0],\n      pageHeight: dims[3] - dims[1],\n      pageX: dims[0],\n      pageY: dims[1]\n    });\n  }\n  clone({\n    scale = this.scale,\n    rotation = this.rotation,\n    offsetX = this.offsetX,\n    offsetY = this.offsetY,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.viewBox.slice(),\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  convertToViewportPoint(x, y) {\n    const p = [x, y];\n    Util.applyTransform(p, this.transform);\n    return p;\n  }\n  convertToViewportRectangle(rect) {\n    const topLeft = [rect[0], rect[1]];\n    Util.applyTransform(topLeft, this.transform);\n    const bottomRight = [rect[2], rect[3]];\n    Util.applyTransform(bottomRight, this.transform);\n    return [topLeft[0], topLeft[1], bottomRight[0], bottomRight[1]];\n  }\n  convertToPdfPoint(x, y) {\n    const p = [x, y];\n    Util.applyInverseTransform(p, this.transform);\n    return p;\n  }\n}\nclass RenderingCancelledException extends BaseException {\n  constructor(msg, extraDelay = 0) {\n    super(msg, \"RenderingCancelledException\");\n    this.extraDelay = extraDelay;\n  }\n}\nfunction isDataScheme(url) {\n  const ii = url.length;\n  let i = 0;\n  while (i < ii && url[i].trim() === \"\") {\n    i++;\n  }\n  return url.substring(i, i + 5).toLowerCase() === \"data:\";\n}\nfunction isPdfFile(filename) {\n  return typeof filename === \"string\" && /\\.pdf$/i.test(filename);\n}\nfunction getFilenameFromUrl(url) {\n  [url] = url.split(/[#?]/, 1);\n  return url.substring(url.lastIndexOf(\"/\") + 1);\n}\nfunction getPdfFilenameFromUrl(url, defaultFilename = \"document.pdf\") {\n  if (typeof url !== \"string\") {\n    return defaultFilename;\n  }\n  if (isDataScheme(url)) {\n    warn('getPdfFilenameFromUrl: ignore \"data:\"-URL for performance reasons.');\n    return defaultFilename;\n  }\n  const getURL = urlString => {\n    try {\n      return new URL(urlString);\n    } catch {\n      try {\n        return new URL(decodeURIComponent(urlString));\n      } catch {\n        try {\n          return new URL(urlString, \"https://foo.bar\");\n        } catch {\n          try {\n            return new URL(decodeURIComponent(urlString), \"https://foo.bar\");\n          } catch {\n            return null;\n          }\n        }\n      }\n    }\n  };\n  const newURL = getURL(url);\n  if (!newURL) {\n    return defaultFilename;\n  }\n  const decode = name => {\n    try {\n      let decoded = decodeURIComponent(name);\n      if (decoded.includes(\"/\")) {\n        decoded = decoded.split(\"/\").at(-1);\n        if (decoded.test(/^\\.pdf$/i)) {\n          return decoded;\n        }\n        return name;\n      }\n      return decoded;\n    } catch {\n      return name;\n    }\n  };\n  const pdfRegex = /\\.pdf$/i;\n  const filename = newURL.pathname.split(\"/\").at(-1);\n  if (pdfRegex.test(filename)) {\n    return decode(filename);\n  }\n  if (newURL.searchParams.size > 0) {\n    const values = Array.from(newURL.searchParams.values()).reverse();\n    for (const value of values) {\n      if (pdfRegex.test(value)) {\n        return decode(value);\n      }\n    }\n    const keys = Array.from(newURL.searchParams.keys()).reverse();\n    for (const key of keys) {\n      if (pdfRegex.test(key)) {\n        return decode(key);\n      }\n    }\n  }\n  if (newURL.hash) {\n    const reFilename = /[^/?#=]+\\.pdf\\b(?!.*\\.pdf\\b)/i;\n    const hashFilename = reFilename.exec(newURL.hash);\n    if (hashFilename) {\n      return decode(hashFilename[0]);\n    }\n  }\n  return defaultFilename;\n}\nclass StatTimer {\n  started = Object.create(null);\n  times = [];\n  time(name) {\n    if (name in this.started) {\n      warn(`Timer is already running for ${name}`);\n    }\n    this.started[name] = Date.now();\n  }\n  timeEnd(name) {\n    if (!(name in this.started)) {\n      warn(`Timer has not been started for ${name}`);\n    }\n    this.times.push({\n      name,\n      start: this.started[name],\n      end: Date.now()\n    });\n    delete this.started[name];\n  }\n  toString() {\n    const outBuf = [];\n    let longest = 0;\n    for (const {\n      name\n    } of this.times) {\n      longest = Math.max(name.length, longest);\n    }\n    for (const {\n      name,\n      start,\n      end\n    } of this.times) {\n      outBuf.push(`${name.padEnd(longest)} ${end - start}ms\\n`);\n    }\n    return outBuf.join(\"\");\n  }\n}\nfunction isValidFetchUrl(url, baseUrl) {\n  const res = baseUrl ? URL.parse(url, baseUrl) : URL.parse(url);\n  return res?.protocol === \"http:\" || res?.protocol === \"https:\";\n}\nfunction noContextMenu(e) {\n  e.preventDefault();\n}\nfunction stopEvent(e) {\n  e.preventDefault();\n  e.stopPropagation();\n}\nfunction deprecated(details) {\n  console.log(\"Deprecated API usage: \" + details);\n}\nclass PDFDateString {\n  static #regex;\n  static toDateObject(input) {\n    if (!input || typeof input !== \"string\") {\n      return null;\n    }\n    this.#regex ||= new RegExp(\"^D:\" + \"(\\\\d{4})\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"(\\\\d{2})?\" + \"([Z|+|-])?\" + \"(\\\\d{2})?\" + \"'?\" + \"(\\\\d{2})?\" + \"'?\");\n    const matches = this.#regex.exec(input);\n    if (!matches) {\n      return null;\n    }\n    const year = parseInt(matches[1], 10);\n    let month = parseInt(matches[2], 10);\n    month = month >= 1 && month <= 12 ? month - 1 : 0;\n    let day = parseInt(matches[3], 10);\n    day = day >= 1 && day <= 31 ? day : 1;\n    let hour = parseInt(matches[4], 10);\n    hour = hour >= 0 && hour <= 23 ? hour : 0;\n    let minute = parseInt(matches[5], 10);\n    minute = minute >= 0 && minute <= 59 ? minute : 0;\n    let second = parseInt(matches[6], 10);\n    second = second >= 0 && second <= 59 ? second : 0;\n    const universalTimeRelation = matches[7] || \"Z\";\n    let offsetHour = parseInt(matches[8], 10);\n    offsetHour = offsetHour >= 0 && offsetHour <= 23 ? offsetHour : 0;\n    let offsetMinute = parseInt(matches[9], 10) || 0;\n    offsetMinute = offsetMinute >= 0 && offsetMinute <= 59 ? offsetMinute : 0;\n    if (universalTimeRelation === \"-\") {\n      hour += offsetHour;\n      minute += offsetMinute;\n    } else if (universalTimeRelation === \"+\") {\n      hour -= offsetHour;\n      minute -= offsetMinute;\n    }\n    return new Date(Date.UTC(year, month, day, hour, minute, second));\n  }\n}\nfunction getXfaPageViewport(xfaPage, {\n  scale = 1,\n  rotation = 0\n}) {\n  const {\n    width,\n    height\n  } = xfaPage.attributes.style;\n  const viewBox = [0, 0, parseInt(width), parseInt(height)];\n  return new PageViewport({\n    viewBox,\n    userUnit: 1,\n    scale,\n    rotation\n  });\n}\nfunction getRGB(color) {\n  if (color.startsWith(\"#\")) {\n    const colorRGB = parseInt(color.slice(1), 16);\n    return [(colorRGB & 0xff0000) >> 16, (colorRGB & 0x00ff00) >> 8, colorRGB & 0x0000ff];\n  }\n  if (color.startsWith(\"rgb(\")) {\n    return color.slice(4, -1).split(\",\").map(x => parseInt(x));\n  }\n  if (color.startsWith(\"rgba(\")) {\n    return color.slice(5, -1).split(\",\").map(x => parseInt(x)).slice(0, 3);\n  }\n  warn(`Not a valid color format: \"${color}\"`);\n  return [0, 0, 0];\n}\nfunction getColorValues(colors) {\n  const span = document.createElement(\"span\");\n  span.style.visibility = \"hidden\";\n  span.style.colorScheme = \"only light\";\n  document.body.append(span);\n  for (const name of colors.keys()) {\n    span.style.color = name;\n    const computedColor = window.getComputedStyle(span).color;\n    colors.set(name, getRGB(computedColor));\n  }\n  span.remove();\n}\nfunction getCurrentTransform(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform();\n  return [a, b, c, d, e, f];\n}\nfunction getCurrentTransformInverse(ctx) {\n  const {\n    a,\n    b,\n    c,\n    d,\n    e,\n    f\n  } = ctx.getTransform().invertSelf();\n  return [a, b, c, d, e, f];\n}\nfunction setLayerDimensions(div, viewport, mustFlip = false, mustRotate = true) {\n  if (viewport instanceof PageViewport) {\n    const {\n      pageWidth,\n      pageHeight\n    } = viewport.rawDims;\n    const {\n      style\n    } = div;\n    const useRound = util_FeatureTest.isCSSRoundSupported;\n    const w = `var(--total-scale-factor) * ${pageWidth}px`,\n      h = `var(--total-scale-factor) * ${pageHeight}px`;\n    const widthStr = useRound ? `round(down, ${w}, var(--scale-round-x))` : `calc(${w})`,\n      heightStr = useRound ? `round(down, ${h}, var(--scale-round-y))` : `calc(${h})`;\n    if (!mustFlip || viewport.rotation % 180 === 0) {\n      style.width = widthStr;\n      style.height = heightStr;\n    } else {\n      style.width = heightStr;\n      style.height = widthStr;\n    }\n  }\n  if (mustRotate) {\n    div.setAttribute(\"data-main-rotation\", viewport.rotation);\n  }\n}\nclass OutputScale {\n  constructor() {\n    const {\n      pixelRatio\n    } = OutputScale;\n    this.sx = pixelRatio;\n    this.sy = pixelRatio;\n  }\n  get scaled() {\n    return this.sx !== 1 || this.sy !== 1;\n  }\n  get symmetric() {\n    return this.sx === this.sy;\n  }\n  limitCanvas(width, height, maxPixels, maxDim, capAreaFactor = -1) {\n    let maxAreaScale = Infinity,\n      maxWidthScale = Infinity,\n      maxHeightScale = Infinity;\n    maxPixels = OutputScale.capPixels(maxPixels, capAreaFactor);\n    if (maxPixels > 0) {\n      maxAreaScale = Math.sqrt(maxPixels / (width * height));\n    }\n    if (maxDim !== -1) {\n      maxWidthScale = maxDim / width;\n      maxHeightScale = maxDim / height;\n    }\n    const maxScale = Math.min(maxAreaScale, maxWidthScale, maxHeightScale);\n    if (this.sx > maxScale || this.sy > maxScale) {\n      this.sx = maxScale;\n      this.sy = maxScale;\n      return true;\n    }\n    return false;\n  }\n  static get pixelRatio() {\n    return globalThis.devicePixelRatio || 1;\n  }\n  static capPixels(maxPixels, capAreaFactor) {\n    if (capAreaFactor >= 0) {\n      const winPixels = Math.ceil(window.screen.availWidth * window.screen.availHeight * this.pixelRatio ** 2 * (1 + capAreaFactor / 100));\n      return maxPixels > 0 ? Math.min(maxPixels, winPixels) : winPixels;\n    }\n    return maxPixels;\n  }\n}\nconst SupportedImageMimeTypes = [\"image/apng\", \"image/avif\", \"image/bmp\", \"image/gif\", \"image/jpeg\", \"image/png\", \"image/svg+xml\", \"image/webp\", \"image/x-icon\"];\n\n;// ./src/display/editor/toolbar.js\n\nclass EditorToolbar {\n  #toolbar = null;\n  #colorPicker = null;\n  #editor;\n  #buttons = null;\n  #altText = null;\n  #signatureDescriptionButton = null;\n  static #l10nRemove = null;\n  constructor(editor) {\n    this.#editor = editor;\n    EditorToolbar.#l10nRemove ||= Object.freeze({\n      freetext: \"pdfjs-editor-remove-freetext-button\",\n      highlight: \"pdfjs-editor-remove-highlight-button\",\n      ink: \"pdfjs-editor-remove-ink-button\",\n      stamp: \"pdfjs-editor-remove-stamp-button\",\n      signature: \"pdfjs-editor-remove-signature-button\"\n    });\n  }\n  render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.classList.add(\"editToolbar\", \"hidden\");\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    const signal = this.#editor._uiManager._signal;\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    editToolbar.addEventListener(\"pointerdown\", EditorToolbar.#pointerDown, {\n      signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    const position = this.#editor.toolbarPosition;\n    if (position) {\n      const {\n        style\n      } = editToolbar;\n      const x = this.#editor._uiManager.direction === \"ltr\" ? 1 - position[0] : position[0];\n      style.insetInlineEnd = `${100 * x}%`;\n      style.top = `calc(${100 * position[1]}% + var(--editor-toolbar-vert-offset))`;\n    }\n    return editToolbar;\n  }\n  get div() {\n    return this.#toolbar;\n  }\n  static #pointerDown(e) {\n    e.stopPropagation();\n  }\n  #focusIn(e) {\n    this.#editor._focusEventsAllowed = false;\n    stopEvent(e);\n  }\n  #focusOut(e) {\n    this.#editor._focusEventsAllowed = true;\n    stopEvent(e);\n  }\n  #addListenersToElement(element) {\n    const signal = this.#editor._uiManager._signal;\n    element.addEventListener(\"focusin\", this.#focusIn.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"focusout\", this.#focusOut.bind(this), {\n      capture: true,\n      signal\n    });\n    element.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n  }\n  hide() {\n    this.#toolbar.classList.add(\"hidden\");\n    this.#colorPicker?.hideDropdown();\n  }\n  show() {\n    this.#toolbar.classList.remove(\"hidden\");\n    this.#altText?.shown();\n  }\n  addDeleteButton() {\n    const {\n      editorType,\n      _uiManager\n    } = this.#editor;\n    const button = document.createElement(\"button\");\n    button.className = \"delete\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", EditorToolbar.#l10nRemove[editorType]);\n    this.#addListenersToElement(button);\n    button.addEventListener(\"click\", e => {\n      _uiManager.delete();\n    }, {\n      signal: _uiManager._signal\n    });\n    this.#buttons.append(button);\n  }\n  get #divider() {\n    const divider = document.createElement(\"div\");\n    divider.className = \"divider\";\n    return divider;\n  }\n  async addAltText(altText) {\n    const button = await altText.render();\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n    this.#altText = altText;\n  }\n  addColorPicker(colorPicker) {\n    this.#colorPicker = colorPicker;\n    const button = colorPicker.renderButton();\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n  }\n  async addEditSignatureButton(signatureManager) {\n    const button = this.#signatureDescriptionButton = await signatureManager.renderEditButton(this.#editor);\n    this.#addListenersToElement(button);\n    this.#buttons.append(button, this.#divider);\n  }\n  async addButton(name, tool) {\n    switch (name) {\n      case \"colorPicker\":\n        this.addColorPicker(tool);\n        break;\n      case \"altText\":\n        await this.addAltText(tool);\n        break;\n      case \"editSignature\":\n        await this.addEditSignatureButton(tool);\n        break;\n      case \"delete\":\n        this.addDeleteButton();\n        break;\n    }\n  }\n  updateEditSignatureButton(description) {\n    if (this.#signatureDescriptionButton) {\n      this.#signatureDescriptionButton.title = description;\n    }\n  }\n  remove() {\n    this.#toolbar.remove();\n    this.#colorPicker?.destroy();\n    this.#colorPicker = null;\n  }\n}\nclass HighlightToolbar {\n  #buttons = null;\n  #toolbar = null;\n  #uiManager;\n  constructor(uiManager) {\n    this.#uiManager = uiManager;\n  }\n  #render() {\n    const editToolbar = this.#toolbar = document.createElement(\"div\");\n    editToolbar.className = \"editToolbar\";\n    editToolbar.setAttribute(\"role\", \"toolbar\");\n    editToolbar.addEventListener(\"contextmenu\", noContextMenu, {\n      signal: this.#uiManager._signal\n    });\n    const buttons = this.#buttons = document.createElement(\"div\");\n    buttons.className = \"buttons\";\n    editToolbar.append(buttons);\n    this.#addHighlightButton();\n    return editToolbar;\n  }\n  #getLastPoint(boxes, isLTR) {\n    let lastY = 0;\n    let lastX = 0;\n    for (const box of boxes) {\n      const y = box.y + box.height;\n      if (y < lastY) {\n        continue;\n      }\n      const x = box.x + (isLTR ? box.width : 0);\n      if (y > lastY) {\n        lastX = x;\n        lastY = y;\n        continue;\n      }\n      if (isLTR) {\n        if (x > lastX) {\n          lastX = x;\n        }\n      } else if (x < lastX) {\n        lastX = x;\n      }\n    }\n    return [isLTR ? 1 - lastX : lastX, lastY];\n  }\n  show(parent, boxes, isLTR) {\n    const [x, y] = this.#getLastPoint(boxes, isLTR);\n    const {\n      style\n    } = this.#toolbar ||= this.#render();\n    parent.append(this.#toolbar);\n    style.insetInlineEnd = `${100 * x}%`;\n    style.top = `calc(${100 * y}% + var(--editor-toolbar-vert-offset))`;\n  }\n  hide() {\n    this.#toolbar.remove();\n  }\n  #addHighlightButton() {\n    const button = document.createElement(\"button\");\n    button.className = \"highlightButton\";\n    button.tabIndex = 0;\n    button.setAttribute(\"data-l10n-id\", `pdfjs-highlight-floating-button1`);\n    const span = document.createElement(\"span\");\n    button.append(span);\n    span.className = \"visuallyHidden\";\n    span.setAttribute(\"data-l10n-id\", \"pdfjs-highlight-floating-button-label\");\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    button.addEventListener(\"click\", () => {\n      this.#uiManager.highlightSelection(\"floating_button\");\n    }, {\n      signal\n    });\n    this.#buttons.append(button);\n  }\n}\n\n;// ./src/display/editor/tools.js\n\n\n\nfunction bindEvents(obj, element, names) {\n  for (const name of names) {\n    element.addEventListener(name, obj[name].bind(obj));\n  }\n}\nclass IdManager {\n  #id = 0;\n  get id() {\n    return `${AnnotationEditorPrefix}${this.#id++}`;\n  }\n}\nclass ImageManager {\n  #baseId = getUuid();\n  #id = 0;\n  #cache = null;\n  static get _isSVGFittingCanvas() {\n    const svg = `data:image/svg+xml;charset=UTF-8,<svg viewBox=\"0 0 1 1\" width=\"1\" height=\"1\" xmlns=\"http://www.w3.org/2000/svg\"><rect width=\"1\" height=\"1\" style=\"fill:red;\"/></svg>`;\n    const canvas = new OffscreenCanvas(1, 3);\n    const ctx = canvas.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    const image = new Image();\n    image.src = svg;\n    const promise = image.decode().then(() => {\n      ctx.drawImage(image, 0, 0, 1, 1, 0, 0, 1, 3);\n      return new Uint32Array(ctx.getImageData(0, 0, 1, 1).data.buffer)[0] === 0;\n    });\n    return shadow(this, \"_isSVGFittingCanvas\", promise);\n  }\n  async #get(key, rawData) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(key);\n    if (data === null) {\n      return null;\n    }\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    try {\n      data ||= {\n        bitmap: null,\n        id: `image_${this.#baseId}_${this.#id++}`,\n        refCounter: 0,\n        isSvg: false\n      };\n      let image;\n      if (typeof rawData === \"string\") {\n        data.url = rawData;\n        image = await fetchData(rawData, \"blob\");\n      } else if (rawData instanceof File) {\n        image = data.file = rawData;\n      } else if (rawData instanceof Blob) {\n        image = rawData;\n      }\n      if (image.type === \"image/svg+xml\") {\n        const mustRemoveAspectRatioPromise = ImageManager._isSVGFittingCanvas;\n        const fileReader = new FileReader();\n        const imageElement = new Image();\n        const imagePromise = new Promise((resolve, reject) => {\n          imageElement.onload = () => {\n            data.bitmap = imageElement;\n            data.isSvg = true;\n            resolve();\n          };\n          fileReader.onload = async () => {\n            const url = data.svgUrl = fileReader.result;\n            imageElement.src = (await mustRemoveAspectRatioPromise) ? `${url}#svgView(preserveAspectRatio(none))` : url;\n          };\n          imageElement.onerror = fileReader.onerror = reject;\n        });\n        fileReader.readAsDataURL(image);\n        await imagePromise;\n      } else {\n        data.bitmap = await createImageBitmap(image);\n      }\n      data.refCounter = 1;\n    } catch (e) {\n      warn(e);\n      data = null;\n    }\n    this.#cache.set(key, data);\n    if (data) {\n      this.#cache.set(data.id, data);\n    }\n    return data;\n  }\n  async getFromFile(file) {\n    const {\n      lastModified,\n      name,\n      size,\n      type\n    } = file;\n    return this.#get(`${lastModified}_${name}_${size}_${type}`, file);\n  }\n  async getFromUrl(url) {\n    return this.#get(url, url);\n  }\n  async getFromBlob(id, blobPromise) {\n    const blob = await blobPromise;\n    return this.#get(id, blob);\n  }\n  async getFromId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return null;\n    }\n    if (data.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    if (data.file) {\n      return this.getFromFile(data.file);\n    }\n    if (data.blobPromise) {\n      const {\n        blobPromise\n      } = data;\n      delete data.blobPromise;\n      return this.getFromBlob(data.id, blobPromise);\n    }\n    return this.getFromUrl(data.url);\n  }\n  getFromCanvas(id, canvas) {\n    this.#cache ||= new Map();\n    let data = this.#cache.get(id);\n    if (data?.bitmap) {\n      data.refCounter += 1;\n      return data;\n    }\n    const offscreen = new OffscreenCanvas(canvas.width, canvas.height);\n    const ctx = offscreen.getContext(\"2d\");\n    ctx.drawImage(canvas, 0, 0);\n    data = {\n      bitmap: offscreen.transferToImageBitmap(),\n      id: `image_${this.#baseId}_${this.#id++}`,\n      refCounter: 1,\n      isSvg: false\n    };\n    this.#cache.set(id, data);\n    this.#cache.set(data.id, data);\n    return data;\n  }\n  getSvgUrl(id) {\n    const data = this.#cache.get(id);\n    if (!data?.isSvg) {\n      return null;\n    }\n    return data.svgUrl;\n  }\n  deleteId(id) {\n    this.#cache ||= new Map();\n    const data = this.#cache.get(id);\n    if (!data) {\n      return;\n    }\n    data.refCounter -= 1;\n    if (data.refCounter !== 0) {\n      return;\n    }\n    const {\n      bitmap\n    } = data;\n    if (!data.url && !data.file) {\n      const canvas = new OffscreenCanvas(bitmap.width, bitmap.height);\n      const ctx = canvas.getContext(\"bitmaprenderer\");\n      ctx.transferFromImageBitmap(bitmap);\n      data.blobPromise = canvas.convertToBlob();\n    }\n    bitmap.close?.();\n    data.bitmap = null;\n  }\n  isValidId(id) {\n    return id.startsWith(`image_${this.#baseId}_`);\n  }\n}\nclass CommandManager {\n  #commands = [];\n  #locked = false;\n  #maxSize;\n  #position = -1;\n  constructor(maxSize = 128) {\n    this.#maxSize = maxSize;\n  }\n  add({\n    cmd,\n    undo,\n    post,\n    mustExec,\n    type = NaN,\n    overwriteIfSameType = false,\n    keepUndo = false\n  }) {\n    if (mustExec) {\n      cmd();\n    }\n    if (this.#locked) {\n      return;\n    }\n    const save = {\n      cmd,\n      undo,\n      post,\n      type\n    };\n    if (this.#position === -1) {\n      if (this.#commands.length > 0) {\n        this.#commands.length = 0;\n      }\n      this.#position = 0;\n      this.#commands.push(save);\n      return;\n    }\n    if (overwriteIfSameType && this.#commands[this.#position].type === type) {\n      if (keepUndo) {\n        save.undo = this.#commands[this.#position].undo;\n      }\n      this.#commands[this.#position] = save;\n      return;\n    }\n    const next = this.#position + 1;\n    if (next === this.#maxSize) {\n      this.#commands.splice(0, 1);\n    } else {\n      this.#position = next;\n      if (next < this.#commands.length) {\n        this.#commands.splice(next);\n      }\n    }\n    this.#commands.push(save);\n  }\n  undo() {\n    if (this.#position === -1) {\n      return;\n    }\n    this.#locked = true;\n    const {\n      undo,\n      post\n    } = this.#commands[this.#position];\n    undo();\n    post?.();\n    this.#locked = false;\n    this.#position -= 1;\n  }\n  redo() {\n    if (this.#position < this.#commands.length - 1) {\n      this.#position += 1;\n      this.#locked = true;\n      const {\n        cmd,\n        post\n      } = this.#commands[this.#position];\n      cmd();\n      post?.();\n      this.#locked = false;\n    }\n  }\n  hasSomethingToUndo() {\n    return this.#position !== -1;\n  }\n  hasSomethingToRedo() {\n    return this.#position < this.#commands.length - 1;\n  }\n  cleanType(type) {\n    if (this.#position === -1) {\n      return;\n    }\n    for (let i = this.#position; i >= 0; i--) {\n      if (this.#commands[i].type !== type) {\n        this.#commands.splice(i + 1, this.#position - i);\n        this.#position = i;\n        return;\n      }\n    }\n    this.#commands.length = 0;\n    this.#position = -1;\n  }\n  destroy() {\n    this.#commands = null;\n  }\n}\nclass KeyboardManager {\n  constructor(callbacks) {\n    this.buffer = [];\n    this.callbacks = new Map();\n    this.allKeys = new Set();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    for (const [keys, callback, options = {}] of callbacks) {\n      for (const key of keys) {\n        const isMacKey = key.startsWith(\"mac+\");\n        if (isMac && isMacKey) {\n          this.callbacks.set(key.slice(4), {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        } else if (!isMac && !isMacKey) {\n          this.callbacks.set(key, {\n            callback,\n            options\n          });\n          this.allKeys.add(key.split(\"+\").at(-1));\n        }\n      }\n    }\n  }\n  #serialize(event) {\n    if (event.altKey) {\n      this.buffer.push(\"alt\");\n    }\n    if (event.ctrlKey) {\n      this.buffer.push(\"ctrl\");\n    }\n    if (event.metaKey) {\n      this.buffer.push(\"meta\");\n    }\n    if (event.shiftKey) {\n      this.buffer.push(\"shift\");\n    }\n    this.buffer.push(event.key);\n    const str = this.buffer.join(\"+\");\n    this.buffer.length = 0;\n    return str;\n  }\n  exec(self, event) {\n    if (!this.allKeys.has(event.key)) {\n      return;\n    }\n    const info = this.callbacks.get(this.#serialize(event));\n    if (!info) {\n      return;\n    }\n    const {\n      callback,\n      options: {\n        bubbles = false,\n        args = [],\n        checker = null\n      }\n    } = info;\n    if (checker && !checker(self, event)) {\n      return;\n    }\n    callback.bind(self, ...args, event)();\n    if (!bubbles) {\n      stopEvent(event);\n    }\n  }\n}\nclass ColorManager {\n  static _colorsMapping = new Map([[\"CanvasText\", [0, 0, 0]], [\"Canvas\", [255, 255, 255]]]);\n  get _colors() {\n    const colors = new Map([[\"CanvasText\", null], [\"Canvas\", null]]);\n    getColorValues(colors);\n    return shadow(this, \"_colors\", colors);\n  }\n  convert(color) {\n    const rgb = getRGB(color);\n    if (!window.matchMedia(\"(forced-colors: active)\").matches) {\n      return rgb;\n    }\n    for (const [name, RGB] of this._colors) {\n      if (RGB.every((x, i) => x === rgb[i])) {\n        return ColorManager._colorsMapping.get(name);\n      }\n    }\n    return rgb;\n  }\n  getHexCode(name) {\n    const rgb = this._colors.get(name);\n    if (!rgb) {\n      return name;\n    }\n    return Util.makeHexColor(...rgb);\n  }\n}\nclass AnnotationEditorUIManager {\n  #abortController = new AbortController();\n  #activeEditor = null;\n  #allEditors = new Map();\n  #allLayers = new Map();\n  #altTextManager = null;\n  #annotationStorage = null;\n  #changedExistingAnnotations = null;\n  #commandManager = new CommandManager();\n  #copyPasteAC = null;\n  #currentDrawingSession = null;\n  #currentPageIndex = 0;\n  #deletedAnnotationsElementIds = new Set();\n  #draggingEditors = null;\n  #editorTypes = null;\n  #editorsToRescale = new Set();\n  _editorUndoBar = null;\n  #enableHighlightFloatingButton = false;\n  #enableUpdatedAddImage = false;\n  #enableNewAltTextWhenAddingImage = false;\n  #filterFactory = null;\n  #focusMainContainerTimeoutId = null;\n  #focusManagerAC = null;\n  #highlightColors = null;\n  #highlightWhenShiftUp = false;\n  #highlightToolbar = null;\n  #idManager = new IdManager();\n  #isEnabled = false;\n  #isWaiting = false;\n  #keyboardManagerAC = null;\n  #lastActiveElement = null;\n  #mainHighlightColorPicker = null;\n  #missingCanvases = null;\n  #mlManager = null;\n  #mode = AnnotationEditorType.NONE;\n  #selectedEditors = new Set();\n  #selectedTextNode = null;\n  #signatureManager = null;\n  #pageColors = null;\n  #showAllStates = null;\n  #previousStates = {\n    isEditing: false,\n    isEmpty: true,\n    hasSomethingToUndo: false,\n    hasSomethingToRedo: false,\n    hasSelectedEditor: false,\n    hasSelectedText: false\n  };\n  #translation = [0, 0];\n  #translationTimeoutId = null;\n  #container = null;\n  #viewer = null;\n  #viewerAlert = null;\n  #updateModeCapability = null;\n  static TRANSLATE_SMALL = 1;\n  static TRANSLATE_BIG = 10;\n  static get _keyboardManager() {\n    const proto = AnnotationEditorUIManager.prototype;\n    const arrowChecker = self => self.#container.contains(document.activeElement) && document.activeElement.tagName !== \"BUTTON\" && self.hasSomethingToControl();\n    const textInputChecker = (_self, {\n      target: el\n    }) => {\n      if (el instanceof HTMLInputElement) {\n        const {\n          type\n        } = el;\n        return type !== \"text\" && type !== \"number\";\n      }\n      return true;\n    };\n    const small = this.TRANSLATE_SMALL;\n    const big = this.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+a\", \"mac+meta+a\"], proto.selectAll, {\n      checker: textInputChecker\n    }], [[\"ctrl+z\", \"mac+meta+z\"], proto.undo, {\n      checker: textInputChecker\n    }], [[\"ctrl+y\", \"ctrl+shift+z\", \"mac+meta+shift+z\", \"ctrl+shift+Z\", \"mac+meta+shift+Z\"], proto.redo, {\n      checker: textInputChecker\n    }], [[\"Backspace\", \"alt+Backspace\", \"ctrl+Backspace\", \"shift+Backspace\", \"mac+Backspace\", \"mac+alt+Backspace\", \"mac+ctrl+Backspace\", \"Delete\", \"ctrl+Delete\", \"shift+Delete\", \"mac+Delete\"], proto.delete, {\n      checker: textInputChecker\n    }], [[\"Enter\", \"mac+Enter\"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(el) && !self.isEnterHandled\n    }], [[\" \", \"mac+ \"], proto.addNewEditorFromKeyboard, {\n      checker: (self, {\n        target: el\n      }) => !(el instanceof HTMLButtonElement) && self.#container.contains(document.activeElement)\n    }], [[\"Escape\", \"mac+Escape\"], proto.unselectAll], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto.translateSelectedEditors, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto.translateSelectedEditors, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto.translateSelectedEditors, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto.translateSelectedEditors, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  constructor(container, viewer, viewerAlert, altTextManager, signatureManager, eventBus, pdfDocument, pageColors, highlightColors, enableHighlightFloatingButton, enableUpdatedAddImage, enableNewAltTextWhenAddingImage, mlManager, editorUndoBar, supportsPinchToZoom) {\n    const signal = this._signal = this.#abortController.signal;\n    this.#container = container;\n    this.#viewer = viewer;\n    this.#viewerAlert = viewerAlert;\n    this.#altTextManager = altTextManager;\n    this.#signatureManager = signatureManager;\n    this._eventBus = eventBus;\n    eventBus._on(\"editingaction\", this.onEditingAction.bind(this), {\n      signal\n    });\n    eventBus._on(\"pagechanging\", this.onPageChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"scalechanging\", this.onScaleChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"rotationchanging\", this.onRotationChanging.bind(this), {\n      signal\n    });\n    eventBus._on(\"setpreference\", this.onSetPreference.bind(this), {\n      signal\n    });\n    eventBus._on(\"switchannotationeditorparams\", evt => this.updateParams(evt.type, evt.value), {\n      signal\n    });\n    this.#addSelectionListener();\n    this.#addDragAndDropListeners();\n    this.#addKeyboardManager();\n    this.#annotationStorage = pdfDocument.annotationStorage;\n    this.#filterFactory = pdfDocument.filterFactory;\n    this.#pageColors = pageColors;\n    this.#highlightColors = highlightColors || null;\n    this.#enableHighlightFloatingButton = enableHighlightFloatingButton;\n    this.#enableUpdatedAddImage = enableUpdatedAddImage;\n    this.#enableNewAltTextWhenAddingImage = enableNewAltTextWhenAddingImage;\n    this.#mlManager = mlManager || null;\n    this.viewParameters = {\n      realScale: PixelsPerInch.PDF_TO_CSS_UNITS,\n      rotation: 0\n    };\n    this.isShiftKeyDown = false;\n    this._editorUndoBar = editorUndoBar || null;\n    this._supportsPinchToZoom = supportsPinchToZoom !== false;\n  }\n  destroy() {\n    this.#updateModeCapability?.resolve();\n    this.#updateModeCapability = null;\n    this.#abortController?.abort();\n    this.#abortController = null;\n    this._signal = null;\n    for (const layer of this.#allLayers.values()) {\n      layer.destroy();\n    }\n    this.#allLayers.clear();\n    this.#allEditors.clear();\n    this.#editorsToRescale.clear();\n    this.#missingCanvases?.clear();\n    this.#activeEditor = null;\n    this.#selectedEditors.clear();\n    this.#commandManager.destroy();\n    this.#altTextManager?.destroy();\n    this.#signatureManager?.destroy();\n    this.#highlightToolbar?.hide();\n    this.#highlightToolbar = null;\n    this.#mainHighlightColorPicker?.destroy();\n    this.#mainHighlightColorPicker = null;\n    if (this.#focusMainContainerTimeoutId) {\n      clearTimeout(this.#focusMainContainerTimeoutId);\n      this.#focusMainContainerTimeoutId = null;\n    }\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n      this.#translationTimeoutId = null;\n    }\n    this._editorUndoBar?.destroy();\n  }\n  combinedSignal(ac) {\n    return AbortSignal.any([this._signal, ac.signal]);\n  }\n  get mlManager() {\n    return this.#mlManager;\n  }\n  get useNewAltTextFlow() {\n    return this.#enableUpdatedAddImage;\n  }\n  get useNewAltTextWhenAddingImage() {\n    return this.#enableNewAltTextWhenAddingImage;\n  }\n  get hcmFilter() {\n    return shadow(this, \"hcmFilter\", this.#pageColors ? this.#filterFactory.addHCMFilter(this.#pageColors.foreground, this.#pageColors.background) : \"none\");\n  }\n  get direction() {\n    return shadow(this, \"direction\", getComputedStyle(this.#container).direction);\n  }\n  get highlightColors() {\n    return shadow(this, \"highlightColors\", this.#highlightColors ? new Map(this.#highlightColors.split(\",\").map(pair => {\n      pair = pair.split(\"=\").map(x => x.trim());\n      pair[1] = pair[1].toUpperCase();\n      return pair;\n    })) : null);\n  }\n  get highlightColorNames() {\n    return shadow(this, \"highlightColorNames\", this.highlightColors ? new Map(Array.from(this.highlightColors, e => e.reverse())) : null);\n  }\n  setCurrentDrawingSession(layer) {\n    if (layer) {\n      this.unselectAll();\n      this.disableUserSelect(true);\n    } else {\n      this.disableUserSelect(false);\n    }\n    this.#currentDrawingSession = layer;\n  }\n  setMainHighlightColorPicker(colorPicker) {\n    this.#mainHighlightColorPicker = colorPicker;\n  }\n  editAltText(editor, firstTime = false) {\n    this.#altTextManager?.editAltText(this, editor, firstTime);\n  }\n  getSignature(editor) {\n    this.#signatureManager?.getSignature({\n      uiManager: this,\n      editor\n    });\n  }\n  get signatureManager() {\n    return this.#signatureManager;\n  }\n  switchToMode(mode, callback) {\n    this._eventBus.on(\"annotationeditormodechanged\", callback, {\n      once: true,\n      signal: this._signal\n    });\n    this._eventBus.dispatch(\"showannotationeditorui\", {\n      source: this,\n      mode\n    });\n  }\n  setPreference(name, value) {\n    this._eventBus.dispatch(\"setpreference\", {\n      source: this,\n      name,\n      value\n    });\n  }\n  onSetPreference({\n    name,\n    value\n  }) {\n    switch (name) {\n      case \"enableNewAltTextWhenAddingImage\":\n        this.#enableNewAltTextWhenAddingImage = value;\n        break;\n    }\n  }\n  onPageChanging({\n    pageNumber\n  }) {\n    this.#currentPageIndex = pageNumber - 1;\n  }\n  focusMainContainer() {\n    this.#container.focus();\n  }\n  findParent(x, y) {\n    for (const layer of this.#allLayers.values()) {\n      const {\n        x: layerX,\n        y: layerY,\n        width,\n        height\n      } = layer.div.getBoundingClientRect();\n      if (x >= layerX && x <= layerX + width && y >= layerY && y <= layerY + height) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  disableUserSelect(value = false) {\n    this.#viewer.classList.toggle(\"noUserSelect\", value);\n  }\n  addShouldRescale(editor) {\n    this.#editorsToRescale.add(editor);\n  }\n  removeShouldRescale(editor) {\n    this.#editorsToRescale.delete(editor);\n  }\n  onScaleChanging({\n    scale\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.realScale = scale * PixelsPerInch.PDF_TO_CSS_UNITS;\n    for (const editor of this.#editorsToRescale) {\n      editor.onScaleChanging();\n    }\n    this.#currentDrawingSession?.onScaleChanging();\n  }\n  onRotationChanging({\n    pagesRotation\n  }) {\n    this.commitOrRemove();\n    this.viewParameters.rotation = pagesRotation;\n  }\n  #getAnchorElementForSelection({\n    anchorNode\n  }) {\n    return anchorNode.nodeType === Node.TEXT_NODE ? anchorNode.parentElement : anchorNode;\n  }\n  #getLayerForTextLayer(textLayer) {\n    const {\n      currentLayer\n    } = this;\n    if (currentLayer.hasTextLayer(textLayer)) {\n      return currentLayer;\n    }\n    for (const layer of this.#allLayers.values()) {\n      if (layer.hasTextLayer(textLayer)) {\n        return layer;\n      }\n    }\n    return null;\n  }\n  highlightSelection(methodOfCreation = \"\") {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const {\n      anchorNode,\n      anchorOffset,\n      focusNode,\n      focusOffset\n    } = selection;\n    const text = selection.toString();\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    selection.empty();\n    const layer = this.#getLayerForTextLayer(textLayer);\n    const isNoneMode = this.#mode === AnnotationEditorType.NONE;\n    const callback = () => {\n      layer?.createAndAddNewEditor({\n        x: 0,\n        y: 0\n      }, false, {\n        methodOfCreation,\n        boxes,\n        anchorNode,\n        anchorOffset,\n        focusNode,\n        focusOffset,\n        text\n      });\n      if (isNoneMode) {\n        this.showAllEditors(\"highlight\", true, true);\n      }\n    };\n    if (isNoneMode) {\n      this.switchToMode(AnnotationEditorType.HIGHLIGHT, callback);\n      return;\n    }\n    callback();\n  }\n  #displayHighlightToolbar() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    const boxes = this.getSelectionBoxes(textLayer);\n    if (!boxes) {\n      return;\n    }\n    this.#highlightToolbar ||= new HighlightToolbar(this);\n    this.#highlightToolbar.show(textLayer, boxes, this.direction === \"ltr\");\n  }\n  addToAnnotationStorage(editor) {\n    if (!editor.isEmpty() && this.#annotationStorage && !this.#annotationStorage.has(editor.id)) {\n      this.#annotationStorage.setValue(editor.id, editor);\n    }\n  }\n  a11yAlert(messageId, args = null) {\n    const viewerAlert = this.#viewerAlert;\n    if (!viewerAlert) {\n      return;\n    }\n    viewerAlert.setAttribute(\"data-l10n-id\", messageId);\n    if (args) {\n      viewerAlert.setAttribute(\"data-l10n-args\", JSON.stringify(args));\n    } else {\n      viewerAlert.removeAttribute(\"data-l10n-args\");\n    }\n  }\n  #selectionChange() {\n    const selection = document.getSelection();\n    if (!selection || selection.isCollapsed) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    const {\n      anchorNode\n    } = selection;\n    if (anchorNode === this.#selectedTextNode) {\n      return;\n    }\n    const anchorElement = this.#getAnchorElementForSelection(selection);\n    const textLayer = anchorElement.closest(\".textLayer\");\n    if (!textLayer) {\n      if (this.#selectedTextNode) {\n        this.#highlightToolbar?.hide();\n        this.#selectedTextNode = null;\n        this.#dispatchUpdateStates({\n          hasSelectedText: false\n        });\n      }\n      return;\n    }\n    this.#highlightToolbar?.hide();\n    this.#selectedTextNode = anchorNode;\n    this.#dispatchUpdateStates({\n      hasSelectedText: true\n    });\n    if (this.#mode !== AnnotationEditorType.HIGHLIGHT && this.#mode !== AnnotationEditorType.NONE) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.showAllEditors(\"highlight\", true, true);\n    }\n    this.#highlightWhenShiftUp = this.isShiftKeyDown;\n    if (!this.isShiftKeyDown) {\n      const activeLayer = this.#mode === AnnotationEditorType.HIGHLIGHT ? this.#getLayerForTextLayer(textLayer) : null;\n      activeLayer?.toggleDrawing();\n      const ac = new AbortController();\n      const signal = this.combinedSignal(ac);\n      const pointerup = e => {\n        if (e.type === \"pointerup\" && e.button !== 0) {\n          return;\n        }\n        ac.abort();\n        activeLayer?.toggleDrawing(true);\n        if (e.type === \"pointerup\") {\n          this.#onSelectEnd(\"main_toolbar\");\n        }\n      };\n      window.addEventListener(\"pointerup\", pointerup, {\n        signal\n      });\n      window.addEventListener(\"blur\", pointerup, {\n        signal\n      });\n    }\n  }\n  #onSelectEnd(methodOfCreation = \"\") {\n    if (this.#mode === AnnotationEditorType.HIGHLIGHT) {\n      this.highlightSelection(methodOfCreation);\n    } else if (this.#enableHighlightFloatingButton) {\n      this.#displayHighlightToolbar();\n    }\n  }\n  #addSelectionListener() {\n    document.addEventListener(\"selectionchange\", this.#selectionChange.bind(this), {\n      signal: this._signal\n    });\n  }\n  #addFocusManager() {\n    if (this.#focusManagerAC) {\n      return;\n    }\n    this.#focusManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#focusManagerAC);\n    window.addEventListener(\"focus\", this.focus.bind(this), {\n      signal\n    });\n    window.addEventListener(\"blur\", this.blur.bind(this), {\n      signal\n    });\n  }\n  #removeFocusManager() {\n    this.#focusManagerAC?.abort();\n    this.#focusManagerAC = null;\n  }\n  blur() {\n    this.isShiftKeyDown = false;\n    if (this.#highlightWhenShiftUp) {\n      this.#highlightWhenShiftUp = false;\n      this.#onSelectEnd(\"main_toolbar\");\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    for (const editor of this.#selectedEditors) {\n      if (editor.div.contains(activeElement)) {\n        this.#lastActiveElement = [editor, activeElement];\n        editor._focusEventsAllowed = false;\n        break;\n      }\n    }\n  }\n  focus() {\n    if (!this.#lastActiveElement) {\n      return;\n    }\n    const [lastEditor, lastActiveElement] = this.#lastActiveElement;\n    this.#lastActiveElement = null;\n    lastActiveElement.addEventListener(\"focusin\", () => {\n      lastEditor._focusEventsAllowed = true;\n    }, {\n      once: true,\n      signal: this._signal\n    });\n    lastActiveElement.focus();\n  }\n  #addKeyboardManager() {\n    if (this.#keyboardManagerAC) {\n      return;\n    }\n    this.#keyboardManagerAC = new AbortController();\n    const signal = this.combinedSignal(this.#keyboardManagerAC);\n    window.addEventListener(\"keydown\", this.keydown.bind(this), {\n      signal\n    });\n    window.addEventListener(\"keyup\", this.keyup.bind(this), {\n      signal\n    });\n  }\n  #removeKeyboardManager() {\n    this.#keyboardManagerAC?.abort();\n    this.#keyboardManagerAC = null;\n  }\n  #addCopyPasteListeners() {\n    if (this.#copyPasteAC) {\n      return;\n    }\n    this.#copyPasteAC = new AbortController();\n    const signal = this.combinedSignal(this.#copyPasteAC);\n    document.addEventListener(\"copy\", this.copy.bind(this), {\n      signal\n    });\n    document.addEventListener(\"cut\", this.cut.bind(this), {\n      signal\n    });\n    document.addEventListener(\"paste\", this.paste.bind(this), {\n      signal\n    });\n  }\n  #removeCopyPasteListeners() {\n    this.#copyPasteAC?.abort();\n    this.#copyPasteAC = null;\n  }\n  #addDragAndDropListeners() {\n    const signal = this._signal;\n    document.addEventListener(\"dragover\", this.dragOver.bind(this), {\n      signal\n    });\n    document.addEventListener(\"drop\", this.drop.bind(this), {\n      signal\n    });\n  }\n  addEditListeners() {\n    this.#addKeyboardManager();\n    this.#addCopyPasteListeners();\n  }\n  removeEditListeners() {\n    this.#removeKeyboardManager();\n    this.#removeCopyPasteListeners();\n  }\n  dragOver(event) {\n    for (const {\n      type\n    } of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(type)) {\n          event.dataTransfer.dropEffect = \"copy\";\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  drop(event) {\n    for (const item of event.dataTransfer.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          event.preventDefault();\n          return;\n        }\n      }\n    }\n  }\n  copy(event) {\n    event.preventDefault();\n    this.#activeEditor?.commitOrRemove();\n    if (!this.hasSelection) {\n      return;\n    }\n    const editors = [];\n    for (const editor of this.#selectedEditors) {\n      const serialized = editor.serialize(true);\n      if (serialized) {\n        editors.push(serialized);\n      }\n    }\n    if (editors.length === 0) {\n      return;\n    }\n    event.clipboardData.setData(\"application/pdfjs\", JSON.stringify(editors));\n  }\n  cut(event) {\n    this.copy(event);\n    this.delete();\n  }\n  async paste(event) {\n    event.preventDefault();\n    const {\n      clipboardData\n    } = event;\n    for (const item of clipboardData.items) {\n      for (const editorType of this.#editorTypes) {\n        if (editorType.isHandlingMimeForPasting(item.type)) {\n          editorType.paste(item, this.currentLayer);\n          return;\n        }\n      }\n    }\n    let data = clipboardData.getData(\"application/pdfjs\");\n    if (!data) {\n      return;\n    }\n    try {\n      data = JSON.parse(data);\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n      return;\n    }\n    if (!Array.isArray(data)) {\n      return;\n    }\n    this.unselectAll();\n    const layer = this.currentLayer;\n    try {\n      const newEditors = [];\n      for (const editor of data) {\n        const deserializedEditor = await layer.deserialize(editor);\n        if (!deserializedEditor) {\n          return;\n        }\n        newEditors.push(deserializedEditor);\n      }\n      const cmd = () => {\n        for (const editor of newEditors) {\n          this.#addEditorToLayer(editor);\n        }\n        this.#selectEditors(newEditors);\n      };\n      const undo = () => {\n        for (const editor of newEditors) {\n          editor.remove();\n        }\n      };\n      this.addCommands({\n        cmd,\n        undo,\n        mustExec: true\n      });\n    } catch (ex) {\n      warn(`paste: \"${ex.message}\".`);\n    }\n  }\n  keydown(event) {\n    if (!this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = true;\n    }\n    if (this.#mode !== AnnotationEditorType.NONE && !this.isEditorHandlingKeyboard) {\n      AnnotationEditorUIManager._keyboardManager.exec(this, event);\n    }\n  }\n  keyup(event) {\n    if (this.isShiftKeyDown && event.key === \"Shift\") {\n      this.isShiftKeyDown = false;\n      if (this.#highlightWhenShiftUp) {\n        this.#highlightWhenShiftUp = false;\n        this.#onSelectEnd(\"main_toolbar\");\n      }\n    }\n  }\n  onEditingAction({\n    name\n  }) {\n    switch (name) {\n      case \"undo\":\n      case \"redo\":\n      case \"delete\":\n      case \"selectAll\":\n        this[name]();\n        break;\n      case \"highlightSelection\":\n        this.highlightSelection(\"context_menu\");\n        break;\n    }\n  }\n  #dispatchUpdateStates(details) {\n    const hasChanged = Object.entries(details).some(([key, value]) => this.#previousStates[key] !== value);\n    if (hasChanged) {\n      this._eventBus.dispatch(\"annotationeditorstateschanged\", {\n        source: this,\n        details: Object.assign(this.#previousStates, details)\n      });\n      if (this.#mode === AnnotationEditorType.HIGHLIGHT && details.hasSelectedEditor === false) {\n        this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_FREE, true]]);\n      }\n    }\n  }\n  #dispatchUpdateUI(details) {\n    this._eventBus.dispatch(\"annotationeditorparamschanged\", {\n      source: this,\n      details\n    });\n  }\n  setEditingState(isEditing) {\n    if (isEditing) {\n      this.#addFocusManager();\n      this.#addCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: this.#mode !== AnnotationEditorType.NONE,\n        isEmpty: this.#isEmpty(),\n        hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n        hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n        hasSelectedEditor: false\n      });\n    } else {\n      this.#removeFocusManager();\n      this.#removeCopyPasteListeners();\n      this.#dispatchUpdateStates({\n        isEditing: false\n      });\n      this.disableUserSelect(false);\n    }\n  }\n  registerEditorTypes(types) {\n    if (this.#editorTypes) {\n      return;\n    }\n    this.#editorTypes = types;\n    for (const editorType of this.#editorTypes) {\n      this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n    }\n  }\n  getId() {\n    return this.#idManager.id;\n  }\n  get currentLayer() {\n    return this.#allLayers.get(this.#currentPageIndex);\n  }\n  getLayer(pageIndex) {\n    return this.#allLayers.get(pageIndex);\n  }\n  get currentPageIndex() {\n    return this.#currentPageIndex;\n  }\n  addLayer(layer) {\n    this.#allLayers.set(layer.pageIndex, layer);\n    if (this.#isEnabled) {\n      layer.enable();\n    } else {\n      layer.disable();\n    }\n  }\n  removeLayer(layer) {\n    this.#allLayers.delete(layer.pageIndex);\n  }\n  async updateMode(mode, editId = null, isFromKeyboard = false, mustEnterInEditMode = false) {\n    if (this.#mode === mode) {\n      return;\n    }\n    if (this.#updateModeCapability) {\n      await this.#updateModeCapability.promise;\n      if (!this.#updateModeCapability) {\n        return;\n      }\n    }\n    this.#updateModeCapability = Promise.withResolvers();\n    this.#currentDrawingSession?.commitOrRemove();\n    this.#mode = mode;\n    if (mode === AnnotationEditorType.NONE) {\n      this.setEditingState(false);\n      this.#disableAll();\n      this._editorUndoBar?.hide();\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    if (mode === AnnotationEditorType.SIGNATURE) {\n      await this.#signatureManager?.loadSignatures();\n    }\n    this.setEditingState(true);\n    await this.#enableAll();\n    this.unselectAll();\n    for (const layer of this.#allLayers.values()) {\n      layer.updateMode(mode);\n    }\n    if (!editId) {\n      if (isFromKeyboard) {\n        this.addNewEditorFromKeyboard();\n      }\n      this.#updateModeCapability.resolve();\n      return;\n    }\n    for (const editor of this.#allEditors.values()) {\n      if (editor.annotationElementId === editId || editor.id === editId) {\n        this.setSelected(editor);\n        if (mustEnterInEditMode) {\n          editor.enterInEditMode();\n        }\n      } else {\n        editor.unselect();\n      }\n    }\n    this.#updateModeCapability.resolve();\n  }\n  addNewEditorFromKeyboard() {\n    if (this.currentLayer.canCreateNewEmptyEditor()) {\n      this.currentLayer.addNewEditor();\n    }\n  }\n  updateToolbar(options) {\n    if (options.mode === this.#mode) {\n      return;\n    }\n    this._eventBus.dispatch(\"switchannotationeditormode\", {\n      source: this,\n      ...options\n    });\n  }\n  updateParams(type, value) {\n    if (!this.#editorTypes) {\n      return;\n    }\n    switch (type) {\n      case AnnotationEditorParamsType.CREATE:\n        this.currentLayer.addNewEditor(value);\n        return;\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        this.#mainHighlightColorPicker?.updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL:\n        this._eventBus.dispatch(\"reporttelemetry\", {\n          source: this,\n          details: {\n            type: \"editing\",\n            data: {\n              type: \"highlight\",\n              action: \"toggle_visibility\"\n            }\n          }\n        });\n        (this.#showAllStates ||= new Map()).set(type, value);\n        this.showAllEditors(\"highlight\", value);\n        break;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.updateParams(type, value);\n    }\n    for (const editorType of this.#editorTypes) {\n      editorType.updateDefaultParams(type, value);\n    }\n  }\n  showAllEditors(type, visible, updateButton = false) {\n    for (const editor of this.#allEditors.values()) {\n      if (editor.editorType === type) {\n        editor.show(visible);\n      }\n    }\n    const state = this.#showAllStates?.get(AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL) ?? true;\n    if (state !== visible) {\n      this.#dispatchUpdateUI([[AnnotationEditorParamsType.HIGHLIGHT_SHOW_ALL, visible]]);\n    }\n  }\n  enableWaiting(mustWait = false) {\n    if (this.#isWaiting === mustWait) {\n      return;\n    }\n    this.#isWaiting = mustWait;\n    for (const layer of this.#allLayers.values()) {\n      if (mustWait) {\n        layer.disableClick();\n      } else {\n        layer.enableClick();\n      }\n      layer.div.classList.toggle(\"waiting\", mustWait);\n    }\n  }\n  async #enableAll() {\n    if (!this.#isEnabled) {\n      this.#isEnabled = true;\n      const promises = [];\n      for (const layer of this.#allLayers.values()) {\n        promises.push(layer.enable());\n      }\n      await Promise.all(promises);\n      for (const editor of this.#allEditors.values()) {\n        editor.enable();\n      }\n    }\n  }\n  #disableAll() {\n    this.unselectAll();\n    if (this.#isEnabled) {\n      this.#isEnabled = false;\n      for (const layer of this.#allLayers.values()) {\n        layer.disable();\n      }\n      for (const editor of this.#allEditors.values()) {\n        editor.disable();\n      }\n    }\n  }\n  getEditors(pageIndex) {\n    const editors = [];\n    for (const editor of this.#allEditors.values()) {\n      if (editor.pageIndex === pageIndex) {\n        editors.push(editor);\n      }\n    }\n    return editors;\n  }\n  getEditor(id) {\n    return this.#allEditors.get(id);\n  }\n  addEditor(editor) {\n    this.#allEditors.set(editor.id, editor);\n  }\n  removeEditor(editor) {\n    if (editor.div.contains(document.activeElement)) {\n      if (this.#focusMainContainerTimeoutId) {\n        clearTimeout(this.#focusMainContainerTimeoutId);\n      }\n      this.#focusMainContainerTimeoutId = setTimeout(() => {\n        this.focusMainContainer();\n        this.#focusMainContainerTimeoutId = null;\n      }, 0);\n    }\n    this.#allEditors.delete(editor.id);\n    if (editor.annotationElementId) {\n      this.#missingCanvases?.delete(editor.annotationElementId);\n    }\n    this.unselect(editor);\n    if (!editor.annotationElementId || !this.#deletedAnnotationsElementIds.has(editor.annotationElementId)) {\n      this.#annotationStorage?.remove(editor.id);\n    }\n  }\n  addDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.add(editor.annotationElementId);\n    this.addChangedExistingAnnotation(editor);\n    editor.deleted = true;\n  }\n  isDeletedAnnotationElement(annotationElementId) {\n    return this.#deletedAnnotationsElementIds.has(annotationElementId);\n  }\n  removeDeletedAnnotationElement(editor) {\n    this.#deletedAnnotationsElementIds.delete(editor.annotationElementId);\n    this.removeChangedExistingAnnotation(editor);\n    editor.deleted = false;\n  }\n  #addEditorToLayer(editor) {\n    const layer = this.#allLayers.get(editor.pageIndex);\n    if (layer) {\n      layer.addOrRebuild(editor);\n    } else {\n      this.addEditor(editor);\n      this.addToAnnotationStorage(editor);\n    }\n  }\n  setActiveEditor(editor) {\n    if (this.#activeEditor === editor) {\n      return;\n    }\n    this.#activeEditor = editor;\n    if (editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  get #lastSelectedEditor() {\n    let ed = null;\n    for (ed of this.#selectedEditors) {}\n    return ed;\n  }\n  updateUI(editor) {\n    if (this.#lastSelectedEditor === editor) {\n      this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    }\n  }\n  updateUIForDefaultProperties(editorType) {\n    this.#dispatchUpdateUI(editorType.defaultPropertiesToUpdate);\n  }\n  toggleSelected(editor) {\n    if (this.#selectedEditors.has(editor)) {\n      this.#selectedEditors.delete(editor);\n      editor.unselect();\n      this.#dispatchUpdateStates({\n        hasSelectedEditor: this.hasSelection\n      });\n      return;\n    }\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  setSelected(editor) {\n    this.updateToolbar({\n      mode: editor.mode,\n      editId: editor.id\n    });\n    this.#currentDrawingSession?.commitOrRemove();\n    for (const ed of this.#selectedEditors) {\n      if (ed !== editor) {\n        ed.unselect();\n      }\n    }\n    this.#selectedEditors.clear();\n    this.#selectedEditors.add(editor);\n    editor.select();\n    this.#dispatchUpdateUI(editor.propertiesToUpdate);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: true\n    });\n  }\n  isSelected(editor) {\n    return this.#selectedEditors.has(editor);\n  }\n  get firstSelectedEditor() {\n    return this.#selectedEditors.values().next().value;\n  }\n  unselect(editor) {\n    editor.unselect();\n    this.#selectedEditors.delete(editor);\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  get hasSelection() {\n    return this.#selectedEditors.size !== 0;\n  }\n  get isEnterHandled() {\n    return this.#selectedEditors.size === 1 && this.firstSelectedEditor.isEnterHandled;\n  }\n  undo() {\n    this.#commandManager.undo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: this.#commandManager.hasSomethingToUndo(),\n      hasSomethingToRedo: true,\n      isEmpty: this.#isEmpty()\n    });\n    this._editorUndoBar?.hide();\n  }\n  redo() {\n    this.#commandManager.redo();\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: this.#commandManager.hasSomethingToRedo(),\n      isEmpty: this.#isEmpty()\n    });\n  }\n  addCommands(params) {\n    this.#commandManager.add(params);\n    this.#dispatchUpdateStates({\n      hasSomethingToUndo: true,\n      hasSomethingToRedo: false,\n      isEmpty: this.#isEmpty()\n    });\n  }\n  cleanUndoStack(type) {\n    this.#commandManager.cleanType(type);\n  }\n  #isEmpty() {\n    if (this.#allEditors.size === 0) {\n      return true;\n    }\n    if (this.#allEditors.size === 1) {\n      for (const editor of this.#allEditors.values()) {\n        return editor.isEmpty();\n      }\n    }\n    return false;\n  }\n  delete() {\n    this.commitOrRemove();\n    const drawingEditor = this.currentLayer?.endDrawingSession(true);\n    if (!this.hasSelection && !drawingEditor) {\n      return;\n    }\n    const editors = drawingEditor ? [drawingEditor] : [...this.#selectedEditors];\n    const cmd = () => {\n      this._editorUndoBar?.show(undo, editors.length === 1 ? editors[0].editorType : editors.length);\n      for (const editor of editors) {\n        editor.remove();\n      }\n    };\n    const undo = () => {\n      for (const editor of editors) {\n        this.#addEditorToLayer(editor);\n      }\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: true\n    });\n  }\n  commitOrRemove() {\n    this.#activeEditor?.commitOrRemove();\n  }\n  hasSomethingToControl() {\n    return this.#activeEditor || this.hasSelection;\n  }\n  #selectEditors(editors) {\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    for (const editor of editors) {\n      if (editor.isEmpty()) {\n        continue;\n      }\n      this.#selectedEditors.add(editor);\n      editor.select();\n    }\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: this.hasSelection\n    });\n  }\n  selectAll() {\n    for (const editor of this.#selectedEditors) {\n      editor.commit();\n    }\n    this.#selectEditors(this.#allEditors.values());\n  }\n  unselectAll() {\n    if (this.#activeEditor) {\n      this.#activeEditor.commitOrRemove();\n      if (this.#mode !== AnnotationEditorType.NONE) {\n        return;\n      }\n    }\n    if (this.#currentDrawingSession?.commitOrRemove()) {\n      return;\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    for (const editor of this.#selectedEditors) {\n      editor.unselect();\n    }\n    this.#selectedEditors.clear();\n    this.#dispatchUpdateStates({\n      hasSelectedEditor: false\n    });\n  }\n  translateSelectedEditors(x, y, noCommit = false) {\n    if (!noCommit) {\n      this.commitOrRemove();\n    }\n    if (!this.hasSelection) {\n      return;\n    }\n    this.#translation[0] += x;\n    this.#translation[1] += y;\n    const [totalX, totalY] = this.#translation;\n    const editors = [...this.#selectedEditors];\n    const TIME_TO_WAIT = 1000;\n    if (this.#translationTimeoutId) {\n      clearTimeout(this.#translationTimeoutId);\n    }\n    this.#translationTimeoutId = setTimeout(() => {\n      this.#translationTimeoutId = null;\n      this.#translation[0] = this.#translation[1] = 0;\n      this.addCommands({\n        cmd: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(totalX, totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        undo: () => {\n          for (const editor of editors) {\n            if (this.#allEditors.has(editor.id)) {\n              editor.translateInPage(-totalX, -totalY);\n              editor.translationDone();\n            }\n          }\n        },\n        mustExec: false\n      });\n    }, TIME_TO_WAIT);\n    for (const editor of editors) {\n      editor.translateInPage(x, y);\n      editor.translationDone();\n    }\n  }\n  setUpDragSession() {\n    if (!this.hasSelection) {\n      return;\n    }\n    this.disableUserSelect(true);\n    this.#draggingEditors = new Map();\n    for (const editor of this.#selectedEditors) {\n      this.#draggingEditors.set(editor, {\n        savedX: editor.x,\n        savedY: editor.y,\n        savedPageIndex: editor.pageIndex,\n        newX: 0,\n        newY: 0,\n        newPageIndex: -1\n      });\n    }\n  }\n  endDragSession() {\n    if (!this.#draggingEditors) {\n      return false;\n    }\n    this.disableUserSelect(false);\n    const map = this.#draggingEditors;\n    this.#draggingEditors = null;\n    let mustBeAddedInUndoStack = false;\n    for (const [{\n      x,\n      y,\n      pageIndex\n    }, value] of map) {\n      value.newX = x;\n      value.newY = y;\n      value.newPageIndex = pageIndex;\n      mustBeAddedInUndoStack ||= x !== value.savedX || y !== value.savedY || pageIndex !== value.savedPageIndex;\n    }\n    if (!mustBeAddedInUndoStack) {\n      return false;\n    }\n    const move = (editor, x, y, pageIndex) => {\n      if (this.#allEditors.has(editor.id)) {\n        const parent = this.#allLayers.get(pageIndex);\n        if (parent) {\n          editor._setParentAndPosition(parent, x, y);\n        } else {\n          editor.pageIndex = pageIndex;\n          editor.x = x;\n          editor.y = y;\n        }\n      }\n    };\n    this.addCommands({\n      cmd: () => {\n        for (const [editor, {\n          newX,\n          newY,\n          newPageIndex\n        }] of map) {\n          move(editor, newX, newY, newPageIndex);\n        }\n      },\n      undo: () => {\n        for (const [editor, {\n          savedX,\n          savedY,\n          savedPageIndex\n        }] of map) {\n          move(editor, savedX, savedY, savedPageIndex);\n        }\n      },\n      mustExec: true\n    });\n    return true;\n  }\n  dragSelectedEditors(tx, ty) {\n    if (!this.#draggingEditors) {\n      return;\n    }\n    for (const editor of this.#draggingEditors.keys()) {\n      editor.drag(tx, ty);\n    }\n  }\n  rebuild(editor) {\n    if (editor.parent === null) {\n      const parent = this.getLayer(editor.pageIndex);\n      if (parent) {\n        parent.changeParent(editor);\n        parent.addOrRebuild(editor);\n      } else {\n        this.addEditor(editor);\n        this.addToAnnotationStorage(editor);\n        editor.rebuild();\n      }\n    } else {\n      editor.parent.addOrRebuild(editor);\n    }\n  }\n  get isEditorHandlingKeyboard() {\n    return this.getActive()?.shouldGetKeyboardEvents() || this.#selectedEditors.size === 1 && this.firstSelectedEditor.shouldGetKeyboardEvents();\n  }\n  isActive(editor) {\n    return this.#activeEditor === editor;\n  }\n  getActive() {\n    return this.#activeEditor;\n  }\n  getMode() {\n    return this.#mode;\n  }\n  get imageManager() {\n    return shadow(this, \"imageManager\", new ImageManager());\n  }\n  getSelectionBoxes(textLayer) {\n    if (!textLayer) {\n      return null;\n    }\n    const selection = document.getSelection();\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      if (!textLayer.contains(selection.getRangeAt(i).commonAncestorContainer)) {\n        return null;\n      }\n    }\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    let rotator;\n    switch (textLayer.getAttribute(\"data-main-rotation\")) {\n      case \"90\":\n        rotator = (x, y, w, h) => ({\n          x: (y - layerY) / parentHeight,\n          y: 1 - (x + w - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      case \"180\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (x + w - layerX) / parentWidth,\n          y: 1 - (y + h - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n      case \"270\":\n        rotator = (x, y, w, h) => ({\n          x: 1 - (y + h - layerY) / parentHeight,\n          y: (x - layerX) / parentWidth,\n          width: h / parentHeight,\n          height: w / parentWidth\n        });\n        break;\n      default:\n        rotator = (x, y, w, h) => ({\n          x: (x - layerX) / parentWidth,\n          y: (y - layerY) / parentHeight,\n          width: w / parentWidth,\n          height: h / parentHeight\n        });\n        break;\n    }\n    const boxes = [];\n    for (let i = 0, ii = selection.rangeCount; i < ii; i++) {\n      const range = selection.getRangeAt(i);\n      if (range.collapsed) {\n        continue;\n      }\n      for (const {\n        x,\n        y,\n        width,\n        height\n      } of range.getClientRects()) {\n        if (width === 0 || height === 0) {\n          continue;\n        }\n        boxes.push(rotator(x, y, width, height));\n      }\n    }\n    return boxes.length === 0 ? null : boxes;\n  }\n  addChangedExistingAnnotation({\n    annotationElementId,\n    id\n  }) {\n    (this.#changedExistingAnnotations ||= new Map()).set(annotationElementId, id);\n  }\n  removeChangedExistingAnnotation({\n    annotationElementId\n  }) {\n    this.#changedExistingAnnotations?.delete(annotationElementId);\n  }\n  renderAnnotationElement(annotation) {\n    const editorId = this.#changedExistingAnnotations?.get(annotation.data.id);\n    if (!editorId) {\n      return;\n    }\n    const editor = this.#annotationStorage.getRawValue(editorId);\n    if (!editor) {\n      return;\n    }\n    if (this.#mode === AnnotationEditorType.NONE && !editor.hasBeenModified) {\n      return;\n    }\n    editor.renderAnnotationElement(annotation);\n  }\n  setMissingCanvas(annotationId, annotationElementId, canvas) {\n    const editor = this.#missingCanvases?.get(annotationId);\n    if (!editor) {\n      return;\n    }\n    editor.setCanvas(annotationElementId, canvas);\n    this.#missingCanvases.delete(annotationId);\n  }\n  addMissingCanvas(annotationId, editor) {\n    (this.#missingCanvases ||= new Map()).set(annotationId, editor);\n  }\n}\n\n;// ./src/display/editor/alt_text.js\n\nclass AltText {\n  #altText = null;\n  #altTextDecorative = false;\n  #altTextButton = null;\n  #altTextButtonLabel = null;\n  #altTextTooltip = null;\n  #altTextTooltipTimeout = null;\n  #altTextWasFromKeyBoard = false;\n  #badge = null;\n  #editor = null;\n  #guessedText = null;\n  #textWithDisclaimer = null;\n  #useNewAltTextFlow = false;\n  static #l10nNewButton = null;\n  static _l10n = null;\n  constructor(editor) {\n    this.#editor = editor;\n    this.#useNewAltTextFlow = editor._uiManager.useNewAltTextFlow;\n    AltText.#l10nNewButton ||= Object.freeze({\n      added: \"pdfjs-editor-new-alt-text-added-button\",\n      \"added-label\": \"pdfjs-editor-new-alt-text-added-button-label\",\n      missing: \"pdfjs-editor-new-alt-text-missing-button\",\n      \"missing-label\": \"pdfjs-editor-new-alt-text-missing-button-label\",\n      review: \"pdfjs-editor-new-alt-text-to-review-button\",\n      \"review-label\": \"pdfjs-editor-new-alt-text-to-review-button-label\"\n    });\n  }\n  static initialize(l10n) {\n    AltText._l10n ??= l10n;\n  }\n  async render() {\n    const altText = this.#altTextButton = document.createElement(\"button\");\n    altText.className = \"altText\";\n    altText.tabIndex = \"0\";\n    const label = this.#altTextButtonLabel = document.createElement(\"span\");\n    altText.append(label);\n    if (this.#useNewAltTextFlow) {\n      altText.classList.add(\"new\");\n      altText.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton.missing);\n      label.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[\"missing-label\"]);\n    } else {\n      altText.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button\");\n      label.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-button-label\");\n    }\n    const signal = this.#editor._uiManager._signal;\n    altText.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    altText.addEventListener(\"pointerdown\", event => event.stopPropagation(), {\n      signal\n    });\n    const onClick = event => {\n      event.preventDefault();\n      this.#editor._uiManager.editAltText(this.#editor);\n      if (this.#useNewAltTextFlow) {\n        this.#editor._reportTelemetry({\n          action: \"pdfjs.image.alt_text.image_status_label_clicked\",\n          data: {\n            label: this.#label\n          }\n        });\n      }\n    };\n    altText.addEventListener(\"click\", onClick, {\n      capture: true,\n      signal\n    });\n    altText.addEventListener(\"keydown\", event => {\n      if (event.target === altText && event.key === \"Enter\") {\n        this.#altTextWasFromKeyBoard = true;\n        onClick(event);\n      }\n    }, {\n      signal\n    });\n    await this.#setState();\n    return altText;\n  }\n  get #label() {\n    return this.#altText && \"added\" || this.#altText === null && this.guessedText && \"review\" || \"missing\";\n  }\n  finish() {\n    if (!this.#altTextButton) {\n      return;\n    }\n    this.#altTextButton.focus({\n      focusVisible: this.#altTextWasFromKeyBoard\n    });\n    this.#altTextWasFromKeyBoard = false;\n  }\n  isEmpty() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText === null;\n    }\n    return !this.#altText && !this.#altTextDecorative;\n  }\n  hasData() {\n    if (this.#useNewAltTextFlow) {\n      return this.#altText !== null || !!this.#guessedText;\n    }\n    return this.isEmpty();\n  }\n  get guessedText() {\n    return this.#guessedText;\n  }\n  async setGuessedText(guessedText) {\n    if (this.#altText !== null) {\n      return;\n    }\n    this.#guessedText = guessedText;\n    this.#textWithDisclaimer = await AltText._l10n.get(\"pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer\", {\n      generatedAltText: guessedText\n    });\n    this.#setState();\n  }\n  toggleAltTextBadge(visibility = false) {\n    if (!this.#useNewAltTextFlow || this.#altText) {\n      this.#badge?.remove();\n      this.#badge = null;\n      return;\n    }\n    if (!this.#badge) {\n      const badge = this.#badge = document.createElement(\"div\");\n      badge.className = \"noAltTextBadge\";\n      this.#editor.div.append(badge);\n    }\n    this.#badge.classList.toggle(\"hidden\", !visibility);\n  }\n  serialize(isForCopying) {\n    let altText = this.#altText;\n    if (!isForCopying && this.#guessedText === altText) {\n      altText = this.#textWithDisclaimer;\n    }\n    return {\n      altText,\n      decorative: this.#altTextDecorative,\n      guessedText: this.#guessedText,\n      textWithDisclaimer: this.#textWithDisclaimer\n    };\n  }\n  get data() {\n    return {\n      altText: this.#altText,\n      decorative: this.#altTextDecorative\n    };\n  }\n  set data({\n    altText,\n    decorative,\n    guessedText,\n    textWithDisclaimer,\n    cancel = false\n  }) {\n    if (guessedText) {\n      this.#guessedText = guessedText;\n      this.#textWithDisclaimer = textWithDisclaimer;\n    }\n    if (this.#altText === altText && this.#altTextDecorative === decorative) {\n      return;\n    }\n    if (!cancel) {\n      this.#altText = altText;\n      this.#altTextDecorative = decorative;\n    }\n    this.#setState();\n  }\n  toggle(enabled = false) {\n    if (!this.#altTextButton) {\n      return;\n    }\n    if (!enabled && this.#altTextTooltipTimeout) {\n      clearTimeout(this.#altTextTooltipTimeout);\n      this.#altTextTooltipTimeout = null;\n    }\n    this.#altTextButton.disabled = !enabled;\n  }\n  shown() {\n    this.#editor._reportTelemetry({\n      action: \"pdfjs.image.alt_text.image_status_label_displayed\",\n      data: {\n        label: this.#label\n      }\n    });\n  }\n  destroy() {\n    this.#altTextButton?.remove();\n    this.#altTextButton = null;\n    this.#altTextButtonLabel = null;\n    this.#altTextTooltip = null;\n    this.#badge?.remove();\n    this.#badge = null;\n  }\n  async #setState() {\n    const button = this.#altTextButton;\n    if (!button) {\n      return;\n    }\n    if (this.#useNewAltTextFlow) {\n      button.classList.toggle(\"done\", !!this.#altText);\n      button.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[this.#label]);\n      this.#altTextButtonLabel?.setAttribute(\"data-l10n-id\", AltText.#l10nNewButton[`${this.#label}-label`]);\n      if (!this.#altText) {\n        this.#altTextTooltip?.remove();\n        return;\n      }\n    } else {\n      if (!this.#altText && !this.#altTextDecorative) {\n        button.classList.remove(\"done\");\n        this.#altTextTooltip?.remove();\n        return;\n      }\n      button.classList.add(\"done\");\n      button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-edit-button\");\n    }\n    let tooltip = this.#altTextTooltip;\n    if (!tooltip) {\n      this.#altTextTooltip = tooltip = document.createElement(\"span\");\n      tooltip.className = \"tooltip\";\n      tooltip.setAttribute(\"role\", \"tooltip\");\n      tooltip.id = `alt-text-tooltip-${this.#editor.id}`;\n      const DELAY_TO_SHOW_TOOLTIP = 100;\n      const signal = this.#editor._uiManager._signal;\n      signal.addEventListener(\"abort\", () => {\n        clearTimeout(this.#altTextTooltipTimeout);\n        this.#altTextTooltipTimeout = null;\n      }, {\n        once: true\n      });\n      button.addEventListener(\"mouseenter\", () => {\n        this.#altTextTooltipTimeout = setTimeout(() => {\n          this.#altTextTooltipTimeout = null;\n          this.#altTextTooltip.classList.add(\"show\");\n          this.#editor._reportTelemetry({\n            action: \"alt_text_tooltip\"\n          });\n        }, DELAY_TO_SHOW_TOOLTIP);\n      }, {\n        signal\n      });\n      button.addEventListener(\"mouseleave\", () => {\n        if (this.#altTextTooltipTimeout) {\n          clearTimeout(this.#altTextTooltipTimeout);\n          this.#altTextTooltipTimeout = null;\n        }\n        this.#altTextTooltip?.classList.remove(\"show\");\n      }, {\n        signal\n      });\n    }\n    if (this.#altTextDecorative) {\n      tooltip.setAttribute(\"data-l10n-id\", \"pdfjs-editor-alt-text-decorative-tooltip\");\n    } else {\n      tooltip.removeAttribute(\"data-l10n-id\");\n      tooltip.textContent = this.#altText;\n    }\n    if (!tooltip.parentNode) {\n      button.append(tooltip);\n    }\n    const element = this.#editor.getElementForAltText();\n    element?.setAttribute(\"aria-describedby\", tooltip.id);\n  }\n}\n\n;// ./src/display/touch_manager.js\n\nclass TouchManager {\n  #container;\n  #isPinching = false;\n  #isPinchingStopped = null;\n  #isPinchingDisabled;\n  #onPinchStart;\n  #onPinching;\n  #onPinchEnd;\n  #pointerDownAC = null;\n  #signal;\n  #touchInfo = null;\n  #touchManagerAC;\n  #touchMoveAC = null;\n  constructor({\n    container,\n    isPinchingDisabled = null,\n    isPinchingStopped = null,\n    onPinchStart = null,\n    onPinching = null,\n    onPinchEnd = null,\n    signal\n  }) {\n    this.#container = container;\n    this.#isPinchingStopped = isPinchingStopped;\n    this.#isPinchingDisabled = isPinchingDisabled;\n    this.#onPinchStart = onPinchStart;\n    this.#onPinching = onPinching;\n    this.#onPinchEnd = onPinchEnd;\n    this.#touchManagerAC = new AbortController();\n    this.#signal = AbortSignal.any([signal, this.#touchManagerAC.signal]);\n    container.addEventListener(\"touchstart\", this.#onTouchStart.bind(this), {\n      passive: false,\n      signal: this.#signal\n    });\n  }\n  get MIN_TOUCH_DISTANCE_TO_PINCH() {\n    return 35 / OutputScale.pixelRatio;\n  }\n  #onTouchStart(evt) {\n    if (this.#isPinchingDisabled?.()) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.#pointerDownAC) {\n        return;\n      }\n      const pointerDownAC = this.#pointerDownAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, pointerDownAC.signal]);\n      const container = this.#container;\n      const opts = {\n        capture: true,\n        signal,\n        passive: false\n      };\n      const cancelPointerDown = e => {\n        if (e.pointerType === \"touch\") {\n          this.#pointerDownAC?.abort();\n          this.#pointerDownAC = null;\n        }\n      };\n      container.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === \"touch\") {\n          stopEvent(e);\n          cancelPointerDown(e);\n        }\n      }, opts);\n      container.addEventListener(\"pointerup\", cancelPointerDown, opts);\n      container.addEventListener(\"pointercancel\", cancelPointerDown, opts);\n      return;\n    }\n    if (!this.#touchMoveAC) {\n      this.#touchMoveAC = new AbortController();\n      const signal = AbortSignal.any([this.#signal, this.#touchMoveAC.signal]);\n      const container = this.#container;\n      const opt = {\n        signal,\n        capture: false,\n        passive: false\n      };\n      container.addEventListener(\"touchmove\", this.#onTouchMove.bind(this), opt);\n      const onTouchEnd = this.#onTouchEnd.bind(this);\n      container.addEventListener(\"touchend\", onTouchEnd, opt);\n      container.addEventListener(\"touchcancel\", onTouchEnd, opt);\n      opt.capture = true;\n      container.addEventListener(\"pointerdown\", stopEvent, opt);\n      container.addEventListener(\"pointermove\", stopEvent, opt);\n      container.addEventListener(\"pointercancel\", stopEvent, opt);\n      container.addEventListener(\"pointerup\", stopEvent, opt);\n      this.#onPinchStart?.();\n    }\n    stopEvent(evt);\n    if (evt.touches.length !== 2 || this.#isPinchingStopped?.()) {\n      this.#touchInfo = null;\n      return;\n    }\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    this.#touchInfo = {\n      touch0X: touch0.screenX,\n      touch0Y: touch0.screenY,\n      touch1X: touch1.screenX,\n      touch1Y: touch1.screenY\n    };\n  }\n  #onTouchMove(evt) {\n    if (!this.#touchInfo || evt.touches.length !== 2) {\n      return;\n    }\n    stopEvent(evt);\n    let [touch0, touch1] = evt.touches;\n    if (touch0.identifier > touch1.identifier) {\n      [touch0, touch1] = [touch1, touch0];\n    }\n    const {\n      screenX: screen0X,\n      screenY: screen0Y\n    } = touch0;\n    const {\n      screenX: screen1X,\n      screenY: screen1Y\n    } = touch1;\n    const touchInfo = this.#touchInfo;\n    const {\n      touch0X: pTouch0X,\n      touch0Y: pTouch0Y,\n      touch1X: pTouch1X,\n      touch1Y: pTouch1Y\n    } = touchInfo;\n    const prevGapX = pTouch1X - pTouch0X;\n    const prevGapY = pTouch1Y - pTouch0Y;\n    const currGapX = screen1X - screen0X;\n    const currGapY = screen1Y - screen0Y;\n    const distance = Math.hypot(currGapX, currGapY) || 1;\n    const pDistance = Math.hypot(prevGapX, prevGapY) || 1;\n    if (!this.#isPinching && Math.abs(pDistance - distance) <= TouchManager.MIN_TOUCH_DISTANCE_TO_PINCH) {\n      return;\n    }\n    touchInfo.touch0X = screen0X;\n    touchInfo.touch0Y = screen0Y;\n    touchInfo.touch1X = screen1X;\n    touchInfo.touch1Y = screen1Y;\n    if (!this.#isPinching) {\n      this.#isPinching = true;\n      return;\n    }\n    const origin = [(screen0X + screen1X) / 2, (screen0Y + screen1Y) / 2];\n    this.#onPinching?.(origin, pDistance, distance);\n  }\n  #onTouchEnd(evt) {\n    if (evt.touches.length >= 2) {\n      return;\n    }\n    if (this.#touchMoveAC) {\n      this.#touchMoveAC.abort();\n      this.#touchMoveAC = null;\n      this.#onPinchEnd?.();\n    }\n    if (!this.#touchInfo) {\n      return;\n    }\n    stopEvent(evt);\n    this.#touchInfo = null;\n    this.#isPinching = false;\n  }\n  destroy() {\n    this.#touchManagerAC?.abort();\n    this.#touchManagerAC = null;\n    this.#pointerDownAC?.abort();\n    this.#pointerDownAC = null;\n  }\n}\n\n;// ./src/display/editor/editor.js\n\n\n\n\n\n\nclass AnnotationEditor {\n  #accessibilityData = null;\n  #allResizerDivs = null;\n  #altText = null;\n  #disabled = false;\n  #dragPointerId = null;\n  #dragPointerType = \"\";\n  #keepAspectRatio = false;\n  #resizersDiv = null;\n  #lastPointerCoords = null;\n  #savedDimensions = null;\n  #focusAC = null;\n  #focusedResizerName = \"\";\n  #hasBeenClicked = false;\n  #initialRect = null;\n  #isEditing = false;\n  #isInEditMode = false;\n  #isResizerEnabledForKeyboard = false;\n  #moveInDOMTimeout = null;\n  #prevDragX = 0;\n  #prevDragY = 0;\n  #telemetryTimeouts = null;\n  #touchManager = null;\n  isSelected = false;\n  _isCopy = false;\n  _editToolbar = null;\n  _initialOptions = Object.create(null);\n  _initialData = null;\n  _isVisible = true;\n  _uiManager = null;\n  _focusEventsAllowed = true;\n  static _l10n = null;\n  static _l10nResizer = null;\n  #isDraggable = false;\n  #zIndex = AnnotationEditor._zIndex++;\n  static _borderLineWidth = -1;\n  static _colorManager = new ColorManager();\n  static _zIndex = 1;\n  static _telemetryTimeout = 1000;\n  static get _resizerKeyboardManager() {\n    const resize = AnnotationEditor.prototype._resizeWithKeyboard;\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_resizerKeyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], resize, {\n      args: [-small, 0]\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], resize, {\n      args: [-big, 0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], resize, {\n      args: [small, 0]\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], resize, {\n      args: [big, 0]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], resize, {\n      args: [0, -small]\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], resize, {\n      args: [0, -big]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], resize, {\n      args: [0, small]\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], resize, {\n      args: [0, big]\n    }], [[\"Escape\", \"mac+Escape\"], AnnotationEditor.prototype._stopResizingWithKeyboard]]));\n  }\n  constructor(parameters) {\n    this.parent = parameters.parent;\n    this.id = parameters.id;\n    this.width = this.height = null;\n    this.pageIndex = parameters.parent.pageIndex;\n    this.name = parameters.name;\n    this.div = null;\n    this._uiManager = parameters.uiManager;\n    this.annotationElementId = null;\n    this._willKeepAspectRatio = false;\n    this._initialOptions.isCentered = parameters.isCentered;\n    this._structTreeParentId = null;\n    this.annotationElementId = parameters.annotationElementId || null;\n    const {\n      rotation,\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = this.parent.viewport;\n    this.rotation = rotation;\n    this.pageRotation = (360 + rotation - this._uiManager.viewParameters.rotation) % 360;\n    this.pageDimensions = [pageWidth, pageHeight];\n    this.pageTranslation = [pageX, pageY];\n    const [width, height] = this.parentDimensions;\n    this.x = parameters.x / width;\n    this.y = parameters.y / height;\n    this.isAttachedToDOM = false;\n    this.deleted = false;\n  }\n  get editorType() {\n    return Object.getPrototypeOf(this).constructor._type;\n  }\n  get mode() {\n    return Object.getPrototypeOf(this).constructor._editorType;\n  }\n  static get isDrawer() {\n    return false;\n  }\n  static get _defaultLineColor() {\n    return shadow(this, \"_defaultLineColor\", this._colorManager.getHexCode(\"CanvasText\"));\n  }\n  static deleteAnnotationElement(editor) {\n    const fakeEditor = new FakeEditor({\n      id: editor.parent.getNextId(),\n      parent: editor.parent,\n      uiManager: editor._uiManager\n    });\n    fakeEditor.annotationElementId = editor.annotationElementId;\n    fakeEditor.deleted = true;\n    fakeEditor._uiManager.addToAnnotationStorage(fakeEditor);\n  }\n  static initialize(l10n, _uiManager) {\n    AnnotationEditor._l10n ??= l10n;\n    AnnotationEditor._l10nResizer ||= Object.freeze({\n      topLeft: \"pdfjs-editor-resizer-top-left\",\n      topMiddle: \"pdfjs-editor-resizer-top-middle\",\n      topRight: \"pdfjs-editor-resizer-top-right\",\n      middleRight: \"pdfjs-editor-resizer-middle-right\",\n      bottomRight: \"pdfjs-editor-resizer-bottom-right\",\n      bottomMiddle: \"pdfjs-editor-resizer-bottom-middle\",\n      bottomLeft: \"pdfjs-editor-resizer-bottom-left\",\n      middleLeft: \"pdfjs-editor-resizer-middle-left\"\n    });\n    if (AnnotationEditor._borderLineWidth !== -1) {\n      return;\n    }\n    const style = getComputedStyle(document.documentElement);\n    AnnotationEditor._borderLineWidth = parseFloat(style.getPropertyValue(\"--outline-width\")) || 0;\n  }\n  static updateDefaultParams(_type, _value) {}\n  static get defaultPropertiesToUpdate() {\n    return [];\n  }\n  static isHandlingMimeForPasting(mime) {\n    return false;\n  }\n  static paste(item, parent) {\n    unreachable(\"Not implemented\");\n  }\n  get propertiesToUpdate() {\n    return [];\n  }\n  get _isDraggable() {\n    return this.#isDraggable;\n  }\n  set _isDraggable(value) {\n    this.#isDraggable = value;\n    this.div?.classList.toggle(\"draggable\", value);\n  }\n  get isEnterHandled() {\n    return true;\n  }\n  center() {\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    switch (this.parentRotation) {\n      case 90:\n        this.x -= this.height * pageHeight / (pageWidth * 2);\n        this.y += this.width * pageWidth / (pageHeight * 2);\n        break;\n      case 180:\n        this.x += this.width / 2;\n        this.y += this.height / 2;\n        break;\n      case 270:\n        this.x += this.height * pageHeight / (pageWidth * 2);\n        this.y -= this.width * pageWidth / (pageHeight * 2);\n        break;\n      default:\n        this.x -= this.width / 2;\n        this.y -= this.height / 2;\n        break;\n    }\n    this.fixAndSetPosition();\n  }\n  addCommands(params) {\n    this._uiManager.addCommands(params);\n  }\n  get currentLayer() {\n    return this._uiManager.currentLayer;\n  }\n  setInBackground() {\n    this.div.style.zIndex = 0;\n  }\n  setInForeground() {\n    this.div.style.zIndex = this.#zIndex;\n  }\n  setParent(parent) {\n    if (parent !== null) {\n      this.pageIndex = parent.pageIndex;\n      this.pageDimensions = parent.pageDimensions;\n    } else {\n      this.#stopResizing();\n    }\n    this.parent = parent;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.#hasBeenClicked) {\n      this.parent.setSelected(this);\n    } else {\n      this.#hasBeenClicked = false;\n    }\n  }\n  focusout(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      return;\n    }\n    const target = event.relatedTarget;\n    if (target?.closest(`#${this.id}`)) {\n      return;\n    }\n    event.preventDefault();\n    if (!this.parent?.isMultipleSelection) {\n      this.commitOrRemove();\n    }\n  }\n  commitOrRemove() {\n    if (this.isEmpty()) {\n      this.remove();\n    } else {\n      this.commit();\n    }\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    this.addToAnnotationStorage();\n  }\n  addToAnnotationStorage() {\n    this._uiManager.addToAnnotationStorage(this);\n  }\n  setAt(x, y, tx, ty) {\n    const [width, height] = this.parentDimensions;\n    [tx, ty] = this.screenToPageTranslation(tx, ty);\n    this.x = (x + tx) / width;\n    this.y = (y + ty) / height;\n    this.fixAndSetPosition();\n  }\n  _moveAfterPaste(baseX, baseY) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setAt(baseX * parentWidth, baseY * parentHeight, this.width * parentWidth, this.height * parentHeight);\n    this._onTranslated();\n  }\n  #translate([width, height], x, y) {\n    [x, y] = this.screenToPageTranslation(x, y);\n    this.x += x / width;\n    this.y += y / height;\n    this._onTranslating(this.x, this.y);\n    this.fixAndSetPosition();\n  }\n  translate(x, y) {\n    this.#translate(this.parentDimensions, x, y);\n  }\n  translateInPage(x, y) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.#translate(this.pageDimensions, x, y);\n    this.div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  translationDone() {\n    this._onTranslated(this.x, this.y);\n  }\n  drag(tx, ty) {\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    const {\n      div,\n      parentDimensions: [parentWidth, parentHeight]\n    } = this;\n    this.x += tx / parentWidth;\n    this.y += ty / parentHeight;\n    if (this.parent && (this.x < 0 || this.x > 1 || this.y < 0 || this.y > 1)) {\n      const {\n        x,\n        y\n      } = this.div.getBoundingClientRect();\n      if (this.parent.findNewParent(this, x, y)) {\n        this.x -= Math.floor(this.x);\n        this.y -= Math.floor(this.y);\n      }\n    }\n    let {\n      x,\n      y\n    } = this;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    const {\n      style\n    } = div;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this._onTranslating(x, y);\n    div.scrollIntoView({\n      block: \"nearest\"\n    });\n  }\n  _onTranslating(x, y) {}\n  _onTranslated(x, y) {}\n  get _hasBeenMoved() {\n    return !!this.#initialRect && (this.#initialRect[0] !== this.x || this.#initialRect[1] !== this.y);\n  }\n  get _hasBeenResized() {\n    return !!this.#initialRect && (this.#initialRect[2] !== this.width || this.#initialRect[3] !== this.height);\n  }\n  getBaseTranslation() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      _borderLineWidth\n    } = AnnotationEditor;\n    const x = _borderLineWidth / parentWidth;\n    const y = _borderLineWidth / parentHeight;\n    switch (this.rotation) {\n      case 90:\n        return [-x, y];\n      case 180:\n        return [x, y];\n      case 270:\n        return [x, -y];\n      default:\n        return [-x, -y];\n    }\n  }\n  get _mustFixPosition() {\n    return true;\n  }\n  fixAndSetPosition(rotation = this.rotation) {\n    const {\n      div: {\n        style\n      },\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    let {\n      x,\n      y,\n      width,\n      height\n    } = this;\n    width *= pageWidth;\n    height *= pageHeight;\n    x *= pageWidth;\n    y *= pageHeight;\n    if (this._mustFixPosition) {\n      switch (rotation) {\n        case 0:\n          x = MathClamp(x, 0, pageWidth - width);\n          y = MathClamp(y, 0, pageHeight - height);\n          break;\n        case 90:\n          x = MathClamp(x, 0, pageWidth - height);\n          y = MathClamp(y, width, pageHeight);\n          break;\n        case 180:\n          x = MathClamp(x, width, pageWidth);\n          y = MathClamp(y, height, pageHeight);\n          break;\n        case 270:\n          x = MathClamp(x, height, pageWidth);\n          y = MathClamp(y, 0, pageHeight - width);\n          break;\n      }\n    }\n    this.x = x /= pageWidth;\n    this.y = y /= pageHeight;\n    const [bx, by] = this.getBaseTranslation();\n    x += bx;\n    y += by;\n    style.left = `${(100 * x).toFixed(2)}%`;\n    style.top = `${(100 * y).toFixed(2)}%`;\n    this.moveInDOM();\n  }\n  static #rotatePoint(x, y, angle) {\n    switch (angle) {\n      case 90:\n        return [y, -x];\n      case 180:\n        return [-x, -y];\n      case 270:\n        return [-y, x];\n      default:\n        return [x, y];\n    }\n  }\n  screenToPageTranslation(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, this.parentRotation);\n  }\n  pageTranslationToScreen(x, y) {\n    return AnnotationEditor.#rotatePoint(x, y, 360 - this.parentRotation);\n  }\n  #getRotationMatrix(rotation) {\n    switch (rotation) {\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, -pageWidth / pageHeight, pageHeight / pageWidth, 0];\n        }\n      case 180:\n        return [-1, 0, 0, -1];\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.pageDimensions;\n          return [0, pageWidth / pageHeight, -pageHeight / pageWidth, 0];\n        }\n      default:\n        return [1, 0, 0, 1];\n    }\n  }\n  get parentScale() {\n    return this._uiManager.viewParameters.realScale;\n  }\n  get parentRotation() {\n    return (this._uiManager.viewParameters.rotation + this.pageRotation) % 360;\n  }\n  get parentDimensions() {\n    const {\n      parentScale,\n      pageDimensions: [pageWidth, pageHeight]\n    } = this;\n    return [pageWidth * parentScale, pageHeight * parentScale];\n  }\n  setDims(width, height) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      style\n    } = this.div;\n    style.width = `${(100 * width / parentWidth).toFixed(2)}%`;\n    if (!this.#keepAspectRatio) {\n      style.height = `${(100 * height / parentHeight).toFixed(2)}%`;\n    }\n  }\n  fixDims() {\n    const {\n      style\n    } = this.div;\n    const {\n      height,\n      width\n    } = style;\n    const widthPercent = width.endsWith(\"%\");\n    const heightPercent = !this.#keepAspectRatio && height.endsWith(\"%\");\n    if (widthPercent && heightPercent) {\n      return;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (!widthPercent) {\n      style.width = `${(100 * parseFloat(width) / parentWidth).toFixed(2)}%`;\n    }\n    if (!this.#keepAspectRatio && !heightPercent) {\n      style.height = `${(100 * parseFloat(height) / parentHeight).toFixed(2)}%`;\n    }\n  }\n  getInitialTranslation() {\n    return [0, 0];\n  }\n  #createResizers() {\n    if (this.#resizersDiv) {\n      return;\n    }\n    this.#resizersDiv = document.createElement(\"div\");\n    this.#resizersDiv.classList.add(\"resizers\");\n    const classes = this._willKeepAspectRatio ? [\"topLeft\", \"topRight\", \"bottomRight\", \"bottomLeft\"] : [\"topLeft\", \"topMiddle\", \"topRight\", \"middleRight\", \"bottomRight\", \"bottomMiddle\", \"bottomLeft\", \"middleLeft\"];\n    const signal = this._uiManager._signal;\n    for (const name of classes) {\n      const div = document.createElement(\"div\");\n      this.#resizersDiv.append(div);\n      div.classList.add(\"resizer\", name);\n      div.setAttribute(\"data-resizer-name\", name);\n      div.addEventListener(\"pointerdown\", this.#resizerPointerdown.bind(this, name), {\n        signal\n      });\n      div.addEventListener(\"contextmenu\", noContextMenu, {\n        signal\n      });\n      div.tabIndex = -1;\n    }\n    this.div.prepend(this.#resizersDiv);\n  }\n  #resizerPointerdown(name, event) {\n    event.preventDefault();\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    this.#altText?.toggle(false);\n    const savedDraggable = this._isDraggable;\n    this._isDraggable = false;\n    this.#lastPointerCoords = [event.screenX, event.screenY];\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    this.parent.togglePointerEvents(false);\n    window.addEventListener(\"pointermove\", this.#resizerPointermove.bind(this, name), {\n      passive: true,\n      capture: true,\n      signal\n    });\n    window.addEventListener(\"touchmove\", stopEvent, {\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const savedParentCursor = this.parent.div.style.cursor;\n    const savedCursor = this.div.style.cursor;\n    this.div.style.cursor = this.parent.div.style.cursor = window.getComputedStyle(event.target).cursor;\n    const pointerUpCallback = () => {\n      ac.abort();\n      this.parent.togglePointerEvents(true);\n      this.#altText?.toggle(true);\n      this._isDraggable = savedDraggable;\n      this.parent.div.style.cursor = savedParentCursor;\n      this.div.style.cursor = savedCursor;\n      this.#addResizeToUndoStack();\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  #resize(x, y, width, height) {\n    this.width = width;\n    this.height = height;\n    this.x = x;\n    this.y = y;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(parentWidth * width, parentHeight * height);\n    this.fixAndSetPosition();\n    this._onResized();\n  }\n  _onResized() {}\n  #addResizeToUndoStack() {\n    if (!this.#savedDimensions) {\n      return;\n    }\n    const {\n      savedX,\n      savedY,\n      savedWidth,\n      savedHeight\n    } = this.#savedDimensions;\n    this.#savedDimensions = null;\n    const newX = this.x;\n    const newY = this.y;\n    const newWidth = this.width;\n    const newHeight = this.height;\n    if (newX === savedX && newY === savedY && newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.addCommands({\n      cmd: this.#resize.bind(this, newX, newY, newWidth, newHeight),\n      undo: this.#resize.bind(this, savedX, savedY, savedWidth, savedHeight),\n      mustExec: true\n    });\n  }\n  static _round(x) {\n    return Math.round(x * 10000) / 10000;\n  }\n  #resizerPointermove(name, event) {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const invRotationMatrix = this.#getRotationMatrix(360 - this.rotation);\n    const invTransf = (x, y) => [invRotationMatrix[0] * x + invRotationMatrix[2] * y, invRotationMatrix[1] * x + invRotationMatrix[3] * y];\n    let getPoint;\n    let getOpposite;\n    let isDiagonal = false;\n    let isHorizontal = false;\n    switch (name) {\n      case \"topLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, 0];\n        getOpposite = (w, h) => [w, h];\n        break;\n      case \"topMiddle\":\n        getPoint = (w, h) => [w / 2, 0];\n        getOpposite = (w, h) => [w / 2, h];\n        break;\n      case \"topRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, 0];\n        getOpposite = (w, h) => [0, h];\n        break;\n      case \"middleRight\":\n        isHorizontal = true;\n        getPoint = (w, h) => [w, h / 2];\n        getOpposite = (w, h) => [0, h / 2];\n        break;\n      case \"bottomRight\":\n        isDiagonal = true;\n        getPoint = (w, h) => [w, h];\n        getOpposite = (w, h) => [0, 0];\n        break;\n      case \"bottomMiddle\":\n        getPoint = (w, h) => [w / 2, h];\n        getOpposite = (w, h) => [w / 2, 0];\n        break;\n      case \"bottomLeft\":\n        isDiagonal = true;\n        getPoint = (w, h) => [0, h];\n        getOpposite = (w, h) => [w, 0];\n        break;\n      case \"middleLeft\":\n        isHorizontal = true;\n        getPoint = (w, h) => [0, h / 2];\n        getOpposite = (w, h) => [w, h / 2];\n        break;\n    }\n    const point = getPoint(savedWidth, savedHeight);\n    const oppositePoint = getOpposite(savedWidth, savedHeight);\n    let transfOppositePoint = transf(...oppositePoint);\n    const oppositeX = AnnotationEditor._round(savedX + transfOppositePoint[0]);\n    const oppositeY = AnnotationEditor._round(savedY + transfOppositePoint[1]);\n    let ratioX = 1;\n    let ratioY = 1;\n    let deltaX, deltaY;\n    if (!event.fromKeyboard) {\n      const {\n        screenX,\n        screenY\n      } = event;\n      const [lastScreenX, lastScreenY] = this.#lastPointerCoords;\n      [deltaX, deltaY] = this.screenToPageTranslation(screenX - lastScreenX, screenY - lastScreenY);\n      this.#lastPointerCoords[0] = screenX;\n      this.#lastPointerCoords[1] = screenY;\n    } else {\n      ({\n        deltaX,\n        deltaY\n      } = event);\n    }\n    [deltaX, deltaY] = invTransf(deltaX / parentWidth, deltaY / parentHeight);\n    if (isDiagonal) {\n      const oldDiag = Math.hypot(savedWidth, savedHeight);\n      ratioX = ratioY = Math.max(Math.min(Math.hypot(oppositePoint[0] - point[0] - deltaX, oppositePoint[1] - point[1] - deltaY) / oldDiag, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    } else if (isHorizontal) {\n      ratioX = MathClamp(Math.abs(oppositePoint[0] - point[0] - deltaX), minWidth, 1) / savedWidth;\n    } else {\n      ratioY = MathClamp(Math.abs(oppositePoint[1] - point[1] - deltaY), minHeight, 1) / savedHeight;\n    }\n    const newWidth = AnnotationEditor._round(savedWidth * ratioX);\n    const newHeight = AnnotationEditor._round(savedHeight * ratioY);\n    transfOppositePoint = transf(...getOpposite(newWidth, newHeight));\n    const newX = oppositeX - transfOppositePoint[0];\n    const newY = oppositeY - transfOppositePoint[1];\n    this.#initialRect ||= [this.x, this.y, this.width, this.height];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.x = newX;\n    this.y = newY;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  _onResizing() {}\n  altTextFinish() {\n    this.#altText?.finish();\n  }\n  get toolbarButtons() {\n    return null;\n  }\n  async addEditToolbar() {\n    if (this._editToolbar || this.#isInEditMode) {\n      return this._editToolbar;\n    }\n    this._editToolbar = new EditorToolbar(this);\n    this.div.append(this._editToolbar.render());\n    const {\n      toolbarButtons\n    } = this;\n    if (toolbarButtons) {\n      for (const [name, tool] of toolbarButtons) {\n        await this._editToolbar.addButton(name, tool);\n      }\n    }\n    this._editToolbar.addButton(\"delete\");\n    return this._editToolbar;\n  }\n  removeEditToolbar() {\n    if (!this._editToolbar) {\n      return;\n    }\n    this._editToolbar.remove();\n    this._editToolbar = null;\n    this.#altText?.destroy();\n  }\n  addContainer(container) {\n    const editToolbarDiv = this._editToolbar?.div;\n    if (editToolbarDiv) {\n      editToolbarDiv.before(container);\n    } else {\n      this.div.append(container);\n    }\n  }\n  getClientDimensions() {\n    return this.div.getBoundingClientRect();\n  }\n  createAltText() {\n    if (!this.#altText) {\n      AltText.initialize(AnnotationEditor._l10n);\n      this.#altText = new AltText(this);\n      if (this.#accessibilityData) {\n        this.#altText.data = this.#accessibilityData;\n        this.#accessibilityData = null;\n      }\n    }\n    return this.#altText;\n  }\n  get altTextData() {\n    return this.#altText?.data;\n  }\n  set altTextData(data) {\n    if (!this.#altText) {\n      return;\n    }\n    this.#altText.data = data;\n  }\n  get guessedAltText() {\n    return this.#altText?.guessedText;\n  }\n  async setGuessedAltText(text) {\n    await this.#altText?.setGuessedText(text);\n  }\n  serializeAltText(isForCopying) {\n    return this.#altText?.serialize(isForCopying);\n  }\n  hasAltText() {\n    return !!this.#altText && !this.#altText.isEmpty();\n  }\n  hasAltTextData() {\n    return this.#altText?.hasData() ?? false;\n  }\n  render() {\n    const div = this.div = document.createElement(\"div\");\n    div.setAttribute(\"data-editor-rotation\", (360 - this.rotation) % 360);\n    div.className = this.name;\n    div.setAttribute(\"id\", this.id);\n    div.tabIndex = this.#disabled ? -1 : 0;\n    div.setAttribute(\"role\", \"application\");\n    if (this.defaultL10nId) {\n      div.setAttribute(\"data-l10n-id\", this.defaultL10nId);\n    }\n    if (!this._isVisible) {\n      div.classList.add(\"hidden\");\n    }\n    this.setInForeground();\n    this.#addFocusListeners();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    if (this.parentRotation % 180 !== 0) {\n      div.style.maxWidth = `${(100 * parentHeight / parentWidth).toFixed(2)}%`;\n      div.style.maxHeight = `${(100 * parentWidth / parentHeight).toFixed(2)}%`;\n    }\n    const [tx, ty] = this.getInitialTranslation();\n    this.translate(tx, ty);\n    bindEvents(this, div, [\"keydown\", \"pointerdown\", \"dblclick\"]);\n    if (this.isResizable && this._uiManager._supportsPinchToZoom) {\n      this.#touchManager ||= new TouchManager({\n        container: div,\n        isPinchingDisabled: () => !this.isSelected,\n        onPinchStart: this.#touchPinchStartCallback.bind(this),\n        onPinching: this.#touchPinchCallback.bind(this),\n        onPinchEnd: this.#touchPinchEndCallback.bind(this),\n        signal: this._uiManager._signal\n      });\n    }\n    this._uiManager._editorUndoBar?.hide();\n    return div;\n  }\n  #touchPinchStartCallback() {\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    this.#altText?.toggle(false);\n    this.parent.togglePointerEvents(false);\n  }\n  #touchPinchCallback(_origin, prevDistance, distance) {\n    const slowDownFactor = 0.7;\n    let factor = slowDownFactor * (distance / prevDistance) + 1 - slowDownFactor;\n    if (factor === 1) {\n      return;\n    }\n    const rotationMatrix = this.#getRotationMatrix(this.rotation);\n    const transf = (x, y) => [rotationMatrix[0] * x + rotationMatrix[2] * y, rotationMatrix[1] * x + rotationMatrix[3] * y];\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const savedX = this.x;\n    const savedY = this.y;\n    const savedWidth = this.width;\n    const savedHeight = this.height;\n    const minWidth = AnnotationEditor.MIN_SIZE / parentWidth;\n    const minHeight = AnnotationEditor.MIN_SIZE / parentHeight;\n    factor = Math.max(Math.min(factor, 1 / savedWidth, 1 / savedHeight), minWidth / savedWidth, minHeight / savedHeight);\n    const newWidth = AnnotationEditor._round(savedWidth * factor);\n    const newHeight = AnnotationEditor._round(savedHeight * factor);\n    if (newWidth === savedWidth && newHeight === savedHeight) {\n      return;\n    }\n    this.#initialRect ||= [savedX, savedY, savedWidth, savedHeight];\n    const transfCenterPoint = transf(savedWidth / 2, savedHeight / 2);\n    const centerX = AnnotationEditor._round(savedX + transfCenterPoint[0]);\n    const centerY = AnnotationEditor._round(savedY + transfCenterPoint[1]);\n    const newTransfCenterPoint = transf(newWidth / 2, newHeight / 2);\n    this.x = centerX - newTransfCenterPoint[0];\n    this.y = centerY - newTransfCenterPoint[1];\n    this.width = newWidth;\n    this.height = newHeight;\n    this.setDims(parentWidth * newWidth, parentHeight * newHeight);\n    this.fixAndSetPosition();\n    this._onResizing();\n  }\n  #touchPinchEndCallback() {\n    this.#altText?.toggle(true);\n    this.parent.togglePointerEvents(true);\n    this.#addResizeToUndoStack();\n  }\n  pointerdown(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      event.preventDefault();\n      return;\n    }\n    this.#hasBeenClicked = true;\n    if (this._isDraggable) {\n      this.#setUpDragSession(event);\n      return;\n    }\n    this.#selectOnPointerEvent(event);\n  }\n  #selectOnPointerEvent(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.ctrlKey && !isMac || event.shiftKey || event.metaKey && isMac) {\n      this.parent.toggleSelected(this);\n    } else {\n      this.parent.setSelected(this);\n    }\n  }\n  #setUpDragSession(event) {\n    const {\n      isSelected\n    } = this;\n    this._uiManager.setUpDragSession();\n    let hasDraggingStarted = false;\n    const ac = new AbortController();\n    const signal = this._uiManager.combinedSignal(ac);\n    const opts = {\n      capture: true,\n      passive: false,\n      signal\n    };\n    const cancelDrag = e => {\n      ac.abort();\n      this.#dragPointerId = null;\n      this.#hasBeenClicked = false;\n      if (!this._uiManager.endDragSession()) {\n        this.#selectOnPointerEvent(e);\n      }\n      if (hasDraggingStarted) {\n        this._onStopDragging();\n      }\n    };\n    if (isSelected) {\n      this.#prevDragX = event.clientX;\n      this.#prevDragY = event.clientY;\n      this.#dragPointerId = event.pointerId;\n      this.#dragPointerType = event.pointerType;\n      window.addEventListener(\"pointermove\", e => {\n        if (!hasDraggingStarted) {\n          hasDraggingStarted = true;\n          this._onStartDragging();\n        }\n        const {\n          clientX: x,\n          clientY: y,\n          pointerId\n        } = e;\n        if (pointerId !== this.#dragPointerId) {\n          stopEvent(e);\n          return;\n        }\n        const [tx, ty] = this.screenToPageTranslation(x - this.#prevDragX, y - this.#prevDragY);\n        this.#prevDragX = x;\n        this.#prevDragY = y;\n        this._uiManager.dragSelectedEditors(tx, ty);\n      }, opts);\n      window.addEventListener(\"touchmove\", stopEvent, opts);\n      window.addEventListener(\"pointerdown\", e => {\n        if (e.pointerType === this.#dragPointerType) {\n          if (this.#touchManager || e.isPrimary) {\n            cancelDrag(e);\n          }\n        }\n        stopEvent(e);\n      }, opts);\n    }\n    const pointerUpCallback = e => {\n      if (!this.#dragPointerId || this.#dragPointerId === e.pointerId) {\n        cancelDrag(e);\n        return;\n      }\n      stopEvent(e);\n    };\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n  }\n  _onStartDragging() {}\n  _onStopDragging() {}\n  moveInDOM() {\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n    }\n    this.#moveInDOMTimeout = setTimeout(() => {\n      this.#moveInDOMTimeout = null;\n      this.parent?.moveEditorInDOM(this);\n    }, 0);\n  }\n  _setParentAndPosition(parent, x, y) {\n    parent.changeParent(this);\n    this.x = x;\n    this.y = y;\n    this.fixAndSetPosition();\n    this._onTranslated();\n  }\n  getRect(tx, ty, rotation = this.rotation) {\n    const scale = this.parentScale;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const shiftX = tx / scale;\n    const shiftY = ty / scale;\n    const x = this.x * pageWidth;\n    const y = this.y * pageHeight;\n    const width = this.width * pageWidth;\n    const height = this.height * pageHeight;\n    switch (rotation) {\n      case 0:\n        return [x + shiftX + pageX, pageHeight - y - shiftY - height + pageY, x + shiftX + width + pageX, pageHeight - y - shiftY + pageY];\n      case 90:\n        return [x + shiftY + pageX, pageHeight - y + shiftX + pageY, x + shiftY + height + pageX, pageHeight - y + shiftX + width + pageY];\n      case 180:\n        return [x - shiftX - width + pageX, pageHeight - y + shiftY + pageY, x - shiftX + pageX, pageHeight - y + shiftY + height + pageY];\n      case 270:\n        return [x - shiftY - height + pageX, pageHeight - y - shiftX - width + pageY, x - shiftY + pageX, pageHeight - y - shiftX + pageY];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  getRectInCurrentCoords(rect, pageHeight) {\n    const [x1, y1, x2, y2] = rect;\n    const width = x2 - x1;\n    const height = y2 - y1;\n    switch (this.rotation) {\n      case 0:\n        return [x1, pageHeight - y2, width, height];\n      case 90:\n        return [x1, pageHeight - y1, height, width];\n      case 180:\n        return [x2, pageHeight - y1, width, height];\n      case 270:\n        return [x2, pageHeight - y2, height, width];\n      default:\n        throw new Error(\"Invalid rotation\");\n    }\n  }\n  onceAdded(focus) {}\n  isEmpty() {\n    return false;\n  }\n  enableEditMode() {\n    if (this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(false);\n    this.#isInEditMode = true;\n    return true;\n  }\n  disableEditMode() {\n    if (!this.isInEditMode()) {\n      return false;\n    }\n    this.parent.setEditingState(true);\n    this.#isInEditMode = false;\n    return true;\n  }\n  isInEditMode() {\n    return this.#isInEditMode;\n  }\n  shouldGetKeyboardEvents() {\n    return this.#isResizerEnabledForKeyboard;\n  }\n  needsToBeRebuilt() {\n    return this.div && !this.isAttachedToDOM;\n  }\n  get isOnScreen() {\n    const {\n      top,\n      left,\n      bottom,\n      right\n    } = this.getClientDimensions();\n    const {\n      innerHeight,\n      innerWidth\n    } = window;\n    return left < innerWidth && right > 0 && top < innerHeight && bottom > 0;\n  }\n  #addFocusListeners() {\n    if (this.#focusAC || !this.div) {\n      return;\n    }\n    this.#focusAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#focusAC);\n    this.div.addEventListener(\"focusin\", this.focusin.bind(this), {\n      signal\n    });\n    this.div.addEventListener(\"focusout\", this.focusout.bind(this), {\n      signal\n    });\n  }\n  rebuild() {\n    this.#addFocusListeners();\n  }\n  rotate(_angle) {}\n  resize() {}\n  serializeDeleted() {\n    return {\n      id: this.annotationElementId,\n      deleted: true,\n      pageIndex: this.pageIndex,\n      popupRef: this._initialData?.popupRef || \"\"\n    };\n  }\n  serialize(isForCopying = false, context = null) {\n    unreachable(\"An editor must be serializable\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = new this.prototype.constructor({\n      parent,\n      id: parent.getNextId(),\n      uiManager,\n      annotationElementId: data.annotationElementId\n    });\n    editor.rotation = data.rotation;\n    editor.#accessibilityData = data.accessibilityData;\n    editor._isCopy = data.isCopy || false;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [x, y, width, height] = editor.getRectInCurrentCoords(data.rect, pageHeight);\n    editor.x = x / pageWidth;\n    editor.y = y / pageHeight;\n    editor.width = width / pageWidth;\n    editor.height = height / pageHeight;\n    return editor;\n  }\n  get hasBeenModified() {\n    return !!this.annotationElementId && (this.deleted || this.serialize() !== null);\n  }\n  remove() {\n    this.#focusAC?.abort();\n    this.#focusAC = null;\n    if (!this.isEmpty()) {\n      this.commit();\n    }\n    if (this.parent) {\n      this.parent.remove(this);\n    } else {\n      this._uiManager.removeEditor(this);\n    }\n    if (this.#moveInDOMTimeout) {\n      clearTimeout(this.#moveInDOMTimeout);\n      this.#moveInDOMTimeout = null;\n    }\n    this.#stopResizing();\n    this.removeEditToolbar();\n    if (this.#telemetryTimeouts) {\n      for (const timeout of this.#telemetryTimeouts.values()) {\n        clearTimeout(timeout);\n      }\n      this.#telemetryTimeouts = null;\n    }\n    this.parent = null;\n    this.#touchManager?.destroy();\n    this.#touchManager = null;\n  }\n  get isResizable() {\n    return false;\n  }\n  makeResizable() {\n    if (this.isResizable) {\n      this.#createResizers();\n      this.#resizersDiv.classList.remove(\"hidden\");\n    }\n  }\n  get toolbarPosition() {\n    return null;\n  }\n  keydown(event) {\n    if (!this.isResizable || event.target !== this.div || event.key !== \"Enter\") {\n      return;\n    }\n    this._uiManager.setSelected(this);\n    this.#savedDimensions = {\n      savedX: this.x,\n      savedY: this.y,\n      savedWidth: this.width,\n      savedHeight: this.height\n    };\n    const children = this.#resizersDiv.children;\n    if (!this.#allResizerDivs) {\n      this.#allResizerDivs = Array.from(children);\n      const boundResizerKeydown = this.#resizerKeydown.bind(this);\n      const boundResizerBlur = this.#resizerBlur.bind(this);\n      const signal = this._uiManager._signal;\n      for (const div of this.#allResizerDivs) {\n        const name = div.getAttribute(\"data-resizer-name\");\n        div.setAttribute(\"role\", \"spinbutton\");\n        div.addEventListener(\"keydown\", boundResizerKeydown, {\n          signal\n        });\n        div.addEventListener(\"blur\", boundResizerBlur, {\n          signal\n        });\n        div.addEventListener(\"focus\", this.#resizerFocus.bind(this, name), {\n          signal\n        });\n        div.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    const first = this.#allResizerDivs[0];\n    let firstPosition = 0;\n    for (const div of children) {\n      if (div === first) {\n        break;\n      }\n      firstPosition++;\n    }\n    const nextFirstPosition = (360 - this.rotation + this.parentRotation) % 360 / 90 * (this.#allResizerDivs.length / 4);\n    if (nextFirstPosition !== firstPosition) {\n      if (nextFirstPosition < firstPosition) {\n        for (let i = 0; i < firstPosition - nextFirstPosition; i++) {\n          this.#resizersDiv.append(this.#resizersDiv.firstChild);\n        }\n      } else if (nextFirstPosition > firstPosition) {\n        for (let i = 0; i < nextFirstPosition - firstPosition; i++) {\n          this.#resizersDiv.firstChild.before(this.#resizersDiv.lastChild);\n        }\n      }\n      let i = 0;\n      for (const child of children) {\n        const div = this.#allResizerDivs[i++];\n        const name = div.getAttribute(\"data-resizer-name\");\n        child.setAttribute(\"data-l10n-id\", AnnotationEditor._l10nResizer[name]);\n      }\n    }\n    this.#setResizerTabIndex(0);\n    this.#isResizerEnabledForKeyboard = true;\n    this.#resizersDiv.firstChild.focus({\n      focusVisible: true\n    });\n    event.preventDefault();\n    event.stopImmediatePropagation();\n  }\n  #resizerKeydown(event) {\n    AnnotationEditor._resizerKeyboardManager.exec(this, event);\n  }\n  #resizerBlur(event) {\n    if (this.#isResizerEnabledForKeyboard && event.relatedTarget?.parentNode !== this.#resizersDiv) {\n      this.#stopResizing();\n    }\n  }\n  #resizerFocus(name) {\n    this.#focusedResizerName = this.#isResizerEnabledForKeyboard ? name : \"\";\n  }\n  #setResizerTabIndex(value) {\n    if (!this.#allResizerDivs) {\n      return;\n    }\n    for (const div of this.#allResizerDivs) {\n      div.tabIndex = value;\n    }\n  }\n  _resizeWithKeyboard(x, y) {\n    if (!this.#isResizerEnabledForKeyboard) {\n      return;\n    }\n    this.#resizerPointermove(this.#focusedResizerName, {\n      deltaX: x,\n      deltaY: y,\n      fromKeyboard: true\n    });\n  }\n  #stopResizing() {\n    this.#isResizerEnabledForKeyboard = false;\n    this.#setResizerTabIndex(-1);\n    this.#addResizeToUndoStack();\n  }\n  _stopResizingWithKeyboard() {\n    this.#stopResizing();\n    this.div.focus();\n  }\n  select() {\n    if (this.isSelected && this._editToolbar) {\n      return;\n    }\n    this.isSelected = true;\n    this.makeResizable();\n    this.div?.classList.add(\"selectedEditor\");\n    if (!this._editToolbar) {\n      this.addEditToolbar().then(() => {\n        if (this.div?.classList.contains(\"selectedEditor\")) {\n          this._editToolbar?.show();\n        }\n      });\n      return;\n    }\n    this._editToolbar?.show();\n    this.#altText?.toggleAltTextBadge(false);\n  }\n  unselect() {\n    if (!this.isSelected) {\n      return;\n    }\n    this.isSelected = false;\n    this.#resizersDiv?.classList.add(\"hidden\");\n    this.div?.classList.remove(\"selectedEditor\");\n    if (this.div?.contains(document.activeElement)) {\n      this._uiManager.currentLayer.div.focus({\n        preventScroll: true\n      });\n    }\n    this._editToolbar?.hide();\n    this.#altText?.toggleAltTextBadge(true);\n  }\n  updateParams(type, value) {}\n  disableEditing() {}\n  enableEditing() {}\n  get canChangeContent() {\n    return false;\n  }\n  enterInEditMode() {\n    if (!this.canChangeContent) {\n      return;\n    }\n    this.enableEditMode();\n    this.div.focus();\n  }\n  dblclick(event) {\n    this.enterInEditMode();\n    this.parent.updateToolbar({\n      mode: this.constructor._editorType,\n      editId: this.id\n    });\n  }\n  getElementForAltText() {\n    return this.div;\n  }\n  get contentDiv() {\n    return this.div;\n  }\n  get isEditing() {\n    return this.#isEditing;\n  }\n  set isEditing(value) {\n    this.#isEditing = value;\n    if (!this.parent) {\n      return;\n    }\n    if (value) {\n      this.parent.setSelected(this);\n      this.parent.setActiveEditor(this);\n    } else {\n      this.parent.setActiveEditor(null);\n    }\n  }\n  setAspectRatio(width, height) {\n    this.#keepAspectRatio = true;\n    const aspectRatio = width / height;\n    const {\n      style\n    } = this.div;\n    style.aspectRatio = aspectRatio;\n    style.height = \"auto\";\n  }\n  static get MIN_SIZE() {\n    return 16;\n  }\n  static canCreateNewEmptyEditor() {\n    return true;\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\"\n    };\n  }\n  get telemetryFinalData() {\n    return null;\n  }\n  _reportTelemetry(data, mustWait = false) {\n    if (mustWait) {\n      this.#telemetryTimeouts ||= new Map();\n      const {\n        action\n      } = data;\n      let timeout = this.#telemetryTimeouts.get(action);\n      if (timeout) {\n        clearTimeout(timeout);\n      }\n      timeout = setTimeout(() => {\n        this._reportTelemetry(data);\n        this.#telemetryTimeouts.delete(action);\n        if (this.#telemetryTimeouts.size === 0) {\n          this.#telemetryTimeouts = null;\n        }\n      }, AnnotationEditor._telemetryTimeout);\n      this.#telemetryTimeouts.set(action, timeout);\n      return;\n    }\n    data.type ||= this.editorType;\n    this._uiManager._eventBus.dispatch(\"reporttelemetry\", {\n      source: this,\n      details: {\n        type: \"editing\",\n        data\n      }\n    });\n  }\n  show(visible = this._isVisible) {\n    this.div.classList.toggle(\"hidden\", !visible);\n    this._isVisible = visible;\n  }\n  enable() {\n    if (this.div) {\n      this.div.tabIndex = 0;\n    }\n    this.#disabled = false;\n  }\n  disable() {\n    if (this.div) {\n      this.div.tabIndex = -1;\n    }\n    this.#disabled = true;\n  }\n  renderAnnotationElement(annotation) {\n    let content = annotation.container.querySelector(\".annotationContent\");\n    if (!content) {\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      annotation.container.prepend(content);\n    } else if (content.nodeName === \"CANVAS\") {\n      const canvas = content;\n      content = document.createElement(\"div\");\n      content.classList.add(\"annotationContent\", this.editorType);\n      canvas.before(content);\n    }\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    const {\n      firstChild\n    } = annotation.container;\n    if (firstChild?.nodeName === \"DIV\" && firstChild.classList.contains(\"annotationContent\")) {\n      firstChild.remove();\n    }\n  }\n}\nclass FakeEditor extends AnnotationEditor {\n  constructor(params) {\n    super(params);\n    this.annotationElementId = params.annotationElementId;\n    this.deleted = true;\n  }\n  serialize() {\n    return this.serializeDeleted();\n  }\n}\n\n;// ./src/shared/murmurhash3.js\nconst SEED = 0xc3d2e1f0;\nconst MASK_HIGH = 0xffff0000;\nconst MASK_LOW = 0xffff;\nclass MurmurHash3_64 {\n  constructor(seed) {\n    this.h1 = seed ? seed & 0xffffffff : SEED;\n    this.h2 = seed ? seed & 0xffffffff : SEED;\n  }\n  update(input) {\n    let data, length;\n    if (typeof input === \"string\") {\n      data = new Uint8Array(input.length * 2);\n      length = 0;\n      for (let i = 0, ii = input.length; i < ii; i++) {\n        const code = input.charCodeAt(i);\n        if (code <= 0xff) {\n          data[length++] = code;\n        } else {\n          data[length++] = code >>> 8;\n          data[length++] = code & 0xff;\n        }\n      }\n    } else if (ArrayBuffer.isView(input)) {\n      data = input.slice();\n      length = data.byteLength;\n    } else {\n      throw new Error(\"Invalid data format, must be a string or TypedArray.\");\n    }\n    const blockCounts = length >> 2;\n    const tailLength = length - blockCounts * 4;\n    const dataUint32 = new Uint32Array(data.buffer, 0, blockCounts);\n    let k1 = 0,\n      k2 = 0;\n    let h1 = this.h1,\n      h2 = this.h2;\n    const C1 = 0xcc9e2d51,\n      C2 = 0x1b873593;\n    const C1_LOW = C1 & MASK_LOW,\n      C2_LOW = C2 & MASK_LOW;\n    for (let i = 0; i < blockCounts; i++) {\n      if (i & 1) {\n        k1 = dataUint32[i];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        h1 ^= k1;\n        h1 = h1 << 13 | h1 >>> 19;\n        h1 = h1 * 5 + 0xe6546b64;\n      } else {\n        k2 = dataUint32[i];\n        k2 = k2 * C1 & MASK_HIGH | k2 * C1_LOW & MASK_LOW;\n        k2 = k2 << 15 | k2 >>> 17;\n        k2 = k2 * C2 & MASK_HIGH | k2 * C2_LOW & MASK_LOW;\n        h2 ^= k2;\n        h2 = h2 << 13 | h2 >>> 19;\n        h2 = h2 * 5 + 0xe6546b64;\n      }\n    }\n    k1 = 0;\n    switch (tailLength) {\n      case 3:\n        k1 ^= data[blockCounts * 4 + 2] << 16;\n      case 2:\n        k1 ^= data[blockCounts * 4 + 1] << 8;\n      case 1:\n        k1 ^= data[blockCounts * 4];\n        k1 = k1 * C1 & MASK_HIGH | k1 * C1_LOW & MASK_LOW;\n        k1 = k1 << 15 | k1 >>> 17;\n        k1 = k1 * C2 & MASK_HIGH | k1 * C2_LOW & MASK_LOW;\n        if (blockCounts & 1) {\n          h1 ^= k1;\n        } else {\n          h2 ^= k1;\n        }\n    }\n    this.h1 = h1;\n    this.h2 = h2;\n  }\n  hexdigest() {\n    let h1 = this.h1,\n      h2 = this.h2;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0xed558ccd & MASK_HIGH | h1 * 0x8ccd & MASK_LOW;\n    h2 = h2 * 0xff51afd7 & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xafd7ed55 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    h1 = h1 * 0x1a85ec53 & MASK_HIGH | h1 * 0xec53 & MASK_LOW;\n    h2 = h2 * 0xc4ceb9fe & MASK_HIGH | ((h2 << 16 | h1 >>> 16) * 0xb9fe1a85 & MASK_HIGH) >>> 16;\n    h1 ^= h2 >>> 1;\n    return (h1 >>> 0).toString(16).padStart(8, \"0\") + (h2 >>> 0).toString(16).padStart(8, \"0\");\n  }\n}\n\n;// ./src/display/annotation_storage.js\n\n\n\nconst SerializableEmpty = Object.freeze({\n  map: null,\n  hash: \"\",\n  transfer: undefined\n});\nclass AnnotationStorage {\n  #modified = false;\n  #modifiedIds = null;\n  #storage = new Map();\n  constructor() {\n    this.onSetModified = null;\n    this.onResetModified = null;\n    this.onAnnotationEditor = null;\n  }\n  getValue(key, defaultValue) {\n    const value = this.#storage.get(key);\n    if (value === undefined) {\n      return defaultValue;\n    }\n    return Object.assign(defaultValue, value);\n  }\n  getRawValue(key) {\n    return this.#storage.get(key);\n  }\n  remove(key) {\n    this.#storage.delete(key);\n    if (this.#storage.size === 0) {\n      this.resetModified();\n    }\n    if (typeof this.onAnnotationEditor === \"function\") {\n      for (const value of this.#storage.values()) {\n        if (value instanceof AnnotationEditor) {\n          return;\n        }\n      }\n      this.onAnnotationEditor(null);\n    }\n  }\n  setValue(key, value) {\n    const obj = this.#storage.get(key);\n    let modified = false;\n    if (obj !== undefined) {\n      for (const [entry, val] of Object.entries(value)) {\n        if (obj[entry] !== val) {\n          modified = true;\n          obj[entry] = val;\n        }\n      }\n    } else {\n      modified = true;\n      this.#storage.set(key, value);\n    }\n    if (modified) {\n      this.#setModified();\n    }\n    if (value instanceof AnnotationEditor && typeof this.onAnnotationEditor === \"function\") {\n      this.onAnnotationEditor(value.constructor._type);\n    }\n  }\n  has(key) {\n    return this.#storage.has(key);\n  }\n  get size() {\n    return this.#storage.size;\n  }\n  #setModified() {\n    if (!this.#modified) {\n      this.#modified = true;\n      if (typeof this.onSetModified === \"function\") {\n        this.onSetModified();\n      }\n    }\n  }\n  resetModified() {\n    if (this.#modified) {\n      this.#modified = false;\n      if (typeof this.onResetModified === \"function\") {\n        this.onResetModified();\n      }\n    }\n  }\n  get print() {\n    return new PrintAnnotationStorage(this);\n  }\n  get serializable() {\n    if (this.#storage.size === 0) {\n      return SerializableEmpty;\n    }\n    const map = new Map(),\n      hash = new MurmurHash3_64(),\n      transfer = [];\n    const context = Object.create(null);\n    let hasBitmap = false;\n    for (const [key, val] of this.#storage) {\n      const serialized = val instanceof AnnotationEditor ? val.serialize(false, context) : val;\n      if (serialized) {\n        map.set(key, serialized);\n        hash.update(`${key}:${JSON.stringify(serialized)}`);\n        hasBitmap ||= !!serialized.bitmap;\n      }\n    }\n    if (hasBitmap) {\n      for (const value of map.values()) {\n        if (value.bitmap) {\n          transfer.push(value.bitmap);\n        }\n      }\n    }\n    return map.size > 0 ? {\n      map,\n      hash: hash.hexdigest(),\n      transfer\n    } : SerializableEmpty;\n  }\n  get editorStats() {\n    let stats = null;\n    const typeToEditor = new Map();\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor)) {\n        continue;\n      }\n      const editorStats = value.telemetryFinalData;\n      if (!editorStats) {\n        continue;\n      }\n      const {\n        type\n      } = editorStats;\n      if (!typeToEditor.has(type)) {\n        typeToEditor.set(type, Object.getPrototypeOf(value).constructor);\n      }\n      stats ||= Object.create(null);\n      const map = stats[type] ||= new Map();\n      for (const [key, val] of Object.entries(editorStats)) {\n        if (key === \"type\") {\n          continue;\n        }\n        let counters = map.get(key);\n        if (!counters) {\n          counters = new Map();\n          map.set(key, counters);\n        }\n        const count = counters.get(val) ?? 0;\n        counters.set(val, count + 1);\n      }\n    }\n    for (const [type, editor] of typeToEditor) {\n      stats[type] = editor.computeTelemetryFinalData(stats[type]);\n    }\n    return stats;\n  }\n  resetModifiedIds() {\n    this.#modifiedIds = null;\n  }\n  get modifiedIds() {\n    if (this.#modifiedIds) {\n      return this.#modifiedIds;\n    }\n    const ids = [];\n    for (const value of this.#storage.values()) {\n      if (!(value instanceof AnnotationEditor) || !value.annotationElementId || !value.serialize()) {\n        continue;\n      }\n      ids.push(value.annotationElementId);\n    }\n    return this.#modifiedIds = {\n      ids: new Set(ids),\n      hash: ids.join(\",\")\n    };\n  }\n  [Symbol.iterator]() {\n    return this.#storage.entries();\n  }\n}\nclass PrintAnnotationStorage extends AnnotationStorage {\n  #serializable;\n  constructor(parent) {\n    super();\n    const {\n      map,\n      hash,\n      transfer\n    } = parent.serializable;\n    const clone = structuredClone(map, transfer ? {\n      transfer\n    } : null);\n    this.#serializable = {\n      map: clone,\n      hash,\n      transfer\n    };\n  }\n  get print() {\n    unreachable(\"Should not call PrintAnnotationStorage.print\");\n  }\n  get serializable() {\n    return this.#serializable;\n  }\n  get modifiedIds() {\n    return shadow(this, \"modifiedIds\", {\n      ids: new Set(),\n      hash: \"\"\n    });\n  }\n}\n\n;// ./src/display/font_loader.js\n\nclass FontLoader {\n  #systemFonts = new Set();\n  constructor({\n    ownerDocument = globalThis.document,\n    styleElement = null\n  }) {\n    this._document = ownerDocument;\n    this.nativeFontFaces = new Set();\n    this.styleElement = null;\n    this.loadingRequests = [];\n    this.loadTestFontId = 0;\n  }\n  addNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.add(nativeFontFace);\n    this._document.fonts.add(nativeFontFace);\n  }\n  removeNativeFontFace(nativeFontFace) {\n    this.nativeFontFaces.delete(nativeFontFace);\n    this._document.fonts.delete(nativeFontFace);\n  }\n  insertRule(rule) {\n    if (!this.styleElement) {\n      this.styleElement = this._document.createElement(\"style\");\n      this._document.documentElement.getElementsByTagName(\"head\")[0].append(this.styleElement);\n    }\n    const styleSheet = this.styleElement.sheet;\n    styleSheet.insertRule(rule, styleSheet.cssRules.length);\n  }\n  clear() {\n    for (const nativeFontFace of this.nativeFontFaces) {\n      this._document.fonts.delete(nativeFontFace);\n    }\n    this.nativeFontFaces.clear();\n    this.#systemFonts.clear();\n    if (this.styleElement) {\n      this.styleElement.remove();\n      this.styleElement = null;\n    }\n  }\n  async loadSystemFont({\n    systemFontInfo: info,\n    disableFontFace,\n    _inspectFont\n  }) {\n    if (!info || this.#systemFonts.has(info.loadedName)) {\n      return;\n    }\n    assert(!disableFontFace, \"loadSystemFont shouldn't be called when `disableFontFace` is set.\");\n    if (this.isFontLoadingAPISupported) {\n      const {\n        loadedName,\n        src,\n        style\n      } = info;\n      const fontFace = new FontFace(loadedName, src, style);\n      this.addNativeFontFace(fontFace);\n      try {\n        await fontFace.load();\n        this.#systemFonts.add(loadedName);\n        _inspectFont?.(info);\n      } catch {\n        warn(`Cannot load system font: ${info.baseFontName}, installing it could help to improve PDF rendering.`);\n        this.removeNativeFontFace(fontFace);\n      }\n      return;\n    }\n    unreachable(\"Not implemented: loadSystemFont without the Font Loading API.\");\n  }\n  async bind(font) {\n    if (font.attached || font.missingFile && !font.systemFontInfo) {\n      return;\n    }\n    font.attached = true;\n    if (font.systemFontInfo) {\n      await this.loadSystemFont(font);\n      return;\n    }\n    if (this.isFontLoadingAPISupported) {\n      const nativeFontFace = font.createNativeFontFace();\n      if (nativeFontFace) {\n        this.addNativeFontFace(nativeFontFace);\n        try {\n          await nativeFontFace.loaded;\n        } catch (ex) {\n          warn(`Failed to load font '${nativeFontFace.family}': '${ex}'.`);\n          font.disableFontFace = true;\n          throw ex;\n        }\n      }\n      return;\n    }\n    const rule = font.createFontFaceRule();\n    if (rule) {\n      this.insertRule(rule);\n      if (this.isSyncFontLoadingSupported) {\n        return;\n      }\n      await new Promise(resolve => {\n        const request = this._queueLoadingCallback(resolve);\n        this._prepareFontLoadEvent(font, request);\n      });\n    }\n  }\n  get isFontLoadingAPISupported() {\n    const hasFonts = !!this._document?.fonts;\n    return shadow(this, \"isFontLoadingAPISupported\", hasFonts);\n  }\n  get isSyncFontLoadingSupported() {\n    return shadow(this, \"isSyncFontLoadingSupported\", isNodeJS || util_FeatureTest.platform.isFirefox);\n  }\n  _queueLoadingCallback(callback) {\n    function completeRequest() {\n      assert(!request.done, \"completeRequest() cannot be called twice.\");\n      request.done = true;\n      while (loadingRequests.length > 0 && loadingRequests[0].done) {\n        const otherRequest = loadingRequests.shift();\n        setTimeout(otherRequest.callback, 0);\n      }\n    }\n    const {\n      loadingRequests\n    } = this;\n    const request = {\n      done: false,\n      complete: completeRequest,\n      callback\n    };\n    loadingRequests.push(request);\n    return request;\n  }\n  get _loadTestFont() {\n    const testFont = atob(\"T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQA\" + \"FQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAA\" + \"ALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgA\" + \"AAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1\" + \"AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD\" + \"6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACM\" + \"AooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4D\" + \"IP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAA\" + \"AAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUA\" + \"AQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgAB\" + \"AAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABY\" + \"AAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAA\" + \"AC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA\" + \"AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAA\" + \"AAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQAC\" + \"AQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3\" + \"Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTj\" + \"FQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==\");\n    return shadow(this, \"_loadTestFont\", testFont);\n  }\n  _prepareFontLoadEvent(font, request) {\n    function int32(data, offset) {\n      return data.charCodeAt(offset) << 24 | data.charCodeAt(offset + 1) << 16 | data.charCodeAt(offset + 2) << 8 | data.charCodeAt(offset + 3) & 0xff;\n    }\n    function spliceString(s, offset, remove, insert) {\n      const chunk1 = s.substring(0, offset);\n      const chunk2 = s.substring(offset + remove);\n      return chunk1 + insert + chunk2;\n    }\n    let i, ii;\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = 1;\n    canvas.height = 1;\n    const ctx = canvas.getContext(\"2d\");\n    let called = 0;\n    function isFontReady(name, callback) {\n      if (++called > 30) {\n        warn(\"Load test font never loaded.\");\n        callback();\n        return;\n      }\n      ctx.font = \"30px \" + name;\n      ctx.fillText(\".\", 0, 20);\n      const imageData = ctx.getImageData(0, 0, 1, 1);\n      if (imageData.data[3] > 0) {\n        callback();\n        return;\n      }\n      setTimeout(isFontReady.bind(null, name, callback));\n    }\n    const loadTestFontId = `lt${Date.now()}${this.loadTestFontId++}`;\n    let data = this._loadTestFont;\n    const COMMENT_OFFSET = 976;\n    data = spliceString(data, COMMENT_OFFSET, loadTestFontId.length, loadTestFontId);\n    const CFF_CHECKSUM_OFFSET = 16;\n    const XXXX_VALUE = 0x58585858;\n    let checksum = int32(data, CFF_CHECKSUM_OFFSET);\n    for (i = 0, ii = loadTestFontId.length - 3; i < ii; i += 4) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId, i) | 0;\n    }\n    if (i < loadTestFontId.length) {\n      checksum = checksum - XXXX_VALUE + int32(loadTestFontId + \"XXX\", i) | 0;\n    }\n    data = spliceString(data, CFF_CHECKSUM_OFFSET, 4, string32(checksum));\n    const url = `url(data:font/opentype;base64,${btoa(data)});`;\n    const rule = `@font-face {font-family:\"${loadTestFontId}\";src:${url}}`;\n    this.insertRule(rule);\n    const div = this._document.createElement(\"div\");\n    div.style.visibility = \"hidden\";\n    div.style.width = div.style.height = \"10px\";\n    div.style.position = \"absolute\";\n    div.style.top = div.style.left = \"0px\";\n    for (const name of [font.loadedName, loadTestFontId]) {\n      const span = this._document.createElement(\"span\");\n      span.textContent = \"Hi\";\n      span.style.fontFamily = name;\n      div.append(span);\n    }\n    this._document.body.append(div);\n    isFontReady(loadTestFontId, () => {\n      div.remove();\n      request.complete();\n    });\n  }\n}\nclass FontFaceObject {\n  constructor(translatedData, inspectFont = null) {\n    this.compiledGlyphs = Object.create(null);\n    for (const i in translatedData) {\n      this[i] = translatedData[i];\n    }\n    this._inspectFont = inspectFont;\n  }\n  createNativeFontFace() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    let nativeFontFace;\n    if (!this.cssFontInfo) {\n      nativeFontFace = new FontFace(this.loadedName, this.data, {});\n    } else {\n      const css = {\n        weight: this.cssFontInfo.fontWeight\n      };\n      if (this.cssFontInfo.italicAngle) {\n        css.style = `oblique ${this.cssFontInfo.italicAngle}deg`;\n      }\n      nativeFontFace = new FontFace(this.cssFontInfo.fontFamily, this.data, css);\n    }\n    this._inspectFont?.(this);\n    return nativeFontFace;\n  }\n  createFontFaceRule() {\n    if (!this.data || this.disableFontFace) {\n      return null;\n    }\n    const url = `url(data:${this.mimetype};base64,${toBase64Util(this.data)});`;\n    let rule;\n    if (!this.cssFontInfo) {\n      rule = `@font-face {font-family:\"${this.loadedName}\";src:${url}}`;\n    } else {\n      let css = `font-weight: ${this.cssFontInfo.fontWeight};`;\n      if (this.cssFontInfo.italicAngle) {\n        css += `font-style: oblique ${this.cssFontInfo.italicAngle}deg;`;\n      }\n      rule = `@font-face {font-family:\"${this.cssFontInfo.fontFamily}\";${css}src:${url}}`;\n    }\n    this._inspectFont?.(this, url);\n    return rule;\n  }\n  getPathGenerator(objs, character) {\n    if (this.compiledGlyphs[character] !== undefined) {\n      return this.compiledGlyphs[character];\n    }\n    const objId = this.loadedName + \"_path_\" + character;\n    let cmds;\n    try {\n      cmds = objs.get(objId);\n    } catch (ex) {\n      warn(`getPathGenerator - ignoring character: \"${ex}\".`);\n    }\n    const path = new Path2D(cmds || \"\");\n    if (!this.fontExtraProperties) {\n      objs.delete(objId);\n    }\n    return this.compiledGlyphs[character] = path;\n  }\n}\n\n;// ./src/display/api_utils.js\n\nfunction getUrlProp(val) {\n  if (val instanceof URL) {\n    return val.href;\n  }\n  if (typeof val === \"string\") {\n    if (isNodeJS) {\n      return val;\n    }\n    const url = URL.parse(val, window.location);\n    if (url) {\n      return url.href;\n    }\n  }\n  throw new Error(\"Invalid PDF url data: \" + \"either string or URL-object is expected in the url property.\");\n}\nfunction getDataProp(val) {\n  if (isNodeJS && typeof Buffer !== \"undefined\" && val instanceof Buffer) {\n    throw new Error(\"Please provide binary data as `Uint8Array`, rather than `Buffer`.\");\n  }\n  if (val instanceof Uint8Array && val.byteLength === val.buffer.byteLength) {\n    return val;\n  }\n  if (typeof val === \"string\") {\n    return stringToBytes(val);\n  }\n  if (val instanceof ArrayBuffer || ArrayBuffer.isView(val) || typeof val === \"object\" && !isNaN(val?.length)) {\n    return new Uint8Array(val);\n  }\n  throw new Error(\"Invalid PDF binary data: either TypedArray, \" + \"string, or array-like object is expected in the data property.\");\n}\nfunction getFactoryUrlProp(val) {\n  if (typeof val !== \"string\") {\n    return null;\n  }\n  if (val.endsWith(\"/\")) {\n    return val;\n  }\n  throw new Error(`Invalid factory url: \"${val}\" must include trailing slash.`);\n}\nconst isRefProxy = v => typeof v === \"object\" && Number.isInteger(v?.num) && v.num >= 0 && Number.isInteger(v?.gen) && v.gen >= 0;\nconst isNameProxy = v => typeof v === \"object\" && typeof v?.name === \"string\";\nconst isValidExplicitDest = _isValidExplicitDest.bind(null, isRefProxy, isNameProxy);\nclass LoopbackPort {\n  #listeners = new Map();\n  #deferred = Promise.resolve();\n  postMessage(obj, transfer) {\n    const event = {\n      data: structuredClone(obj, transfer ? {\n        transfer\n      } : null)\n    };\n    this.#deferred.then(() => {\n      for (const [listener] of this.#listeners) {\n        listener.call(this, event);\n      }\n    });\n  }\n  addEventListener(name, listener, options = null) {\n    let rmAbort = null;\n    if (options?.signal instanceof AbortSignal) {\n      const {\n        signal\n      } = options;\n      if (signal.aborted) {\n        warn(\"LoopbackPort - cannot use an `aborted` signal.\");\n        return;\n      }\n      const onAbort = () => this.removeEventListener(name, listener);\n      rmAbort = () => signal.removeEventListener(\"abort\", onAbort);\n      signal.addEventListener(\"abort\", onAbort);\n    }\n    this.#listeners.set(listener, rmAbort);\n  }\n  removeEventListener(name, listener) {\n    const rmAbort = this.#listeners.get(listener);\n    rmAbort?.();\n    this.#listeners.delete(listener);\n  }\n  terminate() {\n    for (const [, rmAbort] of this.#listeners) {\n      rmAbort?.();\n    }\n    this.#listeners.clear();\n  }\n}\n\n;// ./src/shared/message_handler.js\n\nconst CallbackKind = {\n  DATA: 1,\n  ERROR: 2\n};\nconst StreamKind = {\n  CANCEL: 1,\n  CANCEL_COMPLETE: 2,\n  CLOSE: 3,\n  ENQUEUE: 4,\n  ERROR: 5,\n  PULL: 6,\n  PULL_COMPLETE: 7,\n  START_COMPLETE: 8\n};\nfunction onFn() {}\nfunction wrapReason(ex) {\n  if (ex instanceof AbortException || ex instanceof InvalidPDFException || ex instanceof PasswordException || ex instanceof ResponseException || ex instanceof UnknownErrorException) {\n    return ex;\n  }\n  if (!(ex instanceof Error || typeof ex === \"object\" && ex !== null)) {\n    unreachable('wrapReason: Expected \"reason\" to be a (possibly cloned) Error.');\n  }\n  switch (ex.name) {\n    case \"AbortException\":\n      return new AbortException(ex.message);\n    case \"InvalidPDFException\":\n      return new InvalidPDFException(ex.message);\n    case \"PasswordException\":\n      return new PasswordException(ex.message, ex.code);\n    case \"ResponseException\":\n      return new ResponseException(ex.message, ex.status, ex.missing);\n    case \"UnknownErrorException\":\n      return new UnknownErrorException(ex.message, ex.details);\n  }\n  return new UnknownErrorException(ex.message, ex.toString());\n}\nclass MessageHandler {\n  #messageAC = new AbortController();\n  constructor(sourceName, targetName, comObj) {\n    this.sourceName = sourceName;\n    this.targetName = targetName;\n    this.comObj = comObj;\n    this.callbackId = 1;\n    this.streamId = 1;\n    this.streamSinks = Object.create(null);\n    this.streamControllers = Object.create(null);\n    this.callbackCapabilities = Object.create(null);\n    this.actionHandler = Object.create(null);\n    comObj.addEventListener(\"message\", this.#onMessage.bind(this), {\n      signal: this.#messageAC.signal\n    });\n  }\n  #onMessage({\n    data\n  }) {\n    if (data.targetName !== this.sourceName) {\n      return;\n    }\n    if (data.stream) {\n      this.#processStreamMessage(data);\n      return;\n    }\n    if (data.callback) {\n      const callbackId = data.callbackId;\n      const capability = this.callbackCapabilities[callbackId];\n      if (!capability) {\n        throw new Error(`Cannot resolve callback ${callbackId}`);\n      }\n      delete this.callbackCapabilities[callbackId];\n      if (data.callback === CallbackKind.DATA) {\n        capability.resolve(data.data);\n      } else if (data.callback === CallbackKind.ERROR) {\n        capability.reject(wrapReason(data.reason));\n      } else {\n        throw new Error(\"Unexpected callback case\");\n      }\n      return;\n    }\n    const action = this.actionHandler[data.action];\n    if (!action) {\n      throw new Error(`Unknown action from worker: ${data.action}`);\n    }\n    if (data.callbackId) {\n      const sourceName = this.sourceName,\n        targetName = data.sourceName,\n        comObj = this.comObj;\n      Promise.try(action, data.data).then(function (result) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.DATA,\n          callbackId: data.callbackId,\n          data: result\n        });\n      }, function (reason) {\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          callback: CallbackKind.ERROR,\n          callbackId: data.callbackId,\n          reason: wrapReason(reason)\n        });\n      });\n      return;\n    }\n    if (data.streamId) {\n      this.#createStreamSink(data);\n      return;\n    }\n    action(data.data);\n  }\n  on(actionName, handler) {\n    const ah = this.actionHandler;\n    if (ah[actionName]) {\n      throw new Error(`There is already an actionName called \"${actionName}\"`);\n    }\n    ah[actionName] = handler;\n  }\n  send(actionName, data, transfers) {\n    this.comObj.postMessage({\n      sourceName: this.sourceName,\n      targetName: this.targetName,\n      action: actionName,\n      data\n    }, transfers);\n  }\n  sendWithPromise(actionName, data, transfers) {\n    const callbackId = this.callbackId++;\n    const capability = Promise.withResolvers();\n    this.callbackCapabilities[callbackId] = capability;\n    try {\n      this.comObj.postMessage({\n        sourceName: this.sourceName,\n        targetName: this.targetName,\n        action: actionName,\n        callbackId,\n        data\n      }, transfers);\n    } catch (ex) {\n      capability.reject(ex);\n    }\n    return capability.promise;\n  }\n  sendWithStream(actionName, data, queueingStrategy, transfers) {\n    const streamId = this.streamId++,\n      sourceName = this.sourceName,\n      targetName = this.targetName,\n      comObj = this.comObj;\n    return new ReadableStream({\n      start: controller => {\n        const startCapability = Promise.withResolvers();\n        this.streamControllers[streamId] = {\n          controller,\n          startCall: startCapability,\n          pullCall: null,\n          cancelCall: null,\n          isClosed: false\n        };\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          action: actionName,\n          streamId,\n          data,\n          desiredSize: controller.desiredSize\n        }, transfers);\n        return startCapability.promise;\n      },\n      pull: controller => {\n        const pullCapability = Promise.withResolvers();\n        this.streamControllers[streamId].pullCall = pullCapability;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.PULL,\n          streamId,\n          desiredSize: controller.desiredSize\n        });\n        return pullCapability.promise;\n      },\n      cancel: reason => {\n        assert(reason instanceof Error, \"cancel must have a valid reason\");\n        const cancelCapability = Promise.withResolvers();\n        this.streamControllers[streamId].cancelCall = cancelCapability;\n        this.streamControllers[streamId].isClosed = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CANCEL,\n          streamId,\n          reason: wrapReason(reason)\n        });\n        return cancelCapability.promise;\n      }\n    }, queueingStrategy);\n  }\n  #createStreamSink(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const self = this,\n      action = this.actionHandler[data.action];\n    const streamSink = {\n      enqueue(chunk, size = 1, transfers) {\n        if (this.isCancelled) {\n          return;\n        }\n        const lastDesiredSize = this.desiredSize;\n        this.desiredSize -= size;\n        if (lastDesiredSize > 0 && this.desiredSize <= 0) {\n          this.sinkCapability = Promise.withResolvers();\n          this.ready = this.sinkCapability.promise;\n        }\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ENQUEUE,\n          streamId,\n          chunk\n        }, transfers);\n      },\n      close() {\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.CLOSE,\n          streamId\n        });\n        delete self.streamSinks[streamId];\n      },\n      error(reason) {\n        assert(reason instanceof Error, \"error must have a valid reason\");\n        if (this.isCancelled) {\n          return;\n        }\n        this.isCancelled = true;\n        comObj.postMessage({\n          sourceName,\n          targetName,\n          stream: StreamKind.ERROR,\n          streamId,\n          reason: wrapReason(reason)\n        });\n      },\n      sinkCapability: Promise.withResolvers(),\n      onPull: null,\n      onCancel: null,\n      isCancelled: false,\n      desiredSize: data.desiredSize,\n      ready: null\n    };\n    streamSink.sinkCapability.resolve();\n    streamSink.ready = streamSink.sinkCapability.promise;\n    this.streamSinks[streamId] = streamSink;\n    Promise.try(action, data.data, streamSink).then(function () {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        success: true\n      });\n    }, function (reason) {\n      comObj.postMessage({\n        sourceName,\n        targetName,\n        stream: StreamKind.START_COMPLETE,\n        streamId,\n        reason: wrapReason(reason)\n      });\n    });\n  }\n  #processStreamMessage(data) {\n    const streamId = data.streamId,\n      sourceName = this.sourceName,\n      targetName = data.sourceName,\n      comObj = this.comObj;\n    const streamController = this.streamControllers[streamId],\n      streamSink = this.streamSinks[streamId];\n    switch (data.stream) {\n      case StreamKind.START_COMPLETE:\n        if (data.success) {\n          streamController.startCall.resolve();\n        } else {\n          streamController.startCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL_COMPLETE:\n        if (data.success) {\n          streamController.pullCall.resolve();\n        } else {\n          streamController.pullCall.reject(wrapReason(data.reason));\n        }\n        break;\n      case StreamKind.PULL:\n        if (!streamSink) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n          break;\n        }\n        if (streamSink.desiredSize <= 0 && data.desiredSize > 0) {\n          streamSink.sinkCapability.resolve();\n        }\n        streamSink.desiredSize = data.desiredSize;\n        Promise.try(streamSink.onPull || onFn).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.PULL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        break;\n      case StreamKind.ENQUEUE:\n        assert(streamController, \"enqueue should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.controller.enqueue(data.chunk);\n        break;\n      case StreamKind.CLOSE:\n        assert(streamController, \"close should have stream controller\");\n        if (streamController.isClosed) {\n          break;\n        }\n        streamController.isClosed = true;\n        streamController.controller.close();\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.ERROR:\n        assert(streamController, \"error should have stream controller\");\n        streamController.controller.error(wrapReason(data.reason));\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL_COMPLETE:\n        if (data.success) {\n          streamController.cancelCall.resolve();\n        } else {\n          streamController.cancelCall.reject(wrapReason(data.reason));\n        }\n        this.#deleteStreamController(streamController, streamId);\n        break;\n      case StreamKind.CANCEL:\n        if (!streamSink) {\n          break;\n        }\n        const dataReason = wrapReason(data.reason);\n        Promise.try(streamSink.onCancel || onFn, dataReason).then(function () {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            success: true\n          });\n        }, function (reason) {\n          comObj.postMessage({\n            sourceName,\n            targetName,\n            stream: StreamKind.CANCEL_COMPLETE,\n            streamId,\n            reason: wrapReason(reason)\n          });\n        });\n        streamSink.sinkCapability.reject(dataReason);\n        streamSink.isCancelled = true;\n        delete this.streamSinks[streamId];\n        break;\n      default:\n        throw new Error(\"Unexpected stream case\");\n    }\n  }\n  async #deleteStreamController(streamController, streamId) {\n    await Promise.allSettled([streamController.startCall?.promise, streamController.pullCall?.promise, streamController.cancelCall?.promise]);\n    delete this.streamControllers[streamId];\n  }\n  destroy() {\n    this.#messageAC?.abort();\n    this.#messageAC = null;\n  }\n}\n\n;// ./src/display/canvas_factory.js\n\nclass BaseCanvasFactory {\n  #enableHWA = false;\n  constructor({\n    enableHWA = false\n  }) {\n    this.#enableHWA = enableHWA;\n  }\n  create(width, height) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    const canvas = this._createCanvas(width, height);\n    return {\n      canvas,\n      context: canvas.getContext(\"2d\", {\n        willReadFrequently: !this.#enableHWA\n      })\n    };\n  }\n  reset(canvasAndContext, width, height) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid canvas size\");\n    }\n    canvasAndContext.canvas.width = width;\n    canvasAndContext.canvas.height = height;\n  }\n  destroy(canvasAndContext) {\n    if (!canvasAndContext.canvas) {\n      throw new Error(\"Canvas is not specified\");\n    }\n    canvasAndContext.canvas.width = 0;\n    canvasAndContext.canvas.height = 0;\n    canvasAndContext.canvas = null;\n    canvasAndContext.context = null;\n  }\n  _createCanvas(width, height) {\n    unreachable(\"Abstract method `_createCanvas` called.\");\n  }\n}\nclass DOMCanvasFactory extends BaseCanvasFactory {\n  constructor({\n    ownerDocument = globalThis.document,\n    enableHWA = false\n  }) {\n    super({\n      enableHWA\n    });\n    this._document = ownerDocument;\n  }\n  _createCanvas(width, height) {\n    const canvas = this._document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  }\n}\n\n;// ./src/display/cmap_reader_factory.js\n\n\nclass BaseCMapReaderFactory {\n  constructor({\n    baseUrl = null,\n    isCompressed = true\n  }) {\n    this.baseUrl = baseUrl;\n    this.isCompressed = isCompressed;\n  }\n  async fetch({\n    name\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.\");\n    }\n    if (!name) {\n      throw new Error(\"CMap name must be specified.\");\n    }\n    const url = this.baseUrl + name + (this.isCompressed ? \".bcmap\" : \"\");\n    return this._fetch(url).then(cMapData => ({\n      cMapData,\n      isCompressed: this.isCompressed\n    })).catch(reason => {\n      throw new Error(`Unable to load ${this.isCompressed ? \"binary \" : \"\"}CMap at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, this.isCompressed ? \"arraybuffer\" : \"text\");\n    return data instanceof ArrayBuffer ? new Uint8Array(data) : stringToBytes(data);\n  }\n}\n\n;// ./src/display/filter_factory.js\n\n\nclass BaseFilterFactory {\n  addFilter(maps) {\n    return \"none\";\n  }\n  addHCMFilter(fgColor, bgColor) {\n    return \"none\";\n  }\n  addAlphaFilter(map) {\n    return \"none\";\n  }\n  addLuminosityFilter(map) {\n    return \"none\";\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    return \"none\";\n  }\n  destroy(keepHCM = false) {}\n}\nclass DOMFilterFactory extends BaseFilterFactory {\n  #baseUrl;\n  #_cache;\n  #_defs;\n  #docId;\n  #document;\n  #_hcmCache;\n  #id = 0;\n  constructor({\n    docId,\n    ownerDocument = globalThis.document\n  }) {\n    super();\n    this.#docId = docId;\n    this.#document = ownerDocument;\n  }\n  get #cache() {\n    return this.#_cache ||= new Map();\n  }\n  get #hcmCache() {\n    return this.#_hcmCache ||= new Map();\n  }\n  get #defs() {\n    if (!this.#_defs) {\n      const div = this.#document.createElement(\"div\");\n      const {\n        style\n      } = div;\n      style.visibility = \"hidden\";\n      style.contain = \"strict\";\n      style.width = style.height = 0;\n      style.position = \"absolute\";\n      style.top = style.left = 0;\n      style.zIndex = -1;\n      const svg = this.#document.createElementNS(SVG_NS, \"svg\");\n      svg.setAttribute(\"width\", 0);\n      svg.setAttribute(\"height\", 0);\n      this.#_defs = this.#document.createElementNS(SVG_NS, \"defs\");\n      div.append(svg);\n      svg.append(this.#_defs);\n      this.#document.body.append(div);\n    }\n    return this.#_defs;\n  }\n  #createTables(maps) {\n    if (maps.length === 1) {\n      const mapR = maps[0];\n      const buffer = new Array(256);\n      for (let i = 0; i < 256; i++) {\n        buffer[i] = mapR[i] / 255;\n      }\n      const table = buffer.join(\",\");\n      return [table, table, table];\n    }\n    const [mapR, mapG, mapB] = maps;\n    const bufferR = new Array(256);\n    const bufferG = new Array(256);\n    const bufferB = new Array(256);\n    for (let i = 0; i < 256; i++) {\n      bufferR[i] = mapR[i] / 255;\n      bufferG[i] = mapG[i] / 255;\n      bufferB[i] = mapB[i] / 255;\n    }\n    return [bufferR.join(\",\"), bufferG.join(\",\"), bufferB.join(\",\")];\n  }\n  #createUrl(id) {\n    if (this.#baseUrl === undefined) {\n      this.#baseUrl = \"\";\n      const url = this.#document.URL;\n      if (url !== this.#document.baseURI) {\n        if (isDataScheme(url)) {\n          warn('#createUrl: ignore \"data:\"-URL for performance reasons.');\n        } else {\n          this.#baseUrl = updateUrlHash(url, \"\");\n        }\n      }\n    }\n    return `url(${this.#baseUrl}#${id})`;\n  }\n  addFilter(maps) {\n    if (!maps) {\n      return \"none\";\n    }\n    let value = this.#cache.get(maps);\n    if (value) {\n      return value;\n    }\n    const [tableR, tableG, tableB] = this.#createTables(maps);\n    const key = maps.length === 1 ? tableR : `${tableR}${tableG}${tableB}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(maps, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_transfer_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(maps, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapConversion(tableR, tableG, tableB, filter);\n    return url;\n  }\n  addHCMFilter(fgColor, bgColor) {\n    const key = `${fgColor}-${bgColor}`;\n    const filterName = \"base\";\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const fgRGB = this.#getRGB(fgColor);\n    fgColor = Util.makeHexColor(...fgRGB);\n    const bgRGB = this.#getRGB(bgColor);\n    bgColor = Util.makeHexColor(...bgRGB);\n    this.#defs.style.color = \"\";\n    if (fgColor === \"#000000\" && bgColor === \"#ffffff\" || fgColor === bgColor) {\n      return info.url;\n    }\n    const map = new Array(256);\n    for (let i = 0; i <= 255; i++) {\n      const x = i / 255;\n      map[i] = x <= 0.03928 ? x / 12.92 : ((x + 0.055) / 1.055) ** 2.4;\n    }\n    const table = map.join(\",\");\n    const id = `g_${this.#docId}_hcm_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addTransferMapConversion(table, table, table, filter);\n    this.#addGrayConversion(filter);\n    const getSteps = (c, n) => {\n      const start = fgRGB[c] / 255;\n      const end = bgRGB[c] / 255;\n      const arr = new Array(n + 1);\n      for (let i = 0; i <= n; i++) {\n        arr[i] = start + i / n * (end - start);\n      }\n      return arr.join(\",\");\n    };\n    this.#addTransferMapConversion(getSteps(0, 5), getSteps(1, 5), getSteps(2, 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  addAlphaFilter(map) {\n    let value = this.#cache.get(map);\n    if (value) {\n      return value;\n    }\n    const [tableA] = this.#createTables([map]);\n    const key = `alpha_${tableA}`;\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_alpha_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addTransferMapAlphaConversion(tableA, filter);\n    return url;\n  }\n  addLuminosityFilter(map) {\n    let value = this.#cache.get(map || \"luminosity\");\n    if (value) {\n      return value;\n    }\n    let tableA, key;\n    if (map) {\n      [tableA] = this.#createTables([map]);\n      key = `luminosity_${tableA}`;\n    } else {\n      key = \"luminosity\";\n    }\n    value = this.#cache.get(key);\n    if (value) {\n      this.#cache.set(map, value);\n      return value;\n    }\n    const id = `g_${this.#docId}_luminosity_map_${this.#id++}`;\n    const url = this.#createUrl(id);\n    this.#cache.set(map, url);\n    this.#cache.set(key, url);\n    const filter = this.#createFilter(id);\n    this.#addLuminosityConversion(filter);\n    if (map) {\n      this.#addTransferMapAlphaConversion(tableA, filter);\n    }\n    return url;\n  }\n  addHighlightHCMFilter(filterName, fgColor, bgColor, newFgColor, newBgColor) {\n    const key = `${fgColor}-${bgColor}-${newFgColor}-${newBgColor}`;\n    let info = this.#hcmCache.get(filterName);\n    if (info?.key === key) {\n      return info.url;\n    }\n    if (info) {\n      info.filter?.remove();\n      info.key = key;\n      info.url = \"none\";\n      info.filter = null;\n    } else {\n      info = {\n        key,\n        url: \"none\",\n        filter: null\n      };\n      this.#hcmCache.set(filterName, info);\n    }\n    if (!fgColor || !bgColor) {\n      return info.url;\n    }\n    const [fgRGB, bgRGB] = [fgColor, bgColor].map(this.#getRGB.bind(this));\n    let fgGray = Math.round(0.2126 * fgRGB[0] + 0.7152 * fgRGB[1] + 0.0722 * fgRGB[2]);\n    let bgGray = Math.round(0.2126 * bgRGB[0] + 0.7152 * bgRGB[1] + 0.0722 * bgRGB[2]);\n    let [newFgRGB, newBgRGB] = [newFgColor, newBgColor].map(this.#getRGB.bind(this));\n    if (bgGray < fgGray) {\n      [fgGray, bgGray, newFgRGB, newBgRGB] = [bgGray, fgGray, newBgRGB, newFgRGB];\n    }\n    this.#defs.style.color = \"\";\n    const getSteps = (fg, bg, n) => {\n      const arr = new Array(256);\n      const step = (bgGray - fgGray) / n;\n      const newStart = fg / 255;\n      const newStep = (bg - fg) / (255 * n);\n      let prev = 0;\n      for (let i = 0; i <= n; i++) {\n        const k = Math.round(fgGray + i * step);\n        const value = newStart + i * newStep;\n        for (let j = prev; j <= k; j++) {\n          arr[j] = value;\n        }\n        prev = k + 1;\n      }\n      for (let i = prev; i < 256; i++) {\n        arr[i] = arr[prev - 1];\n      }\n      return arr.join(\",\");\n    };\n    const id = `g_${this.#docId}_hcm_${filterName}_filter`;\n    const filter = info.filter = this.#createFilter(id);\n    this.#addGrayConversion(filter);\n    this.#addTransferMapConversion(getSteps(newFgRGB[0], newBgRGB[0], 5), getSteps(newFgRGB[1], newBgRGB[1], 5), getSteps(newFgRGB[2], newBgRGB[2], 5), filter);\n    info.url = this.#createUrl(id);\n    return info.url;\n  }\n  destroy(keepHCM = false) {\n    if (keepHCM && this.#_hcmCache?.size) {\n      return;\n    }\n    this.#_defs?.parentNode.parentNode.remove();\n    this.#_defs = null;\n    this.#_cache?.clear();\n    this.#_cache = null;\n    this.#_hcmCache?.clear();\n    this.#_hcmCache = null;\n    this.#id = 0;\n  }\n  #addLuminosityConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0\");\n    filter.append(feColorMatrix);\n  }\n  #addGrayConversion(filter) {\n    const feColorMatrix = this.#document.createElementNS(SVG_NS, \"feColorMatrix\");\n    feColorMatrix.setAttribute(\"type\", \"matrix\");\n    feColorMatrix.setAttribute(\"values\", \"0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0\");\n    filter.append(feColorMatrix);\n  }\n  #createFilter(id) {\n    const filter = this.#document.createElementNS(SVG_NS, \"filter\");\n    filter.setAttribute(\"color-interpolation-filters\", \"sRGB\");\n    filter.setAttribute(\"id\", id);\n    this.#defs.append(filter);\n    return filter;\n  }\n  #appendFeFunc(feComponentTransfer, func, table) {\n    const feFunc = this.#document.createElementNS(SVG_NS, func);\n    feFunc.setAttribute(\"type\", \"discrete\");\n    feFunc.setAttribute(\"tableValues\", table);\n    feComponentTransfer.append(feFunc);\n  }\n  #addTransferMapConversion(rTable, gTable, bTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncR\", rTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncG\", gTable);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncB\", bTable);\n  }\n  #addTransferMapAlphaConversion(aTable, filter) {\n    const feComponentTransfer = this.#document.createElementNS(SVG_NS, \"feComponentTransfer\");\n    filter.append(feComponentTransfer);\n    this.#appendFeFunc(feComponentTransfer, \"feFuncA\", aTable);\n  }\n  #getRGB(color) {\n    this.#defs.style.color = color;\n    return getRGB(getComputedStyle(this.#defs).getPropertyValue(\"color\"));\n  }\n}\n\n;// ./src/display/standard_fontdata_factory.js\n\n\nclass BaseStandardFontDataFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `standardFontDataUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Font filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load font data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/wasm_factory.js\n\n\nclass BaseWasmFactory {\n  constructor({\n    baseUrl = null\n  }) {\n    this.baseUrl = baseUrl;\n  }\n  async fetch({\n    filename\n  }) {\n    if (!this.baseUrl) {\n      throw new Error(\"Ensure that the `wasmUrl` API parameter is provided.\");\n    }\n    if (!filename) {\n      throw new Error(\"Wasm filename must be specified.\");\n    }\n    const url = `${this.baseUrl}${filename}`;\n    return this._fetch(url).catch(reason => {\n      throw new Error(`Unable to load wasm data at: ${url}`);\n    });\n  }\n  async _fetch(url) {\n    unreachable(\"Abstract method `_fetch` called.\");\n  }\n}\nclass DOMWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    const data = await fetchData(url, \"arraybuffer\");\n    return new Uint8Array(data);\n  }\n}\n\n;// ./src/display/node_utils.js\n\n\n\n\n\n\nif (isNodeJS) {\n  warn(\"Please use the `legacy` build in Node.js environments.\");\n}\nasync function node_utils_fetchData(url) {\n  const fs = process.getBuiltinModule(\"fs\");\n  const data = await fs.promises.readFile(url);\n  return new Uint8Array(data);\n}\nclass NodeFilterFactory extends BaseFilterFactory {}\nclass NodeCanvasFactory extends BaseCanvasFactory {\n  _createCanvas(width, height) {\n    const require = process.getBuiltinModule(\"module\").createRequire(import.meta.url);\n    const canvas = require(\"@napi-rs/canvas\");\n    return canvas.createCanvas(width, height);\n  }\n}\nclass NodeCMapReaderFactory extends BaseCMapReaderFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeStandardFontDataFactory extends BaseStandardFontDataFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\nclass NodeWasmFactory extends BaseWasmFactory {\n  async _fetch(url) {\n    return node_utils_fetchData(url);\n  }\n}\n\n;// ./src/display/pattern_helper.js\n\n\nconst PathType = {\n  FILL: \"Fill\",\n  STROKE: \"Stroke\",\n  SHADING: \"Shading\"\n};\nfunction applyBoundingBox(ctx, bbox) {\n  if (!bbox) {\n    return;\n  }\n  const width = bbox[2] - bbox[0];\n  const height = bbox[3] - bbox[1];\n  const region = new Path2D();\n  region.rect(bbox[0], bbox[1], width, height);\n  ctx.clip(region);\n}\nclass BaseShadingPattern {\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern() {\n    unreachable(\"Abstract method `getPattern` called.\");\n  }\n}\nclass RadialAxialShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._type = IR[1];\n    this._bbox = IR[2];\n    this._colorStops = IR[3];\n    this._p0 = IR[4];\n    this._p1 = IR[5];\n    this._r0 = IR[6];\n    this._r1 = IR[7];\n    this.matrix = null;\n  }\n  _createGradient(ctx) {\n    let grad;\n    if (this._type === \"axial\") {\n      grad = ctx.createLinearGradient(this._p0[0], this._p0[1], this._p1[0], this._p1[1]);\n    } else if (this._type === \"radial\") {\n      grad = ctx.createRadialGradient(this._p0[0], this._p0[1], this._r0, this._p1[0], this._p1[1], this._r1);\n    }\n    for (const colorStop of this._colorStops) {\n      grad.addColorStop(colorStop[0], colorStop[1]);\n    }\n    return grad;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let pattern;\n    if (pathType === PathType.STROKE || pathType === PathType.FILL) {\n      const ownerBBox = owner.current.getClippedPathBoundingBox(pathType, getCurrentTransform(ctx)) || [0, 0, 0, 0];\n      const width = Math.ceil(ownerBBox[2] - ownerBBox[0]) || 1;\n      const height = Math.ceil(ownerBBox[3] - ownerBBox[1]) || 1;\n      const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.beginPath();\n      tmpCtx.rect(0, 0, tmpCtx.canvas.width, tmpCtx.canvas.height);\n      tmpCtx.translate(-ownerBBox[0], -ownerBBox[1]);\n      inverse = Util.transform(inverse, [1, 0, 0, 1, ownerBBox[0], ownerBBox[1]]);\n      tmpCtx.transform(...owner.baseTransform);\n      if (this.matrix) {\n        tmpCtx.transform(...this.matrix);\n      }\n      applyBoundingBox(tmpCtx, this._bbox);\n      tmpCtx.fillStyle = this._createGradient(tmpCtx);\n      tmpCtx.fill();\n      pattern = ctx.createPattern(tmpCanvas.canvas, \"no-repeat\");\n      const domMatrix = new DOMMatrix(inverse);\n      pattern.setTransform(domMatrix);\n    } else {\n      applyBoundingBox(ctx, this._bbox);\n      pattern = this._createGradient(ctx);\n    }\n    return pattern;\n  }\n}\nfunction drawTriangle(data, context, p1, p2, p3, c1, c2, c3) {\n  const coords = context.coords,\n    colors = context.colors;\n  const bytes = data.data,\n    rowSize = data.width * 4;\n  let tmp;\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  if (coords[p2 + 1] > coords[p3 + 1]) {\n    tmp = p2;\n    p2 = p3;\n    p3 = tmp;\n    tmp = c2;\n    c2 = c3;\n    c3 = tmp;\n  }\n  if (coords[p1 + 1] > coords[p2 + 1]) {\n    tmp = p1;\n    p1 = p2;\n    p2 = tmp;\n    tmp = c1;\n    c1 = c2;\n    c2 = tmp;\n  }\n  const x1 = (coords[p1] + context.offsetX) * context.scaleX;\n  const y1 = (coords[p1 + 1] + context.offsetY) * context.scaleY;\n  const x2 = (coords[p2] + context.offsetX) * context.scaleX;\n  const y2 = (coords[p2 + 1] + context.offsetY) * context.scaleY;\n  const x3 = (coords[p3] + context.offsetX) * context.scaleX;\n  const y3 = (coords[p3 + 1] + context.offsetY) * context.scaleY;\n  if (y1 >= y3) {\n    return;\n  }\n  const c1r = colors[c1],\n    c1g = colors[c1 + 1],\n    c1b = colors[c1 + 2];\n  const c2r = colors[c2],\n    c2g = colors[c2 + 1],\n    c2b = colors[c2 + 2];\n  const c3r = colors[c3],\n    c3g = colors[c3 + 1],\n    c3b = colors[c3 + 2];\n  const minY = Math.round(y1),\n    maxY = Math.round(y3);\n  let xa, car, cag, cab;\n  let xb, cbr, cbg, cbb;\n  for (let y = minY; y <= maxY; y++) {\n    if (y < y2) {\n      const k = y < y1 ? 0 : (y1 - y) / (y1 - y2);\n      xa = x1 - (x1 - x2) * k;\n      car = c1r - (c1r - c2r) * k;\n      cag = c1g - (c1g - c2g) * k;\n      cab = c1b - (c1b - c2b) * k;\n    } else {\n      let k;\n      if (y > y3) {\n        k = 1;\n      } else if (y2 === y3) {\n        k = 0;\n      } else {\n        k = (y2 - y) / (y2 - y3);\n      }\n      xa = x2 - (x2 - x3) * k;\n      car = c2r - (c2r - c3r) * k;\n      cag = c2g - (c2g - c3g) * k;\n      cab = c2b - (c2b - c3b) * k;\n    }\n    let k;\n    if (y < y1) {\n      k = 0;\n    } else if (y > y3) {\n      k = 1;\n    } else {\n      k = (y1 - y) / (y1 - y3);\n    }\n    xb = x1 - (x1 - x3) * k;\n    cbr = c1r - (c1r - c3r) * k;\n    cbg = c1g - (c1g - c3g) * k;\n    cbb = c1b - (c1b - c3b) * k;\n    const x1_ = Math.round(Math.min(xa, xb));\n    const x2_ = Math.round(Math.max(xa, xb));\n    let j = rowSize * y + x1_ * 4;\n    for (let x = x1_; x <= x2_; x++) {\n      k = (xa - x) / (xa - xb);\n      if (k < 0) {\n        k = 0;\n      } else if (k > 1) {\n        k = 1;\n      }\n      bytes[j++] = car - (car - cbr) * k | 0;\n      bytes[j++] = cag - (cag - cbg) * k | 0;\n      bytes[j++] = cab - (cab - cbb) * k | 0;\n      bytes[j++] = 255;\n    }\n  }\n}\nfunction drawFigure(data, figure, context) {\n  const ps = figure.coords;\n  const cs = figure.colors;\n  let i, ii;\n  switch (figure.type) {\n    case \"lattice\":\n      const verticesPerRow = figure.verticesPerRow;\n      const rows = Math.floor(ps.length / verticesPerRow) - 1;\n      const cols = verticesPerRow - 1;\n      for (i = 0; i < rows; i++) {\n        let q = i * verticesPerRow;\n        for (let j = 0; j < cols; j++, q++) {\n          drawTriangle(data, context, ps[q], ps[q + 1], ps[q + verticesPerRow], cs[q], cs[q + 1], cs[q + verticesPerRow]);\n          drawTriangle(data, context, ps[q + verticesPerRow + 1], ps[q + 1], ps[q + verticesPerRow], cs[q + verticesPerRow + 1], cs[q + 1], cs[q + verticesPerRow]);\n        }\n      }\n      break;\n    case \"triangles\":\n      for (i = 0, ii = ps.length; i < ii; i += 3) {\n        drawTriangle(data, context, ps[i], ps[i + 1], ps[i + 2], cs[i], cs[i + 1], cs[i + 2]);\n      }\n      break;\n    default:\n      throw new Error(\"illegal figure\");\n  }\n}\nclass MeshShadingPattern extends BaseShadingPattern {\n  constructor(IR) {\n    super();\n    this._coords = IR[2];\n    this._colors = IR[3];\n    this._figures = IR[4];\n    this._bounds = IR[5];\n    this._bbox = IR[6];\n    this._background = IR[7];\n    this.matrix = null;\n  }\n  _createMeshCanvas(combinedScale, backgroundColor, cachedCanvases) {\n    const EXPECTED_SCALE = 1.1;\n    const MAX_PATTERN_SIZE = 3000;\n    const BORDER_SIZE = 2;\n    const offsetX = Math.floor(this._bounds[0]);\n    const offsetY = Math.floor(this._bounds[1]);\n    const boundsWidth = Math.ceil(this._bounds[2]) - offsetX;\n    const boundsHeight = Math.ceil(this._bounds[3]) - offsetY;\n    const width = Math.min(Math.ceil(Math.abs(boundsWidth * combinedScale[0] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const height = Math.min(Math.ceil(Math.abs(boundsHeight * combinedScale[1] * EXPECTED_SCALE)), MAX_PATTERN_SIZE);\n    const scaleX = boundsWidth / width;\n    const scaleY = boundsHeight / height;\n    const context = {\n      coords: this._coords,\n      colors: this._colors,\n      offsetX: -offsetX,\n      offsetY: -offsetY,\n      scaleX: 1 / scaleX,\n      scaleY: 1 / scaleY\n    };\n    const paddedWidth = width + BORDER_SIZE * 2;\n    const paddedHeight = height + BORDER_SIZE * 2;\n    const tmpCanvas = cachedCanvases.getCanvas(\"mesh\", paddedWidth, paddedHeight);\n    const tmpCtx = tmpCanvas.context;\n    const data = tmpCtx.createImageData(width, height);\n    if (backgroundColor) {\n      const bytes = data.data;\n      for (let i = 0, ii = bytes.length; i < ii; i += 4) {\n        bytes[i] = backgroundColor[0];\n        bytes[i + 1] = backgroundColor[1];\n        bytes[i + 2] = backgroundColor[2];\n        bytes[i + 3] = 255;\n      }\n    }\n    for (const figure of this._figures) {\n      drawFigure(data, figure, context);\n    }\n    tmpCtx.putImageData(data, BORDER_SIZE, BORDER_SIZE);\n    const canvas = tmpCanvas.canvas;\n    return {\n      canvas,\n      offsetX: offsetX - BORDER_SIZE * scaleX,\n      offsetY: offsetY - BORDER_SIZE * scaleY,\n      scaleX,\n      scaleY\n    };\n  }\n  isModifyingCurrentTransform() {\n    return true;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    applyBoundingBox(ctx, this._bbox);\n    const scale = new Float32Array(2);\n    if (pathType === PathType.SHADING) {\n      Util.singularValueDecompose2dScale(getCurrentTransform(ctx), scale);\n    } else if (this.matrix) {\n      Util.singularValueDecompose2dScale(this.matrix, scale);\n      const [matrixScaleX, matrixScaleY] = scale;\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n      scale[0] *= matrixScaleX;\n      scale[1] *= matrixScaleY;\n    } else {\n      Util.singularValueDecompose2dScale(owner.baseTransform, scale);\n    }\n    const temporaryPatternCanvas = this._createMeshCanvas(scale, pathType === PathType.SHADING ? null : this._background, owner.cachedCanvases);\n    if (pathType !== PathType.SHADING) {\n      ctx.setTransform(...owner.baseTransform);\n      if (this.matrix) {\n        ctx.transform(...this.matrix);\n      }\n    }\n    ctx.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    ctx.scale(temporaryPatternCanvas.scaleX, temporaryPatternCanvas.scaleY);\n    return ctx.createPattern(temporaryPatternCanvas.canvas, \"no-repeat\");\n  }\n}\nclass DummyShadingPattern extends BaseShadingPattern {\n  getPattern() {\n    return \"hotpink\";\n  }\n}\nfunction getShadingPattern(IR) {\n  switch (IR[0]) {\n    case \"RadialAxial\":\n      return new RadialAxialShadingPattern(IR);\n    case \"Mesh\":\n      return new MeshShadingPattern(IR);\n    case \"Dummy\":\n      return new DummyShadingPattern();\n  }\n  throw new Error(`Unknown IR type: ${IR[0]}`);\n}\nconst PaintType = {\n  COLORED: 1,\n  UNCOLORED: 2\n};\nclass TilingPattern {\n  static MAX_PATTERN_SIZE = 3000;\n  constructor(IR, ctx, canvasGraphicsFactory, baseTransform) {\n    this.color = IR[1];\n    this.operatorList = IR[2];\n    this.matrix = IR[3];\n    this.bbox = IR[4];\n    this.xstep = IR[5];\n    this.ystep = IR[6];\n    this.paintType = IR[7];\n    this.tilingType = IR[8];\n    this.ctx = ctx;\n    this.canvasGraphicsFactory = canvasGraphicsFactory;\n    this.baseTransform = baseTransform;\n  }\n  createPatternCanvas(owner) {\n    const {\n      bbox,\n      operatorList,\n      paintType,\n      tilingType,\n      color,\n      canvasGraphicsFactory\n    } = this;\n    let {\n      xstep,\n      ystep\n    } = this;\n    xstep = Math.abs(xstep);\n    ystep = Math.abs(ystep);\n    info(\"TilingType: \" + tilingType);\n    const x0 = bbox[0],\n      y0 = bbox[1],\n      x1 = bbox[2],\n      y1 = bbox[3];\n    const width = x1 - x0;\n    const height = y1 - y0;\n    const scale = new Float32Array(2);\n    Util.singularValueDecompose2dScale(this.matrix, scale);\n    const [matrixScaleX, matrixScaleY] = scale;\n    Util.singularValueDecompose2dScale(this.baseTransform, scale);\n    const combinedScaleX = matrixScaleX * scale[0];\n    const combinedScaleY = matrixScaleY * scale[1];\n    let canvasWidth = width,\n      canvasHeight = height,\n      redrawHorizontally = false,\n      redrawVertically = false;\n    const xScaledStep = Math.ceil(xstep * combinedScaleX);\n    const yScaledStep = Math.ceil(ystep * combinedScaleY);\n    const xScaledWidth = Math.ceil(width * combinedScaleX);\n    const yScaledHeight = Math.ceil(height * combinedScaleY);\n    if (xScaledStep >= xScaledWidth) {\n      canvasWidth = xstep;\n    } else {\n      redrawHorizontally = true;\n    }\n    if (yScaledStep >= yScaledHeight) {\n      canvasHeight = ystep;\n    } else {\n      redrawVertically = true;\n    }\n    const dimx = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n    const dimy = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n    const tmpCanvas = owner.cachedCanvases.getCanvas(\"pattern\", dimx.size, dimy.size);\n    const tmpCtx = tmpCanvas.context;\n    const graphics = canvasGraphicsFactory.createCanvasGraphics(tmpCtx);\n    graphics.groupLevel = owner.groupLevel;\n    this.setFillAndStrokeStyleToContext(graphics, paintType, color);\n    tmpCtx.translate(-dimx.scale * x0, -dimy.scale * y0);\n    graphics.transform(dimx.scale, 0, 0, dimy.scale, 0, 0);\n    tmpCtx.save();\n    this.clipBbox(graphics, x0, y0, x1, y1);\n    graphics.baseTransform = getCurrentTransform(graphics.ctx);\n    graphics.executeOperatorList(operatorList);\n    graphics.endDrawing();\n    tmpCtx.restore();\n    if (redrawHorizontally || redrawVertically) {\n      const image = tmpCanvas.canvas;\n      if (redrawHorizontally) {\n        canvasWidth = xstep;\n      }\n      if (redrawVertically) {\n        canvasHeight = ystep;\n      }\n      const dimx2 = this.getSizeAndScale(canvasWidth, this.ctx.canvas.width, combinedScaleX);\n      const dimy2 = this.getSizeAndScale(canvasHeight, this.ctx.canvas.height, combinedScaleY);\n      const xSize = dimx2.size;\n      const ySize = dimy2.size;\n      const tmpCanvas2 = owner.cachedCanvases.getCanvas(\"pattern-workaround\", xSize, ySize);\n      const tmpCtx2 = tmpCanvas2.context;\n      const ii = redrawHorizontally ? Math.floor(width / xstep) : 0;\n      const jj = redrawVertically ? Math.floor(height / ystep) : 0;\n      for (let i = 0; i <= ii; i++) {\n        for (let j = 0; j <= jj; j++) {\n          tmpCtx2.drawImage(image, xSize * i, ySize * j, xSize, ySize, 0, 0, xSize, ySize);\n        }\n      }\n      return {\n        canvas: tmpCanvas2.canvas,\n        scaleX: dimx2.scale,\n        scaleY: dimy2.scale,\n        offsetX: x0,\n        offsetY: y0\n      };\n    }\n    return {\n      canvas: tmpCanvas.canvas,\n      scaleX: dimx.scale,\n      scaleY: dimy.scale,\n      offsetX: x0,\n      offsetY: y0\n    };\n  }\n  getSizeAndScale(step, realOutputSize, scale) {\n    const maxSize = Math.max(TilingPattern.MAX_PATTERN_SIZE, realOutputSize);\n    let size = Math.ceil(step * scale);\n    if (size >= maxSize) {\n      size = maxSize;\n    } else {\n      scale = size / step;\n    }\n    return {\n      scale,\n      size\n    };\n  }\n  clipBbox(graphics, x0, y0, x1, y1) {\n    const bboxWidth = x1 - x0;\n    const bboxHeight = y1 - y0;\n    graphics.ctx.rect(x0, y0, bboxWidth, bboxHeight);\n    Util.axialAlignedBoundingBox([x0, y0, x1, y1], getCurrentTransform(graphics.ctx), graphics.current.minMax);\n    graphics.clip();\n    graphics.endPath();\n  }\n  setFillAndStrokeStyleToContext(graphics, paintType, color) {\n    const context = graphics.ctx,\n      current = graphics.current;\n    switch (paintType) {\n      case PaintType.COLORED:\n        const {\n          fillStyle,\n          strokeStyle\n        } = this.ctx;\n        context.fillStyle = current.fillColor = fillStyle;\n        context.strokeStyle = current.strokeColor = strokeStyle;\n        break;\n      case PaintType.UNCOLORED:\n        context.fillStyle = context.strokeStyle = color;\n        current.fillColor = current.strokeColor = color;\n        break;\n      default:\n        throw new FormatError(`Unsupported paint type: ${paintType}`);\n    }\n  }\n  isModifyingCurrentTransform() {\n    return false;\n  }\n  getPattern(ctx, owner, inverse, pathType) {\n    let matrix = inverse;\n    if (pathType !== PathType.SHADING) {\n      matrix = Util.transform(matrix, owner.baseTransform);\n      if (this.matrix) {\n        matrix = Util.transform(matrix, this.matrix);\n      }\n    }\n    const temporaryPatternCanvas = this.createPatternCanvas(owner);\n    let domMatrix = new DOMMatrix(matrix);\n    domMatrix = domMatrix.translate(temporaryPatternCanvas.offsetX, temporaryPatternCanvas.offsetY);\n    domMatrix = domMatrix.scale(1 / temporaryPatternCanvas.scaleX, 1 / temporaryPatternCanvas.scaleY);\n    const pattern = ctx.createPattern(temporaryPatternCanvas.canvas, \"repeat\");\n    pattern.setTransform(domMatrix);\n    return pattern;\n  }\n}\n\n;// ./src/shared/image_utils.js\n\nfunction convertToRGBA(params) {\n  switch (params.kind) {\n    case ImageKind.GRAYSCALE_1BPP:\n      return convertBlackAndWhiteToRGBA(params);\n    case ImageKind.RGB_24BPP:\n      return convertRGBToRGBA(params);\n  }\n  return null;\n}\nfunction convertBlackAndWhiteToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  width,\n  height,\n  nonBlackColor = 0xffffffff,\n  inverseDecode = false\n}) {\n  const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n  const [zeroMapping, oneMapping] = inverseDecode ? [nonBlackColor, black] : [black, nonBlackColor];\n  const widthInSource = width >> 3;\n  const widthRemainder = width & 7;\n  const srcLength = src.length;\n  dest = new Uint32Array(dest.buffer);\n  let destPos = 0;\n  for (let i = 0; i < height; i++) {\n    for (const max = srcPos + widthInSource; srcPos < max; srcPos++) {\n      const elem = srcPos < srcLength ? src[srcPos] : 255;\n      dest[destPos++] = elem & 0b10000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1000 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b100 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b10 ? oneMapping : zeroMapping;\n      dest[destPos++] = elem & 0b1 ? oneMapping : zeroMapping;\n    }\n    if (widthRemainder === 0) {\n      continue;\n    }\n    const elem = srcPos < srcLength ? src[srcPos++] : 255;\n    for (let j = 0; j < widthRemainder; j++) {\n      dest[destPos++] = elem & 1 << 7 - j ? oneMapping : zeroMapping;\n    }\n  }\n  return {\n    srcPos,\n    destPos\n  };\n}\nfunction convertRGBToRGBA({\n  src,\n  srcPos = 0,\n  dest,\n  destPos = 0,\n  width,\n  height\n}) {\n  let i = 0;\n  const len = width * height * 3;\n  const len32 = len >> 2;\n  const src32 = new Uint32Array(src.buffer, srcPos, len32);\n  if (FeatureTest.isLittleEndian) {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff000000;\n      dest[destPos + 1] = s1 >>> 24 | s2 << 8 | 0xff000000;\n      dest[destPos + 2] = s2 >>> 16 | s3 << 16 | 0xff000000;\n      dest[destPos + 3] = s3 >>> 8 | 0xff000000;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] | src[j + 1] << 8 | src[j + 2] << 16 | 0xff000000;\n    }\n  } else {\n    for (; i < len32 - 2; i += 3, destPos += 4) {\n      const s1 = src32[i];\n      const s2 = src32[i + 1];\n      const s3 = src32[i + 2];\n      dest[destPos] = s1 | 0xff;\n      dest[destPos + 1] = s1 << 24 | s2 >>> 8 | 0xff;\n      dest[destPos + 2] = s2 << 16 | s3 >>> 16 | 0xff;\n      dest[destPos + 3] = s3 << 8 | 0xff;\n    }\n    for (let j = i * 4, jj = srcPos + len; j < jj; j += 3) {\n      dest[destPos++] = src[j] << 24 | src[j + 1] << 16 | src[j + 2] << 8 | 0xff;\n    }\n  }\n  return {\n    srcPos: srcPos + len,\n    destPos\n  };\n}\nfunction grayToRGBA(src, dest) {\n  if (FeatureTest.isLittleEndian) {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x10101 | 0xff000000;\n    }\n  } else {\n    for (let i = 0, ii = src.length; i < ii; i++) {\n      dest[i] = src[i] * 0x1010100 | 0x000000ff;\n    }\n  }\n}\n\n;// ./src/display/canvas.js\n\n\n\n\nconst MIN_FONT_SIZE = 16;\nconst MAX_FONT_SIZE = 100;\nconst EXECUTION_TIME = 15;\nconst EXECUTION_STEPS = 10;\nconst FULL_CHUNK_HEIGHT = 16;\nconst SCALE_MATRIX = new DOMMatrix();\nconst XY = new Float32Array(2);\nconst MIN_MAX_INIT = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\nfunction mirrorContextOperations(ctx, destCtx) {\n  if (ctx._removeMirroring) {\n    throw new Error(\"Context is already forwarding operations.\");\n  }\n  ctx.__originalSave = ctx.save;\n  ctx.__originalRestore = ctx.restore;\n  ctx.__originalRotate = ctx.rotate;\n  ctx.__originalScale = ctx.scale;\n  ctx.__originalTranslate = ctx.translate;\n  ctx.__originalTransform = ctx.transform;\n  ctx.__originalSetTransform = ctx.setTransform;\n  ctx.__originalResetTransform = ctx.resetTransform;\n  ctx.__originalClip = ctx.clip;\n  ctx.__originalMoveTo = ctx.moveTo;\n  ctx.__originalLineTo = ctx.lineTo;\n  ctx.__originalBezierCurveTo = ctx.bezierCurveTo;\n  ctx.__originalRect = ctx.rect;\n  ctx.__originalClosePath = ctx.closePath;\n  ctx.__originalBeginPath = ctx.beginPath;\n  ctx._removeMirroring = () => {\n    ctx.save = ctx.__originalSave;\n    ctx.restore = ctx.__originalRestore;\n    ctx.rotate = ctx.__originalRotate;\n    ctx.scale = ctx.__originalScale;\n    ctx.translate = ctx.__originalTranslate;\n    ctx.transform = ctx.__originalTransform;\n    ctx.setTransform = ctx.__originalSetTransform;\n    ctx.resetTransform = ctx.__originalResetTransform;\n    ctx.clip = ctx.__originalClip;\n    ctx.moveTo = ctx.__originalMoveTo;\n    ctx.lineTo = ctx.__originalLineTo;\n    ctx.bezierCurveTo = ctx.__originalBezierCurveTo;\n    ctx.rect = ctx.__originalRect;\n    ctx.closePath = ctx.__originalClosePath;\n    ctx.beginPath = ctx.__originalBeginPath;\n    delete ctx._removeMirroring;\n  };\n  ctx.save = function () {\n    destCtx.save();\n    this.__originalSave();\n  };\n  ctx.restore = function () {\n    destCtx.restore();\n    this.__originalRestore();\n  };\n  ctx.translate = function (x, y) {\n    destCtx.translate(x, y);\n    this.__originalTranslate(x, y);\n  };\n  ctx.scale = function (x, y) {\n    destCtx.scale(x, y);\n    this.__originalScale(x, y);\n  };\n  ctx.transform = function (a, b, c, d, e, f) {\n    destCtx.transform(a, b, c, d, e, f);\n    this.__originalTransform(a, b, c, d, e, f);\n  };\n  ctx.setTransform = function (a, b, c, d, e, f) {\n    destCtx.setTransform(a, b, c, d, e, f);\n    this.__originalSetTransform(a, b, c, d, e, f);\n  };\n  ctx.resetTransform = function () {\n    destCtx.resetTransform();\n    this.__originalResetTransform();\n  };\n  ctx.rotate = function (angle) {\n    destCtx.rotate(angle);\n    this.__originalRotate(angle);\n  };\n  ctx.clip = function (rule) {\n    destCtx.clip(rule);\n    this.__originalClip(rule);\n  };\n  ctx.moveTo = function (x, y) {\n    destCtx.moveTo(x, y);\n    this.__originalMoveTo(x, y);\n  };\n  ctx.lineTo = function (x, y) {\n    destCtx.lineTo(x, y);\n    this.__originalLineTo(x, y);\n  };\n  ctx.bezierCurveTo = function (cp1x, cp1y, cp2x, cp2y, x, y) {\n    destCtx.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    this.__originalBezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n  };\n  ctx.rect = function (x, y, width, height) {\n    destCtx.rect(x, y, width, height);\n    this.__originalRect(x, y, width, height);\n  };\n  ctx.closePath = function () {\n    destCtx.closePath();\n    this.__originalClosePath();\n  };\n  ctx.beginPath = function () {\n    destCtx.beginPath();\n    this.__originalBeginPath();\n  };\n}\nclass CachedCanvases {\n  constructor(canvasFactory) {\n    this.canvasFactory = canvasFactory;\n    this.cache = Object.create(null);\n  }\n  getCanvas(id, width, height) {\n    let canvasEntry;\n    if (this.cache[id] !== undefined) {\n      canvasEntry = this.cache[id];\n      this.canvasFactory.reset(canvasEntry, width, height);\n    } else {\n      canvasEntry = this.canvasFactory.create(width, height);\n      this.cache[id] = canvasEntry;\n    }\n    return canvasEntry;\n  }\n  delete(id) {\n    delete this.cache[id];\n  }\n  clear() {\n    for (const id in this.cache) {\n      const canvasEntry = this.cache[id];\n      this.canvasFactory.destroy(canvasEntry);\n      delete this.cache[id];\n    }\n  }\n}\nfunction drawImageAtIntegerCoords(ctx, srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH) {\n  const [a, b, c, d, tx, ty] = getCurrentTransform(ctx);\n  if (b === 0 && c === 0) {\n    const tlX = destX * a + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destY * d + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destX + destW) * a + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destY + destH) * d + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(Math.sign(a), 0, 0, Math.sign(d), rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rWidth, rHeight);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rWidth, rHeight];\n  }\n  if (a === 0 && d === 0) {\n    const tlX = destY * c + tx;\n    const rTlX = Math.round(tlX);\n    const tlY = destX * b + ty;\n    const rTlY = Math.round(tlY);\n    const brX = (destY + destH) * c + tx;\n    const rWidth = Math.abs(Math.round(brX) - rTlX) || 1;\n    const brY = (destX + destW) * b + ty;\n    const rHeight = Math.abs(Math.round(brY) - rTlY) || 1;\n    ctx.setTransform(0, Math.sign(b), Math.sign(c), 0, rTlX, rTlY);\n    ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, 0, 0, rHeight, rWidth);\n    ctx.setTransform(a, b, c, d, tx, ty);\n    return [rHeight, rWidth];\n  }\n  ctx.drawImage(srcImg, srcX, srcY, srcW, srcH, destX, destY, destW, destH);\n  const scaleX = Math.hypot(a, b);\n  const scaleY = Math.hypot(c, d);\n  return [scaleX * destW, scaleY * destH];\n}\nclass CanvasExtraState {\n  alphaIsShape = false;\n  fontSize = 0;\n  fontSizeScale = 1;\n  textMatrix = null;\n  textMatrixScale = 1;\n  fontMatrix = FONT_IDENTITY_MATRIX;\n  leading = 0;\n  x = 0;\n  y = 0;\n  lineX = 0;\n  lineY = 0;\n  charSpacing = 0;\n  wordSpacing = 0;\n  textHScale = 1;\n  textRenderingMode = TextRenderingMode.FILL;\n  textRise = 0;\n  fillColor = \"#000000\";\n  strokeColor = \"#000000\";\n  patternFill = false;\n  patternStroke = false;\n  fillAlpha = 1;\n  strokeAlpha = 1;\n  lineWidth = 1;\n  activeSMask = null;\n  transferMaps = \"none\";\n  constructor(width, height) {\n    this.clipBox = new Float32Array([0, 0, width, height]);\n    this.minMax = MIN_MAX_INIT.slice();\n  }\n  clone() {\n    const clone = Object.create(this);\n    clone.clipBox = this.clipBox.slice();\n    clone.minMax = this.minMax.slice();\n    return clone;\n  }\n  getPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    const box = this.minMax.slice();\n    if (pathType === PathType.STROKE) {\n      if (!transform) {\n        unreachable(\"Stroke bounding box must include transform.\");\n      }\n      Util.singularValueDecompose2dScale(transform, XY);\n      const xStrokePad = XY[0] * this.lineWidth / 2;\n      const yStrokePad = XY[1] * this.lineWidth / 2;\n      box[0] -= xStrokePad;\n      box[1] -= yStrokePad;\n      box[2] += xStrokePad;\n      box[3] += yStrokePad;\n    }\n    return box;\n  }\n  updateClipFromPath() {\n    const intersect = Util.intersect(this.clipBox, this.getPathBoundingBox());\n    this.startNewPathAndClipBox(intersect || [0, 0, 0, 0]);\n  }\n  isEmptyClip() {\n    return this.minMax[0] === Infinity;\n  }\n  startNewPathAndClipBox(box) {\n    this.clipBox.set(box, 0);\n    this.minMax.set(MIN_MAX_INIT, 0);\n  }\n  getClippedPathBoundingBox(pathType = PathType.FILL, transform = null) {\n    return Util.intersect(this.clipBox, this.getPathBoundingBox(pathType, transform));\n  }\n}\nfunction putBinaryImageData(ctx, imgData) {\n  if (imgData instanceof ImageData) {\n    ctx.putImageData(imgData, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0,\n    destPos;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  let i, j, thisChunkHeight, elemsInThisChunk;\n  if (imgData.kind === util_ImageKind.GRAYSCALE_1BPP) {\n    const srcLength = src.byteLength;\n    const dest32 = new Uint32Array(dest.buffer, 0, dest.byteLength >> 2);\n    const dest32DataLength = dest32.length;\n    const fullSrcDiff = width + 7 >> 3;\n    const white = 0xffffffff;\n    const black = util_FeatureTest.isLittleEndian ? 0xff000000 : 0x000000ff;\n    for (i = 0; i < totalChunks; i++) {\n      thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n      destPos = 0;\n      for (j = 0; j < thisChunkHeight; j++) {\n        const srcDiff = srcLength - srcPos;\n        let k = 0;\n        const kEnd = srcDiff > fullSrcDiff ? width : srcDiff * 8 - 7;\n        const kEndUnrolled = kEnd & ~7;\n        let mask = 0;\n        let srcByte = 0;\n        for (; k < kEndUnrolled; k += 8) {\n          srcByte = src[srcPos++];\n          dest32[destPos++] = srcByte & 128 ? white : black;\n          dest32[destPos++] = srcByte & 64 ? white : black;\n          dest32[destPos++] = srcByte & 32 ? white : black;\n          dest32[destPos++] = srcByte & 16 ? white : black;\n          dest32[destPos++] = srcByte & 8 ? white : black;\n          dest32[destPos++] = srcByte & 4 ? white : black;\n          dest32[destPos++] = srcByte & 2 ? white : black;\n          dest32[destPos++] = srcByte & 1 ? white : black;\n        }\n        for (; k < kEnd; k++) {\n          if (mask === 0) {\n            srcByte = src[srcPos++];\n            mask = 128;\n          }\n          dest32[destPos++] = srcByte & mask ? white : black;\n          mask >>= 1;\n        }\n      }\n      while (destPos < dest32DataLength) {\n        dest32[destPos++] = 0;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else if (imgData.kind === util_ImageKind.RGBA_32BPP) {\n    j = 0;\n    elemsInThisChunk = width * FULL_CHUNK_HEIGHT * 4;\n    for (i = 0; i < fullChunks; i++) {\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      srcPos += elemsInThisChunk;\n      ctx.putImageData(chunkImgData, 0, j);\n      j += FULL_CHUNK_HEIGHT;\n    }\n    if (i < totalChunks) {\n      elemsInThisChunk = width * partialChunkHeight * 4;\n      dest.set(src.subarray(srcPos, srcPos + elemsInThisChunk));\n      ctx.putImageData(chunkImgData, 0, j);\n    }\n  } else if (imgData.kind === util_ImageKind.RGB_24BPP) {\n    thisChunkHeight = FULL_CHUNK_HEIGHT;\n    elemsInThisChunk = width * thisChunkHeight;\n    for (i = 0; i < totalChunks; i++) {\n      if (i >= fullChunks) {\n        thisChunkHeight = partialChunkHeight;\n        elemsInThisChunk = width * thisChunkHeight;\n      }\n      destPos = 0;\n      for (j = elemsInThisChunk; j--;) {\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = src[srcPos++];\n        dest[destPos++] = 255;\n      }\n      ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n    }\n  } else {\n    throw new Error(`bad image kind: ${imgData.kind}`);\n  }\n}\nfunction putBinaryImageMask(ctx, imgData) {\n  if (imgData.bitmap) {\n    ctx.drawImage(imgData.bitmap, 0, 0);\n    return;\n  }\n  const height = imgData.height,\n    width = imgData.width;\n  const partialChunkHeight = height % FULL_CHUNK_HEIGHT;\n  const fullChunks = (height - partialChunkHeight) / FULL_CHUNK_HEIGHT;\n  const totalChunks = partialChunkHeight === 0 ? fullChunks : fullChunks + 1;\n  const chunkImgData = ctx.createImageData(width, FULL_CHUNK_HEIGHT);\n  let srcPos = 0;\n  const src = imgData.data;\n  const dest = chunkImgData.data;\n  for (let i = 0; i < totalChunks; i++) {\n    const thisChunkHeight = i < fullChunks ? FULL_CHUNK_HEIGHT : partialChunkHeight;\n    ({\n      srcPos\n    } = convertBlackAndWhiteToRGBA({\n      src,\n      srcPos,\n      dest,\n      width,\n      height: thisChunkHeight,\n      nonBlackColor: 0\n    }));\n    ctx.putImageData(chunkImgData, 0, i * FULL_CHUNK_HEIGHT);\n  }\n}\nfunction copyCtxState(sourceCtx, destCtx) {\n  const properties = [\"strokeStyle\", \"fillStyle\", \"fillRule\", \"globalAlpha\", \"lineWidth\", \"lineCap\", \"lineJoin\", \"miterLimit\", \"globalCompositeOperation\", \"font\", \"filter\"];\n  for (const property of properties) {\n    if (sourceCtx[property] !== undefined) {\n      destCtx[property] = sourceCtx[property];\n    }\n  }\n  if (sourceCtx.setLineDash !== undefined) {\n    destCtx.setLineDash(sourceCtx.getLineDash());\n    destCtx.lineDashOffset = sourceCtx.lineDashOffset;\n  }\n}\nfunction resetCtxToDefault(ctx) {\n  ctx.strokeStyle = ctx.fillStyle = \"#000000\";\n  ctx.fillRule = \"nonzero\";\n  ctx.globalAlpha = 1;\n  ctx.lineWidth = 1;\n  ctx.lineCap = \"butt\";\n  ctx.lineJoin = \"miter\";\n  ctx.miterLimit = 10;\n  ctx.globalCompositeOperation = \"source-over\";\n  ctx.font = \"10px sans-serif\";\n  if (ctx.setLineDash !== undefined) {\n    ctx.setLineDash([]);\n    ctx.lineDashOffset = 0;\n  }\n  const {\n    filter\n  } = ctx;\n  if (filter !== \"none\" && filter !== \"\") {\n    ctx.filter = \"none\";\n  }\n}\nfunction getImageSmoothingEnabled(transform, interpolate) {\n  if (interpolate) {\n    return true;\n  }\n  Util.singularValueDecompose2dScale(transform, XY);\n  const actualScale = Math.fround(OutputScale.pixelRatio * PixelsPerInch.PDF_TO_CSS_UNITS);\n  return XY[0] <= actualScale && XY[1] <= actualScale;\n}\nconst LINE_CAP_STYLES = [\"butt\", \"round\", \"square\"];\nconst LINE_JOIN_STYLES = [\"miter\", \"round\", \"bevel\"];\nconst NORMAL_CLIP = {};\nconst EO_CLIP = {};\nclass CanvasGraphics {\n  constructor(canvasCtx, commonObjs, objs, canvasFactory, filterFactory, {\n    optionalContentConfig,\n    markedContentStack = null\n  }, annotationCanvasMap, pageColors) {\n    this.ctx = canvasCtx;\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.stateStack = [];\n    this.pendingClip = null;\n    this.pendingEOFill = false;\n    this.res = null;\n    this.xobjs = null;\n    this.commonObjs = commonObjs;\n    this.objs = objs;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this.groupStack = [];\n    this.baseTransform = null;\n    this.baseTransformStack = [];\n    this.groupLevel = 0;\n    this.smaskStack = [];\n    this.smaskCounter = 0;\n    this.tempSMask = null;\n    this.suspendedCtx = null;\n    this.contentVisible = true;\n    this.markedContentStack = markedContentStack || [];\n    this.optionalContentConfig = optionalContentConfig;\n    this.cachedCanvases = new CachedCanvases(this.canvasFactory);\n    this.cachedPatterns = new Map();\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.viewportScale = 1;\n    this.outputScaleX = 1;\n    this.outputScaleY = 1;\n    this.pageColors = pageColors;\n    this._cachedScaleForStroking = [-1, 0];\n    this._cachedGetSinglePixelWidth = null;\n    this._cachedBitmapsMap = new Map();\n  }\n  getObject(data, fallback = null) {\n    if (typeof data === \"string\") {\n      return data.startsWith(\"g_\") ? this.commonObjs.get(data) : this.objs.get(data);\n    }\n    return fallback;\n  }\n  beginDrawing({\n    transform,\n    viewport,\n    transparency = false,\n    background = null\n  }) {\n    const width = this.ctx.canvas.width;\n    const height = this.ctx.canvas.height;\n    const savedFillStyle = this.ctx.fillStyle;\n    this.ctx.fillStyle = background || \"#ffffff\";\n    this.ctx.fillRect(0, 0, width, height);\n    this.ctx.fillStyle = savedFillStyle;\n    if (transparency) {\n      const transparentCanvas = this.cachedCanvases.getCanvas(\"transparent\", width, height);\n      this.compositeCtx = this.ctx;\n      this.transparentCanvas = transparentCanvas.canvas;\n      this.ctx = transparentCanvas.context;\n      this.ctx.save();\n      this.ctx.transform(...getCurrentTransform(this.compositeCtx));\n    }\n    this.ctx.save();\n    resetCtxToDefault(this.ctx);\n    if (transform) {\n      this.ctx.transform(...transform);\n      this.outputScaleX = transform[0];\n      this.outputScaleY = transform[0];\n    }\n    this.ctx.transform(...viewport.transform);\n    this.viewportScale = viewport.scale;\n    this.baseTransform = getCurrentTransform(this.ctx);\n  }\n  executeOperatorList(operatorList, executionStartIdx, continueCallback, stepper) {\n    const argsArray = operatorList.argsArray;\n    const fnArray = operatorList.fnArray;\n    let i = executionStartIdx || 0;\n    const argsArrayLen = argsArray.length;\n    if (argsArrayLen === i) {\n      return i;\n    }\n    const chunkOperations = argsArrayLen - i > EXECUTION_STEPS && typeof continueCallback === \"function\";\n    const endTime = chunkOperations ? Date.now() + EXECUTION_TIME : 0;\n    let steps = 0;\n    const commonObjs = this.commonObjs;\n    const objs = this.objs;\n    let fnId;\n    while (true) {\n      if (stepper !== undefined && i === stepper.nextBreakPoint) {\n        stepper.breakIt(i, continueCallback);\n        return i;\n      }\n      fnId = fnArray[i];\n      if (fnId !== OPS.dependency) {\n        this[fnId].apply(this, argsArray[i]);\n      } else {\n        for (const depObjId of argsArray[i]) {\n          const objsPool = depObjId.startsWith(\"g_\") ? commonObjs : objs;\n          if (!objsPool.has(depObjId)) {\n            objsPool.get(depObjId, continueCallback);\n            return i;\n          }\n        }\n      }\n      i++;\n      if (i === argsArrayLen) {\n        return i;\n      }\n      if (chunkOperations && ++steps > EXECUTION_STEPS) {\n        if (Date.now() > endTime) {\n          continueCallback();\n          return i;\n        }\n        steps = 0;\n      }\n    }\n  }\n  #restoreInitialState() {\n    while (this.stateStack.length || this.inSMaskMode) {\n      this.restore();\n    }\n    this.current.activeSMask = null;\n    this.ctx.restore();\n    if (this.transparentCanvas) {\n      this.ctx = this.compositeCtx;\n      this.ctx.save();\n      this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n      this.ctx.drawImage(this.transparentCanvas, 0, 0);\n      this.ctx.restore();\n      this.transparentCanvas = null;\n    }\n  }\n  endDrawing() {\n    this.#restoreInitialState();\n    this.cachedCanvases.clear();\n    this.cachedPatterns.clear();\n    for (const cache of this._cachedBitmapsMap.values()) {\n      for (const canvas of cache.values()) {\n        if (typeof HTMLCanvasElement !== \"undefined\" && canvas instanceof HTMLCanvasElement) {\n          canvas.width = canvas.height = 0;\n        }\n      }\n      cache.clear();\n    }\n    this._cachedBitmapsMap.clear();\n    this.#drawFilter();\n  }\n  #drawFilter() {\n    if (this.pageColors) {\n      const hcmFilterId = this.filterFactory.addHCMFilter(this.pageColors.foreground, this.pageColors.background);\n      if (hcmFilterId !== \"none\") {\n        const savedFilter = this.ctx.filter;\n        this.ctx.filter = hcmFilterId;\n        this.ctx.drawImage(this.ctx.canvas, 0, 0);\n        this.ctx.filter = savedFilter;\n      }\n    }\n  }\n  _scaleImage(img, inverseTransform) {\n    const width = img.width ?? img.displayWidth;\n    const height = img.height ?? img.displayHeight;\n    let widthScale = Math.max(Math.hypot(inverseTransform[0], inverseTransform[1]), 1);\n    let heightScale = Math.max(Math.hypot(inverseTransform[2], inverseTransform[3]), 1);\n    let paintWidth = width,\n      paintHeight = height;\n    let tmpCanvasId = \"prescale1\";\n    let tmpCanvas, tmpCtx;\n    while (widthScale > 2 && paintWidth > 1 || heightScale > 2 && paintHeight > 1) {\n      let newWidth = paintWidth,\n        newHeight = paintHeight;\n      if (widthScale > 2 && paintWidth > 1) {\n        newWidth = paintWidth >= 16384 ? Math.floor(paintWidth / 2) - 1 || 1 : Math.ceil(paintWidth / 2);\n        widthScale /= paintWidth / newWidth;\n      }\n      if (heightScale > 2 && paintHeight > 1) {\n        newHeight = paintHeight >= 16384 ? Math.floor(paintHeight / 2) - 1 || 1 : Math.ceil(paintHeight) / 2;\n        heightScale /= paintHeight / newHeight;\n      }\n      tmpCanvas = this.cachedCanvases.getCanvas(tmpCanvasId, newWidth, newHeight);\n      tmpCtx = tmpCanvas.context;\n      tmpCtx.clearRect(0, 0, newWidth, newHeight);\n      tmpCtx.drawImage(img, 0, 0, paintWidth, paintHeight, 0, 0, newWidth, newHeight);\n      img = tmpCanvas.canvas;\n      paintWidth = newWidth;\n      paintHeight = newHeight;\n      tmpCanvasId = tmpCanvasId === \"prescale1\" ? \"prescale2\" : \"prescale1\";\n    }\n    return {\n      img,\n      paintWidth,\n      paintHeight\n    };\n  }\n  _createMaskCanvas(img) {\n    const ctx = this.ctx;\n    const {\n      width,\n      height\n    } = img;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    const currentTransform = getCurrentTransform(ctx);\n    let cache, cacheKey, scaled, maskCanvas;\n    if ((img.bitmap || img.data) && img.count > 1) {\n      const mainKey = img.bitmap || img.data.buffer;\n      cacheKey = JSON.stringify(isPatternFill ? currentTransform : [currentTransform.slice(0, 4), fillColor]);\n      cache = this._cachedBitmapsMap.get(mainKey);\n      if (!cache) {\n        cache = new Map();\n        this._cachedBitmapsMap.set(mainKey, cache);\n      }\n      const cachedImage = cache.get(cacheKey);\n      if (cachedImage && !isPatternFill) {\n        const offsetX = Math.round(Math.min(currentTransform[0], currentTransform[2]) + currentTransform[4]);\n        const offsetY = Math.round(Math.min(currentTransform[1], currentTransform[3]) + currentTransform[5]);\n        return {\n          canvas: cachedImage,\n          offsetX,\n          offsetY\n        };\n      }\n      scaled = cachedImage;\n    }\n    if (!scaled) {\n      maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      putBinaryImageMask(maskCanvas.context, img);\n    }\n    let maskToCanvas = Util.transform(currentTransform, [1 / width, 0, 0, -1 / height, 0, 0]);\n    maskToCanvas = Util.transform(maskToCanvas, [1, 0, 0, 1, 0, -height]);\n    const minMax = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox([0, 0, width, height], maskToCanvas, minMax);\n    const [minX, minY, maxX, maxY] = minMax;\n    const drawnWidth = Math.round(maxX - minX) || 1;\n    const drawnHeight = Math.round(maxY - minY) || 1;\n    const fillCanvas = this.cachedCanvases.getCanvas(\"fillCanvas\", drawnWidth, drawnHeight);\n    const fillCtx = fillCanvas.context;\n    const offsetX = minX;\n    const offsetY = minY;\n    fillCtx.translate(-offsetX, -offsetY);\n    fillCtx.transform(...maskToCanvas);\n    if (!scaled) {\n      scaled = this._scaleImage(maskCanvas.canvas, getCurrentTransformInverse(fillCtx));\n      scaled = scaled.img;\n      if (cache && isPatternFill) {\n        cache.set(cacheKey, scaled);\n      }\n    }\n    fillCtx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(fillCtx), img.interpolate);\n    drawImageAtIntegerCoords(fillCtx, scaled, 0, 0, scaled.width, scaled.height, 0, 0, width, height);\n    fillCtx.globalCompositeOperation = \"source-in\";\n    const inverse = Util.transform(getCurrentTransformInverse(fillCtx), [1, 0, 0, 1, -offsetX, -offsetY]);\n    fillCtx.fillStyle = isPatternFill ? fillColor.getPattern(ctx, this, inverse, PathType.FILL) : fillColor;\n    fillCtx.fillRect(0, 0, width, height);\n    if (cache && !isPatternFill) {\n      this.cachedCanvases.delete(\"fillCanvas\");\n      cache.set(cacheKey, fillCanvas.canvas);\n    }\n    return {\n      canvas: fillCanvas.canvas,\n      offsetX: Math.round(offsetX),\n      offsetY: Math.round(offsetY)\n    };\n  }\n  setLineWidth(width) {\n    if (width !== this.current.lineWidth) {\n      this._cachedScaleForStroking[0] = -1;\n    }\n    this.current.lineWidth = width;\n    this.ctx.lineWidth = width;\n  }\n  setLineCap(style) {\n    this.ctx.lineCap = LINE_CAP_STYLES[style];\n  }\n  setLineJoin(style) {\n    this.ctx.lineJoin = LINE_JOIN_STYLES[style];\n  }\n  setMiterLimit(limit) {\n    this.ctx.miterLimit = limit;\n  }\n  setDash(dashArray, dashPhase) {\n    const ctx = this.ctx;\n    if (ctx.setLineDash !== undefined) {\n      ctx.setLineDash(dashArray);\n      ctx.lineDashOffset = dashPhase;\n    }\n  }\n  setRenderingIntent(intent) {}\n  setFlatness(flatness) {}\n  setGState(states) {\n    for (const [key, value] of states) {\n      switch (key) {\n        case \"LW\":\n          this.setLineWidth(value);\n          break;\n        case \"LC\":\n          this.setLineCap(value);\n          break;\n        case \"LJ\":\n          this.setLineJoin(value);\n          break;\n        case \"ML\":\n          this.setMiterLimit(value);\n          break;\n        case \"D\":\n          this.setDash(value[0], value[1]);\n          break;\n        case \"RI\":\n          this.setRenderingIntent(value);\n          break;\n        case \"FL\":\n          this.setFlatness(value);\n          break;\n        case \"Font\":\n          this.setFont(value[0], value[1]);\n          break;\n        case \"CA\":\n          this.current.strokeAlpha = value;\n          break;\n        case \"ca\":\n          this.ctx.globalAlpha = this.current.fillAlpha = value;\n          break;\n        case \"BM\":\n          this.ctx.globalCompositeOperation = value;\n          break;\n        case \"SMask\":\n          this.current.activeSMask = value ? this.tempSMask : null;\n          this.tempSMask = null;\n          this.checkSMaskState();\n          break;\n        case \"TR\":\n          this.ctx.filter = this.current.transferMaps = this.filterFactory.addFilter(value);\n          break;\n      }\n    }\n  }\n  get inSMaskMode() {\n    return !!this.suspendedCtx;\n  }\n  checkSMaskState() {\n    const inSMaskMode = this.inSMaskMode;\n    if (this.current.activeSMask && !inSMaskMode) {\n      this.beginSMaskMode();\n    } else if (!this.current.activeSMask && inSMaskMode) {\n      this.endSMaskMode();\n    }\n  }\n  beginSMaskMode() {\n    if (this.inSMaskMode) {\n      throw new Error(\"beginSMaskMode called while already in smask mode\");\n    }\n    const drawnWidth = this.ctx.canvas.width;\n    const drawnHeight = this.ctx.canvas.height;\n    const cacheId = \"smaskGroupAt\" + this.groupLevel;\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    this.suspendedCtx = this.ctx;\n    const ctx = this.ctx = scratchCanvas.context;\n    ctx.setTransform(this.suspendedCtx.getTransform());\n    copyCtxState(this.suspendedCtx, ctx);\n    mirrorContextOperations(ctx, this.suspendedCtx);\n    this.setGState([[\"BM\", \"source-over\"]]);\n  }\n  endSMaskMode() {\n    if (!this.inSMaskMode) {\n      throw new Error(\"endSMaskMode called while not in smask mode\");\n    }\n    this.ctx._removeMirroring();\n    copyCtxState(this.ctx, this.suspendedCtx);\n    this.ctx = this.suspendedCtx;\n    this.suspendedCtx = null;\n  }\n  compose(dirtyBox) {\n    if (!this.current.activeSMask) {\n      return;\n    }\n    if (!dirtyBox) {\n      dirtyBox = [0, 0, this.ctx.canvas.width, this.ctx.canvas.height];\n    } else {\n      dirtyBox[0] = Math.floor(dirtyBox[0]);\n      dirtyBox[1] = Math.floor(dirtyBox[1]);\n      dirtyBox[2] = Math.ceil(dirtyBox[2]);\n      dirtyBox[3] = Math.ceil(dirtyBox[3]);\n    }\n    const smask = this.current.activeSMask;\n    const suspendedCtx = this.suspendedCtx;\n    this.composeSMask(suspendedCtx, smask, this.ctx, dirtyBox);\n    this.ctx.save();\n    this.ctx.setTransform(1, 0, 0, 1, 0, 0);\n    this.ctx.clearRect(0, 0, this.ctx.canvas.width, this.ctx.canvas.height);\n    this.ctx.restore();\n  }\n  composeSMask(ctx, smask, layerCtx, layerBox) {\n    const layerOffsetX = layerBox[0];\n    const layerOffsetY = layerBox[1];\n    const layerWidth = layerBox[2] - layerOffsetX;\n    const layerHeight = layerBox[3] - layerOffsetY;\n    if (layerWidth === 0 || layerHeight === 0) {\n      return;\n    }\n    this.genericComposeSMask(smask.context, layerCtx, layerWidth, layerHeight, smask.subtype, smask.backdrop, smask.transferMap, layerOffsetX, layerOffsetY, smask.offsetX, smask.offsetY);\n    ctx.save();\n    ctx.globalAlpha = 1;\n    ctx.globalCompositeOperation = \"source-over\";\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(layerCtx.canvas, 0, 0);\n    ctx.restore();\n  }\n  genericComposeSMask(maskCtx, layerCtx, width, height, subtype, backdrop, transferMap, layerOffsetX, layerOffsetY, maskOffsetX, maskOffsetY) {\n    let maskCanvas = maskCtx.canvas;\n    let maskX = layerOffsetX - maskOffsetX;\n    let maskY = layerOffsetY - maskOffsetY;\n    if (backdrop) {\n      if (maskX < 0 || maskY < 0 || maskX + width > maskCanvas.width || maskY + height > maskCanvas.height) {\n        const canvas = this.cachedCanvases.getCanvas(\"maskExtension\", width, height);\n        const ctx = canvas.context;\n        ctx.drawImage(maskCanvas, -maskX, -maskY);\n        ctx.globalCompositeOperation = \"destination-atop\";\n        ctx.fillStyle = backdrop;\n        ctx.fillRect(0, 0, width, height);\n        ctx.globalCompositeOperation = \"source-over\";\n        maskCanvas = canvas.canvas;\n        maskX = maskY = 0;\n      } else {\n        maskCtx.save();\n        maskCtx.globalAlpha = 1;\n        maskCtx.setTransform(1, 0, 0, 1, 0, 0);\n        const clip = new Path2D();\n        clip.rect(maskX, maskY, width, height);\n        maskCtx.clip(clip);\n        maskCtx.globalCompositeOperation = \"destination-atop\";\n        maskCtx.fillStyle = backdrop;\n        maskCtx.fillRect(maskX, maskY, width, height);\n        maskCtx.restore();\n      }\n    }\n    layerCtx.save();\n    layerCtx.globalAlpha = 1;\n    layerCtx.setTransform(1, 0, 0, 1, 0, 0);\n    if (subtype === \"Alpha\" && transferMap) {\n      layerCtx.filter = this.filterFactory.addAlphaFilter(transferMap);\n    } else if (subtype === \"Luminosity\") {\n      layerCtx.filter = this.filterFactory.addLuminosityFilter(transferMap);\n    }\n    const clip = new Path2D();\n    clip.rect(layerOffsetX, layerOffsetY, width, height);\n    layerCtx.clip(clip);\n    layerCtx.globalCompositeOperation = \"destination-in\";\n    layerCtx.drawImage(maskCanvas, maskX, maskY, width, height, layerOffsetX, layerOffsetY, width, height);\n    layerCtx.restore();\n  }\n  save() {\n    if (this.inSMaskMode) {\n      copyCtxState(this.ctx, this.suspendedCtx);\n    }\n    this.ctx.save();\n    const old = this.current;\n    this.stateStack.push(old);\n    this.current = old.clone();\n  }\n  restore() {\n    if (this.stateStack.length === 0) {\n      if (this.inSMaskMode) {\n        this.endSMaskMode();\n      }\n      return;\n    }\n    this.current = this.stateStack.pop();\n    this.ctx.restore();\n    if (this.inSMaskMode) {\n      copyCtxState(this.suspendedCtx, this.ctx);\n    }\n    this.checkSMaskState();\n    this.pendingClip = null;\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  transform(a, b, c, d, e, f) {\n    this.ctx.transform(a, b, c, d, e, f);\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n  }\n  constructPath(op, data, minMax) {\n    let [path] = data;\n    if (!minMax) {\n      path ||= data[0] = new Path2D();\n      this[op](path);\n      return;\n    }\n    if (!(path instanceof Path2D)) {\n      const path2d = data[0] = new Path2D();\n      for (let i = 0, ii = path.length; i < ii;) {\n        switch (path[i++]) {\n          case DrawOPS.moveTo:\n            path2d.moveTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.lineTo:\n            path2d.lineTo(path[i++], path[i++]);\n            break;\n          case DrawOPS.curveTo:\n            path2d.bezierCurveTo(path[i++], path[i++], path[i++], path[i++], path[i++], path[i++]);\n            break;\n          case DrawOPS.closePath:\n            path2d.closePath();\n            break;\n          default:\n            warn(`Unrecognized drawing path operator: ${path[i - 1]}`);\n            break;\n        }\n      }\n      path = path2d;\n    }\n    Util.axialAlignedBoundingBox(minMax, getCurrentTransform(this.ctx), this.current.minMax);\n    this[op](path);\n  }\n  closePath() {\n    this.ctx.closePath();\n  }\n  stroke(path, consumePath = true) {\n    const ctx = this.ctx;\n    const strokeColor = this.current.strokeColor;\n    ctx.globalAlpha = this.current.strokeAlpha;\n    if (this.contentVisible) {\n      if (typeof strokeColor === \"object\" && strokeColor?.getPattern) {\n        const baseTransform = strokeColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n        ctx.save();\n        ctx.strokeStyle = strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n        if (baseTransform) {\n          const newPath = new Path2D();\n          newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n          path = newPath;\n        }\n        this.rescaleAndStroke(path, false);\n        ctx.restore();\n      } else {\n        this.rescaleAndStroke(path, true);\n      }\n    }\n    if (consumePath) {\n      this.consumePath(path, this.current.getClippedPathBoundingBox(PathType.STROKE, getCurrentTransform(this.ctx)));\n    }\n    ctx.globalAlpha = this.current.fillAlpha;\n  }\n  closeStroke(path) {\n    this.stroke(path);\n  }\n  fill(path, consumePath = true) {\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    let needRestore = false;\n    if (isPatternFill) {\n      const baseTransform = fillColor.isModifyingCurrentTransform() ? ctx.getTransform() : null;\n      ctx.save();\n      ctx.fillStyle = fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      if (baseTransform) {\n        const newPath = new Path2D();\n        newPath.addPath(path, ctx.getTransform().invertSelf().multiplySelf(baseTransform));\n        path = newPath;\n      }\n      needRestore = true;\n    }\n    const intersect = this.current.getClippedPathBoundingBox();\n    if (this.contentVisible && intersect !== null) {\n      if (this.pendingEOFill) {\n        ctx.fill(path, \"evenodd\");\n        this.pendingEOFill = false;\n      } else {\n        ctx.fill(path);\n      }\n    }\n    if (needRestore) {\n      ctx.restore();\n    }\n    if (consumePath) {\n      this.consumePath(path, intersect);\n    }\n  }\n  eoFill(path) {\n    this.pendingEOFill = true;\n    this.fill(path);\n  }\n  fillStroke(path) {\n    this.fill(path, false);\n    this.stroke(path, false);\n    this.consumePath(path);\n  }\n  eoFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  closeFillStroke(path) {\n    this.fillStroke(path);\n  }\n  closeEOFillStroke(path) {\n    this.pendingEOFill = true;\n    this.fillStroke(path);\n  }\n  endPath(path) {\n    this.consumePath(path);\n  }\n  rawFillPath(path) {\n    this.ctx.fill(path);\n  }\n  clip() {\n    this.pendingClip = NORMAL_CLIP;\n  }\n  eoClip() {\n    this.pendingClip = EO_CLIP;\n  }\n  beginText() {\n    this.current.textMatrix = null;\n    this.current.textMatrixScale = 1;\n    this.current.x = this.current.lineX = 0;\n    this.current.y = this.current.lineY = 0;\n  }\n  endText() {\n    const paths = this.pendingTextPaths;\n    const ctx = this.ctx;\n    if (paths === undefined) {\n      return;\n    }\n    const newPath = new Path2D();\n    const invTransf = ctx.getTransform().invertSelf();\n    for (const {\n      transform,\n      x,\n      y,\n      fontSize,\n      path\n    } of paths) {\n      newPath.addPath(path, new DOMMatrix(transform).preMultiplySelf(invTransf).translate(x, y).scale(fontSize, -fontSize));\n    }\n    ctx.clip(newPath);\n    delete this.pendingTextPaths;\n  }\n  setCharSpacing(spacing) {\n    this.current.charSpacing = spacing;\n  }\n  setWordSpacing(spacing) {\n    this.current.wordSpacing = spacing;\n  }\n  setHScale(scale) {\n    this.current.textHScale = scale / 100;\n  }\n  setLeading(leading) {\n    this.current.leading = -leading;\n  }\n  setFont(fontRefName, size) {\n    const fontObj = this.commonObjs.get(fontRefName);\n    const current = this.current;\n    if (!fontObj) {\n      throw new Error(`Can't find font for ${fontRefName}`);\n    }\n    current.fontMatrix = fontObj.fontMatrix || FONT_IDENTITY_MATRIX;\n    if (current.fontMatrix[0] === 0 || current.fontMatrix[3] === 0) {\n      warn(\"Invalid font matrix for font \" + fontRefName);\n    }\n    if (size < 0) {\n      size = -size;\n      current.fontDirection = -1;\n    } else {\n      current.fontDirection = 1;\n    }\n    this.current.font = fontObj;\n    this.current.fontSize = size;\n    if (fontObj.isType3Font) {\n      return;\n    }\n    const name = fontObj.loadedName || \"sans-serif\";\n    const typeface = fontObj.systemFontInfo?.css || `\"${name}\", ${fontObj.fallbackName}`;\n    let bold = \"normal\";\n    if (fontObj.black) {\n      bold = \"900\";\n    } else if (fontObj.bold) {\n      bold = \"bold\";\n    }\n    const italic = fontObj.italic ? \"italic\" : \"normal\";\n    let browserFontSize = size;\n    if (size < MIN_FONT_SIZE) {\n      browserFontSize = MIN_FONT_SIZE;\n    } else if (size > MAX_FONT_SIZE) {\n      browserFontSize = MAX_FONT_SIZE;\n    }\n    this.current.fontSizeScale = size / browserFontSize;\n    this.ctx.font = `${italic} ${bold} ${browserFontSize}px ${typeface}`;\n  }\n  setTextRenderingMode(mode) {\n    this.current.textRenderingMode = mode;\n  }\n  setTextRise(rise) {\n    this.current.textRise = rise;\n  }\n  moveText(x, y) {\n    this.current.x = this.current.lineX += x;\n    this.current.y = this.current.lineY += y;\n  }\n  setLeadingMoveText(x, y) {\n    this.setLeading(-y);\n    this.moveText(x, y);\n  }\n  setTextMatrix(matrix) {\n    const {\n      current\n    } = this;\n    current.textMatrix = matrix;\n    current.textMatrixScale = Math.hypot(matrix[0], matrix[1]);\n    current.x = current.lineX = 0;\n    current.y = current.lineY = 0;\n  }\n  nextLine() {\n    this.moveText(0, this.current.leading);\n  }\n  #getScaledPath(path, currentTransform, transform) {\n    const newPath = new Path2D();\n    newPath.addPath(path, new DOMMatrix(transform).invertSelf().multiplySelf(currentTransform));\n    return newPath;\n  }\n  paintChar(character, x, y, patternFillTransform, patternStrokeTransform) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const textRenderingMode = current.textRenderingMode;\n    const fontSize = current.fontSize / current.fontSizeScale;\n    const fillStrokeMode = textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n    const isAddToPathSet = !!(textRenderingMode & TextRenderingMode.ADD_TO_PATH_FLAG);\n    const patternFill = current.patternFill && !font.missingFile;\n    const patternStroke = current.patternStroke && !font.missingFile;\n    let path;\n    if (font.disableFontFace || isAddToPathSet || patternFill || patternStroke) {\n      path = font.getPathGenerator(this.commonObjs, character);\n    }\n    if (font.disableFontFace || patternFill || patternStroke) {\n      ctx.save();\n      ctx.translate(x, y);\n      ctx.scale(fontSize, -fontSize);\n      let currentTransform;\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternFillTransform) {\n          currentTransform = ctx.getTransform();\n          ctx.setTransform(...patternFillTransform);\n          ctx.fill(this.#getScaledPath(path, currentTransform, patternFillTransform));\n        } else {\n          ctx.fill(path);\n        }\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        if (patternStrokeTransform) {\n          currentTransform ||= ctx.getTransform();\n          ctx.setTransform(...patternStrokeTransform);\n          const {\n            a,\n            b,\n            c,\n            d\n          } = currentTransform;\n          const invPatternTransform = Util.inverseTransform(patternStrokeTransform);\n          const transf = Util.transform([a, b, c, d, 0, 0], invPatternTransform);\n          Util.singularValueDecompose2dScale(transf, XY);\n          ctx.lineWidth *= Math.max(XY[0], XY[1]) / fontSize;\n          ctx.stroke(this.#getScaledPath(path, currentTransform, patternStrokeTransform));\n        } else {\n          ctx.lineWidth /= fontSize;\n          ctx.stroke(path);\n        }\n      }\n      ctx.restore();\n    } else {\n      if (fillStrokeMode === TextRenderingMode.FILL || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.fillText(character, x, y);\n      }\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        ctx.strokeText(character, x, y);\n      }\n    }\n    if (isAddToPathSet) {\n      const paths = this.pendingTextPaths ||= [];\n      paths.push({\n        transform: getCurrentTransform(ctx),\n        x,\n        y,\n        fontSize,\n        path\n      });\n    }\n  }\n  get isFontSubpixelAAEnabled() {\n    const {\n      context: ctx\n    } = this.cachedCanvases.getCanvas(\"isFontSubpixelAAEnabled\", 10, 10);\n    ctx.scale(1.5, 1);\n    ctx.fillText(\"I\", 0, 10);\n    const data = ctx.getImageData(0, 0, 10, 10).data;\n    let enabled = false;\n    for (let i = 3; i < data.length; i += 4) {\n      if (data[i] > 0 && data[i] < 255) {\n        enabled = true;\n        break;\n      }\n    }\n    return shadow(this, \"isFontSubpixelAAEnabled\", enabled);\n  }\n  showText(glyphs) {\n    const current = this.current;\n    const font = current.font;\n    if (font.isType3Font) {\n      return this.showType3Text(glyphs);\n    }\n    const fontSize = current.fontSize;\n    if (fontSize === 0) {\n      return undefined;\n    }\n    const ctx = this.ctx;\n    const fontSizeScale = current.fontSizeScale;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const fontDirection = current.fontDirection;\n    const textHScale = current.textHScale * fontDirection;\n    const glyphsLength = glyphs.length;\n    const vertical = font.vertical;\n    const spacingDir = vertical ? 1 : -1;\n    const defaultVMetrics = font.defaultVMetrics;\n    const widthAdvanceScale = fontSize * current.fontMatrix[0];\n    const simpleFillText = current.textRenderingMode === TextRenderingMode.FILL && !font.disableFontFace && !current.patternFill;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    if (fontDirection > 0) {\n      ctx.scale(textHScale, -1);\n    } else {\n      ctx.scale(textHScale, 1);\n    }\n    let patternFillTransform, patternStrokeTransform;\n    if (current.patternFill) {\n      ctx.save();\n      const pattern = current.fillColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.FILL);\n      patternFillTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.fillStyle = pattern;\n    }\n    if (current.patternStroke) {\n      ctx.save();\n      const pattern = current.strokeColor.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.STROKE);\n      patternStrokeTransform = getCurrentTransform(ctx);\n      ctx.restore();\n      ctx.strokeStyle = pattern;\n    }\n    let lineWidth = current.lineWidth;\n    const scale = current.textMatrixScale;\n    if (scale === 0 || lineWidth === 0) {\n      const fillStrokeMode = current.textRenderingMode & TextRenderingMode.FILL_STROKE_MASK;\n      if (fillStrokeMode === TextRenderingMode.STROKE || fillStrokeMode === TextRenderingMode.FILL_STROKE) {\n        lineWidth = this.getSinglePixelWidth();\n      }\n    } else {\n      lineWidth /= scale;\n    }\n    if (fontSizeScale !== 1.0) {\n      ctx.scale(fontSizeScale, fontSizeScale);\n      lineWidth /= fontSizeScale;\n    }\n    ctx.lineWidth = lineWidth;\n    if (font.isInvalidPDFjsFont) {\n      const chars = [];\n      let width = 0;\n      for (const glyph of glyphs) {\n        chars.push(glyph.unicode);\n        width += glyph.width;\n      }\n      ctx.fillText(chars.join(\"\"), 0, 0);\n      current.x += width * widthAdvanceScale * textHScale;\n      ctx.restore();\n      this.compose();\n      return undefined;\n    }\n    let x = 0,\n      i;\n    for (i = 0; i < glyphsLength; ++i) {\n      const glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        x += spacingDir * glyph * fontSize / 1000;\n        continue;\n      }\n      let restoreNeeded = false;\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const character = glyph.fontChar;\n      const accent = glyph.accent;\n      let scaledX, scaledY;\n      let width = glyph.width;\n      if (vertical) {\n        const vmetric = glyph.vmetric || defaultVMetrics;\n        const vx = -(glyph.vmetric ? vmetric[1] : width * 0.5) * widthAdvanceScale;\n        const vy = vmetric[2] * widthAdvanceScale;\n        width = vmetric ? -vmetric[0] : width;\n        scaledX = vx / fontSizeScale;\n        scaledY = (x + vy) / fontSizeScale;\n      } else {\n        scaledX = x / fontSizeScale;\n        scaledY = 0;\n      }\n      if (font.remeasure && width > 0) {\n        const measuredWidth = ctx.measureText(character).width * 1000 / fontSize * fontSizeScale;\n        if (width < measuredWidth && this.isFontSubpixelAAEnabled) {\n          const characterScaleX = width / measuredWidth;\n          restoreNeeded = true;\n          ctx.save();\n          ctx.scale(characterScaleX, 1);\n          scaledX /= characterScaleX;\n        } else if (width !== measuredWidth) {\n          scaledX += (width - measuredWidth) / 2000 * fontSize / fontSizeScale;\n        }\n      }\n      if (this.contentVisible && (glyph.isInFont || font.missingFile)) {\n        if (simpleFillText && !accent) {\n          ctx.fillText(character, scaledX, scaledY);\n        } else {\n          this.paintChar(character, scaledX, scaledY, patternFillTransform, patternStrokeTransform);\n          if (accent) {\n            const scaledAccentX = scaledX + fontSize * accent.offset.x / fontSizeScale;\n            const scaledAccentY = scaledY - fontSize * accent.offset.y / fontSizeScale;\n            this.paintChar(accent.fontChar, scaledAccentX, scaledAccentY, patternFillTransform, patternStrokeTransform);\n          }\n        }\n      }\n      const charWidth = vertical ? width * widthAdvanceScale - spacing * fontDirection : width * widthAdvanceScale + spacing * fontDirection;\n      x += charWidth;\n      if (restoreNeeded) {\n        ctx.restore();\n      }\n    }\n    if (vertical) {\n      current.y -= x;\n    } else {\n      current.x += x * textHScale;\n    }\n    ctx.restore();\n    this.compose();\n    return undefined;\n  }\n  showType3Text(glyphs) {\n    const ctx = this.ctx;\n    const current = this.current;\n    const font = current.font;\n    const fontSize = current.fontSize;\n    const fontDirection = current.fontDirection;\n    const spacingDir = font.vertical ? 1 : -1;\n    const charSpacing = current.charSpacing;\n    const wordSpacing = current.wordSpacing;\n    const textHScale = current.textHScale * fontDirection;\n    const fontMatrix = current.fontMatrix || FONT_IDENTITY_MATRIX;\n    const glyphsLength = glyphs.length;\n    const isTextInvisible = current.textRenderingMode === TextRenderingMode.INVISIBLE;\n    let i, glyph, width, spacingLength;\n    if (isTextInvisible || fontSize === 0) {\n      return;\n    }\n    this._cachedScaleForStroking[0] = -1;\n    this._cachedGetSinglePixelWidth = null;\n    ctx.save();\n    if (current.textMatrix) {\n      ctx.transform(...current.textMatrix);\n    }\n    ctx.translate(current.x, current.y + current.textRise);\n    ctx.scale(textHScale, fontDirection);\n    for (i = 0; i < glyphsLength; ++i) {\n      glyph = glyphs[i];\n      if (typeof glyph === \"number\") {\n        spacingLength = spacingDir * glyph * fontSize / 1000;\n        this.ctx.translate(spacingLength, 0);\n        current.x += spacingLength * textHScale;\n        continue;\n      }\n      const spacing = (glyph.isSpace ? wordSpacing : 0) + charSpacing;\n      const operatorList = font.charProcOperatorList[glyph.operatorListId];\n      if (!operatorList) {\n        warn(`Type3 character \"${glyph.operatorListId}\" is not available.`);\n      } else if (this.contentVisible) {\n        this.save();\n        ctx.scale(fontSize, fontSize);\n        ctx.transform(...fontMatrix);\n        this.executeOperatorList(operatorList);\n        this.restore();\n      }\n      const p = [glyph.width, 0];\n      Util.applyTransform(p, fontMatrix);\n      width = p[0] * fontSize + spacing;\n      ctx.translate(width, 0);\n      current.x += width * textHScale;\n    }\n    ctx.restore();\n  }\n  setCharWidth(xWidth, yWidth) {}\n  setCharWidthAndBounds(xWidth, yWidth, llx, lly, urx, ury) {\n    const clip = new Path2D();\n    clip.rect(llx, lly, urx - llx, ury - lly);\n    this.ctx.clip(clip);\n    this.endPath();\n  }\n  getColorN_Pattern(IR) {\n    let pattern;\n    if (IR[0] === \"TilingPattern\") {\n      const baseTransform = this.baseTransform || getCurrentTransform(this.ctx);\n      const canvasGraphicsFactory = {\n        createCanvasGraphics: ctx => new CanvasGraphics(ctx, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n          optionalContentConfig: this.optionalContentConfig,\n          markedContentStack: this.markedContentStack\n        })\n      };\n      pattern = new TilingPattern(IR, this.ctx, canvasGraphicsFactory, baseTransform);\n    } else {\n      pattern = this._getPattern(IR[1], IR[2]);\n    }\n    return pattern;\n  }\n  setStrokeColorN() {\n    this.current.strokeColor = this.getColorN_Pattern(arguments);\n    this.current.patternStroke = true;\n  }\n  setFillColorN() {\n    this.current.fillColor = this.getColorN_Pattern(arguments);\n    this.current.patternFill = true;\n  }\n  setStrokeRGBColor(color) {\n    this.ctx.strokeStyle = this.current.strokeColor = color;\n    this.current.patternStroke = false;\n  }\n  setStrokeTransparent() {\n    this.ctx.strokeStyle = this.current.strokeColor = \"transparent\";\n    this.current.patternStroke = false;\n  }\n  setFillRGBColor(color) {\n    this.ctx.fillStyle = this.current.fillColor = color;\n    this.current.patternFill = false;\n  }\n  setFillTransparent() {\n    this.ctx.fillStyle = this.current.fillColor = \"transparent\";\n    this.current.patternFill = false;\n  }\n  _getPattern(objId, matrix = null) {\n    let pattern;\n    if (this.cachedPatterns.has(objId)) {\n      pattern = this.cachedPatterns.get(objId);\n    } else {\n      pattern = getShadingPattern(this.getObject(objId));\n      this.cachedPatterns.set(objId, pattern);\n    }\n    if (matrix) {\n      pattern.matrix = matrix;\n    }\n    return pattern;\n  }\n  shadingFill(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    this.save();\n    const pattern = this._getPattern(objId);\n    ctx.fillStyle = pattern.getPattern(ctx, this, getCurrentTransformInverse(ctx), PathType.SHADING);\n    const inv = getCurrentTransformInverse(ctx);\n    if (inv) {\n      const {\n        width,\n        height\n      } = ctx.canvas;\n      const minMax = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, width, height], inv, minMax);\n      const [x0, y0, x1, y1] = minMax;\n      this.ctx.fillRect(x0, y0, x1 - x0, y1 - y0);\n    } else {\n      this.ctx.fillRect(-1e10, -1e10, 2e10, 2e10);\n    }\n    this.compose(this.current.getClippedPathBoundingBox());\n    this.restore();\n  }\n  beginInlineImage() {\n    unreachable(\"Should not call beginInlineImage\");\n  }\n  beginImageData() {\n    unreachable(\"Should not call beginImageData\");\n  }\n  paintFormXObjectBegin(matrix, bbox) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    this.baseTransformStack.push(this.baseTransform);\n    if (matrix) {\n      this.transform(...matrix);\n    }\n    this.baseTransform = getCurrentTransform(this.ctx);\n    if (bbox) {\n      Util.axialAlignedBoundingBox(bbox, this.baseTransform, this.current.minMax);\n      const [x0, y0, x1, y1] = bbox;\n      const clip = new Path2D();\n      clip.rect(x0, y0, x1 - x0, y1 - y0);\n      this.ctx.clip(clip);\n      this.endPath();\n    }\n  }\n  paintFormXObjectEnd() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.restore();\n    this.baseTransform = this.baseTransformStack.pop();\n  }\n  beginGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.save();\n    if (this.inSMaskMode) {\n      this.endSMaskMode();\n      this.current.activeSMask = null;\n    }\n    const currentCtx = this.ctx;\n    if (!group.isolated) {\n      info(\"TODO: Support non-isolated groups.\");\n    }\n    if (group.knockout) {\n      warn(\"Knockout groups not supported.\");\n    }\n    const currentTransform = getCurrentTransform(currentCtx);\n    if (group.matrix) {\n      currentCtx.transform(...group.matrix);\n    }\n    if (!group.bbox) {\n      throw new Error(\"Bounding box is required.\");\n    }\n    let bounds = MIN_MAX_INIT.slice();\n    Util.axialAlignedBoundingBox(group.bbox, getCurrentTransform(currentCtx), bounds);\n    const canvasBounds = [0, 0, currentCtx.canvas.width, currentCtx.canvas.height];\n    bounds = Util.intersect(bounds, canvasBounds) || [0, 0, 0, 0];\n    const offsetX = Math.floor(bounds[0]);\n    const offsetY = Math.floor(bounds[1]);\n    const drawnWidth = Math.max(Math.ceil(bounds[2]) - offsetX, 1);\n    const drawnHeight = Math.max(Math.ceil(bounds[3]) - offsetY, 1);\n    this.current.startNewPathAndClipBox([0, 0, drawnWidth, drawnHeight]);\n    let cacheId = \"groupAt\" + this.groupLevel;\n    if (group.smask) {\n      cacheId += \"_smask_\" + this.smaskCounter++ % 2;\n    }\n    const scratchCanvas = this.cachedCanvases.getCanvas(cacheId, drawnWidth, drawnHeight);\n    const groupCtx = scratchCanvas.context;\n    groupCtx.translate(-offsetX, -offsetY);\n    groupCtx.transform(...currentTransform);\n    let clip = new Path2D();\n    const [x0, y0, x1, y1] = group.bbox;\n    clip.rect(x0, y0, x1 - x0, y1 - y0);\n    if (group.matrix) {\n      const path = new Path2D();\n      path.addPath(clip, new DOMMatrix(group.matrix));\n      clip = path;\n    }\n    groupCtx.clip(clip);\n    if (group.smask) {\n      this.smaskStack.push({\n        canvas: scratchCanvas.canvas,\n        context: groupCtx,\n        offsetX,\n        offsetY,\n        subtype: group.smask.subtype,\n        backdrop: group.smask.backdrop,\n        transferMap: group.smask.transferMap || null,\n        startTransformInverse: null\n      });\n    } else {\n      currentCtx.setTransform(1, 0, 0, 1, 0, 0);\n      currentCtx.translate(offsetX, offsetY);\n      currentCtx.save();\n    }\n    copyCtxState(currentCtx, groupCtx);\n    this.ctx = groupCtx;\n    this.setGState([[\"BM\", \"source-over\"], [\"ca\", 1], [\"CA\", 1]]);\n    this.groupStack.push(currentCtx);\n    this.groupLevel++;\n  }\n  endGroup(group) {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.groupLevel--;\n    const groupCtx = this.ctx;\n    const ctx = this.groupStack.pop();\n    this.ctx = ctx;\n    this.ctx.imageSmoothingEnabled = false;\n    if (group.smask) {\n      this.tempSMask = this.smaskStack.pop();\n      this.restore();\n    } else {\n      this.ctx.restore();\n      const currentMtx = getCurrentTransform(this.ctx);\n      this.restore();\n      this.ctx.save();\n      this.ctx.setTransform(...currentMtx);\n      const dirtyBox = MIN_MAX_INIT.slice();\n      Util.axialAlignedBoundingBox([0, 0, groupCtx.canvas.width, groupCtx.canvas.height], currentMtx, dirtyBox);\n      this.ctx.drawImage(groupCtx.canvas, 0, 0);\n      this.ctx.restore();\n      this.compose(dirtyBox);\n    }\n  }\n  beginAnnotation(id, rect, transform, matrix, hasOwnCanvas) {\n    this.#restoreInitialState();\n    resetCtxToDefault(this.ctx);\n    this.ctx.save();\n    this.save();\n    if (this.baseTransform) {\n      this.ctx.setTransform(...this.baseTransform);\n    }\n    if (rect) {\n      const width = rect[2] - rect[0];\n      const height = rect[3] - rect[1];\n      if (hasOwnCanvas && this.annotationCanvasMap) {\n        transform = transform.slice();\n        transform[4] -= rect[0];\n        transform[5] -= rect[1];\n        rect = rect.slice();\n        rect[0] = rect[1] = 0;\n        rect[2] = width;\n        rect[3] = height;\n        Util.singularValueDecompose2dScale(getCurrentTransform(this.ctx), XY);\n        const {\n          viewportScale\n        } = this;\n        const canvasWidth = Math.ceil(width * this.outputScaleX * viewportScale);\n        const canvasHeight = Math.ceil(height * this.outputScaleY * viewportScale);\n        this.annotationCanvas = this.canvasFactory.create(canvasWidth, canvasHeight);\n        const {\n          canvas,\n          context\n        } = this.annotationCanvas;\n        this.annotationCanvasMap.set(id, canvas);\n        this.annotationCanvas.savedCtx = this.ctx;\n        this.ctx = context;\n        this.ctx.save();\n        this.ctx.setTransform(XY[0], 0, 0, -XY[1], 0, height * XY[1]);\n        resetCtxToDefault(this.ctx);\n      } else {\n        resetCtxToDefault(this.ctx);\n        this.endPath();\n        const clip = new Path2D();\n        clip.rect(rect[0], rect[1], width, height);\n        this.ctx.clip(clip);\n      }\n    }\n    this.current = new CanvasExtraState(this.ctx.canvas.width, this.ctx.canvas.height);\n    this.transform(...transform);\n    this.transform(...matrix);\n  }\n  endAnnotation() {\n    if (this.annotationCanvas) {\n      this.ctx.restore();\n      this.#drawFilter();\n      this.ctx = this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas.savedCtx;\n      delete this.annotationCanvas;\n    }\n  }\n  paintImageMaskXObject(img) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const count = img.count;\n    img = this.getObject(img.data, img);\n    img.count = count;\n    const ctx = this.ctx;\n    const mask = this._createMaskCanvas(img);\n    const maskCanvas = mask.canvas;\n    ctx.save();\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.drawImage(maskCanvas, mask.offsetX, mask.offsetY);\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectRepeat(img, scaleX, skewX = 0, skewY = 0, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    img = this.getObject(img.data, img);\n    const ctx = this.ctx;\n    ctx.save();\n    const currentTransform = getCurrentTransform(ctx);\n    ctx.transform(scaleX, skewX, skewY, scaleY, 0, 0);\n    const mask = this._createMaskCanvas(img);\n    ctx.setTransform(1, 0, 0, 1, mask.offsetX - currentTransform[4], mask.offsetY - currentTransform[5]);\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      const trans = Util.transform(currentTransform, [scaleX, skewX, skewY, scaleY, positions[i], positions[i + 1]]);\n      ctx.drawImage(mask.canvas, trans[4], trans[5]);\n    }\n    ctx.restore();\n    this.compose();\n  }\n  paintImageMaskXObjectGroup(images) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    const fillColor = this.current.fillColor;\n    const isPatternFill = this.current.patternFill;\n    for (const image of images) {\n      const {\n        data,\n        width,\n        height,\n        transform\n      } = image;\n      const maskCanvas = this.cachedCanvases.getCanvas(\"maskCanvas\", width, height);\n      const maskCtx = maskCanvas.context;\n      maskCtx.save();\n      const img = this.getObject(data, image);\n      putBinaryImageMask(maskCtx, img);\n      maskCtx.globalCompositeOperation = \"source-in\";\n      maskCtx.fillStyle = isPatternFill ? fillColor.getPattern(maskCtx, this, getCurrentTransformInverse(ctx), PathType.FILL) : fillColor;\n      maskCtx.fillRect(0, 0, width, height);\n      maskCtx.restore();\n      ctx.save();\n      ctx.transform(...transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, maskCanvas.canvas, 0, 0, width, height, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintImageXObject(objId) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    this.paintInlineImageXObject(imgData);\n  }\n  paintImageXObjectRepeat(objId, scaleX, scaleY, positions) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const imgData = this.getObject(objId);\n    if (!imgData) {\n      warn(\"Dependent image isn't ready yet\");\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const map = [];\n    for (let i = 0, ii = positions.length; i < ii; i += 2) {\n      map.push({\n        transform: [scaleX, 0, 0, scaleY, positions[i], positions[i + 1]],\n        x: 0,\n        y: 0,\n        w: width,\n        h: height\n      });\n    }\n    this.paintInlineImageXObjectGroup(imgData, map);\n  }\n  applyTransferMapsToCanvas(ctx) {\n    if (this.current.transferMaps !== \"none\") {\n      ctx.filter = this.current.transferMaps;\n      ctx.drawImage(ctx.canvas, 0, 0);\n      ctx.filter = \"none\";\n    }\n    return ctx.canvas;\n  }\n  applyTransferMapsToBitmap(imgData) {\n    if (this.current.transferMaps === \"none\") {\n      return imgData.bitmap;\n    }\n    const {\n      bitmap,\n      width,\n      height\n    } = imgData;\n    const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n    const tmpCtx = tmpCanvas.context;\n    tmpCtx.filter = this.current.transferMaps;\n    tmpCtx.drawImage(bitmap, 0, 0);\n    tmpCtx.filter = \"none\";\n    return tmpCanvas.canvas;\n  }\n  paintInlineImageXObject(imgData) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const width = imgData.width;\n    const height = imgData.height;\n    const ctx = this.ctx;\n    this.save();\n    const {\n      filter\n    } = ctx;\n    if (filter !== \"none\" && filter !== \"\") {\n      ctx.filter = \"none\";\n    }\n    ctx.scale(1 / width, -1 / height);\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = this.applyTransferMapsToBitmap(imgData);\n    } else if (typeof HTMLElement === \"function\" && imgData instanceof HTMLElement || !imgData.data) {\n      imgToPaint = imgData;\n    } else {\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", width, height);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    const scaled = this._scaleImage(imgToPaint, getCurrentTransformInverse(ctx));\n    ctx.imageSmoothingEnabled = getImageSmoothingEnabled(getCurrentTransform(ctx), imgData.interpolate);\n    drawImageAtIntegerCoords(ctx, scaled.img, 0, 0, scaled.paintWidth, scaled.paintHeight, 0, -height, width, height);\n    this.compose();\n    this.restore();\n  }\n  paintInlineImageXObjectGroup(imgData, map) {\n    if (!this.contentVisible) {\n      return;\n    }\n    const ctx = this.ctx;\n    let imgToPaint;\n    if (imgData.bitmap) {\n      imgToPaint = imgData.bitmap;\n    } else {\n      const w = imgData.width;\n      const h = imgData.height;\n      const tmpCanvas = this.cachedCanvases.getCanvas(\"inlineImage\", w, h);\n      const tmpCtx = tmpCanvas.context;\n      putBinaryImageData(tmpCtx, imgData);\n      imgToPaint = this.applyTransferMapsToCanvas(tmpCtx);\n    }\n    for (const entry of map) {\n      ctx.save();\n      ctx.transform(...entry.transform);\n      ctx.scale(1, -1);\n      drawImageAtIntegerCoords(ctx, imgToPaint, entry.x, entry.y, entry.w, entry.h, 0, -1, 1, 1);\n      ctx.restore();\n    }\n    this.compose();\n  }\n  paintSolidColorImageMask() {\n    if (!this.contentVisible) {\n      return;\n    }\n    this.ctx.fillRect(0, 0, 1, 1);\n    this.compose();\n  }\n  markPoint(tag) {}\n  markPointProps(tag, properties) {}\n  beginMarkedContent(tag) {\n    this.markedContentStack.push({\n      visible: true\n    });\n  }\n  beginMarkedContentProps(tag, properties) {\n    if (tag === \"OC\") {\n      this.markedContentStack.push({\n        visible: this.optionalContentConfig.isVisible(properties)\n      });\n    } else {\n      this.markedContentStack.push({\n        visible: true\n      });\n    }\n    this.contentVisible = this.isContentVisible();\n  }\n  endMarkedContent() {\n    this.markedContentStack.pop();\n    this.contentVisible = this.isContentVisible();\n  }\n  beginCompat() {}\n  endCompat() {}\n  consumePath(path, clipBox) {\n    const isEmpty = this.current.isEmptyClip();\n    if (this.pendingClip) {\n      this.current.updateClipFromPath();\n    }\n    if (!this.pendingClip) {\n      this.compose(clipBox);\n    }\n    const ctx = this.ctx;\n    if (this.pendingClip) {\n      if (!isEmpty) {\n        if (this.pendingClip === EO_CLIP) {\n          ctx.clip(path, \"evenodd\");\n        } else {\n          ctx.clip(path);\n        }\n      }\n      this.pendingClip = null;\n    }\n    this.current.startNewPathAndClipBox(this.current.clipBox);\n  }\n  getSinglePixelWidth() {\n    if (!this._cachedGetSinglePixelWidth) {\n      const m = getCurrentTransform(this.ctx);\n      if (m[1] === 0 && m[2] === 0) {\n        this._cachedGetSinglePixelWidth = 1 / Math.min(Math.abs(m[0]), Math.abs(m[3]));\n      } else {\n        const absDet = Math.abs(m[0] * m[3] - m[2] * m[1]);\n        const normX = Math.hypot(m[0], m[2]);\n        const normY = Math.hypot(m[1], m[3]);\n        this._cachedGetSinglePixelWidth = Math.max(normX, normY) / absDet;\n      }\n    }\n    return this._cachedGetSinglePixelWidth;\n  }\n  getScaleForStroking() {\n    if (this._cachedScaleForStroking[0] === -1) {\n      const {\n        lineWidth\n      } = this.current;\n      const {\n        a,\n        b,\n        c,\n        d\n      } = this.ctx.getTransform();\n      let scaleX, scaleY;\n      if (b === 0 && c === 0) {\n        const normX = Math.abs(a);\n        const normY = Math.abs(d);\n        if (normX === normY) {\n          if (lineWidth === 0) {\n            scaleX = scaleY = 1 / normX;\n          } else {\n            const scaledLineWidth = normX * lineWidth;\n            scaleX = scaleY = scaledLineWidth < 1 ? 1 / scaledLineWidth : 1;\n          }\n        } else if (lineWidth === 0) {\n          scaleX = 1 / normX;\n          scaleY = 1 / normY;\n        } else {\n          const scaledXLineWidth = normX * lineWidth;\n          const scaledYLineWidth = normY * lineWidth;\n          scaleX = scaledXLineWidth < 1 ? 1 / scaledXLineWidth : 1;\n          scaleY = scaledYLineWidth < 1 ? 1 / scaledYLineWidth : 1;\n        }\n      } else {\n        const absDet = Math.abs(a * d - b * c);\n        const normX = Math.hypot(a, b);\n        const normY = Math.hypot(c, d);\n        if (lineWidth === 0) {\n          scaleX = normY / absDet;\n          scaleY = normX / absDet;\n        } else {\n          const baseArea = lineWidth * absDet;\n          scaleX = normY > baseArea ? normY / baseArea : 1;\n          scaleY = normX > baseArea ? normX / baseArea : 1;\n        }\n      }\n      this._cachedScaleForStroking[0] = scaleX;\n      this._cachedScaleForStroking[1] = scaleY;\n    }\n    return this._cachedScaleForStroking;\n  }\n  rescaleAndStroke(path, saveRestore) {\n    const {\n      ctx,\n      current: {\n        lineWidth\n      }\n    } = this;\n    const [scaleX, scaleY] = this.getScaleForStroking();\n    if (scaleX === scaleY) {\n      ctx.lineWidth = (lineWidth || 1) * scaleX;\n      ctx.stroke(path);\n      return;\n    }\n    const dashes = ctx.getLineDash();\n    if (saveRestore) {\n      ctx.save();\n    }\n    ctx.scale(scaleX, scaleY);\n    SCALE_MATRIX.a = 1 / scaleX;\n    SCALE_MATRIX.d = 1 / scaleY;\n    const newPath = new Path2D();\n    newPath.addPath(path, SCALE_MATRIX);\n    if (dashes.length > 0) {\n      const scale = Math.max(scaleX, scaleY);\n      ctx.setLineDash(dashes.map(x => x / scale));\n      ctx.lineDashOffset /= scale;\n    }\n    ctx.lineWidth = lineWidth || 1;\n    ctx.stroke(newPath);\n    if (saveRestore) {\n      ctx.restore();\n    }\n  }\n  isContentVisible() {\n    for (let i = this.markedContentStack.length - 1; i >= 0; i--) {\n      if (!this.markedContentStack[i].visible) {\n        return false;\n      }\n    }\n    return true;\n  }\n}\nfor (const op in OPS) {\n  if (CanvasGraphics.prototype[op] !== undefined) {\n    CanvasGraphics.prototype[OPS[op]] = CanvasGraphics.prototype[op];\n  }\n}\n\n;// ./src/display/worker_options.js\nclass GlobalWorkerOptions {\n  static #port = null;\n  static #src = \"\";\n  static get workerPort() {\n    return this.#port;\n  }\n  static set workerPort(val) {\n    if (!(typeof Worker !== \"undefined\" && val instanceof Worker) && val !== null) {\n      throw new Error(\"Invalid `workerPort` type.\");\n    }\n    this.#port = val;\n  }\n  static get workerSrc() {\n    return this.#src;\n  }\n  static set workerSrc(val) {\n    if (typeof val !== \"string\") {\n      throw new Error(\"Invalid `workerSrc` type.\");\n    }\n    this.#src = val;\n  }\n}\n\n;// ./src/display/metadata.js\nclass Metadata {\n  #map;\n  #data;\n  constructor({\n    parsedData,\n    rawData\n  }) {\n    this.#map = parsedData;\n    this.#data = rawData;\n  }\n  getRaw() {\n    return this.#data;\n  }\n  get(name) {\n    return this.#map.get(name) ?? null;\n  }\n  [Symbol.iterator]() {\n    return this.#map.entries();\n  }\n}\n\n;// ./src/display/optional_content_config.js\n\n\nconst INTERNAL = Symbol(\"INTERNAL\");\nclass OptionalContentGroup {\n  #isDisplay = false;\n  #isPrint = false;\n  #userSet = false;\n  #visible = true;\n  constructor(renderingIntent, {\n    name,\n    intent,\n    usage,\n    rbGroups\n  }) {\n    this.#isDisplay = !!(renderingIntent & RenderingIntentFlag.DISPLAY);\n    this.#isPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    this.name = name;\n    this.intent = intent;\n    this.usage = usage;\n    this.rbGroups = rbGroups;\n  }\n  get visible() {\n    if (this.#userSet) {\n      return this.#visible;\n    }\n    if (!this.#visible) {\n      return false;\n    }\n    const {\n      print,\n      view\n    } = this.usage;\n    if (this.#isDisplay) {\n      return view?.viewState !== \"OFF\";\n    } else if (this.#isPrint) {\n      return print?.printState !== \"OFF\";\n    }\n    return true;\n  }\n  _setVisible(internal, visible, userSet = false) {\n    if (internal !== INTERNAL) {\n      unreachable(\"Internal method `_setVisible` called.\");\n    }\n    this.#userSet = userSet;\n    this.#visible = visible;\n  }\n}\nclass OptionalContentConfig {\n  #cachedGetHash = null;\n  #groups = new Map();\n  #initialHash = null;\n  #order = null;\n  constructor(data, renderingIntent = RenderingIntentFlag.DISPLAY) {\n    this.renderingIntent = renderingIntent;\n    this.name = null;\n    this.creator = null;\n    if (data === null) {\n      return;\n    }\n    this.name = data.name;\n    this.creator = data.creator;\n    this.#order = data.order;\n    for (const group of data.groups) {\n      this.#groups.set(group.id, new OptionalContentGroup(renderingIntent, group));\n    }\n    if (data.baseState === \"OFF\") {\n      for (const group of this.#groups.values()) {\n        group._setVisible(INTERNAL, false);\n      }\n    }\n    for (const on of data.on) {\n      this.#groups.get(on)._setVisible(INTERNAL, true);\n    }\n    for (const off of data.off) {\n      this.#groups.get(off)._setVisible(INTERNAL, false);\n    }\n    this.#initialHash = this.getHash();\n  }\n  #evaluateVisibilityExpression(array) {\n    const length = array.length;\n    if (length < 2) {\n      return true;\n    }\n    const operator = array[0];\n    for (let i = 1; i < length; i++) {\n      const element = array[i];\n      let state;\n      if (Array.isArray(element)) {\n        state = this.#evaluateVisibilityExpression(element);\n      } else if (this.#groups.has(element)) {\n        state = this.#groups.get(element).visible;\n      } else {\n        warn(`Optional content group not found: ${element}`);\n        return true;\n      }\n      switch (operator) {\n        case \"And\":\n          if (!state) {\n            return false;\n          }\n          break;\n        case \"Or\":\n          if (state) {\n            return true;\n          }\n          break;\n        case \"Not\":\n          return !state;\n        default:\n          return true;\n      }\n    }\n    return operator === \"And\";\n  }\n  isVisible(group) {\n    if (this.#groups.size === 0) {\n      return true;\n    }\n    if (!group) {\n      info(\"Optional content group not defined.\");\n      return true;\n    }\n    if (group.type === \"OCG\") {\n      if (!this.#groups.has(group.id)) {\n        warn(`Optional content group not found: ${group.id}`);\n        return true;\n      }\n      return this.#groups.get(group.id).visible;\n    } else if (group.type === \"OCMD\") {\n      if (group.expression) {\n        return this.#evaluateVisibilityExpression(group.expression);\n      }\n      if (!group.policy || group.policy === \"AnyOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOn\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      } else if (group.policy === \"AnyOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (!this.#groups.get(id).visible) {\n            return true;\n          }\n        }\n        return false;\n      } else if (group.policy === \"AllOff\") {\n        for (const id of group.ids) {\n          if (!this.#groups.has(id)) {\n            warn(`Optional content group not found: ${id}`);\n            return true;\n          }\n          if (this.#groups.get(id).visible) {\n            return false;\n          }\n        }\n        return true;\n      }\n      warn(`Unknown optional content policy ${group.policy}.`);\n      return true;\n    }\n    warn(`Unknown group type ${group.type}.`);\n    return true;\n  }\n  setVisibility(id, visible = true, preserveRB = true) {\n    const group = this.#groups.get(id);\n    if (!group) {\n      warn(`Optional content group not found: ${id}`);\n      return;\n    }\n    if (preserveRB && visible && group.rbGroups.length) {\n      for (const rbGroup of group.rbGroups) {\n        for (const otherId of rbGroup) {\n          if (otherId !== id) {\n            this.#groups.get(otherId)?._setVisible(INTERNAL, false, true);\n          }\n        }\n      }\n    }\n    group._setVisible(INTERNAL, !!visible, true);\n    this.#cachedGetHash = null;\n  }\n  setOCGState({\n    state,\n    preserveRB\n  }) {\n    let operator;\n    for (const elem of state) {\n      switch (elem) {\n        case \"ON\":\n        case \"OFF\":\n        case \"Toggle\":\n          operator = elem;\n          continue;\n      }\n      const group = this.#groups.get(elem);\n      if (!group) {\n        continue;\n      }\n      switch (operator) {\n        case \"ON\":\n          this.setVisibility(elem, true, preserveRB);\n          break;\n        case \"OFF\":\n          this.setVisibility(elem, false, preserveRB);\n          break;\n        case \"Toggle\":\n          this.setVisibility(elem, !group.visible, preserveRB);\n          break;\n      }\n    }\n    this.#cachedGetHash = null;\n  }\n  get hasInitialVisibility() {\n    return this.#initialHash === null || this.getHash() === this.#initialHash;\n  }\n  getOrder() {\n    if (!this.#groups.size) {\n      return null;\n    }\n    if (this.#order) {\n      return this.#order.slice();\n    }\n    return [...this.#groups.keys()];\n  }\n  getGroup(id) {\n    return this.#groups.get(id) || null;\n  }\n  getHash() {\n    if (this.#cachedGetHash !== null) {\n      return this.#cachedGetHash;\n    }\n    const hash = new MurmurHash3_64();\n    for (const [id, group] of this.#groups) {\n      hash.update(`${id}:${group.visible}`);\n    }\n    return this.#cachedGetHash = hash.hexdigest();\n  }\n  [Symbol.iterator]() {\n    return this.#groups.entries();\n  }\n}\n\n;// ./src/display/transport_stream.js\n\n\nclass PDFDataTransportStream {\n  constructor(pdfDataRangeTransport, {\n    disableRange = false,\n    disableStream = false\n  }) {\n    assert(pdfDataRangeTransport, 'PDFDataTransportStream - missing required \"pdfDataRangeTransport\" argument.');\n    const {\n      length,\n      initialData,\n      progressiveDone,\n      contentDispositionFilename\n    } = pdfDataRangeTransport;\n    this._queuedChunks = [];\n    this._progressiveDone = progressiveDone;\n    this._contentDispositionFilename = contentDispositionFilename;\n    if (initialData?.length > 0) {\n      const buffer = initialData instanceof Uint8Array && initialData.byteLength === initialData.buffer.byteLength ? initialData.buffer : new Uint8Array(initialData).buffer;\n      this._queuedChunks.push(buffer);\n    }\n    this._pdfDataRangeTransport = pdfDataRangeTransport;\n    this._isStreamingSupported = !disableStream;\n    this._isRangeSupported = !disableRange;\n    this._contentLength = length;\n    this._fullRequestReader = null;\n    this._rangeReaders = [];\n    pdfDataRangeTransport.addRangeListener((begin, chunk) => {\n      this._onReceiveData({\n        begin,\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressListener((loaded, total) => {\n      this._onProgress({\n        loaded,\n        total\n      });\n    });\n    pdfDataRangeTransport.addProgressiveReadListener(chunk => {\n      this._onReceiveData({\n        chunk\n      });\n    });\n    pdfDataRangeTransport.addProgressiveDoneListener(() => {\n      this._onProgressiveDone();\n    });\n    pdfDataRangeTransport.transportReady();\n  }\n  _onReceiveData({\n    begin,\n    chunk\n  }) {\n    const buffer = chunk instanceof Uint8Array && chunk.byteLength === chunk.buffer.byteLength ? chunk.buffer : new Uint8Array(chunk).buffer;\n    if (begin === undefined) {\n      if (this._fullRequestReader) {\n        this._fullRequestReader._enqueue(buffer);\n      } else {\n        this._queuedChunks.push(buffer);\n      }\n    } else {\n      const found = this._rangeReaders.some(function (rangeReader) {\n        if (rangeReader._begin !== begin) {\n          return false;\n        }\n        rangeReader._enqueue(buffer);\n        return true;\n      });\n      assert(found, \"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.\");\n    }\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  _onProgress(evt) {\n    if (evt.total === undefined) {\n      this._rangeReaders[0]?.onProgress?.({\n        loaded: evt.loaded\n      });\n    } else {\n      this._fullRequestReader?.onProgress?.({\n        loaded: evt.loaded,\n        total: evt.total\n      });\n    }\n  }\n  _onProgressiveDone() {\n    this._fullRequestReader?.progressiveDone();\n    this._progressiveDone = true;\n  }\n  _removeRangeReader(reader) {\n    const i = this._rangeReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFDataTransportStream.getFullReader can only be called once.\");\n    const queuedChunks = this._queuedChunks;\n    this._queuedChunks = null;\n    return new PDFDataTransportStreamReader(this, queuedChunks, this._progressiveDone, this._contentDispositionFilename);\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFDataTransportStreamRangeReader(this, begin, end);\n    this._pdfDataRangeTransport.requestDataRange(begin, end);\n    this._rangeReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n    this._pdfDataRangeTransport.abort();\n  }\n}\nclass PDFDataTransportStreamReader {\n  constructor(stream, queuedChunks, progressiveDone = false, contentDispositionFilename = null) {\n    this._stream = stream;\n    this._done = progressiveDone || false;\n    this._filename = isPdfFile(contentDispositionFilename) ? contentDispositionFilename : null;\n    this._queuedChunks = queuedChunks || [];\n    this._loaded = 0;\n    for (const chunk of this._queuedChunks) {\n      this._loaded += chunk.byteLength;\n    }\n    this._requests = [];\n    this._headersReady = Promise.resolve();\n    stream._fullRequestReader = this;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunks.push(chunk);\n    }\n    this._loaded += chunk.byteLength;\n  }\n  get headersReady() {\n    return this._headersReady;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._stream._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._stream._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._stream._contentLength;\n  }\n  async read() {\n    if (this._queuedChunks.length > 0) {\n      const chunk = this._queuedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  progressiveDone() {\n    if (this._done) {\n      return;\n    }\n    this._done = true;\n  }\n}\nclass PDFDataTransportStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._begin = begin;\n    this._end = end;\n    this._queuedChunk = null;\n    this._requests = [];\n    this._done = false;\n    this.onProgress = null;\n  }\n  _enqueue(chunk) {\n    if (this._done) {\n      return;\n    }\n    if (this._requests.length === 0) {\n      this._queuedChunk = chunk;\n    } else {\n      const requestsCapability = this._requests.shift();\n      requestsCapability.resolve({\n        value: chunk,\n        done: false\n      });\n      for (const requestCapability of this._requests) {\n        requestCapability.resolve({\n          value: undefined,\n          done: true\n        });\n      }\n      this._requests.length = 0;\n    }\n    this._done = true;\n    this._stream._removeRangeReader(this);\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._queuedChunk) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._stream._removeRangeReader(this);\n  }\n}\n\n;// ./src/display/content_disposition.js\n\nfunction getFilenameFromContentDispositionHeader(contentDisposition) {\n  let needsEncodingFixup = true;\n  let tmp = toParamRegExp(\"filename\\\\*\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = unescape(filename);\n    filename = rfc5987decode(filename);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  tmp = rfc2231getparam(contentDisposition);\n  if (tmp) {\n    const filename = rfc2047decode(tmp);\n    return fixupEncoding(filename);\n  }\n  tmp = toParamRegExp(\"filename\", \"i\").exec(contentDisposition);\n  if (tmp) {\n    tmp = tmp[1];\n    let filename = rfc2616unquote(tmp);\n    filename = rfc2047decode(filename);\n    return fixupEncoding(filename);\n  }\n  function toParamRegExp(attributePattern, flags) {\n    return new RegExp(\"(?:^|;)\\\\s*\" + attributePattern + \"\\\\s*=\\\\s*\" + \"(\" + '[^\";\\\\s][^;\\\\s]*' + \"|\" + '\"(?:[^\"\\\\\\\\]|\\\\\\\\\"?)+\"?' + \")\", flags);\n  }\n  function textdecode(encoding, value) {\n    if (encoding) {\n      if (!/^[\\x00-\\xFF]+$/.test(value)) {\n        return value;\n      }\n      try {\n        const decoder = new TextDecoder(encoding, {\n          fatal: true\n        });\n        const buffer = stringToBytes(value);\n        value = decoder.decode(buffer);\n        needsEncodingFixup = false;\n      } catch {}\n    }\n    return value;\n  }\n  function fixupEncoding(value) {\n    if (needsEncodingFixup && /[\\x80-\\xff]/.test(value)) {\n      value = textdecode(\"utf-8\", value);\n      if (needsEncodingFixup) {\n        value = textdecode(\"iso-8859-1\", value);\n      }\n    }\n    return value;\n  }\n  function rfc2231getparam(contentDispositionStr) {\n    const matches = [];\n    let match;\n    const iter = toParamRegExp(\"filename\\\\*((?!0\\\\d)\\\\d+)(\\\\*?)\", \"ig\");\n    while ((match = iter.exec(contentDispositionStr)) !== null) {\n      let [, n, quot, part] = match;\n      n = parseInt(n, 10);\n      if (n in matches) {\n        if (n === 0) {\n          break;\n        }\n        continue;\n      }\n      matches[n] = [quot, part];\n    }\n    const parts = [];\n    for (let n = 0; n < matches.length; ++n) {\n      if (!(n in matches)) {\n        break;\n      }\n      let [quot, part] = matches[n];\n      part = rfc2616unquote(part);\n      if (quot) {\n        part = unescape(part);\n        if (n === 0) {\n          part = rfc5987decode(part);\n        }\n      }\n      parts.push(part);\n    }\n    return parts.join(\"\");\n  }\n  function rfc2616unquote(value) {\n    if (value.startsWith('\"')) {\n      const parts = value.slice(1).split('\\\\\"');\n      for (let i = 0; i < parts.length; ++i) {\n        const quotindex = parts[i].indexOf('\"');\n        if (quotindex !== -1) {\n          parts[i] = parts[i].slice(0, quotindex);\n          parts.length = i + 1;\n        }\n        parts[i] = parts[i].replaceAll(/\\\\(.)/g, \"$1\");\n      }\n      value = parts.join('\"');\n    }\n    return value;\n  }\n  function rfc5987decode(extvalue) {\n    const encodingend = extvalue.indexOf(\"'\");\n    if (encodingend === -1) {\n      return extvalue;\n    }\n    const encoding = extvalue.slice(0, encodingend);\n    const langvalue = extvalue.slice(encodingend + 1);\n    const value = langvalue.replace(/^[^']*'/, \"\");\n    return textdecode(encoding, value);\n  }\n  function rfc2047decode(value) {\n    if (!value.startsWith(\"=?\") || /[\\x00-\\x19\\x80-\\xff]/.test(value)) {\n      return value;\n    }\n    return value.replaceAll(/=\\?([\\w-]*)\\?([QqBb])\\?((?:[^?]|\\?(?!=))*)\\?=/g, function (matches, charset, encoding, text) {\n      if (encoding === \"q\" || encoding === \"Q\") {\n        text = text.replaceAll(\"_\", \" \");\n        text = text.replaceAll(/=([0-9a-fA-F]{2})/g, function (match, hex) {\n          return String.fromCharCode(parseInt(hex, 16));\n        });\n        return textdecode(charset, text);\n      }\n      try {\n        text = atob(text);\n      } catch {}\n      return textdecode(charset, text);\n    });\n  }\n  return \"\";\n}\n\n;// ./src/display/network_utils.js\n\n\n\nfunction createHeaders(isHttp, httpHeaders) {\n  const headers = new Headers();\n  if (!isHttp || !httpHeaders || typeof httpHeaders !== \"object\") {\n    return headers;\n  }\n  for (const key in httpHeaders) {\n    const val = httpHeaders[key];\n    if (val !== undefined) {\n      headers.append(key, val);\n    }\n  }\n  return headers;\n}\nfunction getResponseOrigin(url) {\n  return URL.parse(url)?.origin ?? null;\n}\nfunction validateRangeRequestCapabilities({\n  responseHeaders,\n  isHttp,\n  rangeChunkSize,\n  disableRange\n}) {\n  const returnValues = {\n    allowRangeRequests: false,\n    suggestedLength: undefined\n  };\n  const length = parseInt(responseHeaders.get(\"Content-Length\"), 10);\n  if (!Number.isInteger(length)) {\n    return returnValues;\n  }\n  returnValues.suggestedLength = length;\n  if (length <= 2 * rangeChunkSize) {\n    return returnValues;\n  }\n  if (disableRange || !isHttp) {\n    return returnValues;\n  }\n  if (responseHeaders.get(\"Accept-Ranges\") !== \"bytes\") {\n    return returnValues;\n  }\n  const contentEncoding = responseHeaders.get(\"Content-Encoding\") || \"identity\";\n  if (contentEncoding !== \"identity\") {\n    return returnValues;\n  }\n  returnValues.allowRangeRequests = true;\n  return returnValues;\n}\nfunction extractFilenameFromHeader(responseHeaders) {\n  const contentDisposition = responseHeaders.get(\"Content-Disposition\");\n  if (contentDisposition) {\n    let filename = getFilenameFromContentDispositionHeader(contentDisposition);\n    if (filename.includes(\"%\")) {\n      try {\n        filename = decodeURIComponent(filename);\n      } catch {}\n    }\n    if (isPdfFile(filename)) {\n      return filename;\n    }\n  }\n  return null;\n}\nfunction createResponseError(status, url) {\n  return new ResponseException(`Unexpected server response (${status}) while retrieving PDF \"${url}\".`, status, status === 404 || status === 0 && url.startsWith(\"file:\"));\n}\nfunction validateResponseStatus(status) {\n  return status === 200 || status === 206;\n}\n\n;// ./src/display/fetch_stream.js\n\n\nfunction createFetchOptions(headers, withCredentials, abortController) {\n  return {\n    method: \"GET\",\n    headers,\n    signal: abortController.signal,\n    mode: \"cors\",\n    credentials: withCredentials ? \"include\" : \"same-origin\",\n    redirect: \"follow\"\n  };\n}\nfunction getArrayBuffer(val) {\n  if (val instanceof Uint8Array) {\n    return val.buffer;\n  }\n  if (val instanceof ArrayBuffer) {\n    return val;\n  }\n  warn(`getArrayBuffer - unexpected data format: ${val}`);\n  return new Uint8Array(val).buffer;\n}\nclass PDFFetchStream {\n  _responseOrigin = null;\n  constructor(source) {\n    this.source = source;\n    this.isHttp = /^https?:/i.test(source.url);\n    this.headers = createHeaders(this.isHttp, source.httpHeaders);\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFFetchStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFFetchStreamReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const reader = new PDFFetchStreamRangeReader(this, begin, end);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFFetchStreamReader {\n  constructor(stream) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    this._filename = null;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._contentLength = source.length;\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._abortController = new AbortController();\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    const headers = new Headers(stream.headers);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      stream._responseOrigin = getResponseOrigin(response.url);\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._reader = response.body.getReader();\n      this._headersCapability.resolve();\n      const responseHeaders = response.headers;\n      const {\n        allowRangeRequests,\n        suggestedLength\n      } = validateRangeRequestCapabilities({\n        responseHeaders,\n        isHttp: stream.isHttp,\n        rangeChunkSize: this._rangeChunkSize,\n        disableRange: this._disableRange\n      });\n      this._isRangeSupported = allowRangeRequests;\n      this._contentLength = suggestedLength || this._contentLength;\n      this._filename = extractFilenameFromHeader(responseHeaders);\n      if (!this._isStreamingSupported && this._isRangeSupported) {\n        this.cancel(new AbortException(\"Streaming is disabled.\"));\n      }\n    }).catch(this._headersCapability.reject);\n    this.onProgress = null;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\nclass PDFFetchStreamRangeReader {\n  constructor(stream, begin, end) {\n    this._stream = stream;\n    this._reader = null;\n    this._loaded = 0;\n    const source = stream.source;\n    this._withCredentials = source.withCredentials || false;\n    this._readCapability = Promise.withResolvers();\n    this._isStreamingSupported = !source.disableStream;\n    this._abortController = new AbortController();\n    const headers = new Headers(stream.headers);\n    headers.append(\"Range\", `bytes=${begin}-${end - 1}`);\n    const url = source.url;\n    fetch(url, createFetchOptions(headers, this._withCredentials, this._abortController)).then(response => {\n      const responseOrigin = getResponseOrigin(response.url);\n      if (responseOrigin !== stream._responseOrigin) {\n        throw new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${stream._responseOrigin}\".`);\n      }\n      if (!validateResponseStatus(response.status)) {\n        throw createResponseError(response.status, url);\n      }\n      this._readCapability.resolve();\n      this._reader = response.body.getReader();\n    }).catch(this._readCapability.reject);\n    this.onProgress = null;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    const {\n      value,\n      done\n    } = await this._reader.read();\n    if (done) {\n      return {\n        value,\n        done\n      };\n    }\n    this._loaded += value.byteLength;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    return {\n      value: getArrayBuffer(value),\n      done: false\n    };\n  }\n  cancel(reason) {\n    this._reader?.cancel(reason);\n    this._abortController.abort();\n  }\n}\n\n;// ./src/display/network.js\n\n\nconst OK_RESPONSE = 200;\nconst PARTIAL_CONTENT_RESPONSE = 206;\nfunction network_getArrayBuffer(xhr) {\n  const data = xhr.response;\n  if (typeof data !== \"string\") {\n    return data;\n  }\n  return stringToBytes(data).buffer;\n}\nclass NetworkManager {\n  _responseOrigin = null;\n  constructor({\n    url,\n    httpHeaders,\n    withCredentials\n  }) {\n    this.url = url;\n    this.isHttp = /^https?:/i.test(url);\n    this.headers = createHeaders(this.isHttp, httpHeaders);\n    this.withCredentials = withCredentials || false;\n    this.currXhrId = 0;\n    this.pendingRequests = Object.create(null);\n  }\n  request(args) {\n    const xhr = new XMLHttpRequest();\n    const xhrId = this.currXhrId++;\n    const pendingRequest = this.pendingRequests[xhrId] = {\n      xhr\n    };\n    xhr.open(\"GET\", this.url);\n    xhr.withCredentials = this.withCredentials;\n    for (const [key, val] of this.headers) {\n      xhr.setRequestHeader(key, val);\n    }\n    if (this.isHttp && \"begin\" in args && \"end\" in args) {\n      xhr.setRequestHeader(\"Range\", `bytes=${args.begin}-${args.end - 1}`);\n      pendingRequest.expectedStatus = PARTIAL_CONTENT_RESPONSE;\n    } else {\n      pendingRequest.expectedStatus = OK_RESPONSE;\n    }\n    xhr.responseType = \"arraybuffer\";\n    assert(args.onError, \"Expected `onError` callback to be provided.\");\n    xhr.onerror = () => {\n      args.onError(xhr.status);\n    };\n    xhr.onreadystatechange = this.onStateChange.bind(this, xhrId);\n    xhr.onprogress = this.onProgress.bind(this, xhrId);\n    pendingRequest.onHeadersReceived = args.onHeadersReceived;\n    pendingRequest.onDone = args.onDone;\n    pendingRequest.onError = args.onError;\n    pendingRequest.onProgress = args.onProgress;\n    xhr.send(null);\n    return xhrId;\n  }\n  onProgress(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    pendingRequest.onProgress?.(evt);\n  }\n  onStateChange(xhrId, evt) {\n    const pendingRequest = this.pendingRequests[xhrId];\n    if (!pendingRequest) {\n      return;\n    }\n    const xhr = pendingRequest.xhr;\n    if (xhr.readyState >= 2 && pendingRequest.onHeadersReceived) {\n      pendingRequest.onHeadersReceived();\n      delete pendingRequest.onHeadersReceived;\n    }\n    if (xhr.readyState !== 4) {\n      return;\n    }\n    if (!(xhrId in this.pendingRequests)) {\n      return;\n    }\n    delete this.pendingRequests[xhrId];\n    if (xhr.status === 0 && this.isHttp) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const xhrStatus = xhr.status || OK_RESPONSE;\n    const ok_response_on_range_request = xhrStatus === OK_RESPONSE && pendingRequest.expectedStatus === PARTIAL_CONTENT_RESPONSE;\n    if (!ok_response_on_range_request && xhrStatus !== pendingRequest.expectedStatus) {\n      pendingRequest.onError(xhr.status);\n      return;\n    }\n    const chunk = network_getArrayBuffer(xhr);\n    if (xhrStatus === PARTIAL_CONTENT_RESPONSE) {\n      const rangeHeader = xhr.getResponseHeader(\"Content-Range\");\n      const matches = /bytes (\\d+)-(\\d+)\\/(\\d+)/.exec(rangeHeader);\n      if (matches) {\n        pendingRequest.onDone({\n          begin: parseInt(matches[1], 10),\n          chunk\n        });\n      } else {\n        warn(`Missing or invalid \"Content-Range\" header.`);\n        pendingRequest.onError(0);\n      }\n    } else if (chunk) {\n      pendingRequest.onDone({\n        begin: 0,\n        chunk\n      });\n    } else {\n      pendingRequest.onError(xhr.status);\n    }\n  }\n  getRequestXhr(xhrId) {\n    return this.pendingRequests[xhrId].xhr;\n  }\n  isPendingRequest(xhrId) {\n    return xhrId in this.pendingRequests;\n  }\n  abortRequest(xhrId) {\n    const xhr = this.pendingRequests[xhrId].xhr;\n    delete this.pendingRequests[xhrId];\n    xhr.abort();\n  }\n}\nclass PDFNetworkStream {\n  constructor(source) {\n    this._source = source;\n    this._manager = new NetworkManager(source);\n    this._rangeChunkSize = source.rangeChunkSize;\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  _onRangeRequestReaderClosed(reader) {\n    const i = this._rangeRequestReaders.indexOf(reader);\n    if (i >= 0) {\n      this._rangeRequestReaders.splice(i, 1);\n    }\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNetworkStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNetworkStreamFullRequestReader(this._manager, this._source);\n    return this._fullRequestReader;\n  }\n  getRangeReader(begin, end) {\n    const reader = new PDFNetworkStreamRangeRequestReader(this._manager, begin, end);\n    reader.onClosed = this._onRangeRequestReaderClosed.bind(this);\n    this._rangeRequestReaders.push(reader);\n    return reader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNetworkStreamFullRequestReader {\n  constructor(manager, source) {\n    this._manager = manager;\n    this._url = source.url;\n    this._fullRequestId = manager.request({\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._headersCapability = Promise.withResolvers();\n    this._disableRange = source.disableRange || false;\n    this._contentLength = source.length;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = false;\n    this._isRangeSupported = false;\n    this._cachedChunks = [];\n    this._requests = [];\n    this._done = false;\n    this._storedError = undefined;\n    this._filename = null;\n    this.onProgress = null;\n  }\n  _onHeadersReceived() {\n    const fullRequestXhrId = this._fullRequestId;\n    const fullRequestXhr = this._manager.getRequestXhr(fullRequestXhrId);\n    this._manager._responseOrigin = getResponseOrigin(fullRequestXhr.responseURL);\n    const rawResponseHeaders = fullRequestXhr.getAllResponseHeaders();\n    const responseHeaders = new Headers(rawResponseHeaders ? rawResponseHeaders.trimStart().replace(/[^\\S ]+$/, \"\").split(/[\\r\\n]+/).map(x => {\n      const [key, ...val] = x.split(\": \");\n      return [key, val.join(\": \")];\n    }) : []);\n    const {\n      allowRangeRequests,\n      suggestedLength\n    } = validateRangeRequestCapabilities({\n      responseHeaders,\n      isHttp: this._manager.isHttp,\n      rangeChunkSize: this._rangeChunkSize,\n      disableRange: this._disableRange\n    });\n    if (allowRangeRequests) {\n      this._isRangeSupported = true;\n    }\n    this._contentLength = suggestedLength || this._contentLength;\n    this._filename = extractFilenameFromHeader(responseHeaders);\n    if (this._isRangeSupported) {\n      this._manager.abortRequest(fullRequestXhrId);\n    }\n    this._headersCapability.resolve();\n  }\n  _onDone(data) {\n    if (data) {\n      if (this._requests.length > 0) {\n        const requestCapability = this._requests.shift();\n        requestCapability.resolve({\n          value: data.chunk,\n          done: false\n        });\n      } else {\n        this._cachedChunks.push(data.chunk);\n      }\n    }\n    this._done = true;\n    if (this._cachedChunks.length > 0) {\n      return;\n    }\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n  }\n  _onError(status) {\n    this._storedError = createResponseError(status, this._url);\n    this._headersCapability.reject(this._storedError);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._cachedChunks.length = 0;\n  }\n  _onProgress(evt) {\n    this.onProgress?.({\n      loaded: evt.loaded,\n      total: evt.lengthComputable ? evt.total : this._contentLength\n    });\n  }\n  get filename() {\n    return this._filename;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  async read() {\n    await this._headersCapability.promise;\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._cachedChunks.length > 0) {\n      const chunk = this._cachedChunks.shift();\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    this._headersCapability.reject(reason);\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._fullRequestId)) {\n      this._manager.abortRequest(this._fullRequestId);\n    }\n    this._fullRequestReader = null;\n  }\n}\nclass PDFNetworkStreamRangeRequestReader {\n  constructor(manager, begin, end) {\n    this._manager = manager;\n    this._url = manager.url;\n    this._requestId = manager.request({\n      begin,\n      end,\n      onHeadersReceived: this._onHeadersReceived.bind(this),\n      onDone: this._onDone.bind(this),\n      onError: this._onError.bind(this),\n      onProgress: this._onProgress.bind(this)\n    });\n    this._requests = [];\n    this._queuedChunk = null;\n    this._done = false;\n    this._storedError = undefined;\n    this.onProgress = null;\n    this.onClosed = null;\n  }\n  _onHeadersReceived() {\n    const responseOrigin = getResponseOrigin(this._manager.getRequestXhr(this._requestId)?.responseURL);\n    if (responseOrigin !== this._manager._responseOrigin) {\n      this._storedError = new Error(`Expected range response-origin \"${responseOrigin}\" to match \"${this._manager._responseOrigin}\".`);\n      this._onError(0);\n    }\n  }\n  _close() {\n    this.onClosed?.(this);\n  }\n  _onDone(data) {\n    const chunk = data.chunk;\n    if (this._requests.length > 0) {\n      const requestCapability = this._requests.shift();\n      requestCapability.resolve({\n        value: chunk,\n        done: false\n      });\n    } else {\n      this._queuedChunk = chunk;\n    }\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    this._close();\n  }\n  _onError(status) {\n    this._storedError ??= createResponseError(status, this._url);\n    for (const requestCapability of this._requests) {\n      requestCapability.reject(this._storedError);\n    }\n    this._requests.length = 0;\n    this._queuedChunk = null;\n  }\n  _onProgress(evt) {\n    if (!this.isStreamingSupported) {\n      this.onProgress?.({\n        loaded: evt.loaded\n      });\n    }\n  }\n  get isStreamingSupported() {\n    return false;\n  }\n  async read() {\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    if (this._queuedChunk !== null) {\n      const chunk = this._queuedChunk;\n      this._queuedChunk = null;\n      return {\n        value: chunk,\n        done: false\n      };\n    }\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    const requestCapability = Promise.withResolvers();\n    this._requests.push(requestCapability);\n    return requestCapability.promise;\n  }\n  cancel(reason) {\n    this._done = true;\n    for (const requestCapability of this._requests) {\n      requestCapability.resolve({\n        value: undefined,\n        done: true\n      });\n    }\n    this._requests.length = 0;\n    if (this._manager.isPendingRequest(this._requestId)) {\n      this._manager.abortRequest(this._requestId);\n    }\n    this._close();\n  }\n}\n\n;// ./src/display/node_stream.js\n\n\nconst urlRegex = /^[a-z][a-z0-9\\-+.]+:/i;\nfunction parseUrlOrPath(sourceUrl) {\n  if (urlRegex.test(sourceUrl)) {\n    return new URL(sourceUrl);\n  }\n  const url = process.getBuiltinModule(\"url\");\n  return new URL(url.pathToFileURL(sourceUrl));\n}\nclass PDFNodeStream {\n  constructor(source) {\n    this.source = source;\n    this.url = parseUrlOrPath(source.url);\n    assert(this.url.protocol === \"file:\", \"PDFNodeStream only supports file:// URLs.\");\n    this._fullRequestReader = null;\n    this._rangeRequestReaders = [];\n  }\n  get _progressiveDataLength() {\n    return this._fullRequestReader?._loaded ?? 0;\n  }\n  getFullReader() {\n    assert(!this._fullRequestReader, \"PDFNodeStream.getFullReader can only be called once.\");\n    this._fullRequestReader = new PDFNodeStreamFsFullReader(this);\n    return this._fullRequestReader;\n  }\n  getRangeReader(start, end) {\n    if (end <= this._progressiveDataLength) {\n      return null;\n    }\n    const rangeReader = new PDFNodeStreamFsRangeReader(this, start, end);\n    this._rangeRequestReaders.push(rangeReader);\n    return rangeReader;\n  }\n  cancelAllRequests(reason) {\n    this._fullRequestReader?.cancel(reason);\n    for (const reader of this._rangeRequestReaders.slice(0)) {\n      reader.cancel(reason);\n    }\n  }\n}\nclass PDFNodeStreamFsFullReader {\n  constructor(stream) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    const source = stream.source;\n    this._contentLength = source.length;\n    this._loaded = 0;\n    this._filename = null;\n    this._disableRange = source.disableRange || false;\n    this._rangeChunkSize = source.rangeChunkSize;\n    if (!this._rangeChunkSize && !this._disableRange) {\n      this._disableRange = true;\n    }\n    this._isStreamingSupported = !source.disableStream;\n    this._isRangeSupported = !source.disableRange;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    this._headersCapability = Promise.withResolvers();\n    const fs = process.getBuiltinModule(\"fs\");\n    fs.promises.lstat(this._url).then(stat => {\n      this._contentLength = stat.size;\n      this._setReadableStream(fs.createReadStream(this._url));\n      this._headersCapability.resolve();\n    }, error => {\n      if (error.code === \"ENOENT\") {\n        error = createResponseError(0, this._url.href);\n      }\n      this._storedError = error;\n      this._headersCapability.reject(error);\n    });\n  }\n  get headersReady() {\n    return this._headersCapability.promise;\n  }\n  get filename() {\n    return this._filename;\n  }\n  get contentLength() {\n    return this._contentLength;\n  }\n  get isRangeSupported() {\n    return this._isRangeSupported;\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded,\n      total: this._contentLength\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (!this._isStreamingSupported && this._isRangeSupported) {\n      this._error(new AbortException(\"streaming is disabled\"));\n    }\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\nclass PDFNodeStreamFsRangeReader {\n  constructor(stream, start, end) {\n    this._url = stream.url;\n    this._done = false;\n    this._storedError = null;\n    this.onProgress = null;\n    this._loaded = 0;\n    this._readableStream = null;\n    this._readCapability = Promise.withResolvers();\n    const source = stream.source;\n    this._isStreamingSupported = !source.disableStream;\n    const fs = process.getBuiltinModule(\"fs\");\n    this._setReadableStream(fs.createReadStream(this._url, {\n      start,\n      end: end - 1\n    }));\n  }\n  get isStreamingSupported() {\n    return this._isStreamingSupported;\n  }\n  async read() {\n    await this._readCapability.promise;\n    if (this._done) {\n      return {\n        value: undefined,\n        done: true\n      };\n    }\n    if (this._storedError) {\n      throw this._storedError;\n    }\n    const chunk = this._readableStream.read();\n    if (chunk === null) {\n      this._readCapability = Promise.withResolvers();\n      return this.read();\n    }\n    this._loaded += chunk.length;\n    this.onProgress?.({\n      loaded: this._loaded\n    });\n    const buffer = new Uint8Array(chunk).buffer;\n    return {\n      value: buffer,\n      done: false\n    };\n  }\n  cancel(reason) {\n    if (!this._readableStream) {\n      this._error(reason);\n      return;\n    }\n    this._readableStream.destroy(reason);\n  }\n  _error(reason) {\n    this._storedError = reason;\n    this._readCapability.resolve();\n  }\n  _setReadableStream(readableStream) {\n    this._readableStream = readableStream;\n    readableStream.on(\"readable\", () => {\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"end\", () => {\n      readableStream.destroy();\n      this._done = true;\n      this._readCapability.resolve();\n    });\n    readableStream.on(\"error\", reason => {\n      this._error(reason);\n    });\n    if (this._storedError) {\n      this._readableStream.destroy(this._storedError);\n    }\n  }\n}\n\n;// ./src/display/pdf_objects.js\nconst INITIAL_DATA = Symbol(\"INITIAL_DATA\");\nclass PDFObjects {\n  #objs = Object.create(null);\n  #ensureObj(objId) {\n    return this.#objs[objId] ||= {\n      ...Promise.withResolvers(),\n      data: INITIAL_DATA\n    };\n  }\n  get(objId, callback = null) {\n    if (callback) {\n      const obj = this.#ensureObj(objId);\n      obj.promise.then(() => callback(obj.data));\n      return null;\n    }\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      throw new Error(`Requesting object that isn't resolved yet ${objId}.`);\n    }\n    return obj.data;\n  }\n  has(objId) {\n    const obj = this.#objs[objId];\n    return !!obj && obj.data !== INITIAL_DATA;\n  }\n  delete(objId) {\n    const obj = this.#objs[objId];\n    if (!obj || obj.data === INITIAL_DATA) {\n      return false;\n    }\n    delete this.#objs[objId];\n    return true;\n  }\n  resolve(objId, data = null) {\n    const obj = this.#ensureObj(objId);\n    obj.data = data;\n    obj.resolve();\n  }\n  clear() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      data?.bitmap?.close();\n    }\n    this.#objs = Object.create(null);\n  }\n  *[Symbol.iterator]() {\n    for (const objId in this.#objs) {\n      const {\n        data\n      } = this.#objs[objId];\n      if (data === INITIAL_DATA) {\n        continue;\n      }\n      yield [objId, data];\n    }\n  }\n}\n\n;// ./src/display/text_layer.js\n\n\nconst MAX_TEXT_DIVS_TO_RENDER = 100000;\nconst DEFAULT_FONT_SIZE = 30;\nclass TextLayer {\n  #capability = Promise.withResolvers();\n  #container = null;\n  #disableProcessItems = false;\n  #fontInspectorEnabled = !!globalThis.FontInspector?.enabled;\n  #lang = null;\n  #layoutTextParams = null;\n  #pageHeight = 0;\n  #pageWidth = 0;\n  #reader = null;\n  #rootContainer = null;\n  #rotation = 0;\n  #scale = 0;\n  #styleCache = Object.create(null);\n  #textContentItemsStr = [];\n  #textContentSource = null;\n  #textDivs = [];\n  #textDivProperties = new WeakMap();\n  #transform = null;\n  static #ascentCache = new Map();\n  static #canvasContexts = new Map();\n  static #canvasCtxFonts = new WeakMap();\n  static #minFontSize = null;\n  static #pendingTextLayers = new Set();\n  constructor({\n    textContentSource,\n    container,\n    viewport\n  }) {\n    if (textContentSource instanceof ReadableStream) {\n      this.#textContentSource = textContentSource;\n    } else if (typeof textContentSource === \"object\") {\n      this.#textContentSource = new ReadableStream({\n        start(controller) {\n          controller.enqueue(textContentSource);\n          controller.close();\n        }\n      });\n    } else {\n      throw new Error('No \"textContentSource\" parameter specified.');\n    }\n    this.#container = this.#rootContainer = container;\n    this.#scale = viewport.scale * OutputScale.pixelRatio;\n    this.#rotation = viewport.rotation;\n    this.#layoutTextParams = {\n      div: null,\n      properties: null,\n      ctx: null\n    };\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    this.#transform = [1, 0, 0, -1, -pageX, pageY + pageHeight];\n    this.#pageWidth = pageWidth;\n    this.#pageHeight = pageHeight;\n    TextLayer.#ensureMinFontSizeComputed();\n    setLayerDimensions(container, viewport);\n    this.#capability.promise.finally(() => {\n      TextLayer.#pendingTextLayers.delete(this);\n      this.#layoutTextParams = null;\n      this.#styleCache = null;\n    }).catch(() => {});\n  }\n  static get fontFamilyMap() {\n    const {\n      isWindows,\n      isFirefox\n    } = util_FeatureTest.platform;\n    return shadow(this, \"fontFamilyMap\", new Map([[\"sans-serif\", `${isWindows && isFirefox ? \"Calibri, \" : \"\"}sans-serif`], [\"monospace\", `${isWindows && isFirefox ? \"Lucida Console, \" : \"\"}monospace`]]));\n  }\n  render() {\n    const pump = () => {\n      this.#reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          this.#capability.resolve();\n          return;\n        }\n        this.#lang ??= value.lang;\n        Object.assign(this.#styleCache, value.styles);\n        this.#processItems(value.items);\n        pump();\n      }, this.#capability.reject);\n    };\n    this.#reader = this.#textContentSource.getReader();\n    TextLayer.#pendingTextLayers.add(this);\n    pump();\n    return this.#capability.promise;\n  }\n  update({\n    viewport,\n    onBefore = null\n  }) {\n    const scale = viewport.scale * OutputScale.pixelRatio;\n    const rotation = viewport.rotation;\n    if (rotation !== this.#rotation) {\n      onBefore?.();\n      this.#rotation = rotation;\n      setLayerDimensions(this.#rootContainer, {\n        rotation\n      });\n    }\n    if (scale !== this.#scale) {\n      onBefore?.();\n      this.#scale = scale;\n      const params = {\n        div: null,\n        properties: null,\n        ctx: TextLayer.#getCtx(this.#lang)\n      };\n      for (const div of this.#textDivs) {\n        params.properties = this.#textDivProperties.get(div);\n        params.div = div;\n        this.#layout(params);\n      }\n    }\n  }\n  cancel() {\n    const abortEx = new AbortException(\"TextLayer task cancelled.\");\n    this.#reader?.cancel(abortEx).catch(() => {});\n    this.#reader = null;\n    this.#capability.reject(abortEx);\n  }\n  get textDivs() {\n    return this.#textDivs;\n  }\n  get textContentItemsStr() {\n    return this.#textContentItemsStr;\n  }\n  #processItems(items) {\n    if (this.#disableProcessItems) {\n      return;\n    }\n    this.#layoutTextParams.ctx ??= TextLayer.#getCtx(this.#lang);\n    const textDivs = this.#textDivs,\n      textContentItemsStr = this.#textContentItemsStr;\n    for (const item of items) {\n      if (textDivs.length > MAX_TEXT_DIVS_TO_RENDER) {\n        warn(\"Ignoring additional textDivs for performance reasons.\");\n        this.#disableProcessItems = true;\n        return;\n      }\n      if (item.str === undefined) {\n        if (item.type === \"beginMarkedContentProps\" || item.type === \"beginMarkedContent\") {\n          const parent = this.#container;\n          this.#container = document.createElement(\"span\");\n          this.#container.classList.add(\"markedContent\");\n          if (item.id !== null) {\n            this.#container.setAttribute(\"id\", `${item.id}`);\n          }\n          parent.append(this.#container);\n        } else if (item.type === \"endMarkedContent\") {\n          this.#container = this.#container.parentNode;\n        }\n        continue;\n      }\n      textContentItemsStr.push(item.str);\n      this.#appendText(item);\n    }\n  }\n  #appendText(geom) {\n    const textDiv = document.createElement(\"span\");\n    const textDivProperties = {\n      angle: 0,\n      canvasWidth: 0,\n      hasText: geom.str !== \"\",\n      hasEOL: geom.hasEOL,\n      fontSize: 0\n    };\n    this.#textDivs.push(textDiv);\n    const tx = Util.transform(this.#transform, geom.transform);\n    let angle = Math.atan2(tx[1], tx[0]);\n    const style = this.#styleCache[geom.fontName];\n    if (style.vertical) {\n      angle += Math.PI / 2;\n    }\n    let fontFamily = this.#fontInspectorEnabled && style.fontSubstitution || style.fontFamily;\n    fontFamily = TextLayer.fontFamilyMap.get(fontFamily) || fontFamily;\n    const fontHeight = Math.hypot(tx[2], tx[3]);\n    const fontAscent = fontHeight * TextLayer.#getAscent(fontFamily, style, this.#lang);\n    let left, top;\n    if (angle === 0) {\n      left = tx[4];\n      top = tx[5] - fontAscent;\n    } else {\n      left = tx[4] + fontAscent * Math.sin(angle);\n      top = tx[5] - fontAscent * Math.cos(angle);\n    }\n    const scaleFactorStr = \"calc(var(--total-scale-factor) *\";\n    const divStyle = textDiv.style;\n    if (this.#container === this.#rootContainer) {\n      divStyle.left = `${(100 * left / this.#pageWidth).toFixed(2)}%`;\n      divStyle.top = `${(100 * top / this.#pageHeight).toFixed(2)}%`;\n    } else {\n      divStyle.left = `${scaleFactorStr}${left.toFixed(2)}px)`;\n      divStyle.top = `${scaleFactorStr}${top.toFixed(2)}px)`;\n    }\n    divStyle.fontSize = `${scaleFactorStr}${(TextLayer.#minFontSize * fontHeight).toFixed(2)}px)`;\n    divStyle.fontFamily = fontFamily;\n    textDivProperties.fontSize = fontHeight;\n    textDiv.setAttribute(\"role\", \"presentation\");\n    textDiv.textContent = geom.str;\n    textDiv.dir = geom.dir;\n    if (this.#fontInspectorEnabled) {\n      textDiv.dataset.fontName = style.fontSubstitutionLoadedName || geom.fontName;\n    }\n    if (angle !== 0) {\n      textDivProperties.angle = angle * (180 / Math.PI);\n    }\n    let shouldScaleText = false;\n    if (geom.str.length > 1) {\n      shouldScaleText = true;\n    } else if (geom.str !== \" \" && geom.transform[0] !== geom.transform[3]) {\n      const absScaleX = Math.abs(geom.transform[0]),\n        absScaleY = Math.abs(geom.transform[3]);\n      if (absScaleX !== absScaleY && Math.max(absScaleX, absScaleY) / Math.min(absScaleX, absScaleY) > 1.5) {\n        shouldScaleText = true;\n      }\n    }\n    if (shouldScaleText) {\n      textDivProperties.canvasWidth = style.vertical ? geom.height : geom.width;\n    }\n    this.#textDivProperties.set(textDiv, textDivProperties);\n    this.#layoutTextParams.div = textDiv;\n    this.#layoutTextParams.properties = textDivProperties;\n    this.#layout(this.#layoutTextParams);\n    if (textDivProperties.hasText) {\n      this.#container.append(textDiv);\n    }\n    if (textDivProperties.hasEOL) {\n      const br = document.createElement(\"br\");\n      br.setAttribute(\"role\", \"presentation\");\n      this.#container.append(br);\n    }\n  }\n  #layout(params) {\n    const {\n      div,\n      properties,\n      ctx\n    } = params;\n    const {\n      style\n    } = div;\n    let transform = \"\";\n    if (TextLayer.#minFontSize > 1) {\n      transform = `scale(${1 / TextLayer.#minFontSize})`;\n    }\n    if (properties.canvasWidth !== 0 && properties.hasText) {\n      const {\n        fontFamily\n      } = style;\n      const {\n        canvasWidth,\n        fontSize\n      } = properties;\n      TextLayer.#ensureCtxFont(ctx, fontSize * this.#scale, fontFamily);\n      const {\n        width\n      } = ctx.measureText(div.textContent);\n      if (width > 0) {\n        transform = `scaleX(${canvasWidth * this.#scale / width}) ${transform}`;\n      }\n    }\n    if (properties.angle !== 0) {\n      transform = `rotate(${properties.angle}deg) ${transform}`;\n    }\n    if (transform.length > 0) {\n      style.transform = transform;\n    }\n  }\n  static cleanup() {\n    if (this.#pendingTextLayers.size > 0) {\n      return;\n    }\n    this.#ascentCache.clear();\n    for (const {\n      canvas\n    } of this.#canvasContexts.values()) {\n      canvas.remove();\n    }\n    this.#canvasContexts.clear();\n  }\n  static #getCtx(lang = null) {\n    let ctx = this.#canvasContexts.get(lang ||= \"\");\n    if (!ctx) {\n      const canvas = document.createElement(\"canvas\");\n      canvas.className = \"hiddenCanvasElement\";\n      canvas.lang = lang;\n      document.body.append(canvas);\n      ctx = canvas.getContext(\"2d\", {\n        alpha: false,\n        willReadFrequently: true\n      });\n      this.#canvasContexts.set(lang, ctx);\n      this.#canvasCtxFonts.set(ctx, {\n        size: 0,\n        family: \"\"\n      });\n    }\n    return ctx;\n  }\n  static #ensureCtxFont(ctx, size, family) {\n    const cached = this.#canvasCtxFonts.get(ctx);\n    if (size === cached.size && family === cached.family) {\n      return;\n    }\n    ctx.font = `${size}px ${family}`;\n    cached.size = size;\n    cached.family = family;\n  }\n  static #ensureMinFontSizeComputed() {\n    if (this.#minFontSize !== null) {\n      return;\n    }\n    const div = document.createElement(\"div\");\n    div.style.opacity = 0;\n    div.style.lineHeight = 1;\n    div.style.fontSize = \"1px\";\n    div.style.position = \"absolute\";\n    div.textContent = \"X\";\n    document.body.append(div);\n    this.#minFontSize = div.getBoundingClientRect().height;\n    div.remove();\n  }\n  static #getAscent(fontFamily, style, lang) {\n    const cachedAscent = this.#ascentCache.get(fontFamily);\n    if (cachedAscent) {\n      return cachedAscent;\n    }\n    const ctx = this.#getCtx(lang);\n    ctx.canvas.width = ctx.canvas.height = DEFAULT_FONT_SIZE;\n    this.#ensureCtxFont(ctx, DEFAULT_FONT_SIZE, fontFamily);\n    const metrics = ctx.measureText(\"\");\n    const ascent = metrics.fontBoundingBoxAscent;\n    const descent = Math.abs(metrics.fontBoundingBoxDescent);\n    ctx.canvas.width = ctx.canvas.height = 0;\n    let ratio = 0.8;\n    if (ascent) {\n      ratio = ascent / (ascent + descent);\n    } else {\n      if (util_FeatureTest.platform.isFirefox) {\n        warn(\"Enable the `dom.textMetrics.fontBoundingBox.enabled` preference \" + \"in `about:config` to improve TextLayer rendering.\");\n      }\n      if (style.ascent) {\n        ratio = style.ascent;\n      } else if (style.descent) {\n        ratio = 1 + style.descent;\n      }\n    }\n    this.#ascentCache.set(fontFamily, ratio);\n    return ratio;\n  }\n}\n\n;// ./src/display/xfa_text.js\nclass XfaText {\n  static textContent(xfa) {\n    const items = [];\n    const output = {\n      items,\n      styles: Object.create(null)\n    };\n    function walk(node) {\n      if (!node) {\n        return;\n      }\n      let str = null;\n      const name = node.name;\n      if (name === \"#text\") {\n        str = node.value;\n      } else if (!XfaText.shouldBuildText(name)) {\n        return;\n      } else if (node?.attributes?.textContent) {\n        str = node.attributes.textContent;\n      } else if (node.value) {\n        str = node.value;\n      }\n      if (str !== null) {\n        items.push({\n          str\n        });\n      }\n      if (!node.children) {\n        return;\n      }\n      for (const child of node.children) {\n        walk(child);\n      }\n    }\n    walk(xfa);\n    return output;\n  }\n  static shouldBuildText(name) {\n    return !(name === \"textarea\" || name === \"input\" || name === \"option\" || name === \"select\");\n  }\n}\n\n;// ./src/display/api.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst RENDERING_CANCELLED_TIMEOUT = 100;\nfunction getDocument(src = {}) {\n  if (typeof src === \"string\" || src instanceof URL) {\n    src = {\n      url: src\n    };\n  } else if (src instanceof ArrayBuffer || ArrayBuffer.isView(src)) {\n    src = {\n      data: src\n    };\n  }\n  const task = new PDFDocumentLoadingTask();\n  const {\n    docId\n  } = task;\n  const url = src.url ? getUrlProp(src.url) : null;\n  const data = src.data ? getDataProp(src.data) : null;\n  const httpHeaders = src.httpHeaders || null;\n  const withCredentials = src.withCredentials === true;\n  const password = src.password ?? null;\n  const rangeTransport = src.range instanceof PDFDataRangeTransport ? src.range : null;\n  const rangeChunkSize = Number.isInteger(src.rangeChunkSize) && src.rangeChunkSize > 0 ? src.rangeChunkSize : 2 ** 16;\n  let worker = src.worker instanceof PDFWorker ? src.worker : null;\n  const verbosity = src.verbosity;\n  const docBaseUrl = typeof src.docBaseUrl === \"string\" && !isDataScheme(src.docBaseUrl) ? src.docBaseUrl : null;\n  const cMapUrl = getFactoryUrlProp(src.cMapUrl);\n  const cMapPacked = src.cMapPacked !== false;\n  const CMapReaderFactory = src.CMapReaderFactory || (isNodeJS ? NodeCMapReaderFactory : DOMCMapReaderFactory);\n  const iccUrl = getFactoryUrlProp(src.iccUrl);\n  const standardFontDataUrl = getFactoryUrlProp(src.standardFontDataUrl);\n  const StandardFontDataFactory = src.StandardFontDataFactory || (isNodeJS ? NodeStandardFontDataFactory : DOMStandardFontDataFactory);\n  const wasmUrl = getFactoryUrlProp(src.wasmUrl);\n  const WasmFactory = src.WasmFactory || (isNodeJS ? NodeWasmFactory : DOMWasmFactory);\n  const ignoreErrors = src.stopAtErrors !== true;\n  const maxImageSize = Number.isInteger(src.maxImageSize) && src.maxImageSize > -1 ? src.maxImageSize : -1;\n  const isEvalSupported = src.isEvalSupported !== false;\n  const isOffscreenCanvasSupported = typeof src.isOffscreenCanvasSupported === \"boolean\" ? src.isOffscreenCanvasSupported : !isNodeJS;\n  const isImageDecoderSupported = typeof src.isImageDecoderSupported === \"boolean\" ? src.isImageDecoderSupported : !isNodeJS && (util_FeatureTest.platform.isFirefox || !globalThis.chrome);\n  const canvasMaxAreaInBytes = Number.isInteger(src.canvasMaxAreaInBytes) ? src.canvasMaxAreaInBytes : -1;\n  const disableFontFace = typeof src.disableFontFace === \"boolean\" ? src.disableFontFace : isNodeJS;\n  const fontExtraProperties = src.fontExtraProperties === true;\n  const enableXfa = src.enableXfa === true;\n  const ownerDocument = src.ownerDocument || globalThis.document;\n  const disableRange = src.disableRange === true;\n  const disableStream = src.disableStream === true;\n  const disableAutoFetch = src.disableAutoFetch === true;\n  const pdfBug = src.pdfBug === true;\n  const CanvasFactory = src.CanvasFactory || (isNodeJS ? NodeCanvasFactory : DOMCanvasFactory);\n  const FilterFactory = src.FilterFactory || (isNodeJS ? NodeFilterFactory : DOMFilterFactory);\n  const enableHWA = src.enableHWA === true;\n  const useWasm = src.useWasm !== false;\n  const length = rangeTransport ? rangeTransport.length : src.length ?? NaN;\n  const useSystemFonts = typeof src.useSystemFonts === \"boolean\" ? src.useSystemFonts : !isNodeJS && !disableFontFace;\n  const useWorkerFetch = typeof src.useWorkerFetch === \"boolean\" ? src.useWorkerFetch : !!(CMapReaderFactory === DOMCMapReaderFactory && StandardFontDataFactory === DOMStandardFontDataFactory && WasmFactory === DOMWasmFactory && cMapUrl && standardFontDataUrl && wasmUrl && isValidFetchUrl(cMapUrl, document.baseURI) && isValidFetchUrl(standardFontDataUrl, document.baseURI) && isValidFetchUrl(wasmUrl, document.baseURI));\n  const styleElement = null;\n  setVerbosityLevel(verbosity);\n  const transportFactory = {\n    canvasFactory: new CanvasFactory({\n      ownerDocument,\n      enableHWA\n    }),\n    filterFactory: new FilterFactory({\n      docId,\n      ownerDocument\n    }),\n    cMapReaderFactory: useWorkerFetch ? null : new CMapReaderFactory({\n      baseUrl: cMapUrl,\n      isCompressed: cMapPacked\n    }),\n    standardFontDataFactory: useWorkerFetch ? null : new StandardFontDataFactory({\n      baseUrl: standardFontDataUrl\n    }),\n    wasmFactory: useWorkerFetch ? null : new WasmFactory({\n      baseUrl: wasmUrl\n    })\n  };\n  if (!worker) {\n    worker = PDFWorker.create({\n      verbosity,\n      port: GlobalWorkerOptions.workerPort\n    });\n    task._worker = worker;\n  }\n  const docParams = {\n    docId,\n    apiVersion: \"5.3.93\",\n    data,\n    password,\n    disableAutoFetch,\n    rangeChunkSize,\n    length,\n    docBaseUrl,\n    enableXfa,\n    evaluatorOptions: {\n      maxImageSize,\n      disableFontFace,\n      ignoreErrors,\n      isEvalSupported,\n      isOffscreenCanvasSupported,\n      isImageDecoderSupported,\n      canvasMaxAreaInBytes,\n      fontExtraProperties,\n      useSystemFonts,\n      useWasm,\n      useWorkerFetch,\n      cMapUrl,\n      iccUrl,\n      standardFontDataUrl,\n      wasmUrl\n    }\n  };\n  const transportParams = {\n    ownerDocument,\n    pdfBug,\n    styleElement,\n    loadingParams: {\n      disableAutoFetch,\n      enableXfa\n    }\n  };\n  worker.promise.then(function () {\n    if (task.destroyed) {\n      throw new Error(\"Loading aborted\");\n    }\n    if (worker.destroyed) {\n      throw new Error(\"Worker was destroyed\");\n    }\n    const workerIdPromise = worker.messageHandler.sendWithPromise(\"GetDocRequest\", docParams, data ? [data.buffer] : null);\n    let networkStream;\n    if (rangeTransport) {\n      networkStream = new PDFDataTransportStream(rangeTransport, {\n        disableRange,\n        disableStream\n      });\n    } else if (!data) {\n      if (!url) {\n        throw new Error(\"getDocument - no `url` parameter provided.\");\n      }\n      const NetworkStream = isValidFetchUrl(url) ? PDFFetchStream : isNodeJS ? PDFNodeStream : PDFNetworkStream;\n      networkStream = new NetworkStream({\n        url,\n        length,\n        httpHeaders,\n        withCredentials,\n        rangeChunkSize,\n        disableRange,\n        disableStream\n      });\n    }\n    return workerIdPromise.then(workerId => {\n      if (task.destroyed) {\n        throw new Error(\"Loading aborted\");\n      }\n      if (worker.destroyed) {\n        throw new Error(\"Worker was destroyed\");\n      }\n      const messageHandler = new MessageHandler(docId, workerId, worker.port);\n      const transport = new WorkerTransport(messageHandler, task, networkStream, transportParams, transportFactory);\n      task._transport = transport;\n      messageHandler.send(\"Ready\", null);\n    });\n  }).catch(task._capability.reject);\n  return task;\n}\nclass PDFDocumentLoadingTask {\n  static #docId = 0;\n  _capability = Promise.withResolvers();\n  _transport = null;\n  _worker = null;\n  docId = `d${PDFDocumentLoadingTask.#docId++}`;\n  destroyed = false;\n  onPassword = null;\n  onProgress = null;\n  get promise() {\n    return this._capability.promise;\n  }\n  async destroy() {\n    this.destroyed = true;\n    try {\n      if (this._worker?.port) {\n        this._worker._pendingDestroy = true;\n      }\n      await this._transport?.destroy();\n    } catch (ex) {\n      if (this._worker?.port) {\n        delete this._worker._pendingDestroy;\n      }\n      throw ex;\n    }\n    this._transport = null;\n    this._worker?.destroy();\n    this._worker = null;\n  }\n  async getData() {\n    return this._transport.getData();\n  }\n}\nclass PDFDataRangeTransport {\n  #capability = Promise.withResolvers();\n  #progressiveDoneListeners = [];\n  #progressiveReadListeners = [];\n  #progressListeners = [];\n  #rangeListeners = [];\n  constructor(length, initialData, progressiveDone = false, contentDispositionFilename = null) {\n    this.length = length;\n    this.initialData = initialData;\n    this.progressiveDone = progressiveDone;\n    this.contentDispositionFilename = contentDispositionFilename;\n  }\n  addRangeListener(listener) {\n    this.#rangeListeners.push(listener);\n  }\n  addProgressListener(listener) {\n    this.#progressListeners.push(listener);\n  }\n  addProgressiveReadListener(listener) {\n    this.#progressiveReadListeners.push(listener);\n  }\n  addProgressiveDoneListener(listener) {\n    this.#progressiveDoneListeners.push(listener);\n  }\n  onDataRange(begin, chunk) {\n    for (const listener of this.#rangeListeners) {\n      listener(begin, chunk);\n    }\n  }\n  onDataProgress(loaded, total) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressListeners) {\n        listener(loaded, total);\n      }\n    });\n  }\n  onDataProgressiveRead(chunk) {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveReadListeners) {\n        listener(chunk);\n      }\n    });\n  }\n  onDataProgressiveDone() {\n    this.#capability.promise.then(() => {\n      for (const listener of this.#progressiveDoneListeners) {\n        listener();\n      }\n    });\n  }\n  transportReady() {\n    this.#capability.resolve();\n  }\n  requestDataRange(begin, end) {\n    unreachable(\"Abstract method PDFDataRangeTransport.requestDataRange\");\n  }\n  abort() {}\n}\nclass PDFDocumentProxy {\n  constructor(pdfInfo, transport) {\n    this._pdfInfo = pdfInfo;\n    this._transport = transport;\n  }\n  get annotationStorage() {\n    return this._transport.annotationStorage;\n  }\n  get canvasFactory() {\n    return this._transport.canvasFactory;\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get numPages() {\n    return this._pdfInfo.numPages;\n  }\n  get fingerprints() {\n    return this._pdfInfo.fingerprints;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  get allXfaHtml() {\n    return this._transport._htmlForXfa;\n  }\n  getPage(pageNumber) {\n    return this._transport.getPage(pageNumber);\n  }\n  getPageIndex(ref) {\n    return this._transport.getPageIndex(ref);\n  }\n  getDestinations() {\n    return this._transport.getDestinations();\n  }\n  getDestination(id) {\n    return this._transport.getDestination(id);\n  }\n  getPageLabels() {\n    return this._transport.getPageLabels();\n  }\n  getPageLayout() {\n    return this._transport.getPageLayout();\n  }\n  getPageMode() {\n    return this._transport.getPageMode();\n  }\n  getViewerPreferences() {\n    return this._transport.getViewerPreferences();\n  }\n  getOpenAction() {\n    return this._transport.getOpenAction();\n  }\n  getAttachments() {\n    return this._transport.getAttachments();\n  }\n  getJSActions() {\n    return this._transport.getDocJSActions();\n  }\n  getOutline() {\n    return this._transport.getOutline();\n  }\n  getOptionalContentConfig({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getOptionalContentConfig(renderingIntent);\n  }\n  getPermissions() {\n    return this._transport.getPermissions();\n  }\n  getMetadata() {\n    return this._transport.getMetadata();\n  }\n  getMarkInfo() {\n    return this._transport.getMarkInfo();\n  }\n  getData() {\n    return this._transport.getData();\n  }\n  saveDocument() {\n    return this._transport.saveDocument();\n  }\n  getDownloadInfo() {\n    return this._transport.downloadInfoCapability.promise;\n  }\n  cleanup(keepLoadedFonts = false) {\n    return this._transport.startCleanup(keepLoadedFonts || this.isPureXfa);\n  }\n  destroy() {\n    return this.loadingTask.destroy();\n  }\n  cachedPageNumber(ref) {\n    return this._transport.cachedPageNumber(ref);\n  }\n  get loadingParams() {\n    return this._transport.loadingParams;\n  }\n  get loadingTask() {\n    return this._transport.loadingTask;\n  }\n  getFieldObjects() {\n    return this._transport.getFieldObjects();\n  }\n  hasJSActions() {\n    return this._transport.hasJSActions();\n  }\n  getCalculationOrderIds() {\n    return this._transport.getCalculationOrderIds();\n  }\n}\nclass PDFPageProxy {\n  #pendingCleanup = false;\n  constructor(pageIndex, pageInfo, transport, pdfBug = false) {\n    this._pageIndex = pageIndex;\n    this._pageInfo = pageInfo;\n    this._transport = transport;\n    this._stats = pdfBug ? new StatTimer() : null;\n    this._pdfBug = pdfBug;\n    this.commonObjs = transport.commonObjs;\n    this.objs = new PDFObjects();\n    this._intentStates = new Map();\n    this.destroyed = false;\n  }\n  get pageNumber() {\n    return this._pageIndex + 1;\n  }\n  get rotate() {\n    return this._pageInfo.rotate;\n  }\n  get ref() {\n    return this._pageInfo.ref;\n  }\n  get userUnit() {\n    return this._pageInfo.userUnit;\n  }\n  get view() {\n    return this._pageInfo.view;\n  }\n  getViewport({\n    scale,\n    rotation = this.rotate,\n    offsetX = 0,\n    offsetY = 0,\n    dontFlip = false\n  } = {}) {\n    return new PageViewport({\n      viewBox: this.view,\n      userUnit: this.userUnit,\n      scale,\n      rotation,\n      offsetX,\n      offsetY,\n      dontFlip\n    });\n  }\n  getAnnotations({\n    intent = \"display\"\n  } = {}) {\n    const {\n      renderingIntent\n    } = this._transport.getRenderingIntent(intent);\n    return this._transport.getAnnotations(this._pageIndex, renderingIntent);\n  }\n  getJSActions() {\n    return this._transport.getPageJSActions(this._pageIndex);\n  }\n  get filterFactory() {\n    return this._transport.filterFactory;\n  }\n  get isPureXfa() {\n    return shadow(this, \"isPureXfa\", !!this._transport._htmlForXfa);\n  }\n  async getXfa() {\n    return this._transport._htmlForXfa?.children[this._pageIndex] || null;\n  }\n  render({\n    canvasContext,\n    viewport,\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    transform = null,\n    background = null,\n    optionalContentConfigPromise = null,\n    annotationCanvasMap = null,\n    pageColors = null,\n    printAnnotationStorage = null,\n    isEditing = false\n  }) {\n    this._stats?.time(\"Overall\");\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing);\n    const {\n      renderingIntent,\n      cacheKey\n    } = intentArgs;\n    this.#pendingCleanup = false;\n    optionalContentConfigPromise ||= this._transport.getOptionalContentConfig(renderingIntent);\n    let intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(cacheKey, intentState);\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    const intentPrint = !!(renderingIntent & RenderingIntentFlag.PRINT);\n    if (!intentState.displayReadyCapability) {\n      intentState.displayReadyCapability = Promise.withResolvers();\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    const complete = error => {\n      intentState.renderTasks.delete(internalRenderTask);\n      if (intentPrint) {\n        this.#pendingCleanup = true;\n      }\n      this.#tryCleanup();\n      if (error) {\n        internalRenderTask.capability.reject(error);\n        this._abortOperatorList({\n          intentState,\n          reason: error instanceof Error ? error : new Error(error)\n        });\n      } else {\n        internalRenderTask.capability.resolve();\n      }\n      if (this._stats) {\n        this._stats.timeEnd(\"Rendering\");\n        this._stats.timeEnd(\"Overall\");\n        if (globalThis.Stats?.enabled) {\n          globalThis.Stats.add(this.pageNumber, this._stats);\n        }\n      }\n    };\n    const internalRenderTask = new InternalRenderTask({\n      callback: complete,\n      params: {\n        canvasContext,\n        viewport,\n        transform,\n        background\n      },\n      objs: this.objs,\n      commonObjs: this.commonObjs,\n      annotationCanvasMap,\n      operatorList: intentState.operatorList,\n      pageIndex: this._pageIndex,\n      canvasFactory: this._transport.canvasFactory,\n      filterFactory: this._transport.filterFactory,\n      useRequestAnimationFrame: !intentPrint,\n      pdfBug: this._pdfBug,\n      pageColors\n    });\n    (intentState.renderTasks ||= new Set()).add(internalRenderTask);\n    const renderTask = internalRenderTask.task;\n    Promise.all([intentState.displayReadyCapability.promise, optionalContentConfigPromise]).then(([transparency, optionalContentConfig]) => {\n      if (this.destroyed) {\n        complete();\n        return;\n      }\n      this._stats?.time(\"Rendering\");\n      if (!(optionalContentConfig.renderingIntent & renderingIntent)) {\n        throw new Error(\"Must use the same `intent`-argument when calling the `PDFPageProxy.render` \" + \"and `PDFDocumentProxy.getOptionalContentConfig` methods.\");\n      }\n      internalRenderTask.initializeGraphics({\n        transparency,\n        optionalContentConfig\n      });\n      internalRenderTask.operatorListChanged();\n    }).catch(complete);\n    return renderTask;\n  }\n  getOperatorList({\n    intent = \"display\",\n    annotationMode = AnnotationMode.ENABLE,\n    printAnnotationStorage = null,\n    isEditing = false\n  } = {}) {\n    function operatorListChanged() {\n      if (intentState.operatorList.lastChunk) {\n        intentState.opListReadCapability.resolve(intentState.operatorList);\n        intentState.renderTasks.delete(opListTask);\n      }\n    }\n    const intentArgs = this._transport.getRenderingIntent(intent, annotationMode, printAnnotationStorage, isEditing, true);\n    let intentState = this._intentStates.get(intentArgs.cacheKey);\n    if (!intentState) {\n      intentState = Object.create(null);\n      this._intentStates.set(intentArgs.cacheKey, intentState);\n    }\n    let opListTask;\n    if (!intentState.opListReadCapability) {\n      opListTask = Object.create(null);\n      opListTask.operatorListChanged = operatorListChanged;\n      intentState.opListReadCapability = Promise.withResolvers();\n      (intentState.renderTasks ||= new Set()).add(opListTask);\n      intentState.operatorList = {\n        fnArray: [],\n        argsArray: [],\n        lastChunk: false,\n        separateAnnots: null\n      };\n      this._stats?.time(\"Page Request\");\n      this._pumpOperatorList(intentArgs);\n    }\n    return intentState.opListReadCapability.promise;\n  }\n  streamTextContent({\n    includeMarkedContent = false,\n    disableNormalization = false\n  } = {}) {\n    const TEXT_CONTENT_CHUNK_SIZE = 100;\n    return this._transport.messageHandler.sendWithStream(\"GetTextContent\", {\n      pageIndex: this._pageIndex,\n      includeMarkedContent: includeMarkedContent === true,\n      disableNormalization: disableNormalization === true\n    }, {\n      highWaterMark: TEXT_CONTENT_CHUNK_SIZE,\n      size(textContent) {\n        return textContent.items.length;\n      }\n    });\n  }\n  getTextContent(params = {}) {\n    if (this._transport._htmlForXfa) {\n      return this.getXfa().then(xfa => XfaText.textContent(xfa));\n    }\n    const readableStream = this.streamTextContent(params);\n    return new Promise(function (resolve, reject) {\n      function pump() {\n        reader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            resolve(textContent);\n            return;\n          }\n          textContent.lang ??= value.lang;\n          Object.assign(textContent.styles, value.styles);\n          textContent.items.push(...value.items);\n          pump();\n        }, reject);\n      }\n      const reader = readableStream.getReader();\n      const textContent = {\n        items: [],\n        styles: Object.create(null),\n        lang: null\n      };\n      pump();\n    });\n  }\n  getStructTree() {\n    return this._transport.getStructTree(this._pageIndex);\n  }\n  _destroy() {\n    this.destroyed = true;\n    const waitOn = [];\n    for (const intentState of this._intentStates.values()) {\n      this._abortOperatorList({\n        intentState,\n        reason: new Error(\"Page was destroyed.\"),\n        force: true\n      });\n      if (intentState.opListReadCapability) {\n        continue;\n      }\n      for (const internalRenderTask of intentState.renderTasks) {\n        waitOn.push(internalRenderTask.completed);\n        internalRenderTask.cancel();\n      }\n    }\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return Promise.all(waitOn);\n  }\n  cleanup(resetStats = false) {\n    this.#pendingCleanup = true;\n    const success = this.#tryCleanup();\n    if (resetStats && success) {\n      this._stats &&= new StatTimer();\n    }\n    return success;\n  }\n  #tryCleanup() {\n    if (!this.#pendingCleanup || this.destroyed) {\n      return false;\n    }\n    for (const {\n      renderTasks,\n      operatorList\n    } of this._intentStates.values()) {\n      if (renderTasks.size > 0 || !operatorList.lastChunk) {\n        return false;\n      }\n    }\n    this._intentStates.clear();\n    this.objs.clear();\n    this.#pendingCleanup = false;\n    return true;\n  }\n  _startRenderPage(transparency, cacheKey) {\n    const intentState = this._intentStates.get(cacheKey);\n    if (!intentState) {\n      return;\n    }\n    this._stats?.timeEnd(\"Page Request\");\n    intentState.displayReadyCapability?.resolve(transparency);\n  }\n  _renderPageChunk(operatorListChunk, intentState) {\n    for (let i = 0, ii = operatorListChunk.length; i < ii; i++) {\n      intentState.operatorList.fnArray.push(operatorListChunk.fnArray[i]);\n      intentState.operatorList.argsArray.push(operatorListChunk.argsArray[i]);\n    }\n    intentState.operatorList.lastChunk = operatorListChunk.lastChunk;\n    intentState.operatorList.separateAnnots = operatorListChunk.separateAnnots;\n    for (const internalRenderTask of intentState.renderTasks) {\n      internalRenderTask.operatorListChanged();\n    }\n    if (operatorListChunk.lastChunk) {\n      this.#tryCleanup();\n    }\n  }\n  _pumpOperatorList({\n    renderingIntent,\n    cacheKey,\n    annotationStorageSerializable,\n    modifiedIds\n  }) {\n    const {\n      map,\n      transfer\n    } = annotationStorageSerializable;\n    const readableStream = this._transport.messageHandler.sendWithStream(\"GetOperatorList\", {\n      pageIndex: this._pageIndex,\n      intent: renderingIntent,\n      cacheKey,\n      annotationStorage: map,\n      modifiedIds\n    }, transfer);\n    const reader = readableStream.getReader();\n    const intentState = this._intentStates.get(cacheKey);\n    intentState.streamReader = reader;\n    const pump = () => {\n      reader.read().then(({\n        value,\n        done\n      }) => {\n        if (done) {\n          intentState.streamReader = null;\n          return;\n        }\n        if (this._transport.destroyed) {\n          return;\n        }\n        this._renderPageChunk(value, intentState);\n        pump();\n      }, reason => {\n        intentState.streamReader = null;\n        if (this._transport.destroyed) {\n          return;\n        }\n        if (intentState.operatorList) {\n          intentState.operatorList.lastChunk = true;\n          for (const internalRenderTask of intentState.renderTasks) {\n            internalRenderTask.operatorListChanged();\n          }\n          this.#tryCleanup();\n        }\n        if (intentState.displayReadyCapability) {\n          intentState.displayReadyCapability.reject(reason);\n        } else if (intentState.opListReadCapability) {\n          intentState.opListReadCapability.reject(reason);\n        } else {\n          throw reason;\n        }\n      });\n    };\n    pump();\n  }\n  _abortOperatorList({\n    intentState,\n    reason,\n    force = false\n  }) {\n    if (!intentState.streamReader) {\n      return;\n    }\n    if (intentState.streamReaderCancelTimeout) {\n      clearTimeout(intentState.streamReaderCancelTimeout);\n      intentState.streamReaderCancelTimeout = null;\n    }\n    if (!force) {\n      if (intentState.renderTasks.size > 0) {\n        return;\n      }\n      if (reason instanceof RenderingCancelledException) {\n        let delay = RENDERING_CANCELLED_TIMEOUT;\n        if (reason.extraDelay > 0 && reason.extraDelay < 1000) {\n          delay += reason.extraDelay;\n        }\n        intentState.streamReaderCancelTimeout = setTimeout(() => {\n          intentState.streamReaderCancelTimeout = null;\n          this._abortOperatorList({\n            intentState,\n            reason,\n            force: true\n          });\n        }, delay);\n        return;\n      }\n    }\n    intentState.streamReader.cancel(new AbortException(reason.message)).catch(() => {});\n    intentState.streamReader = null;\n    if (this._transport.destroyed) {\n      return;\n    }\n    for (const [curCacheKey, curIntentState] of this._intentStates) {\n      if (curIntentState === intentState) {\n        this._intentStates.delete(curCacheKey);\n        break;\n      }\n    }\n    this.cleanup();\n  }\n  get stats() {\n    return this._stats;\n  }\n}\nclass PDFWorker {\n  #capability = Promise.withResolvers();\n  #messageHandler = null;\n  #port = null;\n  #webWorker = null;\n  static #fakeWorkerId = 0;\n  static #isWorkerDisabled = false;\n  static #workerPorts = new WeakMap();\n  static {\n    if (isNodeJS) {\n      this.#isWorkerDisabled = true;\n      GlobalWorkerOptions.workerSrc ||= \"./pdf.worker.mjs\";\n    }\n    this._isSameOrigin = (baseUrl, otherUrl) => {\n      const base = URL.parse(baseUrl);\n      if (!base?.origin || base.origin === \"null\") {\n        return false;\n      }\n      const other = new URL(otherUrl, base);\n      return base.origin === other.origin;\n    };\n    this._createCDNWrapper = url => {\n      const wrapper = `await import(\"${url}\");`;\n      return URL.createObjectURL(new Blob([wrapper], {\n        type: \"text/javascript\"\n      }));\n    };\n    this.fromPort = params => {\n      deprecated(\"`PDFWorker.fromPort` - please use `PDFWorker.create` instead.\");\n      if (!params?.port) {\n        throw new Error(\"PDFWorker.fromPort - invalid method signature.\");\n      }\n      return this.create(params);\n    };\n  }\n  constructor({\n    name = null,\n    port = null,\n    verbosity = getVerbosityLevel()\n  } = {}) {\n    this.name = name;\n    this.destroyed = false;\n    this.verbosity = verbosity;\n    if (port) {\n      if (PDFWorker.#workerPorts.has(port)) {\n        throw new Error(\"Cannot use more than one PDFWorker per port.\");\n      }\n      PDFWorker.#workerPorts.set(port, this);\n      this.#initializeFromPort(port);\n    } else {\n      this.#initialize();\n    }\n  }\n  get promise() {\n    return this.#capability.promise;\n  }\n  #resolve() {\n    this.#capability.resolve();\n    this.#messageHandler.send(\"configure\", {\n      verbosity: this.verbosity\n    });\n  }\n  get port() {\n    return this.#port;\n  }\n  get messageHandler() {\n    return this.#messageHandler;\n  }\n  #initializeFromPort(port) {\n    this.#port = port;\n    this.#messageHandler = new MessageHandler(\"main\", \"worker\", port);\n    this.#messageHandler.on(\"ready\", () => {});\n    this.#resolve();\n  }\n  #initialize() {\n    if (PDFWorker.#isWorkerDisabled || PDFWorker.#mainThreadWorkerMessageHandler) {\n      this.#setupFakeWorker();\n      return;\n    }\n    let {\n      workerSrc\n    } = PDFWorker;\n    try {\n      if (!PDFWorker._isSameOrigin(window.location, workerSrc)) {\n        workerSrc = PDFWorker._createCDNWrapper(new URL(workerSrc, window.location).href);\n      }\n      const worker = new Worker(workerSrc, {\n        type: \"module\"\n      });\n      const messageHandler = new MessageHandler(\"main\", \"worker\", worker);\n      const terminateEarly = () => {\n        ac.abort();\n        messageHandler.destroy();\n        worker.terminate();\n        if (this.destroyed) {\n          this.#capability.reject(new Error(\"Worker was destroyed\"));\n        } else {\n          this.#setupFakeWorker();\n        }\n      };\n      const ac = new AbortController();\n      worker.addEventListener(\"error\", () => {\n        if (!this.#webWorker) {\n          terminateEarly();\n        }\n      }, {\n        signal: ac.signal\n      });\n      messageHandler.on(\"test\", data => {\n        ac.abort();\n        if (this.destroyed || !data) {\n          terminateEarly();\n          return;\n        }\n        this.#messageHandler = messageHandler;\n        this.#port = worker;\n        this.#webWorker = worker;\n        this.#resolve();\n      });\n      messageHandler.on(\"ready\", data => {\n        ac.abort();\n        if (this.destroyed) {\n          terminateEarly();\n          return;\n        }\n        try {\n          sendTest();\n        } catch {\n          this.#setupFakeWorker();\n        }\n      });\n      const sendTest = () => {\n        const testObj = new Uint8Array();\n        messageHandler.send(\"test\", testObj, [testObj.buffer]);\n      };\n      sendTest();\n      return;\n    } catch {\n      info(\"The worker has been disabled.\");\n    }\n    this.#setupFakeWorker();\n  }\n  #setupFakeWorker() {\n    if (!PDFWorker.#isWorkerDisabled) {\n      warn(\"Setting up fake worker.\");\n      PDFWorker.#isWorkerDisabled = true;\n    }\n    PDFWorker._setupFakeWorkerGlobal.then(WorkerMessageHandler => {\n      if (this.destroyed) {\n        this.#capability.reject(new Error(\"Worker was destroyed\"));\n        return;\n      }\n      const port = new LoopbackPort();\n      this.#port = port;\n      const id = `fake${PDFWorker.#fakeWorkerId++}`;\n      const workerHandler = new MessageHandler(id + \"_worker\", id, port);\n      WorkerMessageHandler.setup(workerHandler, port);\n      this.#messageHandler = new MessageHandler(id, id + \"_worker\", port);\n      this.#resolve();\n    }).catch(reason => {\n      this.#capability.reject(new Error(`Setting up fake worker failed: \"${reason.message}\".`));\n    });\n  }\n  destroy() {\n    this.destroyed = true;\n    this.#webWorker?.terminate();\n    this.#webWorker = null;\n    PDFWorker.#workerPorts.delete(this.#port);\n    this.#port = null;\n    this.#messageHandler?.destroy();\n    this.#messageHandler = null;\n  }\n  static create(params) {\n    const cachedPort = this.#workerPorts.get(params?.port);\n    if (cachedPort) {\n      if (cachedPort._pendingDestroy) {\n        throw new Error(\"PDFWorker.create - the worker is being destroyed.\\n\" + \"Please remember to await `PDFDocumentLoadingTask.destroy()`-calls.\");\n      }\n      return cachedPort;\n    }\n    return new PDFWorker(params);\n  }\n  static get workerSrc() {\n    if (GlobalWorkerOptions.workerSrc) {\n      return GlobalWorkerOptions.workerSrc;\n    }\n    throw new Error('No \"GlobalWorkerOptions.workerSrc\" specified.');\n  }\n  static get #mainThreadWorkerMessageHandler() {\n    try {\n      return globalThis.pdfjsWorker?.WorkerMessageHandler || null;\n    } catch {\n      return null;\n    }\n  }\n  static get _setupFakeWorkerGlobal() {\n    const loader = async () => {\n      if (this.#mainThreadWorkerMessageHandler) {\n        return this.#mainThreadWorkerMessageHandler;\n      }\n      const worker = await import(\n      /*webpackIgnore: true*/\n      /*@vite-ignore*/\n      this.workerSrc);\n      return worker.WorkerMessageHandler;\n    };\n    return shadow(this, \"_setupFakeWorkerGlobal\", loader());\n  }\n}\nclass WorkerTransport {\n  #methodPromises = new Map();\n  #pageCache = new Map();\n  #pagePromises = new Map();\n  #pageRefCache = new Map();\n  #passwordCapability = null;\n  constructor(messageHandler, loadingTask, networkStream, params, factory) {\n    this.messageHandler = messageHandler;\n    this.loadingTask = loadingTask;\n    this.commonObjs = new PDFObjects();\n    this.fontLoader = new FontLoader({\n      ownerDocument: params.ownerDocument,\n      styleElement: params.styleElement\n    });\n    this.loadingParams = params.loadingParams;\n    this._params = params;\n    this.canvasFactory = factory.canvasFactory;\n    this.filterFactory = factory.filterFactory;\n    this.cMapReaderFactory = factory.cMapReaderFactory;\n    this.standardFontDataFactory = factory.standardFontDataFactory;\n    this.wasmFactory = factory.wasmFactory;\n    this.destroyed = false;\n    this.destroyCapability = null;\n    this._networkStream = networkStream;\n    this._fullReader = null;\n    this._lastProgress = null;\n    this.downloadInfoCapability = Promise.withResolvers();\n    this.setupMessageHandler();\n  }\n  #cacheSimpleMethod(name, data = null) {\n    const cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, data);\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  get annotationStorage() {\n    return shadow(this, \"annotationStorage\", new AnnotationStorage());\n  }\n  getRenderingIntent(intent, annotationMode = AnnotationMode.ENABLE, printAnnotationStorage = null, isEditing = false, isOpList = false) {\n    let renderingIntent = RenderingIntentFlag.DISPLAY;\n    let annotationStorageSerializable = SerializableEmpty;\n    switch (intent) {\n      case \"any\":\n        renderingIntent = RenderingIntentFlag.ANY;\n        break;\n      case \"display\":\n        break;\n      case \"print\":\n        renderingIntent = RenderingIntentFlag.PRINT;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid intent: ${intent}`);\n    }\n    const annotationStorage = renderingIntent & RenderingIntentFlag.PRINT && printAnnotationStorage instanceof PrintAnnotationStorage ? printAnnotationStorage : this.annotationStorage;\n    switch (annotationMode) {\n      case AnnotationMode.DISABLE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_DISABLE;\n        break;\n      case AnnotationMode.ENABLE:\n        break;\n      case AnnotationMode.ENABLE_FORMS:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_FORMS;\n        break;\n      case AnnotationMode.ENABLE_STORAGE:\n        renderingIntent += RenderingIntentFlag.ANNOTATIONS_STORAGE;\n        annotationStorageSerializable = annotationStorage.serializable;\n        break;\n      default:\n        warn(`getRenderingIntent - invalid annotationMode: ${annotationMode}`);\n    }\n    if (isEditing) {\n      renderingIntent += RenderingIntentFlag.IS_EDITING;\n    }\n    if (isOpList) {\n      renderingIntent += RenderingIntentFlag.OPLIST;\n    }\n    const {\n      ids: modifiedIds,\n      hash: modifiedIdsHash\n    } = annotationStorage.modifiedIds;\n    const cacheKeyBuf = [renderingIntent, annotationStorageSerializable.hash, modifiedIdsHash];\n    return {\n      renderingIntent,\n      cacheKey: cacheKeyBuf.join(\"_\"),\n      annotationStorageSerializable,\n      modifiedIds\n    };\n  }\n  destroy() {\n    if (this.destroyCapability) {\n      return this.destroyCapability.promise;\n    }\n    this.destroyed = true;\n    this.destroyCapability = Promise.withResolvers();\n    this.#passwordCapability?.reject(new Error(\"Worker was destroyed during onPassword callback\"));\n    const waitOn = [];\n    for (const page of this.#pageCache.values()) {\n      waitOn.push(page._destroy());\n    }\n    this.#pageCache.clear();\n    this.#pagePromises.clear();\n    this.#pageRefCache.clear();\n    if (this.hasOwnProperty(\"annotationStorage\")) {\n      this.annotationStorage.resetModified();\n    }\n    const terminated = this.messageHandler.sendWithPromise(\"Terminate\", null);\n    waitOn.push(terminated);\n    Promise.all(waitOn).then(() => {\n      this.commonObjs.clear();\n      this.fontLoader.clear();\n      this.#methodPromises.clear();\n      this.filterFactory.destroy();\n      TextLayer.cleanup();\n      this._networkStream?.cancelAllRequests(new AbortException(\"Worker was terminated.\"));\n      this.messageHandler?.destroy();\n      this.messageHandler = null;\n      this.destroyCapability.resolve();\n    }, this.destroyCapability.reject);\n    return this.destroyCapability.promise;\n  }\n  setupMessageHandler() {\n    const {\n      messageHandler,\n      loadingTask\n    } = this;\n    messageHandler.on(\"GetReader\", (data, sink) => {\n      assert(this._networkStream, \"GetReader - no `IPDFStream` instance available.\");\n      this._fullReader = this._networkStream.getFullReader();\n      this._fullReader.onProgress = evt => {\n        this._lastProgress = {\n          loaded: evt.loaded,\n          total: evt.total\n        };\n      };\n      sink.onPull = () => {\n        this._fullReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        this._fullReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"ReaderHeadersReady\", async data => {\n      await this._fullReader.headersReady;\n      const {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      } = this._fullReader;\n      if (!isStreamingSupported || !isRangeSupported) {\n        if (this._lastProgress) {\n          loadingTask.onProgress?.(this._lastProgress);\n        }\n        this._fullReader.onProgress = evt => {\n          loadingTask.onProgress?.({\n            loaded: evt.loaded,\n            total: evt.total\n          });\n        };\n      }\n      return {\n        isStreamingSupported,\n        isRangeSupported,\n        contentLength\n      };\n    });\n    messageHandler.on(\"GetRangeReader\", (data, sink) => {\n      assert(this._networkStream, \"GetRangeReader - no `IPDFStream` instance available.\");\n      const rangeReader = this._networkStream.getRangeReader(data.begin, data.end);\n      if (!rangeReader) {\n        sink.close();\n        return;\n      }\n      sink.onPull = () => {\n        rangeReader.read().then(function ({\n          value,\n          done\n        }) {\n          if (done) {\n            sink.close();\n            return;\n          }\n          assert(value instanceof ArrayBuffer, \"GetRangeReader - expected an ArrayBuffer.\");\n          sink.enqueue(new Uint8Array(value), 1, [value]);\n        }).catch(reason => {\n          sink.error(reason);\n        });\n      };\n      sink.onCancel = reason => {\n        rangeReader.cancel(reason);\n        sink.ready.catch(readyReason => {\n          if (this.destroyed) {\n            return;\n          }\n          throw readyReason;\n        });\n      };\n    });\n    messageHandler.on(\"GetDoc\", ({\n      pdfInfo\n    }) => {\n      this._numPages = pdfInfo.numPages;\n      this._htmlForXfa = pdfInfo.htmlForXfa;\n      delete pdfInfo.htmlForXfa;\n      loadingTask._capability.resolve(new PDFDocumentProxy(pdfInfo, this));\n    });\n    messageHandler.on(\"DocException\", ex => {\n      loadingTask._capability.reject(wrapReason(ex));\n    });\n    messageHandler.on(\"PasswordRequest\", ex => {\n      this.#passwordCapability = Promise.withResolvers();\n      try {\n        if (!loadingTask.onPassword) {\n          throw wrapReason(ex);\n        }\n        const updatePassword = password => {\n          if (password instanceof Error) {\n            this.#passwordCapability.reject(password);\n          } else {\n            this.#passwordCapability.resolve({\n              password\n            });\n          }\n        };\n        loadingTask.onPassword(updatePassword, ex.code);\n      } catch (err) {\n        this.#passwordCapability.reject(err);\n      }\n      return this.#passwordCapability.promise;\n    });\n    messageHandler.on(\"DataLoaded\", data => {\n      loadingTask.onProgress?.({\n        loaded: data.length,\n        total: data.length\n      });\n      this.downloadInfoCapability.resolve(data);\n    });\n    messageHandler.on(\"StartRenderPage\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      const page = this.#pageCache.get(data.pageIndex);\n      page._startRenderPage(data.transparency, data.cacheKey);\n    });\n    messageHandler.on(\"commonobj\", ([id, type, exportedData]) => {\n      if (this.destroyed) {\n        return null;\n      }\n      if (this.commonObjs.has(id)) {\n        return null;\n      }\n      switch (type) {\n        case \"Font\":\n          if (\"error\" in exportedData) {\n            const exportedError = exportedData.error;\n            warn(`Error during font loading: ${exportedError}`);\n            this.commonObjs.resolve(id, exportedError);\n            break;\n          }\n          const inspectFont = this._params.pdfBug && globalThis.FontInspector?.enabled ? (font, url) => globalThis.FontInspector.fontAdded(font, url) : null;\n          const font = new FontFaceObject(exportedData, inspectFont);\n          this.fontLoader.bind(font).catch(() => messageHandler.sendWithPromise(\"FontFallback\", {\n            id\n          })).finally(() => {\n            if (!font.fontExtraProperties && font.data) {\n              font.data = null;\n            }\n            this.commonObjs.resolve(id, font);\n          });\n          break;\n        case \"CopyLocalImage\":\n          const {\n            imageRef\n          } = exportedData;\n          assert(imageRef, \"The imageRef must be defined.\");\n          for (const pageProxy of this.#pageCache.values()) {\n            for (const [, data] of pageProxy.objs) {\n              if (data?.ref !== imageRef) {\n                continue;\n              }\n              if (!data.dataLen) {\n                return null;\n              }\n              this.commonObjs.resolve(id, structuredClone(data));\n              return data.dataLen;\n            }\n          }\n          break;\n        case \"FontPath\":\n        case \"Image\":\n        case \"Pattern\":\n          this.commonObjs.resolve(id, exportedData);\n          break;\n        default:\n          throw new Error(`Got unknown common object type ${type}`);\n      }\n      return null;\n    });\n    messageHandler.on(\"obj\", ([id, pageIndex, type, imageData]) => {\n      if (this.destroyed) {\n        return;\n      }\n      const pageProxy = this.#pageCache.get(pageIndex);\n      if (pageProxy.objs.has(id)) {\n        return;\n      }\n      if (pageProxy._intentStates.size === 0) {\n        imageData?.bitmap?.close();\n        return;\n      }\n      switch (type) {\n        case \"Image\":\n        case \"Pattern\":\n          pageProxy.objs.resolve(id, imageData);\n          break;\n        default:\n          throw new Error(`Got unknown object type ${type}`);\n      }\n    });\n    messageHandler.on(\"DocProgress\", data => {\n      if (this.destroyed) {\n        return;\n      }\n      loadingTask.onProgress?.({\n        loaded: data.loaded,\n        total: data.total\n      });\n    });\n    messageHandler.on(\"FetchBinaryData\", async data => {\n      if (this.destroyed) {\n        throw new Error(\"Worker was destroyed.\");\n      }\n      const factory = this[data.type];\n      if (!factory) {\n        throw new Error(`${data.type} not initialized, see the \\`useWorkerFetch\\` parameter.`);\n      }\n      return factory.fetch(data);\n    });\n  }\n  getData() {\n    return this.messageHandler.sendWithPromise(\"GetData\", null);\n  }\n  saveDocument() {\n    if (this.annotationStorage.size <= 0) {\n      warn(\"saveDocument called while `annotationStorage` is empty, \" + \"please use the getData-method instead.\");\n    }\n    const {\n      map,\n      transfer\n    } = this.annotationStorage.serializable;\n    return this.messageHandler.sendWithPromise(\"SaveDocument\", {\n      isPureXfa: !!this._htmlForXfa,\n      numPages: this._numPages,\n      annotationStorage: map,\n      filename: this._fullReader?.filename ?? null\n    }, transfer).finally(() => {\n      this.annotationStorage.resetModified();\n    });\n  }\n  getPage(pageNumber) {\n    if (!Number.isInteger(pageNumber) || pageNumber <= 0 || pageNumber > this._numPages) {\n      return Promise.reject(new Error(\"Invalid page request.\"));\n    }\n    const pageIndex = pageNumber - 1,\n      cachedPromise = this.#pagePromises.get(pageIndex);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(\"GetPage\", {\n      pageIndex\n    }).then(pageInfo => {\n      if (this.destroyed) {\n        throw new Error(\"Transport destroyed\");\n      }\n      if (pageInfo.refStr) {\n        this.#pageRefCache.set(pageInfo.refStr, pageNumber);\n      }\n      const page = new PDFPageProxy(pageIndex, pageInfo, this, this._params.pdfBug);\n      this.#pageCache.set(pageIndex, page);\n      return page;\n    });\n    this.#pagePromises.set(pageIndex, promise);\n    return promise;\n  }\n  getPageIndex(ref) {\n    if (!isRefProxy(ref)) {\n      return Promise.reject(new Error(\"Invalid pageIndex request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetPageIndex\", {\n      num: ref.num,\n      gen: ref.gen\n    });\n  }\n  getAnnotations(pageIndex, intent) {\n    return this.messageHandler.sendWithPromise(\"GetAnnotations\", {\n      pageIndex,\n      intent\n    });\n  }\n  getFieldObjects() {\n    return this.#cacheSimpleMethod(\"GetFieldObjects\");\n  }\n  hasJSActions() {\n    return this.#cacheSimpleMethod(\"HasJSActions\");\n  }\n  getCalculationOrderIds() {\n    return this.messageHandler.sendWithPromise(\"GetCalculationOrderIds\", null);\n  }\n  getDestinations() {\n    return this.messageHandler.sendWithPromise(\"GetDestinations\", null);\n  }\n  getDestination(id) {\n    if (typeof id !== \"string\") {\n      return Promise.reject(new Error(\"Invalid destination request.\"));\n    }\n    return this.messageHandler.sendWithPromise(\"GetDestination\", {\n      id\n    });\n  }\n  getPageLabels() {\n    return this.messageHandler.sendWithPromise(\"GetPageLabels\", null);\n  }\n  getPageLayout() {\n    return this.messageHandler.sendWithPromise(\"GetPageLayout\", null);\n  }\n  getPageMode() {\n    return this.messageHandler.sendWithPromise(\"GetPageMode\", null);\n  }\n  getViewerPreferences() {\n    return this.messageHandler.sendWithPromise(\"GetViewerPreferences\", null);\n  }\n  getOpenAction() {\n    return this.messageHandler.sendWithPromise(\"GetOpenAction\", null);\n  }\n  getAttachments() {\n    return this.messageHandler.sendWithPromise(\"GetAttachments\", null);\n  }\n  getDocJSActions() {\n    return this.#cacheSimpleMethod(\"GetDocJSActions\");\n  }\n  getPageJSActions(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetPageJSActions\", {\n      pageIndex\n    });\n  }\n  getStructTree(pageIndex) {\n    return this.messageHandler.sendWithPromise(\"GetStructTree\", {\n      pageIndex\n    });\n  }\n  getOutline() {\n    return this.messageHandler.sendWithPromise(\"GetOutline\", null);\n  }\n  getOptionalContentConfig(renderingIntent) {\n    return this.#cacheSimpleMethod(\"GetOptionalContentConfig\").then(data => new OptionalContentConfig(data, renderingIntent));\n  }\n  getPermissions() {\n    return this.messageHandler.sendWithPromise(\"GetPermissions\", null);\n  }\n  getMetadata() {\n    const name = \"GetMetadata\",\n      cachedPromise = this.#methodPromises.get(name);\n    if (cachedPromise) {\n      return cachedPromise;\n    }\n    const promise = this.messageHandler.sendWithPromise(name, null).then(results => ({\n      info: results[0],\n      metadata: results[1] ? new Metadata(results[1]) : null,\n      contentDispositionFilename: this._fullReader?.filename ?? null,\n      contentLength: this._fullReader?.contentLength ?? null\n    }));\n    this.#methodPromises.set(name, promise);\n    return promise;\n  }\n  getMarkInfo() {\n    return this.messageHandler.sendWithPromise(\"GetMarkInfo\", null);\n  }\n  async startCleanup(keepLoadedFonts = false) {\n    if (this.destroyed) {\n      return;\n    }\n    await this.messageHandler.sendWithPromise(\"Cleanup\", null);\n    for (const page of this.#pageCache.values()) {\n      const cleanupSuccessful = page.cleanup();\n      if (!cleanupSuccessful) {\n        throw new Error(`startCleanup: Page ${page.pageNumber} is currently rendering.`);\n      }\n    }\n    this.commonObjs.clear();\n    if (!keepLoadedFonts) {\n      this.fontLoader.clear();\n    }\n    this.#methodPromises.clear();\n    this.filterFactory.destroy(true);\n    TextLayer.cleanup();\n  }\n  cachedPageNumber(ref) {\n    if (!isRefProxy(ref)) {\n      return null;\n    }\n    const refStr = ref.gen === 0 ? `${ref.num}R` : `${ref.num}R${ref.gen}`;\n    return this.#pageRefCache.get(refStr) ?? null;\n  }\n}\nclass RenderTask {\n  #internalRenderTask = null;\n  onContinue = null;\n  onError = null;\n  constructor(internalRenderTask) {\n    this.#internalRenderTask = internalRenderTask;\n  }\n  get promise() {\n    return this.#internalRenderTask.capability.promise;\n  }\n  cancel(extraDelay = 0) {\n    this.#internalRenderTask.cancel(null, extraDelay);\n  }\n  get separateAnnots() {\n    const {\n      separateAnnots\n    } = this.#internalRenderTask.operatorList;\n    if (!separateAnnots) {\n      return false;\n    }\n    const {\n      annotationCanvasMap\n    } = this.#internalRenderTask;\n    return separateAnnots.form || separateAnnots.canvas && annotationCanvasMap?.size > 0;\n  }\n}\nclass InternalRenderTask {\n  #rAF = null;\n  static #canvasInUse = new WeakSet();\n  constructor({\n    callback,\n    params,\n    objs,\n    commonObjs,\n    annotationCanvasMap,\n    operatorList,\n    pageIndex,\n    canvasFactory,\n    filterFactory,\n    useRequestAnimationFrame = false,\n    pdfBug = false,\n    pageColors = null\n  }) {\n    this.callback = callback;\n    this.params = params;\n    this.objs = objs;\n    this.commonObjs = commonObjs;\n    this.annotationCanvasMap = annotationCanvasMap;\n    this.operatorListIdx = null;\n    this.operatorList = operatorList;\n    this._pageIndex = pageIndex;\n    this.canvasFactory = canvasFactory;\n    this.filterFactory = filterFactory;\n    this._pdfBug = pdfBug;\n    this.pageColors = pageColors;\n    this.running = false;\n    this.graphicsReadyCallback = null;\n    this.graphicsReady = false;\n    this._useRequestAnimationFrame = useRequestAnimationFrame === true && typeof window !== \"undefined\";\n    this.cancelled = false;\n    this.capability = Promise.withResolvers();\n    this.task = new RenderTask(this);\n    this._cancelBound = this.cancel.bind(this);\n    this._continueBound = this._continue.bind(this);\n    this._scheduleNextBound = this._scheduleNext.bind(this);\n    this._nextBound = this._next.bind(this);\n    this._canvas = params.canvasContext.canvas;\n  }\n  get completed() {\n    return this.capability.promise.catch(function () {});\n  }\n  initializeGraphics({\n    transparency = false,\n    optionalContentConfig\n  }) {\n    if (this.cancelled) {\n      return;\n    }\n    if (this._canvas) {\n      if (InternalRenderTask.#canvasInUse.has(this._canvas)) {\n        throw new Error(\"Cannot use the same canvas during multiple render() operations. \" + \"Use different canvas or ensure previous operations were \" + \"cancelled or completed.\");\n      }\n      InternalRenderTask.#canvasInUse.add(this._canvas);\n    }\n    if (this._pdfBug && globalThis.StepperManager?.enabled) {\n      this.stepper = globalThis.StepperManager.create(this._pageIndex);\n      this.stepper.init(this.operatorList);\n      this.stepper.nextBreakPoint = this.stepper.getNextBreakPoint();\n    }\n    const {\n      canvasContext,\n      viewport,\n      transform,\n      background\n    } = this.params;\n    this.gfx = new CanvasGraphics(canvasContext, this.commonObjs, this.objs, this.canvasFactory, this.filterFactory, {\n      optionalContentConfig\n    }, this.annotationCanvasMap, this.pageColors);\n    this.gfx.beginDrawing({\n      transform,\n      viewport,\n      transparency,\n      background\n    });\n    this.operatorListIdx = 0;\n    this.graphicsReady = true;\n    this.graphicsReadyCallback?.();\n  }\n  cancel(error = null, extraDelay = 0) {\n    this.running = false;\n    this.cancelled = true;\n    this.gfx?.endDrawing();\n    if (this.#rAF) {\n      window.cancelAnimationFrame(this.#rAF);\n      this.#rAF = null;\n    }\n    InternalRenderTask.#canvasInUse.delete(this._canvas);\n    error ||= new RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex + 1}`, extraDelay);\n    this.callback(error);\n    this.task.onError?.(error);\n  }\n  operatorListChanged() {\n    if (!this.graphicsReady) {\n      this.graphicsReadyCallback ||= this._continueBound;\n      return;\n    }\n    this.stepper?.updateOperatorList(this.operatorList);\n    if (this.running) {\n      return;\n    }\n    this._continue();\n  }\n  _continue() {\n    this.running = true;\n    if (this.cancelled) {\n      return;\n    }\n    if (this.task.onContinue) {\n      this.task.onContinue(this._scheduleNextBound);\n    } else {\n      this._scheduleNext();\n    }\n  }\n  _scheduleNext() {\n    if (this._useRequestAnimationFrame) {\n      this.#rAF = window.requestAnimationFrame(() => {\n        this.#rAF = null;\n        this._nextBound().catch(this._cancelBound);\n      });\n    } else {\n      Promise.resolve().then(this._nextBound).catch(this._cancelBound);\n    }\n  }\n  async _next() {\n    if (this.cancelled) {\n      return;\n    }\n    this.operatorListIdx = this.gfx.executeOperatorList(this.operatorList, this.operatorListIdx, this._continueBound, this.stepper);\n    if (this.operatorListIdx === this.operatorList.argsArray.length) {\n      this.running = false;\n      if (this.operatorList.lastChunk) {\n        this.gfx.endDrawing();\n        InternalRenderTask.#canvasInUse.delete(this._canvas);\n        this.callback();\n      }\n    }\n  }\n}\nconst version = \"5.3.93\";\nconst build = \"cbeef3233\";\n\n;// ./src/shared/scripting_utils.js\nfunction makeColorComp(n) {\n  return Math.floor(Math.max(0, Math.min(1, n)) * 255).toString(16).padStart(2, \"0\");\n}\nfunction scaleAndClamp(x) {\n  return Math.max(0, Math.min(255, 255 * x));\n}\nclass ColorConverters {\n  static CMYK_G([c, y, m, k]) {\n    return [\"G\", 1 - Math.min(1, 0.3 * c + 0.59 * m + 0.11 * y + k)];\n  }\n  static G_CMYK([g]) {\n    return [\"CMYK\", 0, 0, 0, 1 - g];\n  }\n  static G_RGB([g]) {\n    return [\"RGB\", g, g, g];\n  }\n  static G_rgb([g]) {\n    g = scaleAndClamp(g);\n    return [g, g, g];\n  }\n  static G_HTML([g]) {\n    const G = makeColorComp(g);\n    return `#${G}${G}${G}`;\n  }\n  static RGB_G([r, g, b]) {\n    return [\"G\", 0.3 * r + 0.59 * g + 0.11 * b];\n  }\n  static RGB_rgb(color) {\n    return color.map(scaleAndClamp);\n  }\n  static RGB_HTML(color) {\n    return `#${color.map(makeColorComp).join(\"\")}`;\n  }\n  static T_HTML() {\n    return \"#00000000\";\n  }\n  static T_rgb() {\n    return [null];\n  }\n  static CMYK_RGB([c, y, m, k]) {\n    return [\"RGB\", 1 - Math.min(1, c + k), 1 - Math.min(1, m + k), 1 - Math.min(1, y + k)];\n  }\n  static CMYK_rgb([c, y, m, k]) {\n    return [scaleAndClamp(1 - Math.min(1, c + k)), scaleAndClamp(1 - Math.min(1, m + k)), scaleAndClamp(1 - Math.min(1, y + k))];\n  }\n  static CMYK_HTML(components) {\n    const rgb = this.CMYK_RGB(components).slice(1);\n    return this.RGB_HTML(rgb);\n  }\n  static RGB_CMYK([r, g, b]) {\n    const c = 1 - r;\n    const m = 1 - g;\n    const y = 1 - b;\n    const k = Math.min(c, m, y);\n    return [\"CMYK\", c, m, y, k];\n  }\n}\nconst DateFormats = (/* unused pure expression or super */ null && ([\"m/d\", \"m/d/yy\", \"mm/dd/yy\", \"mm/yy\", \"d-mmm\", \"d-mmm-yy\", \"dd-mmm-yy\", \"yy-mm-dd\", \"mmm-yy\", \"mmmm-yy\", \"mmm d, yyyy\", \"mmmm d, yyyy\", \"m/d/yy h:MM tt\", \"m/d/yy HH:MM\"]));\nconst TimeFormats = (/* unused pure expression or super */ null && ([\"HH:MM\", \"h:MM tt\", \"HH:MM:ss\", \"h:MM:ss tt\"]));\n\n;// ./src/display/svg_factory.js\n\n\nclass BaseSVGFactory {\n  create(width, height, skipDimensions = false) {\n    if (width <= 0 || height <= 0) {\n      throw new Error(\"Invalid SVG dimensions\");\n    }\n    const svg = this._createSVG(\"svg:svg\");\n    svg.setAttribute(\"version\", \"1.1\");\n    if (!skipDimensions) {\n      svg.setAttribute(\"width\", `${width}px`);\n      svg.setAttribute(\"height\", `${height}px`);\n    }\n    svg.setAttribute(\"preserveAspectRatio\", \"none\");\n    svg.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n    return svg;\n  }\n  createElement(type) {\n    if (typeof type !== \"string\") {\n      throw new Error(\"Invalid SVG element type\");\n    }\n    return this._createSVG(type);\n  }\n  _createSVG(type) {\n    unreachable(\"Abstract method `_createSVG` called.\");\n  }\n}\nclass DOMSVGFactory extends BaseSVGFactory {\n  _createSVG(type) {\n    return document.createElementNS(SVG_NS, type);\n  }\n}\n\n;// ./src/display/xfa_layer.js\n\nclass XfaLayer {\n  static setupStorage(html, id, element, storage, intent) {\n    const storedData = storage.getValue(id, {\n      value: null\n    });\n    switch (element.name) {\n      case \"textarea\":\n        if (storedData.value !== null) {\n          html.textContent = storedData.value;\n        }\n        if (intent === \"print\") {\n          break;\n        }\n        html.addEventListener(\"input\", event => {\n          storage.setValue(id, {\n            value: event.target.value\n          });\n        });\n        break;\n      case \"input\":\n        if (element.attributes.type === \"radio\" || element.attributes.type === \"checkbox\") {\n          if (storedData.value === element.attributes.xfaOn) {\n            html.setAttribute(\"checked\", true);\n          } else if (storedData.value === element.attributes.xfaOff) {\n            html.removeAttribute(\"checked\");\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"change\", event => {\n            storage.setValue(id, {\n              value: event.target.checked ? event.target.getAttribute(\"xfaOn\") : event.target.getAttribute(\"xfaOff\")\n            });\n          });\n        } else {\n          if (storedData.value !== null) {\n            html.setAttribute(\"value\", storedData.value);\n          }\n          if (intent === \"print\") {\n            break;\n          }\n          html.addEventListener(\"input\", event => {\n            storage.setValue(id, {\n              value: event.target.value\n            });\n          });\n        }\n        break;\n      case \"select\":\n        if (storedData.value !== null) {\n          html.setAttribute(\"value\", storedData.value);\n          for (const option of element.children) {\n            if (option.attributes.value === storedData.value) {\n              option.attributes.selected = true;\n            } else if (option.attributes.hasOwnProperty(\"selected\")) {\n              delete option.attributes.selected;\n            }\n          }\n        }\n        html.addEventListener(\"input\", event => {\n          const options = event.target.options;\n          const value = options.selectedIndex === -1 ? \"\" : options[options.selectedIndex].value;\n          storage.setValue(id, {\n            value\n          });\n        });\n        break;\n    }\n  }\n  static setAttributes({\n    html,\n    element,\n    storage = null,\n    intent,\n    linkService\n  }) {\n    const {\n      attributes\n    } = element;\n    const isHTMLAnchorElement = html instanceof HTMLAnchorElement;\n    if (attributes.type === \"radio\") {\n      attributes.name = `${attributes.name}-${intent}`;\n    }\n    for (const [key, value] of Object.entries(attributes)) {\n      if (value === null || value === undefined) {\n        continue;\n      }\n      switch (key) {\n        case \"class\":\n          if (value.length) {\n            html.setAttribute(key, value.join(\" \"));\n          }\n          break;\n        case \"dataId\":\n          break;\n        case \"id\":\n          html.setAttribute(\"data-element-id\", value);\n          break;\n        case \"style\":\n          Object.assign(html.style, value);\n          break;\n        case \"textContent\":\n          html.textContent = value;\n          break;\n        default:\n          if (!isHTMLAnchorElement || key !== \"href\" && key !== \"newWindow\") {\n            html.setAttribute(key, value);\n          }\n      }\n    }\n    if (isHTMLAnchorElement) {\n      linkService.addLinkAttributes(html, attributes.href, attributes.newWindow);\n    }\n    if (storage && attributes.dataId) {\n      this.setupStorage(html, attributes.dataId, element, storage);\n    }\n  }\n  static render(parameters) {\n    const storage = parameters.annotationStorage;\n    const linkService = parameters.linkService;\n    const root = parameters.xfaHtml;\n    const intent = parameters.intent || \"display\";\n    const rootHtml = document.createElement(root.name);\n    if (root.attributes) {\n      this.setAttributes({\n        html: rootHtml,\n        element: root,\n        intent,\n        linkService\n      });\n    }\n    const isNotForRichText = intent !== \"richText\";\n    const rootDiv = parameters.div;\n    rootDiv.append(rootHtml);\n    if (parameters.viewport) {\n      const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n      rootDiv.style.transform = transform;\n    }\n    if (isNotForRichText) {\n      rootDiv.setAttribute(\"class\", \"xfaLayer xfaFont\");\n    }\n    const textDivs = [];\n    if (root.children.length === 0) {\n      if (root.value) {\n        const node = document.createTextNode(root.value);\n        rootHtml.append(node);\n        if (isNotForRichText && XfaText.shouldBuildText(root.name)) {\n          textDivs.push(node);\n        }\n      }\n      return {\n        textDivs\n      };\n    }\n    const stack = [[root, -1, rootHtml]];\n    while (stack.length > 0) {\n      const [parent, i, html] = stack.at(-1);\n      if (i + 1 === parent.children.length) {\n        stack.pop();\n        continue;\n      }\n      const child = parent.children[++stack.at(-1)[1]];\n      if (child === null) {\n        continue;\n      }\n      const {\n        name\n      } = child;\n      if (name === \"#text\") {\n        const node = document.createTextNode(child.value);\n        textDivs.push(node);\n        html.append(node);\n        continue;\n      }\n      const childHtml = child?.attributes?.xmlns ? document.createElementNS(child.attributes.xmlns, name) : document.createElement(name);\n      html.append(childHtml);\n      if (child.attributes) {\n        this.setAttributes({\n          html: childHtml,\n          element: child,\n          storage,\n          intent,\n          linkService\n        });\n      }\n      if (child.children?.length > 0) {\n        stack.push([child, -1, childHtml]);\n      } else if (child.value) {\n        const node = document.createTextNode(child.value);\n        if (isNotForRichText && XfaText.shouldBuildText(name)) {\n          textDivs.push(node);\n        }\n        childHtml.append(node);\n      }\n    }\n    for (const el of rootDiv.querySelectorAll(\".xfaNonInteractive input, .xfaNonInteractive textarea\")) {\n      el.setAttribute(\"readOnly\", true);\n    }\n    return {\n      textDivs\n    };\n  }\n  static update(parameters) {\n    const transform = `matrix(${parameters.viewport.transform.join(\",\")})`;\n    parameters.div.style.transform = transform;\n    parameters.div.hidden = false;\n  }\n}\n\n;// ./src/display/annotation_layer.js\n\n\n\n\n\n\nconst annotation_layer_DEFAULT_FONT_SIZE = 9;\nconst GetElementsByNameSet = new WeakSet();\nclass AnnotationElementFactory {\n  static create(parameters) {\n    const subtype = parameters.data.annotationType;\n    switch (subtype) {\n      case AnnotationType.LINK:\n        return new LinkAnnotationElement(parameters);\n      case AnnotationType.TEXT:\n        return new TextAnnotationElement(parameters);\n      case AnnotationType.WIDGET:\n        const fieldType = parameters.data.fieldType;\n        switch (fieldType) {\n          case \"Tx\":\n            return new TextWidgetAnnotationElement(parameters);\n          case \"Btn\":\n            if (parameters.data.radioButton) {\n              return new RadioButtonWidgetAnnotationElement(parameters);\n            } else if (parameters.data.checkBox) {\n              return new CheckboxWidgetAnnotationElement(parameters);\n            }\n            return new PushButtonWidgetAnnotationElement(parameters);\n          case \"Ch\":\n            return new ChoiceWidgetAnnotationElement(parameters);\n          case \"Sig\":\n            return new SignatureWidgetAnnotationElement(parameters);\n        }\n        return new WidgetAnnotationElement(parameters);\n      case AnnotationType.POPUP:\n        return new PopupAnnotationElement(parameters);\n      case AnnotationType.FREETEXT:\n        return new FreeTextAnnotationElement(parameters);\n      case AnnotationType.LINE:\n        return new LineAnnotationElement(parameters);\n      case AnnotationType.SQUARE:\n        return new SquareAnnotationElement(parameters);\n      case AnnotationType.CIRCLE:\n        return new CircleAnnotationElement(parameters);\n      case AnnotationType.POLYLINE:\n        return new PolylineAnnotationElement(parameters);\n      case AnnotationType.CARET:\n        return new CaretAnnotationElement(parameters);\n      case AnnotationType.INK:\n        return new InkAnnotationElement(parameters);\n      case AnnotationType.POLYGON:\n        return new PolygonAnnotationElement(parameters);\n      case AnnotationType.HIGHLIGHT:\n        return new HighlightAnnotationElement(parameters);\n      case AnnotationType.UNDERLINE:\n        return new UnderlineAnnotationElement(parameters);\n      case AnnotationType.SQUIGGLY:\n        return new SquigglyAnnotationElement(parameters);\n      case AnnotationType.STRIKEOUT:\n        return new StrikeOutAnnotationElement(parameters);\n      case AnnotationType.STAMP:\n        return new StampAnnotationElement(parameters);\n      case AnnotationType.FILEATTACHMENT:\n        return new FileAttachmentAnnotationElement(parameters);\n      default:\n        return new AnnotationElement(parameters);\n    }\n  }\n}\nclass AnnotationElement {\n  #updates = null;\n  #hasBorder = false;\n  #popupElement = null;\n  constructor(parameters, {\n    isRenderable = false,\n    ignoreBorder = false,\n    createQuadrilaterals = false\n  } = {}) {\n    this.isRenderable = isRenderable;\n    this.data = parameters.data;\n    this.layer = parameters.layer;\n    this.linkService = parameters.linkService;\n    this.downloadManager = parameters.downloadManager;\n    this.imageResourcesPath = parameters.imageResourcesPath;\n    this.renderForms = parameters.renderForms;\n    this.svgFactory = parameters.svgFactory;\n    this.annotationStorage = parameters.annotationStorage;\n    this.enableScripting = parameters.enableScripting;\n    this.hasJSActions = parameters.hasJSActions;\n    this._fieldObjects = parameters.fieldObjects;\n    this.parent = parameters.parent;\n    if (isRenderable) {\n      this.container = this._createContainer(ignoreBorder);\n    }\n    if (createQuadrilaterals) {\n      this._createQuadrilaterals();\n    }\n  }\n  static _hasPopupData({\n    contentsObj,\n    richText\n  }) {\n    return !!(contentsObj?.str || richText?.str);\n  }\n  get _isEditable() {\n    return this.data.isEditable;\n  }\n  get hasPopupData() {\n    return AnnotationElement._hasPopupData(this.data);\n  }\n  updateEdited(params) {\n    if (!this.container) {\n      return;\n    }\n    this.#updates ||= {\n      rect: this.data.rect.slice(0)\n    };\n    const {\n      rect\n    } = params;\n    if (rect) {\n      this.#setRectEdited(rect);\n    }\n    this.#popupElement?.popup.updateEdited(params);\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    this.#setRectEdited(this.#updates.rect);\n    this.#popupElement?.popup.resetEdited();\n    this.#updates = null;\n  }\n  #setRectEdited(rect) {\n    const {\n      container: {\n        style\n      },\n      data: {\n        rect: currentRect,\n        rotation\n      },\n      parent: {\n        viewport: {\n          rawDims: {\n            pageWidth,\n            pageHeight,\n            pageX,\n            pageY\n          }\n        }\n      }\n    } = this;\n    currentRect?.splice(0, 4, ...rect);\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (pageHeight - rect[3] + pageY) / pageHeight}%`;\n    if (rotation === 0) {\n      style.width = `${100 * (rect[2] - rect[0]) / pageWidth}%`;\n      style.height = `${100 * (rect[3] - rect[1]) / pageHeight}%`;\n    } else {\n      this.setRotation(rotation);\n    }\n  }\n  _createContainer(ignoreBorder) {\n    const {\n      data,\n      parent: {\n        page,\n        viewport\n      }\n    } = this;\n    const container = document.createElement(\"section\");\n    container.setAttribute(\"data-annotation-id\", data.id);\n    if (!(this instanceof WidgetAnnotationElement)) {\n      container.tabIndex = 0;\n    }\n    const {\n      style\n    } = container;\n    style.zIndex = this.parent.zIndex++;\n    if (data.alternativeText) {\n      container.title = data.alternativeText;\n    }\n    if (data.noRotate) {\n      container.classList.add(\"norotate\");\n    }\n    if (!data.rect || this instanceof PopupAnnotationElement) {\n      const {\n        rotation\n      } = data;\n      if (!data.hasOwnCanvas && rotation !== 0) {\n        this.setRotation(rotation, container);\n      }\n      return container;\n    }\n    const {\n      width,\n      height\n    } = this;\n    if (!ignoreBorder && data.borderStyle.width > 0) {\n      style.borderWidth = `${data.borderStyle.width}px`;\n      const horizontalRadius = data.borderStyle.horizontalCornerRadius;\n      const verticalRadius = data.borderStyle.verticalCornerRadius;\n      if (horizontalRadius > 0 || verticalRadius > 0) {\n        const radius = `calc(${horizontalRadius}px * var(--total-scale-factor)) / calc(${verticalRadius}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      } else if (this instanceof RadioButtonWidgetAnnotationElement) {\n        const radius = `calc(${width}px * var(--total-scale-factor)) / calc(${height}px * var(--total-scale-factor))`;\n        style.borderRadius = radius;\n      }\n      switch (data.borderStyle.style) {\n        case AnnotationBorderStyleType.SOLID:\n          style.borderStyle = \"solid\";\n          break;\n        case AnnotationBorderStyleType.DASHED:\n          style.borderStyle = \"dashed\";\n          break;\n        case AnnotationBorderStyleType.BEVELED:\n          warn(\"Unimplemented border style: beveled\");\n          break;\n        case AnnotationBorderStyleType.INSET:\n          warn(\"Unimplemented border style: inset\");\n          break;\n        case AnnotationBorderStyleType.UNDERLINE:\n          style.borderBottomStyle = \"solid\";\n          break;\n        default:\n          break;\n      }\n      const borderColor = data.borderColor || null;\n      if (borderColor) {\n        this.#hasBorder = true;\n        style.borderColor = Util.makeHexColor(borderColor[0] | 0, borderColor[1] | 0, borderColor[2] | 0);\n      } else {\n        style.borderWidth = 0;\n      }\n    }\n    const rect = Util.normalizeRect([data.rect[0], page.view[3] - data.rect[1] + page.view[1], data.rect[2], page.view[3] - data.rect[3] + page.view[1]]);\n    const {\n      pageWidth,\n      pageHeight,\n      pageX,\n      pageY\n    } = viewport.rawDims;\n    style.left = `${100 * (rect[0] - pageX) / pageWidth}%`;\n    style.top = `${100 * (rect[1] - pageY) / pageHeight}%`;\n    const {\n      rotation\n    } = data;\n    if (data.hasOwnCanvas || rotation === 0) {\n      style.width = `${100 * width / pageWidth}%`;\n      style.height = `${100 * height / pageHeight}%`;\n    } else {\n      this.setRotation(rotation, container);\n    }\n    return container;\n  }\n  setRotation(angle, container = this.container) {\n    if (!this.data.rect) {\n      return;\n    }\n    const {\n      pageWidth,\n      pageHeight\n    } = this.parent.viewport.rawDims;\n    let {\n      width,\n      height\n    } = this;\n    if (angle % 180 !== 0) {\n      [width, height] = [height, width];\n    }\n    container.style.width = `${100 * width / pageWidth}%`;\n    container.style.height = `${100 * height / pageHeight}%`;\n    container.setAttribute(\"data-main-rotation\", (360 - angle) % 360);\n  }\n  get _commonActions() {\n    const setColor = (jsName, styleName, event) => {\n      const color = event.detail[jsName];\n      const colorType = color[0];\n      const colorArray = color.slice(1);\n      event.target.style[styleName] = ColorConverters[`${colorType}_HTML`](colorArray);\n      this.annotationStorage.setValue(this.data.id, {\n        [styleName]: ColorConverters[`${colorType}_rgb`](colorArray)\n      });\n    };\n    return shadow(this, \"_commonActions\", {\n      display: event => {\n        const {\n          display\n        } = event.detail;\n        const hidden = display % 2 === 1;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noView: hidden,\n          noPrint: display === 1 || display === 2\n        });\n      },\n      print: event => {\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: !event.detail.print\n        });\n      },\n      hidden: event => {\n        const {\n          hidden\n        } = event.detail;\n        this.container.style.visibility = hidden ? \"hidden\" : \"visible\";\n        this.annotationStorage.setValue(this.data.id, {\n          noPrint: hidden,\n          noView: hidden\n        });\n      },\n      focus: event => {\n        setTimeout(() => event.target.focus({\n          preventScroll: false\n        }), 0);\n      },\n      userName: event => {\n        event.target.title = event.detail.userName;\n      },\n      readonly: event => {\n        event.target.disabled = event.detail.readonly;\n      },\n      required: event => {\n        this._setRequired(event.target, event.detail.required);\n      },\n      bgColor: event => {\n        setColor(\"bgColor\", \"backgroundColor\", event);\n      },\n      fillColor: event => {\n        setColor(\"fillColor\", \"backgroundColor\", event);\n      },\n      fgColor: event => {\n        setColor(\"fgColor\", \"color\", event);\n      },\n      textColor: event => {\n        setColor(\"textColor\", \"color\", event);\n      },\n      borderColor: event => {\n        setColor(\"borderColor\", \"borderColor\", event);\n      },\n      strokeColor: event => {\n        setColor(\"strokeColor\", \"borderColor\", event);\n      },\n      rotation: event => {\n        const angle = event.detail.rotation;\n        this.setRotation(angle);\n        this.annotationStorage.setValue(this.data.id, {\n          rotation: angle\n        });\n      }\n    });\n  }\n  _dispatchEventFromSandbox(actions, jsEvent) {\n    const commonActions = this._commonActions;\n    for (const name of Object.keys(jsEvent.detail)) {\n      const action = actions[name] || commonActions[name];\n      action?.(jsEvent);\n    }\n  }\n  _setDefaultPropertiesFromJS(element) {\n    if (!this.enableScripting) {\n      return;\n    }\n    const storedData = this.annotationStorage.getRawValue(this.data.id);\n    if (!storedData) {\n      return;\n    }\n    const commonActions = this._commonActions;\n    for (const [actionName, detail] of Object.entries(storedData)) {\n      const action = commonActions[actionName];\n      if (action) {\n        const eventProxy = {\n          detail: {\n            [actionName]: detail\n          },\n          target: element\n        };\n        action(eventProxy);\n        delete storedData[actionName];\n      }\n    }\n  }\n  _createQuadrilaterals() {\n    if (!this.container) {\n      return;\n    }\n    const {\n      quadPoints\n    } = this.data;\n    if (!quadPoints) {\n      return;\n    }\n    const [rectBlX, rectBlY, rectTrX, rectTrY] = this.data.rect.map(x => Math.fround(x));\n    if (quadPoints.length === 8) {\n      const [trX, trY, blX, blY] = quadPoints.subarray(2, 6);\n      if (rectTrX === trX && rectTrY === trY && rectBlX === blX && rectBlY === blY) {\n        return;\n      }\n    }\n    const {\n      style\n    } = this.container;\n    let svgBuffer;\n    if (this.#hasBorder) {\n      const {\n        borderColor,\n        borderWidth\n      } = style;\n      style.borderWidth = 0;\n      svgBuffer = [\"url('data:image/svg+xml;utf8,\", `<svg xmlns=\"http://www.w3.org/2000/svg\"`, ` preserveAspectRatio=\"none\" viewBox=\"0 0 1 1\">`, `<g fill=\"transparent\" stroke=\"${borderColor}\" stroke-width=\"${borderWidth}\">`];\n      this.container.classList.add(\"hasBorder\");\n    }\n    const width = rectTrX - rectBlX;\n    const height = rectTrY - rectBlY;\n    const {\n      svgFactory\n    } = this;\n    const svg = svgFactory.createElement(\"svg\");\n    svg.classList.add(\"quadrilateralsContainer\");\n    svg.setAttribute(\"width\", 0);\n    svg.setAttribute(\"height\", 0);\n    svg.role = \"none\";\n    const defs = svgFactory.createElement(\"defs\");\n    svg.append(defs);\n    const clipPath = svgFactory.createElement(\"clipPath\");\n    const id = `clippath_${this.data.id}`;\n    clipPath.setAttribute(\"id\", id);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    defs.append(clipPath);\n    for (let i = 2, ii = quadPoints.length; i < ii; i += 8) {\n      const trX = quadPoints[i];\n      const trY = quadPoints[i + 1];\n      const blX = quadPoints[i + 2];\n      const blY = quadPoints[i + 3];\n      const rect = svgFactory.createElement(\"rect\");\n      const x = (blX - rectBlX) / width;\n      const y = (rectTrY - trY) / height;\n      const rectWidth = (trX - blX) / width;\n      const rectHeight = (trY - blY) / height;\n      rect.setAttribute(\"x\", x);\n      rect.setAttribute(\"y\", y);\n      rect.setAttribute(\"width\", rectWidth);\n      rect.setAttribute(\"height\", rectHeight);\n      clipPath.append(rect);\n      svgBuffer?.push(`<rect vector-effect=\"non-scaling-stroke\" x=\"${x}\" y=\"${y}\" width=\"${rectWidth}\" height=\"${rectHeight}\"/>`);\n    }\n    if (this.#hasBorder) {\n      svgBuffer.push(`</g></svg>')`);\n      style.backgroundImage = svgBuffer.join(\"\");\n    }\n    this.container.append(svg);\n    this.container.style.clipPath = `url(#${id})`;\n  }\n  _createPopup() {\n    const {\n      data\n    } = this;\n    const popup = this.#popupElement = new PopupAnnotationElement({\n      data: {\n        color: data.color,\n        titleObj: data.titleObj,\n        modificationDate: data.modificationDate,\n        contentsObj: data.contentsObj,\n        richText: data.richText,\n        parentRect: data.rect,\n        borderStyle: 0,\n        id: `popup_${data.id}`,\n        rotation: data.rotation,\n        noRotate: true\n      },\n      parent: this.parent,\n      elements: [this]\n    });\n    this.parent.div.append(popup.render());\n  }\n  render() {\n    unreachable(\"Abstract method `AnnotationElement.render` called\");\n  }\n  _getElementsByName(name, skipId = null) {\n    const fields = [];\n    if (this._fieldObjects) {\n      const fieldObj = this._fieldObjects[name];\n      if (fieldObj) {\n        for (const {\n          page,\n          id,\n          exportValues\n        } of fieldObj) {\n          if (page === -1) {\n            continue;\n          }\n          if (id === skipId) {\n            continue;\n          }\n          const exportValue = typeof exportValues === \"string\" ? exportValues : null;\n          const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n          if (domElement && !GetElementsByNameSet.has(domElement)) {\n            warn(`_getElementsByName - element not allowed: ${id}`);\n            continue;\n          }\n          fields.push({\n            id,\n            exportValue,\n            domElement\n          });\n        }\n      }\n      return fields;\n    }\n    for (const domElement of document.getElementsByName(name)) {\n      const {\n        exportValue\n      } = domElement;\n      const id = domElement.getAttribute(\"data-element-id\");\n      if (id === skipId) {\n        continue;\n      }\n      if (!GetElementsByNameSet.has(domElement)) {\n        continue;\n      }\n      fields.push({\n        id,\n        exportValue,\n        domElement\n      });\n    }\n    return fields;\n  }\n  show() {\n    if (this.container) {\n      this.container.hidden = false;\n    }\n    this.popup?.maybeShow();\n  }\n  hide() {\n    if (this.container) {\n      this.container.hidden = true;\n    }\n    this.popup?.forceHide();\n  }\n  getElementsToTriggerPopup() {\n    return this.container;\n  }\n  addHighlightArea() {\n    const triggers = this.getElementsToTriggerPopup();\n    if (Array.isArray(triggers)) {\n      for (const element of triggers) {\n        element.classList.add(\"highlightArea\");\n      }\n    } else {\n      triggers.classList.add(\"highlightArea\");\n    }\n  }\n  _editOnDoubleClick() {\n    if (!this._isEditable) {\n      return;\n    }\n    const {\n      annotationEditorType: mode,\n      data: {\n        id: editId\n      }\n    } = this;\n    this.container.addEventListener(\"dblclick\", () => {\n      this.linkService.eventBus?.dispatch(\"switchannotationeditormode\", {\n        source: this,\n        mode,\n        editId,\n        mustEnterInEditMode: true\n      });\n    });\n  }\n  get width() {\n    return this.data.rect[2] - this.data.rect[0];\n  }\n  get height() {\n    return this.data.rect[3] - this.data.rect[1];\n  }\n}\nclass LinkAnnotationElement extends AnnotationElement {\n  constructor(parameters, options = null) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: !!options?.ignoreBorder,\n      createQuadrilaterals: true\n    });\n    this.isTooltipOnly = parameters.data.isTooltipOnly;\n  }\n  render() {\n    const {\n      data,\n      linkService\n    } = this;\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"data-element-id\", data.id);\n    let isBound = false;\n    if (data.url) {\n      linkService.addLinkAttributes(link, data.url, data.newWindow);\n      isBound = true;\n    } else if (data.action) {\n      this._bindNamedAction(link, data.action);\n      isBound = true;\n    } else if (data.attachment) {\n      this.#bindAttachment(link, data.attachment, data.attachmentDest);\n      isBound = true;\n    } else if (data.setOCGState) {\n      this.#bindSetOCGState(link, data.setOCGState);\n      isBound = true;\n    } else if (data.dest) {\n      this._bindLink(link, data.dest);\n      isBound = true;\n    } else {\n      if (data.actions && (data.actions.Action || data.actions[\"Mouse Up\"] || data.actions[\"Mouse Down\"]) && this.enableScripting && this.hasJSActions) {\n        this._bindJSAction(link, data);\n        isBound = true;\n      }\n      if (data.resetForm) {\n        this._bindResetFormAction(link, data.resetForm);\n        isBound = true;\n      } else if (this.isTooltipOnly && !isBound) {\n        this._bindLink(link, \"\");\n        isBound = true;\n      }\n    }\n    this.container.classList.add(\"linkAnnotation\");\n    if (isBound) {\n      this.container.append(link);\n    }\n    return this.container;\n  }\n  #setInternalLink() {\n    this.container.setAttribute(\"data-internal-link\", \"\");\n  }\n  _bindLink(link, destination) {\n    link.href = this.linkService.getDestinationHash(destination);\n    link.onclick = () => {\n      if (destination) {\n        this.linkService.goToDestination(destination);\n      }\n      return false;\n    };\n    if (destination || destination === \"\") {\n      this.#setInternalLink();\n    }\n  }\n  _bindNamedAction(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeNamedAction(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindAttachment(link, attachment, dest = null) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    if (attachment.description) {\n      link.title = attachment.description;\n    }\n    link.onclick = () => {\n      this.downloadManager?.openOrDownloadData(attachment.content, attachment.filename, dest);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  #bindSetOCGState(link, action) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    link.onclick = () => {\n      this.linkService.executeSetOCGState(action);\n      return false;\n    };\n    this.#setInternalLink();\n  }\n  _bindJSAction(link, data) {\n    link.href = this.linkService.getAnchorUrl(\"\");\n    const map = new Map([[\"Action\", \"onclick\"], [\"Mouse Up\", \"onmouseup\"], [\"Mouse Down\", \"onmousedown\"]]);\n    for (const name of Object.keys(data.actions)) {\n      const jsName = map.get(name);\n      if (!jsName) {\n        continue;\n      }\n      link[jsName] = () => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: data.id,\n            name\n          }\n        });\n        return false;\n      };\n    }\n    if (!link.onclick) {\n      link.onclick = () => false;\n    }\n    this.#setInternalLink();\n  }\n  _bindResetFormAction(link, resetForm) {\n    const otherClickAction = link.onclick;\n    if (!otherClickAction) {\n      link.href = this.linkService.getAnchorUrl(\"\");\n    }\n    this.#setInternalLink();\n    if (!this._fieldObjects) {\n      warn(`_bindResetFormAction - \"resetForm\" action not supported, ` + \"ensure that the `fieldObjects` parameter is provided.\");\n      if (!otherClickAction) {\n        link.onclick = () => false;\n      }\n      return;\n    }\n    link.onclick = () => {\n      otherClickAction?.();\n      const {\n        fields: resetFormFields,\n        refs: resetFormRefs,\n        include\n      } = resetForm;\n      const allFields = [];\n      if (resetFormFields.length !== 0 || resetFormRefs.length !== 0) {\n        const fieldIds = new Set(resetFormRefs);\n        for (const fieldName of resetFormFields) {\n          const fields = this._fieldObjects[fieldName] || [];\n          for (const {\n            id\n          } of fields) {\n            fieldIds.add(id);\n          }\n        }\n        for (const fields of Object.values(this._fieldObjects)) {\n          for (const field of fields) {\n            if (fieldIds.has(field.id) === include) {\n              allFields.push(field);\n            }\n          }\n        }\n      } else {\n        for (const fields of Object.values(this._fieldObjects)) {\n          allFields.push(...fields);\n        }\n      }\n      const storage = this.annotationStorage;\n      const allIds = [];\n      for (const field of allFields) {\n        const {\n          id\n        } = field;\n        allIds.push(id);\n        switch (field.type) {\n          case \"text\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"checkbox\":\n          case \"radiobutton\":\n            {\n              const value = field.defaultValue === field.exportValues;\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          case \"combobox\":\n          case \"listbox\":\n            {\n              const value = field.defaultValue || \"\";\n              storage.setValue(id, {\n                value\n              });\n              break;\n            }\n          default:\n            continue;\n        }\n        const domElement = document.querySelector(`[data-element-id=\"${id}\"]`);\n        if (!domElement) {\n          continue;\n        } else if (!GetElementsByNameSet.has(domElement)) {\n          warn(`_bindResetFormAction - element not allowed: ${id}`);\n          continue;\n        }\n        domElement.dispatchEvent(new Event(\"resetform\"));\n      }\n      if (this.enableScripting) {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: \"app\",\n            ids: allIds,\n            name: \"ResetForm\"\n          }\n        });\n      }\n      return false;\n    };\n  }\n}\nclass TextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"textAnnotation\");\n    const image = document.createElement(\"img\");\n    image.src = this.imageResourcesPath + \"annotation-\" + this.data.name.toLowerCase() + \".svg\";\n    image.setAttribute(\"data-l10n-id\", \"pdfjs-text-annotation-type\");\n    image.setAttribute(\"data-l10n-args\", JSON.stringify({\n      type: this.data.name\n    }));\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(image);\n    return this.container;\n  }\n}\nclass WidgetAnnotationElement extends AnnotationElement {\n  render() {\n    return this.container;\n  }\n  showElementAndHideCanvas(element) {\n    if (this.data.hasOwnCanvas) {\n      if (element.previousSibling?.nodeName === \"CANVAS\") {\n        element.previousSibling.hidden = true;\n      }\n      element.hidden = false;\n    }\n  }\n  _getKeyModifier(event) {\n    return util_FeatureTest.platform.isMac ? event.metaKey : event.ctrlKey;\n  }\n  _setEventListener(element, elementData, baseName, eventName, valueGetter) {\n    if (baseName.includes(\"mouse\")) {\n      element.addEventListener(baseName, event => {\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event),\n            shift: event.shiftKey,\n            modifier: this._getKeyModifier(event)\n          }\n        });\n      });\n    } else {\n      element.addEventListener(baseName, event => {\n        if (baseName === \"blur\") {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          elementData.focused = false;\n        } else if (baseName === \"focus\") {\n          if (elementData.focused) {\n            return;\n          }\n          elementData.focused = true;\n        }\n        if (!valueGetter) {\n          return;\n        }\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id: this.data.id,\n            name: eventName,\n            value: valueGetter(event)\n          }\n        });\n      });\n    }\n  }\n  _setEventListeners(element, elementData, names, getter) {\n    for (const [baseName, eventName] of names) {\n      if (eventName === \"Action\" || this.data.actions?.[eventName]) {\n        if (eventName === \"Focus\" || eventName === \"Blur\") {\n          elementData ||= {\n            focused: false\n          };\n        }\n        this._setEventListener(element, elementData, baseName, eventName, getter);\n        if (eventName === \"Focus\" && !this.data.actions?.Blur) {\n          this._setEventListener(element, elementData, \"blur\", \"Blur\", null);\n        } else if (eventName === \"Blur\" && !this.data.actions?.Focus) {\n          this._setEventListener(element, elementData, \"focus\", \"Focus\", null);\n        }\n      }\n    }\n  }\n  _setBackgroundColor(element) {\n    const color = this.data.backgroundColor || null;\n    element.style.backgroundColor = color === null ? \"transparent\" : Util.makeHexColor(color[0], color[1], color[2]);\n  }\n  _setTextStyle(element) {\n    const TEXT_ALIGNMENT = [\"left\", \"center\", \"right\"];\n    const {\n      fontColor\n    } = this.data.defaultAppearanceData;\n    const fontSize = this.data.defaultAppearanceData.fontSize || annotation_layer_DEFAULT_FONT_SIZE;\n    const style = element.style;\n    let computedFontSize;\n    const BORDER_SIZE = 2;\n    const roundToOneDecimal = x => Math.round(10 * x) / 10;\n    if (this.data.multiLine) {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      const numberOfLines = Math.round(height / (LINE_FACTOR * fontSize)) || 1;\n      const lineHeight = height / numberOfLines;\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(lineHeight / LINE_FACTOR));\n    } else {\n      const height = Math.abs(this.data.rect[3] - this.data.rect[1] - BORDER_SIZE);\n      computedFontSize = Math.min(fontSize, roundToOneDecimal(height / LINE_FACTOR));\n    }\n    style.fontSize = `calc(${computedFontSize}px * var(--total-scale-factor))`;\n    style.color = Util.makeHexColor(fontColor[0], fontColor[1], fontColor[2]);\n    if (this.data.textAlignment !== null) {\n      style.textAlign = TEXT_ALIGNMENT[this.data.textAlignment];\n    }\n  }\n  _setRequired(element, isRequired) {\n    if (isRequired) {\n      element.setAttribute(\"required\", true);\n    } else {\n      element.removeAttribute(\"required\");\n    }\n    element.setAttribute(\"aria-required\", isRequired);\n  }\n}\nclass TextWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    const isRenderable = parameters.renderForms || parameters.data.hasOwnCanvas || !parameters.data.hasAppearance && !!parameters.data.fieldValue;\n    super(parameters, {\n      isRenderable\n    });\n  }\n  setPropertyOnSiblings(base, key, value, keyInStorage) {\n    const storage = this.annotationStorage;\n    for (const element of this._getElementsByName(base.name, base.id)) {\n      if (element.domElement) {\n        element.domElement[key] = value;\n      }\n      storage.setValue(element.id, {\n        [keyInStorage]: value\n      });\n    }\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    this.container.classList.add(\"textWidgetAnnotation\");\n    let element = null;\n    if (this.renderForms) {\n      const storedData = storage.getValue(id, {\n        value: this.data.fieldValue\n      });\n      let textContent = storedData.value || \"\";\n      const maxLen = storage.getValue(id, {\n        charLimit: this.data.maxLen\n      }).charLimit;\n      if (maxLen && textContent.length > maxLen) {\n        textContent = textContent.slice(0, maxLen);\n      }\n      let fieldFormattedValues = storedData.formattedValue || this.data.textContent?.join(\"\\n\") || null;\n      if (fieldFormattedValues && this.data.comb) {\n        fieldFormattedValues = fieldFormattedValues.replaceAll(/\\s+/g, \"\");\n      }\n      const elementData = {\n        userValue: textContent,\n        formattedValue: fieldFormattedValues,\n        lastCommittedValue: null,\n        commitKey: 1,\n        focused: false\n      };\n      if (this.data.multiLine) {\n        element = document.createElement(\"textarea\");\n        element.textContent = fieldFormattedValues ?? textContent;\n        if (this.data.doNotScroll) {\n          element.style.overflowY = \"hidden\";\n        }\n      } else {\n        element = document.createElement(\"input\");\n        element.type = this.data.password ? \"password\" : \"text\";\n        element.setAttribute(\"value\", fieldFormattedValues ?? textContent);\n        if (this.data.doNotScroll) {\n          element.style.overflowX = \"hidden\";\n        }\n      }\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n      GetElementsByNameSet.add(element);\n      element.setAttribute(\"data-element-id\", id);\n      element.disabled = this.data.readOnly;\n      element.name = this.data.fieldName;\n      element.tabIndex = 0;\n      const format = this.data.dateFormat || this.data.timeFormat;\n      if (format) {\n        element.title = format;\n      }\n      this._setRequired(element, this.data.required);\n      if (maxLen) {\n        element.maxLength = maxLen;\n      }\n      element.addEventListener(\"input\", event => {\n        storage.setValue(id, {\n          value: event.target.value\n        });\n        this.setPropertyOnSiblings(element, \"value\", event.target.value, \"value\");\n        elementData.formattedValue = null;\n      });\n      element.addEventListener(\"resetform\", event => {\n        const defaultValue = this.data.defaultFieldValue ?? \"\";\n        element.value = elementData.userValue = defaultValue;\n        elementData.formattedValue = null;\n      });\n      let blurListener = event => {\n        const {\n          formattedValue\n        } = elementData;\n        if (formattedValue !== null && formattedValue !== undefined) {\n          event.target.value = formattedValue;\n        }\n        event.target.scrollLeft = 0;\n      };\n      if (this.enableScripting && this.hasJSActions) {\n        element.addEventListener(\"focus\", event => {\n          if (elementData.focused) {\n            return;\n          }\n          const {\n            target\n          } = event;\n          if (elementData.userValue) {\n            target.value = elementData.userValue;\n          }\n          elementData.lastCommittedValue = target.value;\n          elementData.commitKey = 1;\n          if (!this.data.actions?.Focus) {\n            elementData.focused = true;\n          }\n        });\n        element.addEventListener(\"updatefromsandbox\", jsEvent => {\n          this.showElementAndHideCanvas(jsEvent.target);\n          const actions = {\n            value(event) {\n              elementData.userValue = event.detail.value ?? \"\";\n              storage.setValue(id, {\n                value: elementData.userValue.toString()\n              });\n              event.target.value = elementData.userValue;\n            },\n            formattedValue(event) {\n              const {\n                formattedValue\n              } = event.detail;\n              elementData.formattedValue = formattedValue;\n              if (formattedValue !== null && formattedValue !== undefined && event.target !== document.activeElement) {\n                event.target.value = formattedValue;\n              }\n              storage.setValue(id, {\n                formattedValue\n              });\n            },\n            selRange(event) {\n              event.target.setSelectionRange(...event.detail.selRange);\n            },\n            charLimit: event => {\n              const {\n                charLimit\n              } = event.detail;\n              const {\n                target\n              } = event;\n              if (charLimit === 0) {\n                target.removeAttribute(\"maxLength\");\n                return;\n              }\n              target.setAttribute(\"maxLength\", charLimit);\n              let value = elementData.userValue;\n              if (!value || value.length <= charLimit) {\n                return;\n              }\n              value = value.slice(0, charLimit);\n              target.value = elementData.userValue = value;\n              storage.setValue(id, {\n                value\n              });\n              this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n                source: this,\n                detail: {\n                  id,\n                  name: \"Keystroke\",\n                  value,\n                  willCommit: true,\n                  commitKey: 1,\n                  selStart: target.selectionStart,\n                  selEnd: target.selectionEnd\n                }\n              });\n            }\n          };\n          this._dispatchEventFromSandbox(actions, jsEvent);\n        });\n        element.addEventListener(\"keydown\", event => {\n          elementData.commitKey = 1;\n          let commitKey = -1;\n          if (event.key === \"Escape\") {\n            commitKey = 0;\n          } else if (event.key === \"Enter\" && !this.data.multiLine) {\n            commitKey = 2;\n          } else if (event.key === \"Tab\") {\n            elementData.commitKey = 3;\n          }\n          if (commitKey === -1) {\n            return;\n          }\n          const {\n            value\n          } = event.target;\n          if (elementData.lastCommittedValue === value) {\n            return;\n          }\n          elementData.lastCommittedValue = value;\n          elementData.userValue = value;\n          this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n            source: this,\n            detail: {\n              id,\n              name: \"Keystroke\",\n              value,\n              willCommit: true,\n              commitKey,\n              selStart: event.target.selectionStart,\n              selEnd: event.target.selectionEnd\n            }\n          });\n        });\n        const _blurListener = blurListener;\n        blurListener = null;\n        element.addEventListener(\"blur\", event => {\n          if (!elementData.focused || !event.relatedTarget) {\n            return;\n          }\n          if (!this.data.actions?.Blur) {\n            elementData.focused = false;\n          }\n          const {\n            value\n          } = event.target;\n          elementData.userValue = value;\n          if (elementData.lastCommittedValue !== value) {\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                willCommit: true,\n                commitKey: elementData.commitKey,\n                selStart: event.target.selectionStart,\n                selEnd: event.target.selectionEnd\n              }\n            });\n          }\n          _blurListener(event);\n        });\n        if (this.data.actions?.Keystroke) {\n          element.addEventListener(\"beforeinput\", event => {\n            elementData.lastCommittedValue = null;\n            const {\n              data,\n              target\n            } = event;\n            const {\n              value,\n              selectionStart,\n              selectionEnd\n            } = target;\n            let selStart = selectionStart,\n              selEnd = selectionEnd;\n            switch (event.inputType) {\n              case \"deleteWordBackward\":\n                {\n                  const match = value.substring(0, selectionStart).match(/\\w*[^\\w]*$/);\n                  if (match) {\n                    selStart -= match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteWordForward\":\n                {\n                  const match = value.substring(selectionStart).match(/^[^\\w]*\\w*/);\n                  if (match) {\n                    selEnd += match[0].length;\n                  }\n                  break;\n                }\n              case \"deleteContentBackward\":\n                if (selectionStart === selectionEnd) {\n                  selStart -= 1;\n                }\n                break;\n              case \"deleteContentForward\":\n                if (selectionStart === selectionEnd) {\n                  selEnd += 1;\n                }\n                break;\n            }\n            event.preventDefault();\n            this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n              source: this,\n              detail: {\n                id,\n                name: \"Keystroke\",\n                value,\n                change: data || \"\",\n                willCommit: false,\n                selStart,\n                selEnd\n              }\n            });\n          });\n        }\n        this._setEventListeners(element, elementData, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.value);\n      }\n      if (blurListener) {\n        element.addEventListener(\"blur\", blurListener);\n      }\n      if (this.data.comb) {\n        const fieldWidth = this.data.rect[2] - this.data.rect[0];\n        const combWidth = fieldWidth / maxLen;\n        element.classList.add(\"comb\");\n        element.style.letterSpacing = `calc(${combWidth}px * var(--total-scale-factor) - 1ch)`;\n      }\n    } else {\n      element = document.createElement(\"div\");\n      element.textContent = this.data.fieldValue;\n      element.style.verticalAlign = \"middle\";\n      element.style.display = \"table-cell\";\n      if (this.data.hasOwnCanvas) {\n        element.hidden = true;\n      }\n    }\n    this._setTextStyle(element);\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass SignatureWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: !!parameters.data.hasOwnCanvas\n    });\n  }\n}\nclass CheckboxWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.exportValue === data.fieldValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== \"Off\";\n      storage.setValue(id, {\n        value\n      });\n    }\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"checkBox\");\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"checkbox\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.setAttribute(\"exportValue\", data.exportValue);\n    element.tabIndex = 0;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const checkbox of this._getElementsByName(name, id)) {\n        const curChecked = checked && checkbox.exportValue === data.exportValue;\n        if (checkbox.domElement) {\n          checkbox.domElement.checked = curChecked;\n        }\n        storage.setValue(checkbox.id, {\n          value: curChecked\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue || \"Off\";\n      event.target.checked = defaultValue === data.exportValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            event.target.checked = event.detail.value !== \"Off\";\n            storage.setValue(id, {\n              value: event.target.checked\n            });\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass RadioButtonWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"buttonWidgetAnnotation\", \"radioButton\");\n    const storage = this.annotationStorage;\n    const data = this.data;\n    const id = data.id;\n    let value = storage.getValue(id, {\n      value: data.fieldValue === data.buttonValue\n    }).value;\n    if (typeof value === \"string\") {\n      value = value !== data.buttonValue;\n      storage.setValue(id, {\n        value\n      });\n    }\n    if (value) {\n      for (const radio of this._getElementsByName(data.fieldName, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n    }\n    const element = document.createElement(\"input\");\n    GetElementsByNameSet.add(element);\n    element.setAttribute(\"data-element-id\", id);\n    element.disabled = data.readOnly;\n    this._setRequired(element, this.data.required);\n    element.type = \"radio\";\n    element.name = data.fieldName;\n    if (value) {\n      element.setAttribute(\"checked\", true);\n    }\n    element.tabIndex = 0;\n    element.addEventListener(\"change\", event => {\n      const {\n        name,\n        checked\n      } = event.target;\n      for (const radio of this._getElementsByName(name, id)) {\n        storage.setValue(radio.id, {\n          value: false\n        });\n      }\n      storage.setValue(id, {\n        value: checked\n      });\n    });\n    element.addEventListener(\"resetform\", event => {\n      const defaultValue = data.defaultFieldValue;\n      event.target.checked = defaultValue !== null && defaultValue !== undefined && defaultValue === data.buttonValue;\n    });\n    if (this.enableScripting && this.hasJSActions) {\n      const pdfButtonValue = data.buttonValue;\n      element.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value: event => {\n            const checked = pdfButtonValue === event.detail.value;\n            for (const radio of this._getElementsByName(event.target.name)) {\n              const curChecked = checked && radio.id === id;\n              if (radio.domElement) {\n                radio.domElement.checked = curChecked;\n              }\n              storage.setValue(radio.id, {\n                value: curChecked\n              });\n            }\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      this._setEventListeners(element, null, [[\"change\", \"Validate\"], [\"change\", \"Action\"], [\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"]], event => event.target.checked);\n    }\n    this._setBackgroundColor(element);\n    this._setDefaultPropertiesFromJS(element);\n    this.container.append(element);\n    return this.container;\n  }\n}\nclass PushButtonWidgetAnnotationElement extends LinkAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      ignoreBorder: parameters.data.hasAppearance\n    });\n  }\n  render() {\n    const container = super.render();\n    container.classList.add(\"buttonWidgetAnnotation\", \"pushButton\");\n    const linkElement = container.lastChild;\n    if (this.enableScripting && this.hasJSActions && linkElement) {\n      this._setDefaultPropertiesFromJS(linkElement);\n      linkElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        this._dispatchEventFromSandbox({}, jsEvent);\n      });\n    }\n    return container;\n  }\n}\nclass ChoiceWidgetAnnotationElement extends WidgetAnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: parameters.renderForms\n    });\n  }\n  render() {\n    this.container.classList.add(\"choiceWidgetAnnotation\");\n    const storage = this.annotationStorage;\n    const id = this.data.id;\n    const storedData = storage.getValue(id, {\n      value: this.data.fieldValue\n    });\n    const selectElement = document.createElement(\"select\");\n    GetElementsByNameSet.add(selectElement);\n    selectElement.setAttribute(\"data-element-id\", id);\n    selectElement.disabled = this.data.readOnly;\n    this._setRequired(selectElement, this.data.required);\n    selectElement.name = this.data.fieldName;\n    selectElement.tabIndex = 0;\n    let addAnEmptyEntry = this.data.combo && this.data.options.length > 0;\n    if (!this.data.combo) {\n      selectElement.size = this.data.options.length;\n      if (this.data.multiSelect) {\n        selectElement.multiple = true;\n      }\n    }\n    selectElement.addEventListener(\"resetform\", event => {\n      const defaultValue = this.data.defaultFieldValue;\n      for (const option of selectElement.options) {\n        option.selected = option.value === defaultValue;\n      }\n    });\n    for (const option of this.data.options) {\n      const optionElement = document.createElement(\"option\");\n      optionElement.textContent = option.displayValue;\n      optionElement.value = option.exportValue;\n      if (storedData.value.includes(option.exportValue)) {\n        optionElement.setAttribute(\"selected\", true);\n        addAnEmptyEntry = false;\n      }\n      selectElement.append(optionElement);\n    }\n    let removeEmptyEntry = null;\n    if (addAnEmptyEntry) {\n      const noneOptionElement = document.createElement(\"option\");\n      noneOptionElement.value = \" \";\n      noneOptionElement.setAttribute(\"hidden\", true);\n      noneOptionElement.setAttribute(\"selected\", true);\n      selectElement.prepend(noneOptionElement);\n      removeEmptyEntry = () => {\n        noneOptionElement.remove();\n        selectElement.removeEventListener(\"input\", removeEmptyEntry);\n        removeEmptyEntry = null;\n      };\n      selectElement.addEventListener(\"input\", removeEmptyEntry);\n    }\n    const getValue = isExport => {\n      const name = isExport ? \"value\" : \"textContent\";\n      const {\n        options,\n        multiple\n      } = selectElement;\n      if (!multiple) {\n        return options.selectedIndex === -1 ? null : options[options.selectedIndex][name];\n      }\n      return Array.prototype.filter.call(options, option => option.selected).map(option => option[name]);\n    };\n    let selectedValues = getValue(false);\n    const getItems = event => {\n      const options = event.target.options;\n      return Array.prototype.map.call(options, option => ({\n        displayValue: option.textContent,\n        exportValue: option.value\n      }));\n    };\n    if (this.enableScripting && this.hasJSActions) {\n      selectElement.addEventListener(\"updatefromsandbox\", jsEvent => {\n        const actions = {\n          value(event) {\n            removeEmptyEntry?.();\n            const value = event.detail.value;\n            const values = new Set(Array.isArray(value) ? value : [value]);\n            for (const option of selectElement.options) {\n              option.selected = values.has(option.value);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          multipleSelection(event) {\n            selectElement.multiple = true;\n          },\n          remove(event) {\n            const options = selectElement.options;\n            const index = event.detail.remove;\n            options[index].selected = false;\n            selectElement.remove(index);\n            if (options.length > 0) {\n              const i = Array.prototype.findIndex.call(options, option => option.selected);\n              if (i === -1) {\n                options[0].selected = true;\n              }\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          clear(event) {\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            storage.setValue(id, {\n              value: null,\n              items: []\n            });\n            selectedValues = getValue(false);\n          },\n          insert(event) {\n            const {\n              index,\n              displayValue,\n              exportValue\n            } = event.detail.insert;\n            const selectChild = selectElement.children[index];\n            const optionElement = document.createElement(\"option\");\n            optionElement.textContent = displayValue;\n            optionElement.value = exportValue;\n            if (selectChild) {\n              selectChild.before(optionElement);\n            } else {\n              selectElement.append(optionElement);\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          items(event) {\n            const {\n              items\n            } = event.detail;\n            while (selectElement.length !== 0) {\n              selectElement.remove(0);\n            }\n            for (const item of items) {\n              const {\n                displayValue,\n                exportValue\n              } = item;\n              const optionElement = document.createElement(\"option\");\n              optionElement.textContent = displayValue;\n              optionElement.value = exportValue;\n              selectElement.append(optionElement);\n            }\n            if (selectElement.options.length > 0) {\n              selectElement.options[0].selected = true;\n            }\n            storage.setValue(id, {\n              value: getValue(true),\n              items: getItems(event)\n            });\n            selectedValues = getValue(false);\n          },\n          indices(event) {\n            const indices = new Set(event.detail.indices);\n            for (const option of event.target.options) {\n              option.selected = indices.has(option.index);\n            }\n            storage.setValue(id, {\n              value: getValue(true)\n            });\n            selectedValues = getValue(false);\n          },\n          editable(event) {\n            event.target.disabled = !event.detail.editable;\n          }\n        };\n        this._dispatchEventFromSandbox(actions, jsEvent);\n      });\n      selectElement.addEventListener(\"input\", event => {\n        const exportValue = getValue(true);\n        const change = getValue(false);\n        storage.setValue(id, {\n          value: exportValue\n        });\n        event.preventDefault();\n        this.linkService.eventBus?.dispatch(\"dispatcheventinsandbox\", {\n          source: this,\n          detail: {\n            id,\n            name: \"Keystroke\",\n            value: selectedValues,\n            change,\n            changeEx: exportValue,\n            willCommit: false,\n            commitKey: 1,\n            keyDown: false\n          }\n        });\n      });\n      this._setEventListeners(selectElement, null, [[\"focus\", \"Focus\"], [\"blur\", \"Blur\"], [\"mousedown\", \"Mouse Down\"], [\"mouseenter\", \"Mouse Enter\"], [\"mouseleave\", \"Mouse Exit\"], [\"mouseup\", \"Mouse Up\"], [\"input\", \"Action\"], [\"input\", \"Validate\"]], event => event.target.value);\n    } else {\n      selectElement.addEventListener(\"input\", function (event) {\n        storage.setValue(id, {\n          value: getValue(true)\n        });\n      });\n    }\n    if (this.data.combo) {\n      this._setTextStyle(selectElement);\n    } else {}\n    this._setBackgroundColor(selectElement);\n    this._setDefaultPropertiesFromJS(selectElement);\n    this.container.append(selectElement);\n    return this.container;\n  }\n}\nclass PopupAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    const {\n      data,\n      elements\n    } = parameters;\n    super(parameters, {\n      isRenderable: AnnotationElement._hasPopupData(data)\n    });\n    this.elements = elements;\n    this.popup = null;\n  }\n  render() {\n    const {\n      container\n    } = this;\n    container.classList.add(\"popupAnnotation\");\n    container.role = \"comment\";\n    const popup = this.popup = new PopupElement({\n      container: this.container,\n      color: this.data.color,\n      titleObj: this.data.titleObj,\n      modificationDate: this.data.modificationDate,\n      contentsObj: this.data.contentsObj,\n      richText: this.data.richText,\n      rect: this.data.rect,\n      parentRect: this.data.parentRect || null,\n      parent: this.parent,\n      elements: this.elements,\n      open: this.data.open\n    });\n    const elementIds = [];\n    for (const element of this.elements) {\n      element.popup = popup;\n      element.container.ariaHasPopup = \"dialog\";\n      elementIds.push(element.data.id);\n      element.addHighlightArea();\n    }\n    this.container.setAttribute(\"aria-controls\", elementIds.map(id => `${AnnotationPrefix}${id}`).join(\",\"));\n    return this.container;\n  }\n}\nclass PopupElement {\n  #boundKeyDown = this.#keyDown.bind(this);\n  #boundHide = this.#hide.bind(this);\n  #boundShow = this.#show.bind(this);\n  #boundToggle = this.#toggle.bind(this);\n  #color = null;\n  #container = null;\n  #contentsObj = null;\n  #dateObj = null;\n  #elements = null;\n  #parent = null;\n  #parentRect = null;\n  #pinned = false;\n  #popup = null;\n  #position = null;\n  #rect = null;\n  #richText = null;\n  #titleObj = null;\n  #updates = null;\n  #wasVisible = false;\n  constructor({\n    container,\n    color,\n    elements,\n    titleObj,\n    modificationDate,\n    contentsObj,\n    richText,\n    parent,\n    rect,\n    parentRect,\n    open\n  }) {\n    this.#container = container;\n    this.#titleObj = titleObj;\n    this.#contentsObj = contentsObj;\n    this.#richText = richText;\n    this.#parent = parent;\n    this.#color = color;\n    this.#rect = rect;\n    this.#parentRect = parentRect;\n    this.#elements = elements;\n    this.#dateObj = PDFDateString.toDateObject(modificationDate);\n    this.trigger = elements.flatMap(e => e.getElementsToTriggerPopup());\n    for (const element of this.trigger) {\n      element.addEventListener(\"click\", this.#boundToggle);\n      element.addEventListener(\"mouseenter\", this.#boundShow);\n      element.addEventListener(\"mouseleave\", this.#boundHide);\n      element.classList.add(\"popupTriggerArea\");\n    }\n    for (const element of elements) {\n      element.container?.addEventListener(\"keydown\", this.#boundKeyDown);\n    }\n    this.#container.hidden = true;\n    if (open) {\n      this.#toggle();\n    }\n  }\n  render() {\n    if (this.#popup) {\n      return;\n    }\n    const popup = this.#popup = document.createElement(\"div\");\n    popup.className = \"popup\";\n    if (this.#color) {\n      const baseColor = popup.style.outlineColor = Util.makeHexColor(...this.#color);\n      popup.style.backgroundColor = `color-mix(in srgb, ${baseColor} 30%, white)`;\n    }\n    const header = document.createElement(\"span\");\n    header.className = \"header\";\n    const title = document.createElement(\"h1\");\n    header.append(title);\n    ({\n      dir: title.dir,\n      str: title.textContent\n    } = this.#titleObj);\n    popup.append(header);\n    if (this.#dateObj) {\n      const modificationDate = document.createElement(\"time\");\n      modificationDate.classList.add(\"popupDate\");\n      modificationDate.setAttribute(\"data-l10n-id\", \"pdfjs-annotation-date-time-string\");\n      modificationDate.setAttribute(\"data-l10n-args\", JSON.stringify({\n        dateObj: this.#dateObj.valueOf()\n      }));\n      modificationDate.dateTime = this.#dateObj.toISOString();\n      header.append(modificationDate);\n    }\n    const html = this.#html;\n    if (html) {\n      XfaLayer.render({\n        xfaHtml: html,\n        intent: \"richText\",\n        div: popup\n      });\n      popup.lastChild.classList.add(\"richText\", \"popupContent\");\n    } else {\n      const contents = this._formatContents(this.#contentsObj);\n      popup.append(contents);\n    }\n    this.#container.append(popup);\n  }\n  get #html() {\n    const richText = this.#richText;\n    const contentsObj = this.#contentsObj;\n    if (richText?.str && (!contentsObj?.str || contentsObj.str === richText.str)) {\n      return this.#richText.html || null;\n    }\n    return null;\n  }\n  get #fontSize() {\n    return this.#html?.attributes?.style?.fontSize || 0;\n  }\n  get #fontColor() {\n    return this.#html?.attributes?.style?.color || null;\n  }\n  #makePopupContent(text) {\n    const popupLines = [];\n    const popupContent = {\n      str: text,\n      html: {\n        name: \"div\",\n        attributes: {\n          dir: \"auto\"\n        },\n        children: [{\n          name: \"p\",\n          children: popupLines\n        }]\n      }\n    };\n    const lineAttributes = {\n      style: {\n        color: this.#fontColor,\n        fontSize: this.#fontSize ? `calc(${this.#fontSize}px * var(--total-scale-factor))` : \"\"\n      }\n    };\n    for (const line of text.split(\"\\n\")) {\n      popupLines.push({\n        name: \"span\",\n        value: line,\n        attributes: lineAttributes\n      });\n    }\n    return popupContent;\n  }\n  _formatContents({\n    str,\n    dir\n  }) {\n    const p = document.createElement(\"p\");\n    p.classList.add(\"popupContent\");\n    p.dir = dir;\n    const lines = str.split(/(?:\\r\\n?|\\n)/);\n    for (let i = 0, ii = lines.length; i < ii; ++i) {\n      const line = lines[i];\n      p.append(document.createTextNode(line));\n      if (i < ii - 1) {\n        p.append(document.createElement(\"br\"));\n      }\n    }\n    return p;\n  }\n  #keyDown(event) {\n    if (event.altKey || event.shiftKey || event.ctrlKey || event.metaKey) {\n      return;\n    }\n    if (event.key === \"Enter\" || event.key === \"Escape\" && this.#pinned) {\n      this.#toggle();\n    }\n  }\n  updateEdited({\n    rect,\n    popupContent\n  }) {\n    this.#updates ||= {\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    };\n    if (rect) {\n      this.#position = null;\n    }\n    if (popupContent) {\n      this.#richText = this.#makePopupContent(popupContent);\n      this.#contentsObj = null;\n    }\n    this.#popup?.remove();\n    this.#popup = null;\n  }\n  resetEdited() {\n    if (!this.#updates) {\n      return;\n    }\n    ({\n      contentsObj: this.#contentsObj,\n      richText: this.#richText\n    } = this.#updates);\n    this.#updates = null;\n    this.#popup?.remove();\n    this.#popup = null;\n    this.#position = null;\n  }\n  #setPosition() {\n    if (this.#position !== null) {\n      return;\n    }\n    const {\n      page: {\n        view\n      },\n      viewport: {\n        rawDims: {\n          pageWidth,\n          pageHeight,\n          pageX,\n          pageY\n        }\n      }\n    } = this.#parent;\n    let useParentRect = !!this.#parentRect;\n    let rect = useParentRect ? this.#parentRect : this.#rect;\n    for (const element of this.#elements) {\n      if (!rect || Util.intersect(element.data.rect, rect) !== null) {\n        rect = element.data.rect;\n        useParentRect = true;\n        break;\n      }\n    }\n    const normalizedRect = Util.normalizeRect([rect[0], view[3] - rect[1] + view[1], rect[2], view[3] - rect[3] + view[1]]);\n    const HORIZONTAL_SPACE_AFTER_ANNOTATION = 5;\n    const parentWidth = useParentRect ? rect[2] - rect[0] + HORIZONTAL_SPACE_AFTER_ANNOTATION : 0;\n    const popupLeft = normalizedRect[0] + parentWidth;\n    const popupTop = normalizedRect[1];\n    this.#position = [100 * (popupLeft - pageX) / pageWidth, 100 * (popupTop - pageY) / pageHeight];\n    const {\n      style\n    } = this.#container;\n    style.left = `${this.#position[0]}%`;\n    style.top = `${this.#position[1]}%`;\n  }\n  #toggle() {\n    this.#pinned = !this.#pinned;\n    if (this.#pinned) {\n      this.#show();\n      this.#container.addEventListener(\"click\", this.#boundToggle);\n      this.#container.addEventListener(\"keydown\", this.#boundKeyDown);\n    } else {\n      this.#hide();\n      this.#container.removeEventListener(\"click\", this.#boundToggle);\n      this.#container.removeEventListener(\"keydown\", this.#boundKeyDown);\n    }\n  }\n  #show() {\n    if (!this.#popup) {\n      this.render();\n    }\n    if (!this.isVisible) {\n      this.#setPosition();\n      this.#container.hidden = false;\n      this.#container.style.zIndex = parseInt(this.#container.style.zIndex) + 1000;\n    } else if (this.#pinned) {\n      this.#container.classList.add(\"focused\");\n    }\n  }\n  #hide() {\n    this.#container.classList.remove(\"focused\");\n    if (this.#pinned || !this.isVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n    this.#container.style.zIndex = parseInt(this.#container.style.zIndex) - 1000;\n  }\n  forceHide() {\n    this.#wasVisible = this.isVisible;\n    if (!this.#wasVisible) {\n      return;\n    }\n    this.#container.hidden = true;\n  }\n  maybeShow() {\n    if (!this.#wasVisible) {\n      return;\n    }\n    if (!this.#popup) {\n      this.#show();\n    }\n    this.#wasVisible = false;\n    this.#container.hidden = false;\n  }\n  get isVisible() {\n    return this.#container.hidden === false;\n  }\n}\nclass FreeTextAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.textContent = parameters.data.textContent;\n    this.textPosition = parameters.data.textPosition;\n    this.annotationEditorType = AnnotationEditorType.FREETEXT;\n  }\n  render() {\n    this.container.classList.add(\"freeTextAnnotation\");\n    if (this.textContent) {\n      const content = document.createElement(\"div\");\n      content.classList.add(\"annotationTextContent\");\n      content.setAttribute(\"role\", \"comment\");\n      for (const line of this.textContent) {\n        const lineSpan = document.createElement(\"span\");\n        lineSpan.textContent = line;\n        content.append(lineSpan);\n      }\n      this.container.append(content);\n    }\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass LineAnnotationElement extends AnnotationElement {\n  #line = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"lineAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const line = this.#line = this.svgFactory.createElement(\"svg:line\");\n    line.setAttribute(\"x1\", data.rect[2] - data.lineCoordinates[0]);\n    line.setAttribute(\"y1\", data.rect[3] - data.lineCoordinates[1]);\n    line.setAttribute(\"x2\", data.rect[2] - data.lineCoordinates[2]);\n    line.setAttribute(\"y2\", data.rect[3] - data.lineCoordinates[3]);\n    line.setAttribute(\"stroke-width\", data.borderStyle.width || 1);\n    line.setAttribute(\"stroke\", \"transparent\");\n    line.setAttribute(\"fill\", \"transparent\");\n    svg.append(line);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#line;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass SquareAnnotationElement extends AnnotationElement {\n  #square = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"squareAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const square = this.#square = this.svgFactory.createElement(\"svg:rect\");\n    square.setAttribute(\"x\", borderWidth / 2);\n    square.setAttribute(\"y\", borderWidth / 2);\n    square.setAttribute(\"width\", width - borderWidth);\n    square.setAttribute(\"height\", height - borderWidth);\n    square.setAttribute(\"stroke-width\", borderWidth || 1);\n    square.setAttribute(\"stroke\", \"transparent\");\n    square.setAttribute(\"fill\", \"transparent\");\n    svg.append(square);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#square;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass CircleAnnotationElement extends AnnotationElement {\n  #circle = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"circleAnnotation\");\n    const {\n      data,\n      width,\n      height\n    } = this;\n    const svg = this.svgFactory.create(width, height, true);\n    const borderWidth = data.borderStyle.width;\n    const circle = this.#circle = this.svgFactory.createElement(\"svg:ellipse\");\n    circle.setAttribute(\"cx\", width / 2);\n    circle.setAttribute(\"cy\", height / 2);\n    circle.setAttribute(\"rx\", width / 2 - borderWidth / 2);\n    circle.setAttribute(\"ry\", height / 2 - borderWidth / 2);\n    circle.setAttribute(\"stroke-width\", borderWidth || 1);\n    circle.setAttribute(\"stroke\", \"transparent\");\n    circle.setAttribute(\"fill\", \"transparent\");\n    svg.append(circle);\n    this.container.append(svg);\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#circle;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolylineAnnotationElement extends AnnotationElement {\n  #polyline = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"polylineAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        vertices,\n        borderStyle,\n        popupRef\n      },\n      width,\n      height\n    } = this;\n    if (!vertices) {\n      return this.container;\n    }\n    const svg = this.svgFactory.create(width, height, true);\n    let points = [];\n    for (let i = 0, ii = vertices.length; i < ii; i += 2) {\n      const x = vertices[i] - rect[0];\n      const y = rect[3] - vertices[i + 1];\n      points.push(`${x},${y}`);\n    }\n    points = points.join(\" \");\n    const polyline = this.#polyline = this.svgFactory.createElement(this.svgElementName);\n    polyline.setAttribute(\"points\", points);\n    polyline.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    polyline.setAttribute(\"stroke\", \"transparent\");\n    polyline.setAttribute(\"fill\", \"transparent\");\n    svg.append(polyline);\n    this.container.append(svg);\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#polyline;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass PolygonAnnotationElement extends PolylineAnnotationElement {\n  constructor(parameters) {\n    super(parameters);\n    this.containerClassName = \"polygonAnnotation\";\n    this.svgElementName = \"svg:polygon\";\n  }\n}\nclass CaretAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n  }\n  render() {\n    this.container.classList.add(\"caretAnnotation\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    return this.container;\n  }\n}\nclass InkAnnotationElement extends AnnotationElement {\n  #polylinesGroupElement = null;\n  #polylines = [];\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.containerClassName = \"inkAnnotation\";\n    this.svgElementName = \"svg:polyline\";\n    this.annotationEditorType = this.data.it === \"InkHighlight\" ? AnnotationEditorType.HIGHLIGHT : AnnotationEditorType.INK;\n  }\n  #getTransform(rotation, rect) {\n    switch (rotation) {\n      case 90:\n        return {\n          transform: `rotate(90) translate(${-rect[0]},${rect[1]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      case 180:\n        return {\n          transform: `rotate(180) translate(${-rect[2]},${rect[1]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n      case 270:\n        return {\n          transform: `rotate(270) translate(${-rect[2]},${rect[3]}) scale(1,-1)`,\n          width: rect[3] - rect[1],\n          height: rect[2] - rect[0]\n        };\n      default:\n        return {\n          transform: `translate(${-rect[0]},${rect[3]}) scale(1,-1)`,\n          width: rect[2] - rect[0],\n          height: rect[3] - rect[1]\n        };\n    }\n  }\n  render() {\n    this.container.classList.add(this.containerClassName);\n    const {\n      data: {\n        rect,\n        rotation,\n        inkLists,\n        borderStyle,\n        popupRef\n      }\n    } = this;\n    const {\n      transform,\n      width,\n      height\n    } = this.#getTransform(rotation, rect);\n    const svg = this.svgFactory.create(width, height, true);\n    const g = this.#polylinesGroupElement = this.svgFactory.createElement(\"svg:g\");\n    svg.append(g);\n    g.setAttribute(\"stroke-width\", borderStyle.width || 1);\n    g.setAttribute(\"stroke-linecap\", \"round\");\n    g.setAttribute(\"stroke-linejoin\", \"round\");\n    g.setAttribute(\"stroke-miterlimit\", 10);\n    g.setAttribute(\"stroke\", \"transparent\");\n    g.setAttribute(\"fill\", \"transparent\");\n    g.setAttribute(\"transform\", transform);\n    for (let i = 0, ii = inkLists.length; i < ii; i++) {\n      const polyline = this.svgFactory.createElement(this.svgElementName);\n      this.#polylines.push(polyline);\n      polyline.setAttribute(\"points\", inkLists[i].join(\",\"));\n      g.append(polyline);\n    }\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.append(svg);\n    this._editOnDoubleClick();\n    return this.container;\n  }\n  updateEdited(params) {\n    super.updateEdited(params);\n    const {\n      thickness,\n      points,\n      rect\n    } = params;\n    const g = this.#polylinesGroupElement;\n    if (thickness >= 0) {\n      g.setAttribute(\"stroke-width\", thickness || 1);\n    }\n    if (points) {\n      for (let i = 0, ii = this.#polylines.length; i < ii; i++) {\n        this.#polylines[i].setAttribute(\"points\", points[i].join(\",\"));\n      }\n    }\n    if (rect) {\n      const {\n        transform,\n        width,\n        height\n      } = this.#getTransform(this.data.rotation, rect);\n      const root = g.parentElement;\n      root.setAttribute(\"viewBox\", `0 0 ${width} ${height}`);\n      g.setAttribute(\"transform\", transform);\n    }\n  }\n  getElementsToTriggerPopup() {\n    return this.#polylines;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n}\nclass HighlightAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n    this.annotationEditorType = AnnotationEditorType.HIGHLIGHT;\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"highlightAnnotation\");\n    this._editOnDoubleClick();\n    if (overlaidText) {\n      const mark = document.createElement(\"mark\");\n      mark.classList.add(\"overlaidText\");\n      mark.textContent = overlaidText;\n      this.container.append(mark);\n    }\n    return this.container;\n  }\n}\nclass UnderlineAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"underlineAnnotation\");\n    if (overlaidText) {\n      const underline = document.createElement(\"u\");\n      underline.classList.add(\"overlaidText\");\n      underline.textContent = overlaidText;\n      this.container.append(underline);\n    }\n    return this.container;\n  }\n}\nclass SquigglyAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"squigglyAnnotation\");\n    if (overlaidText) {\n      const underline = document.createElement(\"u\");\n      underline.classList.add(\"overlaidText\");\n      underline.textContent = overlaidText;\n      this.container.append(underline);\n    }\n    return this.container;\n  }\n}\nclass StrikeOutAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true,\n      createQuadrilaterals: true\n    });\n  }\n  render() {\n    const {\n      data: {\n        overlaidText,\n        popupRef\n      }\n    } = this;\n    if (!popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this.container.classList.add(\"strikeoutAnnotation\");\n    if (overlaidText) {\n      const strikeout = document.createElement(\"s\");\n      strikeout.classList.add(\"overlaidText\");\n      strikeout.textContent = overlaidText;\n      this.container.append(strikeout);\n    }\n    return this.container;\n  }\n}\nclass StampAnnotationElement extends AnnotationElement {\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true,\n      ignoreBorder: true\n    });\n    this.annotationEditorType = AnnotationEditorType.STAMP;\n  }\n  render() {\n    this.container.classList.add(\"stampAnnotation\");\n    this.container.setAttribute(\"role\", \"img\");\n    if (!this.data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    }\n    this._editOnDoubleClick();\n    return this.container;\n  }\n}\nclass FileAttachmentAnnotationElement extends AnnotationElement {\n  #trigger = null;\n  constructor(parameters) {\n    super(parameters, {\n      isRenderable: true\n    });\n    const {\n      file\n    } = this.data;\n    this.filename = file.filename;\n    this.content = file.content;\n    this.linkService.eventBus?.dispatch(\"fileattachmentannotation\", {\n      source: this,\n      ...file\n    });\n  }\n  render() {\n    this.container.classList.add(\"fileAttachmentAnnotation\");\n    const {\n      container,\n      data\n    } = this;\n    let trigger;\n    if (data.hasAppearance || data.fillAlpha === 0) {\n      trigger = document.createElement(\"div\");\n    } else {\n      trigger = document.createElement(\"img\");\n      trigger.src = `${this.imageResourcesPath}annotation-${/paperclip/i.test(data.name) ? \"paperclip\" : \"pushpin\"}.svg`;\n      if (data.fillAlpha && data.fillAlpha < 1) {\n        trigger.style = `filter: opacity(${Math.round(data.fillAlpha * 100)}%);`;\n      }\n    }\n    trigger.addEventListener(\"dblclick\", this.#download.bind(this));\n    this.#trigger = trigger;\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    container.addEventListener(\"keydown\", evt => {\n      if (evt.key === \"Enter\" && (isMac ? evt.metaKey : evt.ctrlKey)) {\n        this.#download();\n      }\n    });\n    if (!data.popupRef && this.hasPopupData) {\n      this._createPopup();\n    } else {\n      trigger.classList.add(\"popupTriggerArea\");\n    }\n    container.append(trigger);\n    return container;\n  }\n  getElementsToTriggerPopup() {\n    return this.#trigger;\n  }\n  addHighlightArea() {\n    this.container.classList.add(\"highlightArea\");\n  }\n  #download() {\n    this.downloadManager?.openOrDownloadData(this.content, this.filename);\n  }\n}\nclass AnnotationLayer {\n  #accessibilityManager = null;\n  #annotationCanvasMap = null;\n  #editableAnnotations = new Map();\n  #structTreeLayer = null;\n  constructor({\n    div,\n    accessibilityManager,\n    annotationCanvasMap,\n    annotationEditorUIManager,\n    page,\n    viewport,\n    structTreeLayer\n  }) {\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationCanvasMap = annotationCanvasMap;\n    this.#structTreeLayer = structTreeLayer || null;\n    this.page = page;\n    this.viewport = viewport;\n    this.zIndex = 0;\n    this._annotationEditorUIManager = annotationEditorUIManager;\n  }\n  hasEditableAnnotations() {\n    return this.#editableAnnotations.size > 0;\n  }\n  async #appendElement(element, id, popupElements) {\n    const contentElement = element.firstChild || element;\n    const annotationId = contentElement.id = `${AnnotationPrefix}${id}`;\n    const ariaAttributes = await this.#structTreeLayer?.getAriaAttributes(annotationId);\n    if (ariaAttributes) {\n      for (const [key, value] of ariaAttributes) {\n        contentElement.setAttribute(key, value);\n      }\n    }\n    if (popupElements) {\n      popupElements.at(-1).container.after(element);\n    } else {\n      this.div.append(element);\n      this.#accessibilityManager?.moveElementInDOM(this.div, element, contentElement, false);\n    }\n  }\n  async render(params) {\n    const {\n      annotations\n    } = params;\n    const layer = this.div;\n    setLayerDimensions(layer, this.viewport);\n    const popupToElements = new Map();\n    const elementParams = {\n      data: null,\n      layer,\n      linkService: params.linkService,\n      downloadManager: params.downloadManager,\n      imageResourcesPath: params.imageResourcesPath || \"\",\n      renderForms: params.renderForms !== false,\n      svgFactory: new DOMSVGFactory(),\n      annotationStorage: params.annotationStorage || new AnnotationStorage(),\n      enableScripting: params.enableScripting === true,\n      hasJSActions: params.hasJSActions,\n      fieldObjects: params.fieldObjects,\n      parent: this,\n      elements: null\n    };\n    for (const data of annotations) {\n      if (data.noHTML) {\n        continue;\n      }\n      const isPopupAnnotation = data.annotationType === AnnotationType.POPUP;\n      if (!isPopupAnnotation) {\n        if (data.rect[2] === data.rect[0] || data.rect[3] === data.rect[1]) {\n          continue;\n        }\n      } else {\n        const elements = popupToElements.get(data.id);\n        if (!elements) {\n          continue;\n        }\n        elementParams.elements = elements;\n      }\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      if (!isPopupAnnotation && data.popupRef) {\n        const elements = popupToElements.get(data.popupRef);\n        if (!elements) {\n          popupToElements.set(data.popupRef, [element]);\n        } else {\n          elements.push(element);\n        }\n      }\n      const rendered = element.render();\n      if (data.hidden) {\n        rendered.style.visibility = \"hidden\";\n      }\n      await this.#appendElement(rendered, data.id, elementParams.elements);\n      if (element._isEditable) {\n        this.#editableAnnotations.set(element.data.id, element);\n        this._annotationEditorUIManager?.renderAnnotationElement(element);\n      }\n    }\n    this.#setAnnotationCanvasMap();\n  }\n  async addLinkAnnotations(annotations, linkService) {\n    const elementParams = {\n      data: null,\n      layer: this.div,\n      linkService,\n      svgFactory: new DOMSVGFactory(),\n      parent: this\n    };\n    for (const data of annotations) {\n      data.borderStyle ||= AnnotationLayer._defaultBorderStyle;\n      elementParams.data = data;\n      const element = AnnotationElementFactory.create(elementParams);\n      if (!element.isRenderable) {\n        continue;\n      }\n      const rendered = element.render();\n      await this.#appendElement(rendered, data.id, null);\n    }\n  }\n  update({\n    viewport\n  }) {\n    const layer = this.div;\n    this.viewport = viewport;\n    setLayerDimensions(layer, {\n      rotation: viewport.rotation\n    });\n    this.#setAnnotationCanvasMap();\n    layer.hidden = false;\n  }\n  #setAnnotationCanvasMap() {\n    if (!this.#annotationCanvasMap) {\n      return;\n    }\n    const layer = this.div;\n    for (const [id, canvas] of this.#annotationCanvasMap) {\n      const element = layer.querySelector(`[data-annotation-id=\"${id}\"]`);\n      if (!element) {\n        continue;\n      }\n      canvas.className = \"annotationContent\";\n      const {\n        firstChild\n      } = element;\n      if (!firstChild) {\n        element.append(canvas);\n      } else if (firstChild.nodeName === \"CANVAS\") {\n        firstChild.replaceWith(canvas);\n      } else if (!firstChild.classList.contains(\"annotationContent\")) {\n        firstChild.before(canvas);\n      } else {\n        firstChild.after(canvas);\n      }\n      const editableAnnotation = this.#editableAnnotations.get(id);\n      if (!editableAnnotation) {\n        continue;\n      }\n      if (editableAnnotation._hasNoCanvas) {\n        this._annotationEditorUIManager?.setMissingCanvas(id, element.id, canvas);\n        editableAnnotation._hasNoCanvas = false;\n      } else {\n        editableAnnotation.canvas = canvas;\n      }\n    }\n    this.#annotationCanvasMap.clear();\n  }\n  getEditableAnnotations() {\n    return Array.from(this.#editableAnnotations.values());\n  }\n  getEditableAnnotation(id) {\n    return this.#editableAnnotations.get(id);\n  }\n  static get _defaultBorderStyle() {\n    return shadow(this, \"_defaultBorderStyle\", Object.freeze({\n      width: 1,\n      rawWidth: 1,\n      style: AnnotationBorderStyleType.SOLID,\n      dashArray: [3],\n      horizontalCornerRadius: 0,\n      verticalCornerRadius: 0\n    }));\n  }\n}\n\n;// ./src/display/editor/freetext.js\n\n\n\n\nconst EOL_PATTERN = /\\r\\n?|\\n/g;\nclass FreeTextEditor extends AnnotationEditor {\n  #color;\n  #content = \"\";\n  #editorDivId = `${this.id}-editor`;\n  #editModeAC = null;\n  #fontSize;\n  static _freeTextDefaultContent = \"\";\n  static _internalPadding = 0;\n  static _defaultColor = null;\n  static _defaultFontSize = 10;\n  static get _keyboardManager() {\n    const proto = FreeTextEditor.prototype;\n    const arrowChecker = self => self.isEmpty();\n    const small = AnnotationEditorUIManager.TRANSLATE_SMALL;\n    const big = AnnotationEditorUIManager.TRANSLATE_BIG;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ctrl+s\", \"mac+meta+s\", \"ctrl+p\", \"mac+meta+p\"], proto.commitOrRemove, {\n      bubbles: true\n    }], [[\"ctrl+Enter\", \"mac+meta+Enter\", \"Escape\", \"mac+Escape\"], proto.commitOrRemove], [[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._translateEmpty, {\n      args: [-small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowLeft\", \"mac+shift+ArrowLeft\"], proto._translateEmpty, {\n      args: [-big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._translateEmpty, {\n      args: [small, 0],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowRight\", \"mac+shift+ArrowRight\"], proto._translateEmpty, {\n      args: [big, 0],\n      checker: arrowChecker\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowUp\", \"mac+shift+ArrowUp\"], proto._translateEmpty, {\n      args: [0, -big],\n      checker: arrowChecker\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._translateEmpty, {\n      args: [0, small],\n      checker: arrowChecker\n    }], [[\"ctrl+ArrowDown\", \"mac+shift+ArrowDown\"], proto._translateEmpty, {\n      args: [0, big],\n      checker: arrowChecker\n    }]]));\n  }\n  static _type = \"freetext\";\n  static _editorType = AnnotationEditorType.FREETEXT;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"freeTextEditor\"\n    });\n    this.#color = params.color || FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor;\n    this.#fontSize = params.fontSize || FreeTextEditor._defaultFontSize;\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-freetext-added-alert\");\n    }\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    const style = getComputedStyle(document.documentElement);\n    this._internalPadding = parseFloat(style.getPropertyValue(\"--freetext-padding\"));\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        FreeTextEditor._defaultFontSize = value;\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        FreeTextEditor._defaultColor = value;\n        break;\n    }\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.FREETEXT_SIZE:\n        this.#updateFontSize(value);\n        break;\n      case AnnotationEditorParamsType.FREETEXT_COLOR:\n        this.#updateColor(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, FreeTextEditor._defaultFontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, FreeTextEditor._defaultColor || AnnotationEditor._defaultLineColor]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.FREETEXT_SIZE, this.#fontSize], [AnnotationEditorParamsType.FREETEXT_COLOR, this.#color]];\n  }\n  #updateFontSize(fontSize) {\n    const setFontsize = size => {\n      this.editorDiv.style.fontSize = `calc(${size}px * var(--total-scale-factor))`;\n      this.translate(0, -(size - this.#fontSize) * this.parentScale);\n      this.#fontSize = size;\n      this.#setEditorDimensions();\n    };\n    const savedFontsize = this.#fontSize;\n    this.addCommands({\n      cmd: setFontsize.bind(this, fontSize),\n      undo: setFontsize.bind(this, savedFontsize),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_SIZE,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  #updateColor(color) {\n    const setColor = col => {\n      this.#color = this.editorDiv.style.color = col;\n    };\n    const savedColor = this.#color;\n    this.addCommands({\n      cmd: setColor.bind(this, color),\n      undo: setColor.bind(this, savedColor),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.FREETEXT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _translateEmpty(x, y) {\n    this._uiManager.translateSelectedEditors(x, y, true);\n  }\n  getInitialTranslation() {\n    const scale = this.parentScale;\n    return [-FreeTextEditor._internalPadding * scale, -(FreeTextEditor._internalPadding + this.#fontSize) * scale];\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  enableEditMode() {\n    if (!super.enableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.remove(\"enabled\");\n    this.editorDiv.contentEditable = true;\n    this._isDraggable = false;\n    this.div.removeAttribute(\"aria-activedescendant\");\n    this.#editModeAC = new AbortController();\n    const signal = this._uiManager.combinedSignal(this.#editModeAC);\n    this.editorDiv.addEventListener(\"keydown\", this.editorDivKeydown.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"focus\", this.editorDivFocus.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"blur\", this.editorDivBlur.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"input\", this.editorDivInput.bind(this), {\n      signal\n    });\n    this.editorDiv.addEventListener(\"paste\", this.editorDivPaste.bind(this), {\n      signal\n    });\n    return true;\n  }\n  disableEditMode() {\n    if (!super.disableEditMode()) {\n      return false;\n    }\n    this.overlayDiv.classList.add(\"enabled\");\n    this.editorDiv.contentEditable = false;\n    this.div.setAttribute(\"aria-activedescendant\", this.#editorDivId);\n    this._isDraggable = true;\n    this.#editModeAC?.abort();\n    this.#editModeAC = null;\n    this.div.focus({\n      preventScroll: true\n    });\n    this.isEditing = false;\n    this.parent.div.classList.add(\"freetextEditing\");\n    return true;\n  }\n  focusin(event) {\n    if (!this._focusEventsAllowed) {\n      return;\n    }\n    super.focusin(event);\n    if (event.target !== this.editorDiv) {\n      this.editorDiv.focus();\n    }\n  }\n  onceAdded(focus) {\n    if (this.width) {\n      return;\n    }\n    this.enableEditMode();\n    if (focus) {\n      this.editorDiv.focus();\n    }\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    }\n    this._initialOptions = null;\n  }\n  isEmpty() {\n    return !this.editorDiv || this.editorDiv.innerText.trim() === \"\";\n  }\n  remove() {\n    this.isEditing = false;\n    if (this.parent) {\n      this.parent.setEditingState(true);\n      this.parent.div.classList.add(\"freetextEditing\");\n    }\n    super.remove();\n  }\n  #extractText() {\n    const buffer = [];\n    this.editorDiv.normalize();\n    let prevChild = null;\n    for (const child of this.editorDiv.childNodes) {\n      if (prevChild?.nodeType === Node.TEXT_NODE && child.nodeName === \"BR\") {\n        continue;\n      }\n      buffer.push(FreeTextEditor.#getNodeContent(child));\n      prevChild = child;\n    }\n    return buffer.join(\"\\n\");\n  }\n  #setEditorDimensions() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    let rect;\n    if (this.isAttachedToDOM) {\n      rect = this.div.getBoundingClientRect();\n    } else {\n      const {\n        currentLayer,\n        div\n      } = this;\n      const savedDisplay = div.style.display;\n      const savedVisibility = div.classList.contains(\"hidden\");\n      div.classList.remove(\"hidden\");\n      div.style.display = \"hidden\";\n      currentLayer.div.append(this.div);\n      rect = div.getBoundingClientRect();\n      div.remove();\n      div.style.display = savedDisplay;\n      div.classList.toggle(\"hidden\", savedVisibility);\n    }\n    if (this.rotation % 180 === this.parentRotation % 180) {\n      this.width = rect.width / parentWidth;\n      this.height = rect.height / parentHeight;\n    } else {\n      this.width = rect.height / parentWidth;\n      this.height = rect.width / parentHeight;\n    }\n    this.fixAndSetPosition();\n  }\n  commit() {\n    if (!this.isInEditMode()) {\n      return;\n    }\n    super.commit();\n    this.disableEditMode();\n    const savedText = this.#content;\n    const newText = this.#content = this.#extractText().trimEnd();\n    if (savedText === newText) {\n      return;\n    }\n    const setText = text => {\n      this.#content = text;\n      if (!text) {\n        this.remove();\n        return;\n      }\n      this.#setContent();\n      this._uiManager.rebuild(this);\n      this.#setEditorDimensions();\n    };\n    this.addCommands({\n      cmd: () => {\n        setText(newText);\n      },\n      undo: () => {\n        setText(savedText);\n      },\n      mustExec: false\n    });\n    this.#setEditorDimensions();\n  }\n  shouldGetKeyboardEvents() {\n    return this.isInEditMode();\n  }\n  enterInEditMode() {\n    this.enableEditMode();\n    this.editorDiv.focus();\n  }\n  keydown(event) {\n    if (event.target === this.div && event.key === \"Enter\") {\n      this.enterInEditMode();\n      event.preventDefault();\n    }\n  }\n  editorDivKeydown(event) {\n    FreeTextEditor._keyboardManager.exec(this, event);\n  }\n  editorDivFocus(event) {\n    this.isEditing = true;\n  }\n  editorDivBlur(event) {\n    this.isEditing = false;\n  }\n  editorDivInput(event) {\n    this.parent.div.classList.toggle(\"freetextEditing\", this.isEmpty());\n  }\n  disableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"comment\");\n    this.editorDiv.removeAttribute(\"aria-multiline\");\n  }\n  enableEditing() {\n    this.editorDiv.setAttribute(\"role\", \"textbox\");\n    this.editorDiv.setAttribute(\"aria-multiline\", true);\n  }\n  get canChangeContent() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy || this.annotationElementId) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.editorDiv = document.createElement(\"div\");\n    this.editorDiv.className = \"internal\";\n    this.editorDiv.setAttribute(\"id\", this.#editorDivId);\n    this.editorDiv.setAttribute(\"data-l10n-id\", \"pdfjs-free-text2\");\n    this.editorDiv.setAttribute(\"data-l10n-attrs\", \"default-content\");\n    this.enableEditing();\n    this.editorDiv.contentEditable = true;\n    const {\n      style\n    } = this.editorDiv;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    this.div.append(this.editorDiv);\n    this.overlayDiv = document.createElement(\"div\");\n    this.overlayDiv.classList.add(\"overlay\", \"enabled\");\n    this.div.append(this.overlayDiv);\n    if (this._isCopy || this.annotationElementId) {\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      if (this.annotationElementId) {\n        const {\n          position\n        } = this._initialData;\n        let [tx, ty] = this.getInitialTranslation();\n        [tx, ty] = this.pageTranslationToScreen(tx, ty);\n        const [pageWidth, pageHeight] = this.pageDimensions;\n        const [pageX, pageY] = this.pageTranslation;\n        let posX, posY;\n        switch (this.rotation) {\n          case 0:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY + this.height - (position[1] - pageY) / pageHeight;\n            break;\n          case 90:\n            posX = baseX + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [ty, -tx];\n            break;\n          case 180:\n            posX = baseX - this.width + (position[0] - pageX) / pageWidth;\n            posY = baseY - (position[1] - pageY) / pageHeight;\n            [tx, ty] = [-tx, -ty];\n            break;\n          case 270:\n            posX = baseX + (position[0] - pageX - this.height * pageHeight) / pageWidth;\n            posY = baseY + (position[1] - pageY - this.width * pageWidth) / pageHeight;\n            [tx, ty] = [-ty, tx];\n            break;\n        }\n        this.setAt(posX * parentWidth, posY * parentHeight, tx, ty);\n      } else {\n        this._moveAfterPaste(baseX, baseY);\n      }\n      this.#setContent();\n      this._isDraggable = true;\n      this.editorDiv.contentEditable = false;\n    } else {\n      this._isDraggable = false;\n      this.editorDiv.contentEditable = true;\n    }\n    return this.div;\n  }\n  static #getNodeContent(node) {\n    return (node.nodeType === Node.TEXT_NODE ? node.nodeValue : node.innerText).replaceAll(EOL_PATTERN, \"\");\n  }\n  editorDivPaste(event) {\n    const clipboardData = event.clipboardData || window.clipboardData;\n    const {\n      types\n    } = clipboardData;\n    if (types.length === 1 && types[0] === \"text/plain\") {\n      return;\n    }\n    event.preventDefault();\n    const paste = FreeTextEditor.#deserializeContent(clipboardData.getData(\"text\") || \"\").replaceAll(EOL_PATTERN, \"\\n\");\n    if (!paste) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (!selection.rangeCount) {\n      return;\n    }\n    this.editorDiv.normalize();\n    selection.deleteFromDocument();\n    const range = selection.getRangeAt(0);\n    if (!paste.includes(\"\\n\")) {\n      range.insertNode(document.createTextNode(paste));\n      this.editorDiv.normalize();\n      selection.collapseToStart();\n      return;\n    }\n    const {\n      startContainer,\n      startOffset\n    } = range;\n    const bufferBefore = [];\n    const bufferAfter = [];\n    if (startContainer.nodeType === Node.TEXT_NODE) {\n      const parent = startContainer.parentElement;\n      bufferAfter.push(startContainer.nodeValue.slice(startOffset).replaceAll(EOL_PATTERN, \"\"));\n      if (parent !== this.editorDiv) {\n        let buffer = bufferBefore;\n        for (const child of this.editorDiv.childNodes) {\n          if (child === parent) {\n            buffer = bufferAfter;\n            continue;\n          }\n          buffer.push(FreeTextEditor.#getNodeContent(child));\n        }\n      }\n      bufferBefore.push(startContainer.nodeValue.slice(0, startOffset).replaceAll(EOL_PATTERN, \"\"));\n    } else if (startContainer === this.editorDiv) {\n      let buffer = bufferBefore;\n      let i = 0;\n      for (const child of this.editorDiv.childNodes) {\n        if (i++ === startOffset) {\n          buffer = bufferAfter;\n        }\n        buffer.push(FreeTextEditor.#getNodeContent(child));\n      }\n    }\n    this.#content = `${bufferBefore.join(\"\\n\")}${paste}${bufferAfter.join(\"\\n\")}`;\n    this.#setContent();\n    const newRange = new Range();\n    let beforeLength = Math.sumPrecise(bufferBefore.map(line => line.length));\n    for (const {\n      firstChild\n    } of this.editorDiv.childNodes) {\n      if (firstChild.nodeType === Node.TEXT_NODE) {\n        const length = firstChild.nodeValue.length;\n        if (beforeLength <= length) {\n          newRange.setStart(firstChild, beforeLength);\n          newRange.setEnd(firstChild, beforeLength);\n          break;\n        }\n        beforeLength -= length;\n      }\n    }\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n  #setContent() {\n    this.editorDiv.replaceChildren();\n    if (!this.#content) {\n      return;\n    }\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      this.editorDiv.append(div);\n    }\n  }\n  #serializeContent() {\n    return this.#content.replaceAll(\"\\xa0\", \" \");\n  }\n  static #deserializeContent(content) {\n    return content.replaceAll(\" \", \"\\xa0\");\n  }\n  get contentDiv() {\n    return this.editorDiv;\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof FreeTextAnnotationElement) {\n      const {\n        data: {\n          defaultAppearanceData: {\n            fontSize,\n            fontColor\n          },\n          rect,\n          rotation,\n          id,\n          popupRef\n        },\n        textContent,\n        textPosition,\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      if (!textContent || textContent.length === 0) {\n        return null;\n      }\n      initialData = data = {\n        annotationType: AnnotationEditorType.FREETEXT,\n        color: Array.from(fontColor),\n        fontSize,\n        value: textContent.join(\"\\n\"),\n        position: textPosition,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#fontSize = data.fontSize;\n    editor.#color = Util.makeHexColor(...data.color);\n    editor.#content = FreeTextEditor.#deserializeContent(data.value);\n    editor._initialData = initialData;\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    const rect = this.getRect(padding, padding);\n    const color = AnnotationEditor._colorManager.convert(this.isAttachedToDOM ? getComputedStyle(this.editorDiv).color : this.#color);\n    const serialized = {\n      annotationType: AnnotationEditorType.FREETEXT,\n      color,\n      fontSize: this.#fontSize,\n      value: this.#serializeContent(),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      value,\n      fontSize,\n      color,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || serialized.value !== value || serialized.fontSize !== fontSize || serialized.color.some((c, i) => c !== color[i]) || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const content = super.renderAnnotationElement(annotation);\n    if (this.deleted) {\n      return content;\n    }\n    const {\n      style\n    } = content;\n    style.fontSize = `calc(${this.#fontSize}px * var(--total-scale-factor))`;\n    style.color = this.#color;\n    content.replaceChildren();\n    for (const line of this.#content.split(\"\\n\")) {\n      const div = document.createElement(\"div\");\n      div.append(line ? document.createTextNode(line) : document.createElement(\"br\"));\n      content.append(div);\n    }\n    const padding = FreeTextEditor._internalPadding * this.parentScale;\n    annotation.updateEdited({\n      rect: this.getRect(padding, padding),\n      popupContent: this.#content\n    });\n    return content;\n  }\n  resetAnnotationElement(annotation) {\n    super.resetAnnotationElement(annotation);\n    annotation.resetEdited();\n  }\n}\n\n;// ./src/display/editor/drawers/outline.js\n\nclass Outline {\n  static PRECISION = 1e-4;\n  toSVGPath() {\n    unreachable(\"Abstract method `toSVGPath` must be implemented.\");\n  }\n  get box() {\n    unreachable(\"Abstract getter `box` must be implemented.\");\n  }\n  serialize(_bbox, _rotation) {\n    unreachable(\"Abstract method `serialize` must be implemented.\");\n  }\n  static _rescale(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i] * sx;\n      dest[i + 1] = ty + src[i + 1] * sy;\n    }\n    return dest;\n  }\n  static _rescaleAndSwap(src, tx, ty, sx, sy, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i + 1] * sx;\n      dest[i + 1] = ty + src[i] * sy;\n    }\n    return dest;\n  }\n  static _translate(src, tx, ty, dest) {\n    dest ||= new Float32Array(src.length);\n    for (let i = 0, ii = src.length; i < ii; i += 2) {\n      dest[i] = tx + src[i];\n      dest[i + 1] = ty + src[i + 1];\n    }\n    return dest;\n  }\n  static svgRound(x) {\n    return Math.round(x * 10000);\n  }\n  static _normalizePoint(x, y, parentWidth, parentHeight, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y / parentWidth, x / parentHeight];\n      case 180:\n        return [1 - x / parentWidth, 1 - y / parentHeight];\n      case 270:\n        return [y / parentWidth, 1 - x / parentHeight];\n      default:\n        return [x / parentWidth, y / parentHeight];\n    }\n  }\n  static _normalizePagePoint(x, y, rotation) {\n    switch (rotation) {\n      case 90:\n        return [1 - y, x];\n      case 180:\n        return [1 - x, 1 - y];\n      case 270:\n        return [y, 1 - x];\n      default:\n        return [x, y];\n    }\n  }\n  static createBezierPoints(x1, y1, x2, y2, x3, y3) {\n    return [(x1 + 5 * x2) / 6, (y1 + 5 * y2) / 6, (5 * x2 + x3) / 6, (5 * y2 + y3) / 6, (x2 + x3) / 2, (y2 + y3) / 2];\n  }\n}\n\n;// ./src/display/editor/drawers/freedraw.js\n\n\nclass FreeDrawOutliner {\n  #box;\n  #bottom = [];\n  #innerMargin;\n  #isLTR;\n  #top = [];\n  #last = new Float32Array(18);\n  #lastX;\n  #lastY;\n  #min;\n  #min_dist;\n  #scaleFactor;\n  #thickness;\n  #points = [];\n  static #MIN_DIST = 8;\n  static #MIN_DIFF = 2;\n  static #MIN = FreeDrawOutliner.#MIN_DIST + FreeDrawOutliner.#MIN_DIFF;\n  constructor({\n    x,\n    y\n  }, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    this.#box = box;\n    this.#thickness = thickness * scaleFactor;\n    this.#isLTR = isLTR;\n    this.#last.set([NaN, NaN, NaN, NaN, x, y], 6);\n    this.#innerMargin = innerMargin;\n    this.#min_dist = FreeDrawOutliner.#MIN_DIST * scaleFactor;\n    this.#min = FreeDrawOutliner.#MIN * scaleFactor;\n    this.#scaleFactor = scaleFactor;\n    this.#points.push(x, y);\n  }\n  isEmpty() {\n    return isNaN(this.#last[8]);\n  }\n  #getLastCoords() {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [x, y, width, height] = this.#box;\n    return [(this.#lastX + (lastTop[0] - lastBottom[0]) / 2 - x) / width, (this.#lastY + (lastTop[1] - lastBottom[1]) / 2 - y) / height, (this.#lastX + (lastBottom[0] - lastTop[0]) / 2 - x) / width, (this.#lastY + (lastBottom[1] - lastTop[1]) / 2 - y) / height];\n  }\n  add({\n    x,\n    y\n  }) {\n    this.#lastX = x;\n    this.#lastY = y;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    let [x1, y1, x2, y2] = this.#last.subarray(8, 12);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(diffX, diffY);\n    if (d < this.#min) {\n      return false;\n    }\n    const diffD = d - this.#min_dist;\n    const K = diffD / d;\n    const shiftX = K * diffX;\n    const shiftY = K * diffY;\n    let x0 = x1;\n    let y0 = y1;\n    x1 = x2;\n    y1 = y2;\n    x2 += shiftX;\n    y2 += shiftY;\n    this.#points?.push(x, y);\n    const nX = -shiftY / diffD;\n    const nY = shiftX / diffD;\n    const thX = nX * this.#thickness;\n    const thY = nY * this.#thickness;\n    this.#last.set(this.#last.subarray(2, 8), 0);\n    this.#last.set([x2 + thX, y2 + thY], 4);\n    this.#last.set(this.#last.subarray(14, 18), 12);\n    this.#last.set([x2 - thX, y2 - thY], 16);\n    if (isNaN(this.#last[6])) {\n      if (this.#top.length === 0) {\n        this.#last.set([x1 + thX, y1 + thY], 2);\n        this.#top.push(NaN, NaN, NaN, NaN, (x1 + thX - layerX) / layerWidth, (y1 + thY - layerY) / layerHeight);\n        this.#last.set([x1 - thX, y1 - thY], 14);\n        this.#bottom.push(NaN, NaN, NaN, NaN, (x1 - thX - layerX) / layerWidth, (y1 - thY - layerY) / layerHeight);\n      }\n      this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n      return !this.isEmpty();\n    }\n    this.#last.set([x0, y0, x1, y1, x2, y2], 6);\n    const angle = Math.abs(Math.atan2(y0 - y1, x0 - x1) - Math.atan2(shiftY, shiftX));\n    if (angle < Math.PI / 2) {\n      [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n      this.#top.push(NaN, NaN, NaN, NaN, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n      [x1, y1, x0, y0] = this.#last.subarray(14, 18);\n      this.#bottom.push(NaN, NaN, NaN, NaN, ((x0 + x1) / 2 - layerX) / layerWidth, ((y0 + y1) / 2 - layerY) / layerHeight);\n      return true;\n    }\n    [x0, y0, x1, y1, x2, y2] = this.#last.subarray(0, 6);\n    this.#top.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    [x2, y2, x1, y1, x0, y0] = this.#last.subarray(12, 18);\n    this.#bottom.push(((x0 + 5 * x1) / 6 - layerX) / layerWidth, ((y0 + 5 * y1) / 6 - layerY) / layerHeight, ((5 * x1 + x2) / 6 - layerX) / layerWidth, ((5 * y1 + y2) / 6 - layerY) / layerHeight, ((x1 + x2) / 2 - layerX) / layerWidth, ((y1 + y2) / 2 - layerY) / layerHeight);\n    return true;\n  }\n  toSVGPath() {\n    if (this.isEmpty()) {\n      return \"\";\n    }\n    const top = this.#top;\n    const bottom = this.#bottom;\n    if (isNaN(this.#last[6]) && !this.isEmpty()) {\n      return this.#toSVGPathTwoPoints();\n    }\n    const buffer = [];\n    buffer.push(`M${top[4]} ${top[5]}`);\n    for (let i = 6; i < top.length; i += 6) {\n      if (isNaN(top[i])) {\n        buffer.push(`L${top[i + 4]} ${top[i + 5]}`);\n      } else {\n        buffer.push(`C${top[i]} ${top[i + 1]} ${top[i + 2]} ${top[i + 3]} ${top[i + 4]} ${top[i + 5]}`);\n      }\n    }\n    this.#toSVGPathEnd(buffer);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      if (isNaN(bottom[i])) {\n        buffer.push(`L${bottom[i + 4]} ${bottom[i + 5]}`);\n      } else {\n        buffer.push(`C${bottom[i]} ${bottom[i + 1]} ${bottom[i + 2]} ${bottom[i + 3]} ${bottom[i + 4]} ${bottom[i + 5]}`);\n      }\n    }\n    this.#toSVGPathStart(buffer);\n    return buffer.join(\" \");\n  }\n  #toSVGPathTwoPoints() {\n    const [x, y, width, height] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    return `M${(this.#last[2] - x) / width} ${(this.#last[3] - y) / height} L${(this.#last[4] - x) / width} ${(this.#last[5] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(this.#last[16] - x) / width} ${(this.#last[17] - y) / height} L${(this.#last[14] - x) / width} ${(this.#last[15] - y) / height} Z`;\n  }\n  #toSVGPathStart(buffer) {\n    const bottom = this.#bottom;\n    buffer.push(`L${bottom[4]} ${bottom[5]} Z`);\n  }\n  #toSVGPathEnd(buffer) {\n    const [x, y, width, height] = this.#box;\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    buffer.push(`L${(lastTop[0] - x) / width} ${(lastTop[1] - y) / height} L${lastTopX} ${lastTopY} L${lastBottomX} ${lastBottomY} L${(lastBottom[0] - x) / width} ${(lastBottom[1] - y) / height}`);\n  }\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n  getOutlines() {\n    const top = this.#top;\n    const bottom = this.#bottom;\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const points = new Float32Array((this.#points?.length ?? 0) + 2);\n    for (let i = 0, ii = points.length - 2; i < ii; i += 2) {\n      points[i] = (this.#points[i] - layerX) / layerWidth;\n      points[i + 1] = (this.#points[i + 1] - layerY) / layerHeight;\n    }\n    points[points.length - 2] = (this.#lastX - layerX) / layerWidth;\n    points[points.length - 1] = (this.#lastY - layerY) / layerHeight;\n    if (isNaN(last[6]) && !this.isEmpty()) {\n      return this.#getOutlineTwoPoints(points);\n    }\n    const outline = new Float32Array(this.#top.length + 24 + this.#bottom.length);\n    let N = top.length;\n    for (let i = 0; i < N; i += 2) {\n      if (isNaN(top[i])) {\n        outline[i] = outline[i + 1] = NaN;\n        continue;\n      }\n      outline[i] = top[i];\n      outline[i + 1] = top[i + 1];\n    }\n    N = this.#getOutlineEnd(outline, N);\n    for (let i = bottom.length - 6; i >= 6; i -= 6) {\n      for (let j = 0; j < 6; j += 2) {\n        if (isNaN(bottom[i + j])) {\n          outline[N] = outline[N + 1] = NaN;\n          N += 2;\n          continue;\n        }\n        outline[N] = bottom[i + j];\n        outline[N + 1] = bottom[i + j + 1];\n        N += 2;\n      }\n    }\n    this.#getOutlineStart(outline, N);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineTwoPoints(points) {\n    const last = this.#last;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    const outline = new Float32Array(36);\n    outline.set([NaN, NaN, NaN, NaN, (last[2] - layerX) / layerWidth, (last[3] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[4] - layerX) / layerWidth, (last[5] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (last[16] - layerX) / layerWidth, (last[17] - layerY) / layerHeight, NaN, NaN, NaN, NaN, (last[14] - layerX) / layerWidth, (last[15] - layerY) / layerHeight], 0);\n    return this.newFreeDrawOutline(outline, points, this.#box, this.#scaleFactor, this.#innerMargin, this.#isLTR);\n  }\n  #getOutlineStart(outline, pos) {\n    const bottom = this.#bottom;\n    outline.set([NaN, NaN, NaN, NaN, bottom[4], bottom[5]], pos);\n    return pos += 6;\n  }\n  #getOutlineEnd(outline, pos) {\n    const lastTop = this.#last.subarray(4, 6);\n    const lastBottom = this.#last.subarray(16, 18);\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const [lastTopX, lastTopY, lastBottomX, lastBottomY] = this.#getLastCoords();\n    outline.set([NaN, NaN, NaN, NaN, (lastTop[0] - layerX) / layerWidth, (lastTop[1] - layerY) / layerHeight, NaN, NaN, NaN, NaN, lastTopX, lastTopY, NaN, NaN, NaN, NaN, lastBottomX, lastBottomY, NaN, NaN, NaN, NaN, (lastBottom[0] - layerX) / layerWidth, (lastBottom[1] - layerY) / layerHeight], pos);\n    return pos += 24;\n  }\n}\nclass FreeDrawOutline extends Outline {\n  #box;\n  #bbox = new Float32Array(4);\n  #innerMargin;\n  #isLTR;\n  #points;\n  #scaleFactor;\n  #outline;\n  constructor(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    super();\n    this.#outline = outline;\n    this.#points = points;\n    this.#box = box;\n    this.#scaleFactor = scaleFactor;\n    this.#innerMargin = innerMargin;\n    this.#isLTR = isLTR;\n    this.lastPoint = [NaN, NaN];\n    this.#computeMinMax(isLTR);\n    const [x, y, width, height] = this.#bbox;\n    for (let i = 0, ii = outline.length; i < ii; i += 2) {\n      outline[i] = (outline[i] - x) / width;\n      outline[i + 1] = (outline[i + 1] - y) / height;\n    }\n    for (let i = 0, ii = points.length; i < ii; i += 2) {\n      points[i] = (points[i] - x) / width;\n      points[i + 1] = (points[i + 1] - y) / height;\n    }\n  }\n  toSVGPath() {\n    const buffer = [`M${this.#outline[4]} ${this.#outline[5]}`];\n    for (let i = 6, ii = this.#outline.length; i < ii; i += 6) {\n      if (isNaN(this.#outline[i])) {\n        buffer.push(`L${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n        continue;\n      }\n      buffer.push(`C${this.#outline[i]} ${this.#outline[i + 1]} ${this.#outline[i + 2]} ${this.#outline[i + 3]} ${this.#outline[i + 4]} ${this.#outline[i + 5]}`);\n    }\n    buffer.push(\"Z\");\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], rotation) {\n    const width = trX - blX;\n    const height = trY - blY;\n    let outline;\n    let points;\n    switch (rotation) {\n      case 0:\n        outline = Outline._rescale(this.#outline, blX, trY, width, -height);\n        points = Outline._rescale(this.#points, blX, trY, width, -height);\n        break;\n      case 90:\n        outline = Outline._rescaleAndSwap(this.#outline, blX, blY, width, height);\n        points = Outline._rescaleAndSwap(this.#points, blX, blY, width, height);\n        break;\n      case 180:\n        outline = Outline._rescale(this.#outline, trX, blY, -width, height);\n        points = Outline._rescale(this.#points, trX, blY, -width, height);\n        break;\n      case 270:\n        outline = Outline._rescaleAndSwap(this.#outline, trX, trY, -width, -height);\n        points = Outline._rescaleAndSwap(this.#points, trX, trY, -width, -height);\n        break;\n    }\n    return {\n      outline: Array.from(outline),\n      points: [Array.from(points)]\n    };\n  }\n  #computeMinMax(isLTR) {\n    const outline = this.#outline;\n    let lastX = outline[4];\n    let lastY = outline[5];\n    const minMax = [lastX, lastY, lastX, lastY];\n    let lastPointX = lastX;\n    let lastPointY = lastY;\n    const ltrCallback = isLTR ? Math.max : Math.min;\n    for (let i = 6, ii = outline.length; i < ii; i += 6) {\n      const x = outline[i + 4],\n        y = outline[i + 5];\n      if (isNaN(outline[i])) {\n        Util.pointBoundingBox(x, y, minMax);\n        if (lastPointY < y) {\n          lastPointX = x;\n          lastPointY = y;\n        } else if (lastPointY === y) {\n          lastPointX = ltrCallback(lastPointX, x);\n        }\n      } else {\n        const bbox = [Infinity, Infinity, -Infinity, -Infinity];\n        Util.bezierBoundingBox(lastX, lastY, ...outline.slice(i, i + 6), bbox);\n        Util.rectBoundingBox(...bbox, minMax);\n        if (lastPointY < bbox[3]) {\n          lastPointX = bbox[2];\n          lastPointY = bbox[3];\n        } else if (lastPointY === bbox[3]) {\n          lastPointX = ltrCallback(lastPointX, bbox[2]);\n        }\n      }\n      lastX = x;\n      lastY = y;\n    }\n    const bbox = this.#bbox;\n    bbox[0] = minMax[0] - this.#innerMargin;\n    bbox[1] = minMax[1] - this.#innerMargin;\n    bbox[2] = minMax[2] - minMax[0] + 2 * this.#innerMargin;\n    bbox[3] = minMax[3] - minMax[1] + 2 * this.#innerMargin;\n    this.lastPoint = [lastPointX, lastPointY];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeDrawOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n  getNewOutline(thickness, innerMargin) {\n    const [x, y, width, height] = this.#bbox;\n    const [layerX, layerY, layerWidth, layerHeight] = this.#box;\n    const sx = width * layerWidth;\n    const sy = height * layerHeight;\n    const tx = x * layerWidth + layerX;\n    const ty = y * layerHeight + layerY;\n    const outliner = this.newOutliner({\n      x: this.#points[0] * sx + tx,\n      y: this.#points[1] * sy + ty\n    }, this.#box, this.#scaleFactor, thickness, this.#isLTR, innerMargin ?? this.#innerMargin);\n    for (let i = 2; i < this.#points.length; i += 2) {\n      outliner.add({\n        x: this.#points[i] * sx + tx,\n        y: this.#points[i + 1] * sy + ty\n      });\n    }\n    return outliner.getOutlines();\n  }\n}\n\n;// ./src/display/editor/drawers/highlight.js\n\n\n\nclass HighlightOutliner {\n  #box;\n  #lastPoint;\n  #verticalEdges = [];\n  #intervals = [];\n  constructor(boxes, borderWidth = 0, innerMargin = 0, isLTR = true) {\n    const minMax = [Infinity, Infinity, -Infinity, -Infinity];\n    const NUMBER_OF_DIGITS = 4;\n    const EPSILON = 10 ** -NUMBER_OF_DIGITS;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const x1 = Math.floor((x - borderWidth) / EPSILON) * EPSILON;\n      const x2 = Math.ceil((x + width + borderWidth) / EPSILON) * EPSILON;\n      const y1 = Math.floor((y - borderWidth) / EPSILON) * EPSILON;\n      const y2 = Math.ceil((y + height + borderWidth) / EPSILON) * EPSILON;\n      const left = [x1, y1, y2, true];\n      const right = [x2, y1, y2, false];\n      this.#verticalEdges.push(left, right);\n      Util.rectBoundingBox(x1, y1, x2, y2, minMax);\n    }\n    const bboxWidth = minMax[2] - minMax[0] + 2 * innerMargin;\n    const bboxHeight = minMax[3] - minMax[1] + 2 * innerMargin;\n    const shiftedMinX = minMax[0] - innerMargin;\n    const shiftedMinY = minMax[1] - innerMargin;\n    const lastEdge = this.#verticalEdges.at(isLTR ? -1 : -2);\n    const lastPoint = [lastEdge[0], lastEdge[2]];\n    for (const edge of this.#verticalEdges) {\n      const [x, y1, y2] = edge;\n      edge[0] = (x - shiftedMinX) / bboxWidth;\n      edge[1] = (y1 - shiftedMinY) / bboxHeight;\n      edge[2] = (y2 - shiftedMinY) / bboxHeight;\n    }\n    this.#box = new Float32Array([shiftedMinX, shiftedMinY, bboxWidth, bboxHeight]);\n    this.#lastPoint = lastPoint;\n  }\n  getOutlines() {\n    this.#verticalEdges.sort((a, b) => a[0] - b[0] || a[1] - b[1] || a[2] - b[2]);\n    const outlineVerticalEdges = [];\n    for (const edge of this.#verticalEdges) {\n      if (edge[3]) {\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n        this.#insert(edge);\n      } else {\n        this.#remove(edge);\n        outlineVerticalEdges.push(...this.#breakEdge(edge));\n      }\n    }\n    return this.#getOutlines(outlineVerticalEdges);\n  }\n  #getOutlines(outlineVerticalEdges) {\n    const edges = [];\n    const allEdges = new Set();\n    for (const edge of outlineVerticalEdges) {\n      const [x, y1, y2] = edge;\n      edges.push([x, y1, edge], [x, y2, edge]);\n    }\n    edges.sort((a, b) => a[1] - b[1] || a[0] - b[0]);\n    for (let i = 0, ii = edges.length; i < ii; i += 2) {\n      const edge1 = edges[i][2];\n      const edge2 = edges[i + 1][2];\n      edge1.push(edge2);\n      edge2.push(edge1);\n      allEdges.add(edge1);\n      allEdges.add(edge2);\n    }\n    const outlines = [];\n    let outline;\n    while (allEdges.size > 0) {\n      const edge = allEdges.values().next().value;\n      let [x, y1, y2, edge1, edge2] = edge;\n      allEdges.delete(edge);\n      let lastPointX = x;\n      let lastPointY = y1;\n      outline = [x, y2];\n      outlines.push(outline);\n      while (true) {\n        let e;\n        if (allEdges.has(edge1)) {\n          e = edge1;\n        } else if (allEdges.has(edge2)) {\n          e = edge2;\n        } else {\n          break;\n        }\n        allEdges.delete(e);\n        [x, y1, y2, edge1, edge2] = e;\n        if (lastPointX !== x) {\n          outline.push(lastPointX, lastPointY, x, lastPointY === y1 ? y1 : y2);\n          lastPointX = x;\n        }\n        lastPointY = lastPointY === y1 ? y2 : y1;\n      }\n      outline.push(lastPointX, lastPointY);\n    }\n    return new HighlightOutline(outlines, this.#box, this.#lastPoint);\n  }\n  #binarySearch(y) {\n    const array = this.#intervals;\n    let start = 0;\n    let end = array.length - 1;\n    while (start <= end) {\n      const middle = start + end >> 1;\n      const y1 = array[middle][0];\n      if (y1 === y) {\n        return middle;\n      }\n      if (y1 < y) {\n        start = middle + 1;\n      } else {\n        end = middle - 1;\n      }\n    }\n    return end + 1;\n  }\n  #insert([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    this.#intervals.splice(index, 0, [y1, y2]);\n  }\n  #remove([, y1, y2]) {\n    const index = this.#binarySearch(y1);\n    for (let i = index; i < this.#intervals.length; i++) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n    for (let i = index - 1; i >= 0; i--) {\n      const [start, end] = this.#intervals[i];\n      if (start !== y1) {\n        break;\n      }\n      if (start === y1 && end === y2) {\n        this.#intervals.splice(i, 1);\n        return;\n      }\n    }\n  }\n  #breakEdge(edge) {\n    const [x, y1, y2] = edge;\n    const results = [[x, y1, y2]];\n    const index = this.#binarySearch(y2);\n    for (let i = 0; i < index; i++) {\n      const [start, end] = this.#intervals[i];\n      for (let j = 0, jj = results.length; j < jj; j++) {\n        const [, y3, y4] = results[j];\n        if (end <= y3 || y4 <= start) {\n          continue;\n        }\n        if (y3 >= start) {\n          if (y4 > end) {\n            results[j][1] = end;\n          } else {\n            if (jj === 1) {\n              return [];\n            }\n            results.splice(j, 1);\n            j--;\n            jj--;\n          }\n          continue;\n        }\n        results[j][2] = start;\n        if (y4 > end) {\n          results.push([x, end, y4]);\n        }\n      }\n    }\n    return results;\n  }\n}\nclass HighlightOutline extends Outline {\n  #box;\n  #outlines;\n  constructor(outlines, box, lastPoint) {\n    super();\n    this.#outlines = outlines;\n    this.#box = box;\n    this.lastPoint = lastPoint;\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const polygon of this.#outlines) {\n      let [prevX, prevY] = polygon;\n      buffer.push(`M${prevX} ${prevY}`);\n      for (let i = 2; i < polygon.length; i += 2) {\n        const x = polygon[i];\n        const y = polygon[i + 1];\n        if (x === prevX) {\n          buffer.push(`V${y}`);\n          prevY = y;\n        } else if (y === prevY) {\n          buffer.push(`H${x}`);\n          prevX = x;\n        }\n      }\n      buffer.push(\"Z\");\n    }\n    return buffer.join(\" \");\n  }\n  serialize([blX, blY, trX, trY], _rotation) {\n    const outlines = [];\n    const width = trX - blX;\n    const height = trY - blY;\n    for (const outline of this.#outlines) {\n      const points = new Array(outline.length);\n      for (let i = 0; i < outline.length; i += 2) {\n        points[i] = blX + outline[i] * width;\n        points[i + 1] = trY - outline[i + 1] * height;\n      }\n      outlines.push(points);\n    }\n    return outlines;\n  }\n  get box() {\n    return this.#box;\n  }\n  get classNamesForOutlining() {\n    return [\"highlightOutline\"];\n  }\n}\nclass FreeHighlightOutliner extends FreeDrawOutliner {\n  newFreeDrawOutline(outline, points, box, scaleFactor, innerMargin, isLTR) {\n    return new FreeHighlightOutline(outline, points, box, scaleFactor, innerMargin, isLTR);\n  }\n}\nclass FreeHighlightOutline extends FreeDrawOutline {\n  newOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin = 0) {\n    return new FreeHighlightOutliner(point, box, scaleFactor, thickness, isLTR, innerMargin);\n  }\n}\n\n;// ./src/display/editor/color_picker.js\n\n\n\nclass ColorPicker {\n  #button = null;\n  #buttonSwatch = null;\n  #defaultColor;\n  #dropdown = null;\n  #dropdownWasFromKeyboard = false;\n  #isMainColorPicker = false;\n  #editor = null;\n  #eventBus;\n  #openDropdownAC = null;\n  #uiManager = null;\n  #type;\n  static #l10nColor = null;\n  static get _keyboardManager() {\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"Escape\", \"mac+Escape\"], ColorPicker.prototype._hideDropdownFromKeyboard], [[\" \", \"mac+ \"], ColorPicker.prototype._colorSelectFromKeyboard], [[\"ArrowDown\", \"ArrowRight\", \"mac+ArrowDown\", \"mac+ArrowRight\"], ColorPicker.prototype._moveToNext], [[\"ArrowUp\", \"ArrowLeft\", \"mac+ArrowUp\", \"mac+ArrowLeft\"], ColorPicker.prototype._moveToPrevious], [[\"Home\", \"mac+Home\"], ColorPicker.prototype._moveToBeginning], [[\"End\", \"mac+End\"], ColorPicker.prototype._moveToEnd]]));\n  }\n  constructor({\n    editor = null,\n    uiManager = null\n  }) {\n    if (editor) {\n      this.#isMainColorPicker = false;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_COLOR;\n      this.#editor = editor;\n    } else {\n      this.#isMainColorPicker = true;\n      this.#type = AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR;\n    }\n    this.#uiManager = editor?._uiManager || uiManager;\n    this.#eventBus = this.#uiManager._eventBus;\n    this.#defaultColor = editor?.color?.toUpperCase() || this.#uiManager?.highlightColors.values().next().value || \"#FFFF98\";\n    ColorPicker.#l10nColor ||= Object.freeze({\n      blue: \"pdfjs-editor-colorpicker-blue\",\n      green: \"pdfjs-editor-colorpicker-green\",\n      pink: \"pdfjs-editor-colorpicker-pink\",\n      red: \"pdfjs-editor-colorpicker-red\",\n      yellow: \"pdfjs-editor-colorpicker-yellow\"\n    });\n  }\n  renderButton() {\n    const button = this.#button = document.createElement(\"button\");\n    button.className = \"colorPicker\";\n    button.tabIndex = \"0\";\n    button.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-button\");\n    button.ariaHasPopup = \"true\";\n    if (this.#editor) {\n      button.ariaControls = `${this.#editor.id}_colorpicker_dropdown`;\n    }\n    const signal = this.#uiManager._signal;\n    button.addEventListener(\"click\", this.#openDropdown.bind(this), {\n      signal\n    });\n    button.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    const swatch = this.#buttonSwatch = document.createElement(\"span\");\n    swatch.className = \"swatch\";\n    swatch.ariaHidden = \"true\";\n    swatch.style.backgroundColor = this.#defaultColor;\n    button.append(swatch);\n    return button;\n  }\n  renderMainDropdown() {\n    const dropdown = this.#dropdown = this.#getDropdownRoot();\n    dropdown.ariaOrientation = \"horizontal\";\n    dropdown.ariaLabelledBy = \"highlightColorPickerLabel\";\n    return dropdown;\n  }\n  #getDropdownRoot() {\n    const div = document.createElement(\"div\");\n    const signal = this.#uiManager._signal;\n    div.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    div.className = \"dropdown\";\n    div.role = \"listbox\";\n    div.ariaMultiSelectable = \"false\";\n    div.ariaOrientation = \"vertical\";\n    div.setAttribute(\"data-l10n-id\", \"pdfjs-editor-colorpicker-dropdown\");\n    if (this.#editor) {\n      div.id = `${this.#editor.id}_colorpicker_dropdown`;\n    }\n    for (const [name, color] of this.#uiManager.highlightColors) {\n      const button = document.createElement(\"button\");\n      button.tabIndex = \"0\";\n      button.role = \"option\";\n      button.setAttribute(\"data-color\", color);\n      button.title = name;\n      button.setAttribute(\"data-l10n-id\", ColorPicker.#l10nColor[name]);\n      const swatch = document.createElement(\"span\");\n      button.append(swatch);\n      swatch.className = \"swatch\";\n      swatch.style.backgroundColor = color;\n      button.ariaSelected = color === this.#defaultColor;\n      button.addEventListener(\"click\", this.#colorSelect.bind(this, color), {\n        signal\n      });\n      div.append(button);\n    }\n    div.addEventListener(\"keydown\", this.#keyDown.bind(this), {\n      signal\n    });\n    return div;\n  }\n  #colorSelect(color, event) {\n    event.stopPropagation();\n    this.#eventBus.dispatch(\"switchannotationeditorparams\", {\n      source: this,\n      type: this.#type,\n      value: color\n    });\n  }\n  _colorSelectFromKeyboard(event) {\n    if (event.target === this.#button) {\n      this.#openDropdown(event);\n      return;\n    }\n    const color = event.target.getAttribute(\"data-color\");\n    if (!color) {\n      return;\n    }\n    this.#colorSelect(color, event);\n  }\n  _moveToNext(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    if (event.target === this.#button) {\n      this.#dropdown.firstChild?.focus();\n      return;\n    }\n    event.target.nextSibling?.focus();\n  }\n  _moveToPrevious(event) {\n    if (event.target === this.#dropdown?.firstChild || event.target === this.#button) {\n      if (this.#isDropdownVisible) {\n        this._hideDropdownFromKeyboard();\n      }\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n    }\n    event.target.previousSibling?.focus();\n  }\n  _moveToBeginning(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.firstChild?.focus();\n  }\n  _moveToEnd(event) {\n    if (!this.#isDropdownVisible) {\n      this.#openDropdown(event);\n      return;\n    }\n    this.#dropdown.lastChild?.focus();\n  }\n  #keyDown(event) {\n    ColorPicker._keyboardManager.exec(this, event);\n  }\n  #openDropdown(event) {\n    if (this.#isDropdownVisible) {\n      this.hideDropdown();\n      return;\n    }\n    this.#dropdownWasFromKeyboard = event.detail === 0;\n    if (!this.#openDropdownAC) {\n      this.#openDropdownAC = new AbortController();\n      window.addEventListener(\"pointerdown\", this.#pointerDown.bind(this), {\n        signal: this.#uiManager.combinedSignal(this.#openDropdownAC)\n      });\n    }\n    this.#button.ariaExpanded = \"true\";\n    if (this.#dropdown) {\n      this.#dropdown.classList.remove(\"hidden\");\n      return;\n    }\n    const root = this.#dropdown = this.#getDropdownRoot();\n    this.#button.append(root);\n  }\n  #pointerDown(event) {\n    if (this.#dropdown?.contains(event.target)) {\n      return;\n    }\n    this.hideDropdown();\n  }\n  hideDropdown() {\n    this.#dropdown?.classList.add(\"hidden\");\n    this.#button.ariaExpanded = \"false\";\n    this.#openDropdownAC?.abort();\n    this.#openDropdownAC = null;\n  }\n  get #isDropdownVisible() {\n    return this.#dropdown && !this.#dropdown.classList.contains(\"hidden\");\n  }\n  _hideDropdownFromKeyboard() {\n    if (this.#isMainColorPicker) {\n      return;\n    }\n    if (!this.#isDropdownVisible) {\n      this.#editor?.unselect();\n      return;\n    }\n    this.hideDropdown();\n    this.#button.focus({\n      preventScroll: true,\n      focusVisible: this.#dropdownWasFromKeyboard\n    });\n  }\n  updateColor(color) {\n    if (this.#buttonSwatch) {\n      this.#buttonSwatch.style.backgroundColor = color;\n    }\n    if (!this.#dropdown) {\n      return;\n    }\n    const i = this.#uiManager.highlightColors.values();\n    for (const child of this.#dropdown.children) {\n      child.ariaSelected = i.next().value === color.toUpperCase();\n    }\n  }\n  destroy() {\n    this.#button?.remove();\n    this.#button = null;\n    this.#buttonSwatch = null;\n    this.#dropdown?.remove();\n    this.#dropdown = null;\n  }\n}\n\n;// ./src/display/editor/highlight.js\n\n\n\n\n\n\n\nclass HighlightEditor extends AnnotationEditor {\n  #anchorNode = null;\n  #anchorOffset = 0;\n  #boxes;\n  #clipPathId = null;\n  #colorPicker = null;\n  #focusOutlines = null;\n  #focusNode = null;\n  #focusOffset = 0;\n  #highlightDiv = null;\n  #highlightOutlines = null;\n  #id = null;\n  #isFreeHighlight = false;\n  #lastPoint = null;\n  #opacity;\n  #outlineId = null;\n  #text = \"\";\n  #thickness;\n  #methodOfCreation = \"\";\n  static _defaultColor = null;\n  static _defaultOpacity = 1;\n  static _defaultThickness = 12;\n  static _type = \"highlight\";\n  static _editorType = AnnotationEditorType.HIGHLIGHT;\n  static _freeHighlightId = -1;\n  static _freeHighlight = null;\n  static _freeHighlightClipId = \"\";\n  static get _keyboardManager() {\n    const proto = HighlightEditor.prototype;\n    return shadow(this, \"_keyboardManager\", new KeyboardManager([[[\"ArrowLeft\", \"mac+ArrowLeft\"], proto._moveCaret, {\n      args: [0]\n    }], [[\"ArrowRight\", \"mac+ArrowRight\"], proto._moveCaret, {\n      args: [1]\n    }], [[\"ArrowUp\", \"mac+ArrowUp\"], proto._moveCaret, {\n      args: [2]\n    }], [[\"ArrowDown\", \"mac+ArrowDown\"], proto._moveCaret, {\n      args: [3]\n    }]]));\n  }\n  constructor(params) {\n    super({\n      ...params,\n      name: \"highlightEditor\"\n    });\n    this.color = params.color || HighlightEditor._defaultColor;\n    this.#thickness = params.thickness || HighlightEditor._defaultThickness;\n    this.#opacity = params.opacity || HighlightEditor._defaultOpacity;\n    this.#boxes = params.boxes || null;\n    this.#methodOfCreation = params.methodOfCreation || \"\";\n    this.#text = params.text || \"\";\n    this._isDraggable = false;\n    this.defaultL10nId = \"pdfjs-editor-highlight-editor\";\n    if (params.highlightId > -1) {\n      this.#isFreeHighlight = true;\n      this.#createFreeOutlines(params);\n      this.#addToDrawLayer();\n    } else if (this.#boxes) {\n      this.#anchorNode = params.anchorNode;\n      this.#anchorOffset = params.anchorOffset;\n      this.#focusNode = params.focusNode;\n      this.#focusOffset = params.focusOffset;\n      this.#createOutlines();\n      this.#addToDrawLayer();\n      this.rotate(this.rotation);\n    }\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-highlight-added-alert\");\n    }\n  }\n  get telemetryInitialData() {\n    return {\n      action: \"added\",\n      type: this.#isFreeHighlight ? \"free_highlight\" : \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color),\n      thickness: this.#thickness,\n      methodOfCreation: this.#methodOfCreation\n    };\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"highlight\",\n      color: this._uiManager.highlightColorNames.get(this.color)\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    return {\n      numberOfColors: data.get(\"color\").size\n    };\n  }\n  #createOutlines() {\n    const outliner = new HighlightOutliner(this.#boxes, 0.001);\n    this.#highlightOutlines = outliner.getOutlines();\n    [this.x, this.y, this.width, this.height] = this.#highlightOutlines.box;\n    const outlinerForOutline = new HighlightOutliner(this.#boxes, 0.0025, 0.001, this._uiManager.direction === \"ltr\");\n    this.#focusOutlines = outlinerForOutline.getOutlines();\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - this.x) / this.width, (lastPoint[1] - this.y) / this.height];\n  }\n  #createFreeOutlines({\n    highlightOutlines,\n    highlightId,\n    clipPathId\n  }) {\n    this.#highlightOutlines = highlightOutlines;\n    const extraThickness = 1.5;\n    this.#focusOutlines = highlightOutlines.getNewOutline(this.#thickness / 2 + extraThickness, 0.0025);\n    if (highlightId >= 0) {\n      this.#id = highlightId;\n      this.#clipPathId = clipPathId;\n      this.parent.drawLayer.finalizeDraw(highlightId, {\n        bbox: highlightOutlines.box,\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.#outlineId = this.parent.drawLayer.drawOutline({\n        rootClass: {\n          highlightOutline: true,\n          free: true\n        },\n        bbox: this.#focusOutlines.box,\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      }, true);\n    } else if (this.parent) {\n      const angle = this.parent.viewport.rotation;\n      this.parent.drawLayer.updateProperties(this.#id, {\n        bbox: HighlightEditor.#rotateBbox(this.#highlightOutlines.box, (angle - this.rotation + 360) % 360),\n        path: {\n          d: highlightOutlines.toSVGPath()\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n        path: {\n          d: this.#focusOutlines.toSVGPath()\n        }\n      });\n    }\n    const [x, y, width, height] = highlightOutlines.box;\n    switch (this.rotation) {\n      case 0:\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 90:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = y;\n          this.y = 1 - x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n      case 180:\n        this.x = 1 - x;\n        this.y = 1 - y;\n        this.width = width;\n        this.height = height;\n        break;\n      case 270:\n        {\n          const [pageWidth, pageHeight] = this.parentDimensions;\n          this.x = 1 - y;\n          this.y = x;\n          this.width = width * pageHeight / pageWidth;\n          this.height = height * pageWidth / pageHeight;\n          break;\n        }\n    }\n    const {\n      lastPoint\n    } = this.#focusOutlines;\n    this.#lastPoint = [(lastPoint[0] - x) / width, (lastPoint[1] - y) / height];\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    HighlightEditor._defaultColor ||= uiManager.highlightColors?.values().next().value || \"#fff066\";\n  }\n  static updateDefaultParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR:\n        HighlightEditor._defaultColor = value;\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        HighlightEditor._defaultThickness = value;\n        break;\n    }\n  }\n  translateInPage(x, y) {}\n  get toolbarPosition() {\n    return this.#lastPoint;\n  }\n  updateParams(type, value) {\n    switch (type) {\n      case AnnotationEditorParamsType.HIGHLIGHT_COLOR:\n        this.#updateColor(value);\n        break;\n      case AnnotationEditorParamsType.HIGHLIGHT_THICKNESS:\n        this.#updateThickness(value);\n        break;\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_DEFAULT_COLOR, HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, HighlightEditor._defaultThickness]];\n  }\n  get propertiesToUpdate() {\n    return [[AnnotationEditorParamsType.HIGHLIGHT_COLOR, this.color || HighlightEditor._defaultColor], [AnnotationEditorParamsType.HIGHLIGHT_THICKNESS, this.#thickness || HighlightEditor._defaultThickness], [AnnotationEditorParamsType.HIGHLIGHT_FREE, this.#isFreeHighlight]];\n  }\n  #updateColor(color) {\n    const setColorAndOpacity = (col, opa) => {\n      this.color = col;\n      this.#opacity = opa;\n      this.parent?.drawLayer.updateProperties(this.#id, {\n        root: {\n          fill: col,\n          \"fill-opacity\": opa\n        }\n      });\n      this.#colorPicker?.updateColor(col);\n    };\n    const savedColor = this.color;\n    const savedOpacity = this.#opacity;\n    this.addCommands({\n      cmd: setColorAndOpacity.bind(this, color, HighlightEditor._defaultOpacity),\n      undo: setColorAndOpacity.bind(this, savedColor, savedOpacity),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.HIGHLIGHT_COLOR,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"color_changed\",\n      color: this._uiManager.highlightColorNames.get(color)\n    }, true);\n  }\n  #updateThickness(thickness) {\n    const savedThickness = this.#thickness;\n    const setThickness = th => {\n      this.#thickness = th;\n      this.#changeThickness(th);\n    };\n    this.addCommands({\n      cmd: setThickness.bind(this, thickness),\n      undo: setThickness.bind(this, savedThickness),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type: AnnotationEditorParamsType.INK_THICKNESS,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n    this._reportTelemetry({\n      action: \"thickness_changed\",\n      thickness\n    }, true);\n  }\n  get toolbarButtons() {\n    if (this._uiManager.highlightColors) {\n      const colorPicker = this.#colorPicker = new ColorPicker({\n        editor: this\n      });\n      return [[\"colorPicker\", colorPicker]];\n    }\n    return super.toolbarButtons;\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  fixAndSetPosition() {\n    return super.fixAndSetPosition(this.#getRotation());\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  getRect(tx, ty) {\n    return super.getRect(tx, ty, this.#getRotation());\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    this._reportTelemetry({\n      action: \"deleted\"\n    });\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    this.show(this._isVisible);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #changeThickness(thickness) {\n    if (!this.#isFreeHighlight) {\n      return;\n    }\n    this.#createFreeOutlines({\n      highlightOutlines: this.#highlightOutlines.getNewOutline(thickness / 2)\n    });\n    this.fixAndSetPosition();\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n  }\n  #cleanDrawLayer() {\n    if (this.#id === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this.#id);\n    this.#id = null;\n    this.parent.drawLayer.remove(this.#outlineId);\n    this.#outlineId = null;\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this.#id !== null) {\n      return;\n    }\n    ({\n      id: this.#id,\n      clipPathId: this.#clipPathId\n    } = parent.drawLayer.draw({\n      bbox: this.#highlightOutlines.box,\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this.color,\n        \"fill-opacity\": this.#opacity\n      },\n      rootClass: {\n        highlight: true,\n        free: this.#isFreeHighlight\n      },\n      path: {\n        d: this.#highlightOutlines.toSVGPath()\n      }\n    }, false, true));\n    this.#outlineId = parent.drawLayer.drawOutline({\n      rootClass: {\n        highlightOutline: true,\n        free: this.#isFreeHighlight\n      },\n      bbox: this.#focusOutlines.box,\n      path: {\n        d: this.#focusOutlines.toSVGPath()\n      }\n    }, this.#isFreeHighlight);\n    if (this.#highlightDiv) {\n      this.#highlightDiv.style.clipPath = this.#clipPathId;\n    }\n  }\n  static #rotateBbox([x, y, width, height], angle) {\n    switch (angle) {\n      case 90:\n        return [1 - y - height, x, height, width];\n      case 180:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 270:\n        return [y, 1 - x - width, height, width];\n    }\n    return [x, y, width, height];\n  }\n  rotate(angle) {\n    const {\n      drawLayer\n    } = this.parent;\n    let box;\n    if (this.#isFreeHighlight) {\n      angle = (angle - this.rotation + 360) % 360;\n      box = HighlightEditor.#rotateBbox(this.#highlightOutlines.box, angle);\n    } else {\n      box = HighlightEditor.#rotateBbox([this.x, this.y, this.width, this.height], angle);\n    }\n    drawLayer.updateProperties(this.#id, {\n      bbox: box,\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n    drawLayer.updateProperties(this.#outlineId, {\n      bbox: HighlightEditor.#rotateBbox(this.#focusOutlines.box, angle),\n      root: {\n        \"data-main-rotation\": angle\n      }\n    });\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    const div = super.render();\n    if (this.#text) {\n      div.setAttribute(\"aria-label\", this.#text);\n      div.setAttribute(\"role\", \"mark\");\n    }\n    if (this.#isFreeHighlight) {\n      div.classList.add(\"free\");\n    } else {\n      this.div.addEventListener(\"keydown\", this.#keydown.bind(this), {\n        signal: this._uiManager._signal\n      });\n    }\n    const highlightDiv = this.#highlightDiv = document.createElement(\"div\");\n    div.append(highlightDiv);\n    highlightDiv.setAttribute(\"aria-hidden\", \"true\");\n    highlightDiv.className = \"internal\";\n    highlightDiv.style.clipPath = this.#clipPathId;\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    bindEvents(this, this.#highlightDiv, [\"pointerover\", \"pointerleave\"]);\n    this.enableEditing();\n    return div;\n  }\n  pointerover() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: true\n        }\n      });\n    }\n  }\n  pointerleave() {\n    if (!this.isSelected) {\n      this.parent?.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hovered: false\n        }\n      });\n    }\n  }\n  #keydown(event) {\n    HighlightEditor._keyboardManager.exec(this, event);\n  }\n  _moveCaret(direction) {\n    this.parent.unselect(this);\n    switch (direction) {\n      case 0:\n      case 2:\n        this.#setCaret(true);\n        break;\n      case 1:\n      case 3:\n        this.#setCaret(false);\n        break;\n    }\n  }\n  #setCaret(start) {\n    if (!this.#anchorNode) {\n      return;\n    }\n    const selection = window.getSelection();\n    if (start) {\n      selection.setPosition(this.#anchorNode, this.#anchorOffset);\n    } else {\n      selection.setPosition(this.#focusNode, this.#focusOffset);\n    }\n  }\n  select() {\n    super.select();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        hovered: false,\n        selected: true\n      }\n    });\n  }\n  unselect() {\n    super.unselect();\n    if (!this.#outlineId) {\n      return;\n    }\n    this.parent?.drawLayer.updateProperties(this.#outlineId, {\n      rootClass: {\n        selected: false\n      }\n    });\n    if (!this.#isFreeHighlight) {\n      this.#setCaret(false);\n    }\n  }\n  get _mustFixPosition() {\n    return !this.#isFreeHighlight;\n  }\n  show(visible = this._isVisible) {\n    super.show(visible);\n    if (this.parent) {\n      this.parent.drawLayer.updateProperties(this.#id, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n      this.parent.drawLayer.updateProperties(this.#outlineId, {\n        rootClass: {\n          hidden: !visible\n        }\n      });\n    }\n  }\n  #getRotation() {\n    return this.#isFreeHighlight ? this.rotation : 0;\n  }\n  #serializeBoxes() {\n    if (this.#isFreeHighlight) {\n      return null;\n    }\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const [pageX, pageY] = this.pageTranslation;\n    const boxes = this.#boxes;\n    const quadPoints = new Float32Array(boxes.length * 8);\n    let i = 0;\n    for (const {\n      x,\n      y,\n      width,\n      height\n    } of boxes) {\n      const sx = x * pageWidth + pageX;\n      const sy = (1 - y) * pageHeight + pageY;\n      quadPoints[i] = quadPoints[i + 4] = sx;\n      quadPoints[i + 1] = quadPoints[i + 3] = sy;\n      quadPoints[i + 2] = quadPoints[i + 6] = sx + width * pageWidth;\n      quadPoints[i + 5] = quadPoints[i + 7] = sy - height * pageHeight;\n      i += 8;\n    }\n    return quadPoints;\n  }\n  #serializeOutlines(rect) {\n    return this.#highlightOutlines.serialize(rect, this.#getRotation());\n  }\n  static startHighlighting(parent, isLTR, {\n    target: textLayer,\n    x,\n    y\n  }) {\n    const {\n      x: layerX,\n      y: layerY,\n      width: parentWidth,\n      height: parentHeight\n    } = textLayer.getBoundingClientRect();\n    const ac = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    const pointerUpCallback = e => {\n      ac.abort();\n      this.#endHighlight(parent, e);\n    };\n    window.addEventListener(\"blur\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerup\", pointerUpCallback, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", stopEvent, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    textLayer.addEventListener(\"pointermove\", this.#highlightMove.bind(this, parent), {\n      signal\n    });\n    this._freeHighlight = new FreeHighlightOutliner({\n      x,\n      y\n    }, [layerX, layerY, parentWidth, parentHeight], parent.scale, this._defaultThickness / 2, isLTR, 0.001);\n    ({\n      id: this._freeHighlightId,\n      clipPathId: this._freeHighlightClipId\n    } = parent.drawLayer.draw({\n      bbox: [0, 0, 1, 1],\n      root: {\n        viewBox: \"0 0 1 1\",\n        fill: this._defaultColor,\n        \"fill-opacity\": this._defaultOpacity\n      },\n      rootClass: {\n        highlight: true,\n        free: true\n      },\n      path: {\n        d: this._freeHighlight.toSVGPath()\n      }\n    }, true, true));\n  }\n  static #highlightMove(parent, event) {\n    if (this._freeHighlight.add(event)) {\n      parent.drawLayer.updateProperties(this._freeHighlightId, {\n        path: {\n          d: this._freeHighlight.toSVGPath()\n        }\n      });\n    }\n  }\n  static #endHighlight(parent, event) {\n    if (!this._freeHighlight.isEmpty()) {\n      parent.createAndAddNewEditor(event, false, {\n        highlightId: this._freeHighlightId,\n        highlightOutlines: this._freeHighlight.getOutlines(),\n        clipPathId: this._freeHighlightClipId,\n        methodOfCreation: \"main_toolbar\"\n      });\n    } else {\n      parent.drawLayer.remove(this._freeHighlightId);\n    }\n    this._freeHighlightId = -1;\n    this._freeHighlight = null;\n    this._freeHighlightClipId = \"\";\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof HighlightAnnotationElement) {\n      const {\n        data: {\n          quadPoints,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        opacity,\n        quadPoints,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef\n      };\n    } else if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.HIGHLIGHT,\n        color: Array.from(color),\n        thickness,\n        inkLists,\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const {\n      color,\n      quadPoints,\n      inkLists,\n      opacity\n    } = data;\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.color = Util.makeHexColor(...color);\n    editor.#opacity = opacity || 1;\n    if (inkLists) {\n      editor.#thickness = data.thickness;\n    }\n    editor._initialData = initialData;\n    const [pageWidth, pageHeight] = editor.pageDimensions;\n    const [pageX, pageY] = editor.pageTranslation;\n    if (quadPoints) {\n      const boxes = editor.#boxes = [];\n      for (let i = 0; i < quadPoints.length; i += 8) {\n        boxes.push({\n          x: (quadPoints[i] - pageX) / pageWidth,\n          y: 1 - (quadPoints[i + 1] - pageY) / pageHeight,\n          width: (quadPoints[i + 2] - quadPoints[i]) / pageWidth,\n          height: (quadPoints[i + 1] - quadPoints[i + 5]) / pageHeight\n        });\n      }\n      editor.#createOutlines();\n      editor.#addToDrawLayer();\n      editor.rotate(editor.rotation);\n    } else if (inkLists) {\n      editor.#isFreeHighlight = true;\n      const points = inkLists[0];\n      const point = {\n        x: points[0] - pageX,\n        y: pageHeight - (points[1] - pageY)\n      };\n      const outliner = new FreeHighlightOutliner(point, [0, 0, pageWidth, pageHeight], 1, editor.#thickness / 2, true, 0.001);\n      for (let i = 0, ii = points.length; i < ii; i += 2) {\n        point.x = points[i] - pageX;\n        point.y = pageHeight - (points[i + 1] - pageY);\n        outliner.add(point);\n      }\n      const {\n        id,\n        clipPathId\n      } = parent.drawLayer.draw({\n        bbox: [0, 0, 1, 1],\n        root: {\n          viewBox: \"0 0 1 1\",\n          fill: editor.color,\n          \"fill-opacity\": editor._defaultOpacity\n        },\n        rootClass: {\n          highlight: true,\n          free: true\n        },\n        path: {\n          d: outliner.toSVGPath()\n        }\n      }, true, true);\n      editor.#createFreeOutlines({\n        highlightOutlines: outliner.getOutlines(),\n        highlightId: id,\n        clipPathId\n      });\n      editor.#addToDrawLayer();\n      editor.rotate(editor.parentRotation);\n    }\n    return editor;\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty() || isForCopying) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const rect = this.getRect(0, 0);\n    const color = AnnotationEditor._colorManager.convert(this.color);\n    const serialized = {\n      annotationType: AnnotationEditorType.HIGHLIGHT,\n      color,\n      opacity: this.#opacity,\n      thickness: this.#thickness,\n      quadPoints: this.#serializeBoxes(),\n      outlines: this.#serializeOutlines(rect),\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.#getRotation(),\n      structTreeParentId: this._structTreeParentId\n    };\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color\n    } = this._initialData;\n    return serialized.color.some((c, i) => c !== color[i]);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/draw.js\n\n\n\nclass DrawingOptions {\n  #svgProperties = Object.create(null);\n  updateProperty(name, value) {\n    this[name] = value;\n    this.updateSVGProperty(name, value);\n  }\n  updateProperties(properties) {\n    if (!properties) {\n      return;\n    }\n    for (const [name, value] of Object.entries(properties)) {\n      if (!name.startsWith(\"_\")) {\n        this.updateProperty(name, value);\n      }\n    }\n  }\n  updateSVGProperty(name, value) {\n    this.#svgProperties[name] = value;\n  }\n  toSVGProperties() {\n    const root = this.#svgProperties;\n    this.#svgProperties = Object.create(null);\n    return {\n      root\n    };\n  }\n  reset() {\n    this.#svgProperties = Object.create(null);\n  }\n  updateAll(options = this) {\n    this.updateProperties(options);\n  }\n  clone() {\n    unreachable(\"Not implemented\");\n  }\n}\nclass DrawingEditor extends AnnotationEditor {\n  #drawOutlines = null;\n  #mustBeCommitted;\n  _drawId = null;\n  static _currentDrawId = -1;\n  static _currentParent = null;\n  static #currentDraw = null;\n  static #currentDrawingAC = null;\n  static #currentDrawingOptions = null;\n  static #currentPointerId = NaN;\n  static #currentPointerType = null;\n  static #currentPointerIds = null;\n  static #currentMoveTimestamp = NaN;\n  static _INNER_MARGIN = 3;\n  constructor(params) {\n    super(params);\n    this.#mustBeCommitted = params.mustBeCommitted || false;\n    this._addOutlines(params);\n  }\n  _addOutlines(params) {\n    if (params.drawOutlines) {\n      this.#createDrawOutlines(params);\n      this.#addToDrawLayer();\n    }\n  }\n  #createDrawOutlines({\n    drawOutlines,\n    drawId,\n    drawingOptions\n  }) {\n    this.#drawOutlines = drawOutlines;\n    this._drawingOptions ||= drawingOptions;\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`);\n    }\n    if (drawId >= 0) {\n      this._drawId = drawId;\n      this.parent.drawLayer.finalizeDraw(drawId, drawOutlines.defaultProperties);\n    } else {\n      this._drawId = this.#createDrawing(drawOutlines, this.parent);\n    }\n    this.#updateBbox(drawOutlines.box);\n  }\n  #createDrawing(drawOutlines, parent) {\n    const {\n      id\n    } = parent.drawLayer.draw(DrawingEditor._mergeSVGProperties(this._drawingOptions.toSVGProperties(), drawOutlines.defaultSVGProperties), false, false);\n    return id;\n  }\n  static _mergeSVGProperties(p1, p2) {\n    const p1Keys = new Set(Object.keys(p1));\n    for (const [key, value] of Object.entries(p2)) {\n      if (p1Keys.has(key)) {\n        Object.assign(p1[key], value);\n      } else {\n        p1[key] = value;\n      }\n    }\n    return p1;\n  }\n  static getDefaultDrawingOptions(_options) {\n    unreachable(\"Not implemented\");\n  }\n  static get typesMap() {\n    unreachable(\"Not implemented\");\n  }\n  static get isDrawer() {\n    return true;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static updateDefaultParams(type, value) {\n    const propertyName = this.typesMap.get(type);\n    if (propertyName) {\n      this._defaultDrawingOptions.updateProperty(propertyName, value);\n    }\n    if (this._currentParent) {\n      DrawingEditor.#currentDraw.updateProperty(propertyName, value);\n      this._currentParent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n    }\n  }\n  updateParams(type, value) {\n    const propertyName = this.constructor.typesMap.get(type);\n    if (propertyName) {\n      this._updateProperty(type, propertyName, value);\n    }\n  }\n  static get defaultPropertiesToUpdate() {\n    const properties = [];\n    const options = this._defaultDrawingOptions;\n    for (const [type, name] of this.typesMap) {\n      properties.push([type, options[name]]);\n    }\n    return properties;\n  }\n  get propertiesToUpdate() {\n    const properties = [];\n    const {\n      _drawingOptions\n    } = this;\n    for (const [type, name] of this.constructor.typesMap) {\n      properties.push([type, _drawingOptions[name]]);\n    }\n    return properties;\n  }\n  _updateProperty(type, name, value) {\n    const options = this._drawingOptions;\n    const savedValue = options[name];\n    const setter = val => {\n      options.updateProperty(name, val);\n      const bbox = this.#drawOutlines.updateProperty(name, val);\n      if (bbox) {\n        this.#updateBbox(bbox);\n      }\n      this.parent?.drawLayer.updateProperties(this._drawId, options.toSVGProperties());\n    };\n    this.addCommands({\n      cmd: setter.bind(this, value),\n      undo: setter.bind(this, savedValue),\n      post: this._uiManager.updateUI.bind(this._uiManager, this),\n      mustExec: true,\n      type,\n      overwriteIfSameType: true,\n      keepUndo: true\n    });\n  }\n  _onResizing() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizingSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onResized() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathResizedSVGProperties(this.#convertToDrawSpace()), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onTranslating(_x, _y) {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      bbox: this.#rotateBox()\n    });\n  }\n  _onTranslated() {\n    this.parent?.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties(this.#drawOutlines.getPathTranslatedSVGProperties(this.#convertToDrawSpace(), this.parentDimensions), {\n      bbox: this.#rotateBox()\n    }));\n  }\n  _onStartDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: true\n      }\n    });\n  }\n  _onStopDragging() {\n    this.parent?.drawLayer.updateProperties(this._drawId, {\n      rootClass: {\n        moving: false\n      }\n    });\n  }\n  commit() {\n    super.commit();\n    this.disableEditMode();\n    this.disableEditing();\n  }\n  disableEditing() {\n    super.disableEditing();\n    this.div.classList.toggle(\"disabled\", true);\n  }\n  enableEditing() {\n    super.enableEditing();\n    this.div.classList.toggle(\"disabled\", false);\n  }\n  getBaseTranslation() {\n    return [0, 0];\n  }\n  get isResizable() {\n    return true;\n  }\n  onceAdded(focus) {\n    if (!this.annotationElementId) {\n      this.parent.addUndoableEditor(this);\n    }\n    this._isDraggable = true;\n    if (this.#mustBeCommitted) {\n      this.#mustBeCommitted = false;\n      this.commit();\n      this.parent.setSelected(this);\n      if (focus && this.isOnScreen) {\n        this.div.focus();\n      }\n    }\n  }\n  remove() {\n    this.#cleanDrawLayer();\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    this.#addToDrawLayer();\n    this.#updateBbox(this.#drawOutlines.box);\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  setParent(parent) {\n    let mustBeSelected = false;\n    if (this.parent && !parent) {\n      this._uiManager.removeShouldRescale(this);\n      this.#cleanDrawLayer();\n    } else if (parent) {\n      this._uiManager.addShouldRescale(this);\n      this.#addToDrawLayer(parent);\n      mustBeSelected = !this.parent && this.div?.classList.contains(\"selectedEditor\");\n    }\n    super.setParent(parent);\n    if (mustBeSelected) {\n      this.select();\n    }\n  }\n  #cleanDrawLayer() {\n    if (this._drawId === null || !this.parent) {\n      return;\n    }\n    this.parent.drawLayer.remove(this._drawId);\n    this._drawId = null;\n    this._drawingOptions.reset();\n  }\n  #addToDrawLayer(parent = this.parent) {\n    if (this._drawId !== null && this.parent === parent) {\n      return;\n    }\n    if (this._drawId !== null) {\n      this.parent.drawLayer.updateParent(this._drawId, parent.drawLayer);\n      return;\n    }\n    this._drawingOptions.updateAll();\n    this._drawId = this.#createDrawing(this.#drawOutlines, parent);\n  }\n  #convertToParentSpace([x, y, width, height]) {\n    const {\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [y, 1 - x, width * (pH / pW), height * (pW / pH)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [1 - y, x, width * (pH / pW), height * (pW / pH)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #convertToDrawSpace() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      parentDimensions: [pW, pH],\n      rotation\n    } = this;\n    switch (rotation) {\n      case 90:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 180:\n        return [1 - x, 1 - y, width, height];\n      case 270:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  #updateBbox(bbox) {\n    [this.x, this.y, this.width, this.height] = this.#convertToParentSpace(bbox);\n    if (this.div) {\n      this.fixAndSetPosition();\n      const [parentWidth, parentHeight] = this.parentDimensions;\n      this.setDims(this.width * parentWidth, this.height * parentHeight);\n    }\n    this._onResized();\n  }\n  #rotateBox() {\n    const {\n      x,\n      y,\n      width,\n      height,\n      rotation,\n      parentRotation,\n      parentDimensions: [pW, pH]\n    } = this;\n    switch ((rotation * 4 + parentRotation) / 90) {\n      case 1:\n        return [1 - y - height, x, height, width];\n      case 2:\n        return [1 - x - width, 1 - y - height, width, height];\n      case 3:\n        return [y, 1 - x - width, height, width];\n      case 4:\n        return [x, y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 5:\n        return [1 - y, x, width * (pW / pH), height * (pH / pW)];\n      case 6:\n        return [1 - x - height * (pH / pW), 1 - y, height * (pH / pW), width * (pW / pH)];\n      case 7:\n        return [y - width * (pW / pH), 1 - x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 8:\n        return [x - width, y - height, width, height];\n      case 9:\n        return [1 - y, x - width, height, width];\n      case 10:\n        return [1 - x, 1 - y, width, height];\n      case 11:\n        return [y - height, 1 - x, height, width];\n      case 12:\n        return [x - height * (pH / pW), y, height * (pH / pW), width * (pW / pH)];\n      case 13:\n        return [1 - y - width * (pW / pH), x - height * (pH / pW), width * (pW / pH), height * (pH / pW)];\n      case 14:\n        return [1 - x, 1 - y - width * (pW / pH), height * (pH / pW), width * (pW / pH)];\n      case 15:\n        return [y, 1 - x, width * (pW / pH), height * (pH / pW)];\n      default:\n        return [x, y, width, height];\n    }\n  }\n  rotate() {\n    if (!this.parent) {\n      return;\n    }\n    this.parent.drawLayer.updateProperties(this._drawId, DrawingEditor._mergeSVGProperties({\n      bbox: this.#rotateBox()\n    }, this.#drawOutlines.updateRotation((this.parentRotation - this.rotation + 360) % 360)));\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    this.#updateBbox(this.#drawOutlines.updateParentDimensions(this.parentDimensions, this.parent.scale));\n  }\n  static onScaleChangingWhenDrawing() {}\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    const div = super.render();\n    div.classList.add(\"draw\");\n    const drawDiv = document.createElement(\"div\");\n    div.append(drawDiv);\n    drawDiv.setAttribute(\"aria-hidden\", \"true\");\n    drawDiv.className = \"internal\";\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(this.width * parentWidth, this.height * parentHeight);\n    this._uiManager.addShouldRescale(this);\n    this.disableEditing();\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return div;\n  }\n  static createDrawerInstance(_x, _y, _parentWidth, _parentHeight, _rotation) {\n    unreachable(\"Not implemented\");\n  }\n  static startDrawing(parent, uiManager, _isLTR, event) {\n    const {\n      target,\n      offsetX: x,\n      offsetY: y,\n      pointerId,\n      pointerType\n    } = event;\n    if (DrawingEditor.#currentPointerType && DrawingEditor.#currentPointerType !== pointerType) {\n      return;\n    }\n    const {\n      viewport: {\n        rotation\n      }\n    } = parent;\n    const {\n      width: parentWidth,\n      height: parentHeight\n    } = target.getBoundingClientRect();\n    const ac = DrawingEditor.#currentDrawingAC = new AbortController();\n    const signal = parent.combinedSignal(ac);\n    DrawingEditor.#currentPointerId ||= pointerId;\n    DrawingEditor.#currentPointerType ??= pointerType;\n    window.addEventListener(\"pointerup\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._endDraw(e);\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointercancel\", e => {\n      if (DrawingEditor.#currentPointerId === e.pointerId) {\n        this._currentParent.endDrawingSession();\n      } else {\n        DrawingEditor.#currentPointerIds?.delete(e.pointerId);\n      }\n    }, {\n      signal\n    });\n    window.addEventListener(\"pointerdown\", e => {\n      if (DrawingEditor.#currentPointerType !== e.pointerType) {\n        return;\n      }\n      (DrawingEditor.#currentPointerIds ||= new Set()).add(e.pointerId);\n      if (DrawingEditor.#currentDraw.isCancellable()) {\n        DrawingEditor.#currentDraw.removeLastElement();\n        if (DrawingEditor.#currentDraw.isEmpty()) {\n          this._currentParent.endDrawingSession(true);\n        } else {\n          this._endDraw(null);\n        }\n      }\n    }, {\n      capture: true,\n      passive: false,\n      signal\n    });\n    window.addEventListener(\"contextmenu\", noContextMenu, {\n      signal\n    });\n    target.addEventListener(\"pointermove\", this._drawMove.bind(this), {\n      signal\n    });\n    target.addEventListener(\"touchmove\", e => {\n      if (e.timeStamp === DrawingEditor.#currentMoveTimestamp) {\n        stopEvent(e);\n      }\n    }, {\n      signal\n    });\n    parent.toggleDrawing();\n    uiManager._editorUndoBar?.hide();\n    if (DrawingEditor.#currentDraw) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.startNew(x, y, parentWidth, parentHeight, rotation));\n      return;\n    }\n    uiManager.updateUIForDefaultProperties(this);\n    DrawingEditor.#currentDraw = this.createDrawerInstance(x, y, parentWidth, parentHeight, rotation);\n    DrawingEditor.#currentDrawingOptions = this.getDefaultDrawingOptions();\n    this._currentParent = parent;\n    ({\n      id: this._currentDrawId\n    } = parent.drawLayer.draw(this._mergeSVGProperties(DrawingEditor.#currentDrawingOptions.toSVGProperties(), DrawingEditor.#currentDraw.defaultSVGProperties), true, false));\n  }\n  static _drawMove(event) {\n    DrawingEditor.#currentMoveTimestamp = -1;\n    if (!DrawingEditor.#currentDraw) {\n      return;\n    }\n    const {\n      offsetX,\n      offsetY,\n      pointerId\n    } = event;\n    if (DrawingEditor.#currentPointerId !== pointerId) {\n      return;\n    }\n    if (DrawingEditor.#currentPointerIds?.size >= 1) {\n      this._endDraw(event);\n      return;\n    }\n    this._currentParent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.add(offsetX, offsetY));\n    DrawingEditor.#currentMoveTimestamp = event.timeStamp;\n    stopEvent(event);\n  }\n  static _cleanup(all) {\n    if (all) {\n      this._currentDrawId = -1;\n      this._currentParent = null;\n      DrawingEditor.#currentDraw = null;\n      DrawingEditor.#currentDrawingOptions = null;\n      DrawingEditor.#currentPointerType = null;\n      DrawingEditor.#currentMoveTimestamp = NaN;\n    }\n    if (DrawingEditor.#currentDrawingAC) {\n      DrawingEditor.#currentDrawingAC.abort();\n      DrawingEditor.#currentDrawingAC = null;\n      DrawingEditor.#currentPointerId = NaN;\n      DrawingEditor.#currentPointerIds = null;\n    }\n  }\n  static _endDraw(event) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    parent.toggleDrawing(true);\n    this._cleanup(false);\n    if (event?.target === parent.div) {\n      parent.drawLayer.updateProperties(this._currentDrawId, DrawingEditor.#currentDraw.end(event.offsetX, event.offsetY));\n    }\n    if (this.supportMultipleDrawings) {\n      const draw = DrawingEditor.#currentDraw;\n      const drawId = this._currentDrawId;\n      const lastElement = draw.getLastElement();\n      parent.addCommands({\n        cmd: () => {\n          parent.drawLayer.updateProperties(drawId, draw.setLastElement(lastElement));\n        },\n        undo: () => {\n          parent.drawLayer.updateProperties(drawId, draw.removeLastElement());\n        },\n        mustExec: false,\n        type: AnnotationEditorParamsType.DRAW_STEP\n      });\n      return;\n    }\n    this.endDrawing(false);\n  }\n  static endDrawing(isAborted) {\n    const parent = this._currentParent;\n    if (!parent) {\n      return null;\n    }\n    parent.toggleDrawing(true);\n    parent.cleanUndoStack(AnnotationEditorParamsType.DRAW_STEP);\n    if (!DrawingEditor.#currentDraw.isEmpty()) {\n      const {\n        pageDimensions: [pageWidth, pageHeight],\n        scale\n      } = parent;\n      const editor = parent.createAndAddNewEditor({\n        offsetX: 0,\n        offsetY: 0\n      }, false, {\n        drawId: this._currentDrawId,\n        drawOutlines: DrawingEditor.#currentDraw.getOutlines(pageWidth * scale, pageHeight * scale, scale, this._INNER_MARGIN),\n        drawingOptions: DrawingEditor.#currentDrawingOptions,\n        mustBeCommitted: !isAborted\n      });\n      this._cleanup(true);\n      return editor;\n    }\n    parent.drawLayer.remove(this._currentDrawId);\n    this._cleanup(true);\n    return null;\n  }\n  createDrawingOptions(_data) {}\n  static deserializeDraw(_pageX, _pageY, _pageWidth, _pageHeight, _innerWidth, _data) {\n    unreachable(\"Not implemented\");\n  }\n  static async deserialize(data, parent, uiManager) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight,\n        pageX,\n        pageY\n      }\n    } = parent.viewport;\n    const drawOutlines = this.deserializeDraw(pageX, pageY, pageWidth, pageHeight, this._INNER_MARGIN, data);\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.createDrawingOptions(data);\n    editor.#createDrawOutlines({\n      drawOutlines\n    });\n    editor.#addToDrawLayer();\n    editor.onScaleChanging();\n    editor.rotate();\n    return editor;\n  }\n  serializeDraw(isForCopying) {\n    const [pageX, pageY] = this.pageTranslation;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    return this.#drawOutlines.serialize([pageX, pageY, pageWidth, pageHeight], isForCopying);\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n  static canCreateNewEmptyEditor() {\n    return false;\n  }\n}\n\n;// ./src/display/editor/drawers/inkdraw.js\n\n\nclass InkDrawOutliner {\n  #last = new Float64Array(6);\n  #line;\n  #lines;\n  #rotation;\n  #thickness;\n  #points;\n  #lastSVGPath = \"\";\n  #lastIndex = 0;\n  #outlines = new InkDrawOutline();\n  #parentWidth;\n  #parentHeight;\n  constructor(x, y, parentWidth, parentHeight, rotation, thickness) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    this.#lines = [{\n      line,\n      points: this.#points\n    }];\n    this.#last.set(line, 0);\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      this.#thickness = value;\n    }\n  }\n  #normalizePoint(x, y) {\n    return Outline._normalizePoint(x, y, this.#parentWidth, this.#parentHeight, this.#rotation);\n  }\n  isEmpty() {\n    return !this.#lines || this.#lines.length === 0;\n  }\n  isCancellable() {\n    return this.#points.length <= 10;\n  }\n  add(x, y) {\n    [x, y] = this.#normalizePoint(x, y);\n    const [x1, y1, x2, y2] = this.#last.subarray(2, 6);\n    const diffX = x - x2;\n    const diffY = y - y2;\n    const d = Math.hypot(this.#parentWidth * diffX, this.#parentHeight * diffY);\n    if (d <= 2) {\n      return null;\n    }\n    this.#points.push(x, y);\n    if (isNaN(x1)) {\n      this.#last.set([x2, y2, x, y], 2);\n      this.#line.push(NaN, NaN, NaN, NaN, x, y);\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    if (isNaN(this.#last[0])) {\n      this.#line.splice(6, 6);\n    }\n    this.#last.set([x1, y1, x2, y2, x, y], 0);\n    this.#line.push(...Outline.createBezierPoints(x1, y1, x2, y2, x, y));\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  end(x, y) {\n    const change = this.add(x, y);\n    if (change) {\n      return change;\n    }\n    if (this.#points.length === 2) {\n      return {\n        path: {\n          d: this.toSVGPath()\n        }\n      };\n    }\n    return null;\n  }\n  startNew(x, y, parentWidth, parentHeight, rotation) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#rotation = rotation;\n    [x, y] = this.#normalizePoint(x, y);\n    const line = this.#line = [NaN, NaN, NaN, NaN, x, y];\n    this.#points = [x, y];\n    const last = this.#lines.at(-1);\n    if (last) {\n      last.line = new Float32Array(last.line);\n      last.points = new Float32Array(last.points);\n    }\n    this.#lines.push({\n      line,\n      points: this.#points\n    });\n    this.#last.set(line, 0);\n    this.#lastIndex = 0;\n    this.toSVGPath();\n    return null;\n  }\n  getLastElement() {\n    return this.#lines.at(-1);\n  }\n  setLastElement(element) {\n    if (!this.#lines) {\n      return this.#outlines.setLastElement(element);\n    }\n    this.#lines.push(element);\n    this.#line = element.line;\n    this.#points = element.points;\n    this.#lastIndex = 0;\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    if (!this.#lines) {\n      return this.#outlines.removeLastElement();\n    }\n    this.#lines.pop();\n    this.#lastSVGPath = \"\";\n    for (let i = 0, ii = this.#lines.length; i < ii; i++) {\n      const {\n        line,\n        points\n      } = this.#lines[i];\n      this.#line = line;\n      this.#points = points;\n      this.#lastIndex = 0;\n      this.toSVGPath();\n    }\n    return {\n      path: {\n        d: this.#lastSVGPath\n      }\n    };\n  }\n  toSVGPath() {\n    const firstX = Outline.svgRound(this.#line[4]);\n    const firstY = Outline.svgRound(this.#line[5]);\n    if (this.#points.length === 2) {\n      this.#lastSVGPath = `${this.#lastSVGPath} M ${firstX} ${firstY} Z`;\n      return this.#lastSVGPath;\n    }\n    if (this.#points.length <= 6) {\n      const i = this.#lastSVGPath.lastIndexOf(\"M\");\n      this.#lastSVGPath = `${this.#lastSVGPath.slice(0, i)} M ${firstX} ${firstY}`;\n      this.#lastIndex = 6;\n    }\n    if (this.#points.length === 4) {\n      const secondX = Outline.svgRound(this.#line[10]);\n      const secondY = Outline.svgRound(this.#line[11]);\n      this.#lastSVGPath = `${this.#lastSVGPath} L ${secondX} ${secondY}`;\n      this.#lastIndex = 12;\n      return this.#lastSVGPath;\n    }\n    const buffer = [];\n    if (this.#lastIndex === 0) {\n      buffer.push(`M ${firstX} ${firstY}`);\n      this.#lastIndex = 6;\n    }\n    for (let i = this.#lastIndex, ii = this.#line.length; i < ii; i += 6) {\n      const [c1x, c1y, c2x, c2y, x, y] = this.#line.slice(i, i + 6).map(Outline.svgRound);\n      buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n    }\n    this.#lastSVGPath += buffer.join(\" \");\n    this.#lastIndex = this.#line.length;\n    return this.#lastSVGPath;\n  }\n  getOutlines(parentWidth, parentHeight, scale, innerMargin) {\n    const last = this.#lines.at(-1);\n    last.line = new Float32Array(last.line);\n    last.points = new Float32Array(last.points);\n    this.#outlines.build(this.#lines, parentWidth, parentHeight, scale, this.#rotation, this.#thickness, innerMargin);\n    this.#last = null;\n    this.#line = null;\n    this.#lines = null;\n    this.#lastSVGPath = null;\n    return this.#outlines;\n  }\n  get defaultSVGProperties() {\n    return {\n      root: {\n        viewBox: \"0 0 10000 10000\"\n      },\n      rootClass: {\n        draw: true\n      },\n      bbox: [0, 0, 1, 1]\n    };\n  }\n}\nclass InkDrawOutline extends Outline {\n  #bbox;\n  #currentRotation = 0;\n  #innerMargin;\n  #lines;\n  #parentWidth;\n  #parentHeight;\n  #parentScale;\n  #rotation;\n  #thickness;\n  build(lines, parentWidth, parentHeight, parentScale, rotation, thickness, innerMargin) {\n    this.#parentWidth = parentWidth;\n    this.#parentHeight = parentHeight;\n    this.#parentScale = parentScale;\n    this.#rotation = rotation;\n    this.#thickness = thickness;\n    this.#innerMargin = innerMargin ?? 0;\n    this.#lines = lines;\n    this.#computeBbox();\n  }\n  get thickness() {\n    return this.#thickness;\n  }\n  setLastElement(element) {\n    this.#lines.push(element);\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  removeLastElement() {\n    this.#lines.pop();\n    return {\n      path: {\n        d: this.toSVGPath()\n      }\n    };\n  }\n  toSVGPath() {\n    const buffer = [];\n    for (const {\n      line\n    } of this.#lines) {\n      buffer.push(`M${Outline.svgRound(line[4])} ${Outline.svgRound(line[5])}`);\n      if (line.length === 6) {\n        buffer.push(\"Z\");\n        continue;\n      }\n      if (line.length === 12 && isNaN(line[6])) {\n        buffer.push(`L${Outline.svgRound(line[10])} ${Outline.svgRound(line[11])}`);\n        continue;\n      }\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6).map(Outline.svgRound);\n        buffer.push(`C${c1x} ${c1y} ${c2x} ${c2y} ${x} ${y}`);\n      }\n    }\n    return buffer.join(\"\");\n  }\n  serialize([pageX, pageY, pageWidth, pageHeight], isForCopying) {\n    const serializedLines = [];\n    const serializedPoints = [];\n    const [x, y, width, height] = this.#getBBoxWithNoMargin();\n    let tx, ty, sx, sy, x1, y1, x2, y2, rescaleFn;\n    switch (this.#rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = pageX;\n        ty = pageY + pageHeight;\n        sx = pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + x * pageWidth;\n        y1 = pageY + (1 - y - height) * pageHeight;\n        x2 = pageX + (x + width) * pageWidth;\n        y2 = pageY + (1 - y) * pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX;\n        ty = pageY;\n        sx = pageWidth;\n        sy = pageHeight;\n        x1 = pageX + y * pageWidth;\n        y1 = pageY + x * pageHeight;\n        x2 = pageX + (y + height) * pageWidth;\n        y2 = pageY + (x + width) * pageHeight;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX + pageWidth;\n        ty = pageY;\n        sx = -pageWidth;\n        sy = pageHeight;\n        x1 = pageX + (1 - x - width) * pageWidth;\n        y1 = pageY + y * pageHeight;\n        x2 = pageX + (1 - x) * pageWidth;\n        y2 = pageY + (y + height) * pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageX + pageWidth;\n        ty = pageY + pageHeight;\n        sx = -pageWidth;\n        sy = -pageHeight;\n        x1 = pageX + (1 - y - height) * pageWidth;\n        y1 = pageY + (1 - x - width) * pageHeight;\n        x2 = pageX + (1 - y) * pageWidth;\n        y2 = pageY + (1 - x) * pageHeight;\n        break;\n    }\n    for (const {\n      line,\n      points\n    } of this.#lines) {\n      serializedLines.push(rescaleFn(line, tx, ty, sx, sy, isForCopying ? new Array(line.length) : null));\n      serializedPoints.push(rescaleFn(points, tx, ty, sx, sy, isForCopying ? new Array(points.length) : null));\n    }\n    return {\n      lines: serializedLines,\n      points: serializedPoints,\n      rect: [x1, y1, x2, y2]\n    };\n  }\n  static deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, {\n    paths: {\n      lines,\n      points\n    },\n    rotation,\n    thickness\n  }) {\n    const newLines = [];\n    let tx, ty, sx, sy, rescaleFn;\n    switch (rotation) {\n      case 0:\n        rescaleFn = Outline._rescale;\n        tx = -pageX / pageWidth;\n        ty = pageY / pageHeight + 1;\n        sx = 1 / pageWidth;\n        sy = -1 / pageHeight;\n        break;\n      case 90:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = -pageY / pageHeight;\n        ty = -pageX / pageWidth;\n        sx = 1 / pageHeight;\n        sy = 1 / pageWidth;\n        break;\n      case 180:\n        rescaleFn = Outline._rescale;\n        tx = pageX / pageWidth + 1;\n        ty = -pageY / pageHeight;\n        sx = -1 / pageWidth;\n        sy = 1 / pageHeight;\n        break;\n      case 270:\n        rescaleFn = Outline._rescaleAndSwap;\n        tx = pageY / pageHeight + 1;\n        ty = pageX / pageWidth + 1;\n        sx = -1 / pageHeight;\n        sy = -1 / pageWidth;\n        break;\n    }\n    if (!lines) {\n      lines = [];\n      for (const point of points) {\n        const len = point.length;\n        if (len === 2) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1]]));\n          continue;\n        }\n        if (len === 4) {\n          lines.push(new Float32Array([NaN, NaN, NaN, NaN, point[0], point[1], NaN, NaN, NaN, NaN, point[2], point[3]]));\n          continue;\n        }\n        const line = new Float32Array(3 * (len - 2));\n        lines.push(line);\n        let [x1, y1, x2, y2] = point.subarray(0, 4);\n        line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n        for (let i = 4; i < len; i += 2) {\n          const x = point[i];\n          const y = point[i + 1];\n          line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n          [x1, y1, x2, y2] = [x2, y2, x, y];\n        }\n      }\n    }\n    for (let i = 0, ii = lines.length; i < ii; i++) {\n      newLines.push({\n        line: rescaleFn(lines[i].map(x => x ?? NaN), tx, ty, sx, sy),\n        points: rescaleFn(points[i].map(x => x ?? NaN), tx, ty, sx, sy)\n      });\n    }\n    const outlines = new this.prototype.constructor();\n    outlines.build(newLines, pageWidth, pageHeight, 1, rotation, thickness, innerMargin);\n    return outlines;\n  }\n  #getMarginComponents(thickness = this.#thickness) {\n    const margin = this.#innerMargin + thickness / 2 * this.#parentScale;\n    return this.#rotation % 180 === 0 ? [margin / this.#parentWidth, margin / this.#parentHeight] : [margin / this.#parentHeight, margin / this.#parentWidth];\n  }\n  #getBBoxWithNoMargin() {\n    const [x, y, width, height] = this.#bbox;\n    const [marginX, marginY] = this.#getMarginComponents(0);\n    return [x + marginX, y + marginY, width - 2 * marginX, height - 2 * marginY];\n  }\n  #computeBbox() {\n    const bbox = this.#bbox = new Float32Array([Infinity, Infinity, -Infinity, -Infinity]);\n    for (const {\n      line\n    } of this.#lines) {\n      if (line.length <= 12) {\n        for (let i = 4, ii = line.length; i < ii; i += 6) {\n          Util.pointBoundingBox(line[i], line[i + 1], bbox);\n        }\n        continue;\n      }\n      let lastX = line[4],\n        lastY = line[5];\n      for (let i = 6, ii = line.length; i < ii; i += 6) {\n        const [c1x, c1y, c2x, c2y, x, y] = line.subarray(i, i + 6);\n        Util.bezierBoundingBox(lastX, lastY, c1x, c1y, c2x, c2y, x, y, bbox);\n        lastX = x;\n        lastY = y;\n      }\n    }\n    const [marginX, marginY] = this.#getMarginComponents();\n    bbox[0] = MathClamp(bbox[0] - marginX, 0, 1);\n    bbox[1] = MathClamp(bbox[1] - marginY, 0, 1);\n    bbox[2] = MathClamp(bbox[2] + marginX, 0, 1);\n    bbox[3] = MathClamp(bbox[3] + marginY, 0, 1);\n    bbox[2] -= bbox[0];\n    bbox[3] -= bbox[1];\n  }\n  get box() {\n    return this.#bbox;\n  }\n  updateProperty(name, value) {\n    if (name === \"stroke-width\") {\n      return this.#updateThickness(value);\n    }\n    return null;\n  }\n  #updateThickness(thickness) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#thickness = thickness;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const [diffMarginX, diffMarginY] = [newMarginX - oldMarginX, newMarginY - oldMarginY];\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateParentDimensions([width, height], scale) {\n    const [oldMarginX, oldMarginY] = this.#getMarginComponents();\n    this.#parentWidth = width;\n    this.#parentHeight = height;\n    this.#parentScale = scale;\n    const [newMarginX, newMarginY] = this.#getMarginComponents();\n    const diffMarginX = newMarginX - oldMarginX;\n    const diffMarginY = newMarginY - oldMarginY;\n    const bbox = this.#bbox;\n    bbox[0] -= diffMarginX;\n    bbox[1] -= diffMarginY;\n    bbox[2] += 2 * diffMarginX;\n    bbox[3] += 2 * diffMarginY;\n    return bbox;\n  }\n  updateRotation(rotation) {\n    this.#currentRotation = rotation;\n    return {\n      path: {\n        transform: this.rotationTransform\n      }\n    };\n  }\n  get viewBox() {\n    return this.#bbox.map(Outline.svgRound).join(\" \");\n  }\n  get defaultProperties() {\n    const [x, y] = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`\n      }\n    };\n  }\n  get rotationTransform() {\n    const [,, width, height] = this.#bbox;\n    let a = 0,\n      b = 0,\n      c = 0,\n      d = 0,\n      e = 0,\n      f = 0;\n    switch (this.#currentRotation) {\n      case 90:\n        b = height / width;\n        c = -width / height;\n        e = width;\n        break;\n      case 180:\n        a = -1;\n        d = -1;\n        e = width;\n        f = height;\n        break;\n      case 270:\n        b = -height / width;\n        c = width / height;\n        f = height;\n        break;\n      default:\n        return \"\";\n    }\n    return `matrix(${a} ${b} ${c} ${d} ${Outline.svgRound(e)} ${Outline.svgRound(f)})`;\n  }\n  getPathResizingSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const [x, y, width, height] = this.#bbox;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      return {\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: `${this.rotationTransform} translate(${tx} ${ty})`\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const s2x = width / newWidth;\n    const s2y = height / newHeight;\n    return {\n      path: {\n        \"transform-origin\": `${Outline.svgRound(x)} ${Outline.svgRound(y)}`,\n        transform: `${this.rotationTransform} scale(${s2x} ${s2y}) ` + `translate(${Outline.svgRound(marginX)} ${Outline.svgRound(marginY)}) scale(${s1x} ${s1y}) ` + `translate(${Outline.svgRound(-marginX)} ${Outline.svgRound(-marginY)})`\n      }\n    };\n  }\n  getPathResizedSVGProperties([newX, newY, newWidth, newHeight]) {\n    const [marginX, marginY] = this.#getMarginComponents();\n    const bbox = this.#bbox;\n    const [x, y, width, height] = bbox;\n    bbox[0] = newX;\n    bbox[1] = newY;\n    bbox[2] = newWidth;\n    bbox[3] = newHeight;\n    if (Math.abs(width - marginX) <= Outline.PRECISION || Math.abs(height - marginY) <= Outline.PRECISION) {\n      const tx = newX + newWidth / 2 - (x + width / 2);\n      const ty = newY + newHeight / 2 - (y + height / 2);\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n      return {\n        root: {\n          viewBox: this.viewBox\n        },\n        path: {\n          \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n          transform: this.rotationTransform || null,\n          d: this.toSVGPath()\n        }\n      };\n    }\n    const s1x = (newWidth - 2 * marginX) / (width - 2 * marginX);\n    const s1y = (newHeight - 2 * marginY) / (height - 2 * marginY);\n    const tx = -s1x * (x + marginX) + newX + marginX;\n    const ty = -s1y * (y + marginY) + newY + marginY;\n    if (s1x !== 1 || s1y !== 1 || tx !== 0 || ty !== 0) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, s1x, s1y, line);\n        Outline._rescale(points, tx, ty, s1x, s1y, points);\n      }\n    }\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`,\n        transform: this.rotationTransform || null,\n        d: this.toSVGPath()\n      }\n    };\n  }\n  getPathTranslatedSVGProperties([newX, newY], parentDimensions) {\n    const [newParentWidth, newParentHeight] = parentDimensions;\n    const bbox = this.#bbox;\n    const tx = newX - bbox[0];\n    const ty = newY - bbox[1];\n    if (this.#parentWidth === newParentWidth && this.#parentHeight === newParentHeight) {\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._translate(line, tx, ty, line);\n        Outline._translate(points, tx, ty, points);\n      }\n    } else {\n      const sx = this.#parentWidth / newParentWidth;\n      const sy = this.#parentHeight / newParentHeight;\n      this.#parentWidth = newParentWidth;\n      this.#parentHeight = newParentHeight;\n      for (const {\n        line,\n        points\n      } of this.#lines) {\n        Outline._rescale(line, tx, ty, sx, sy, line);\n        Outline._rescale(points, tx, ty, sx, sy, points);\n      }\n      bbox[2] *= sx;\n      bbox[3] *= sy;\n    }\n    bbox[0] = newX;\n    bbox[1] = newY;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(newX)} ${Outline.svgRound(newY)}`\n      }\n    };\n  }\n  get defaultSVGProperties() {\n    const bbox = this.#bbox;\n    return {\n      root: {\n        viewBox: this.viewBox\n      },\n      rootClass: {\n        draw: true\n      },\n      path: {\n        d: this.toSVGPath(),\n        \"transform-origin\": `${Outline.svgRound(bbox[0])} ${Outline.svgRound(bbox[1])}`,\n        transform: this.rotationTransform || null\n      },\n      bbox\n    };\n  }\n}\n\n;// ./src/display/editor/ink.js\n\n\n\n\n\nclass InkDrawingOptions extends DrawingOptions {\n  constructor(viewerParameters) {\n    super();\n    this._viewParameters = viewerParameters;\n    super.updateProperties({\n      fill: \"none\",\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-opacity\": 1,\n      \"stroke-width\": 1,\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      \"stroke-miterlimit\": 10\n    });\n  }\n  updateSVGProperty(name, value) {\n    if (name === \"stroke-width\") {\n      value ??= this[\"stroke-width\"];\n      value *= this._viewParameters.realScale;\n    }\n    super.updateSVGProperty(name, value);\n  }\n  clone() {\n    const clone = new InkDrawingOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass InkEditor extends DrawingEditor {\n  static _type = \"ink\";\n  static _editorType = AnnotationEditorType.INK;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"inkEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.defaultL10nId = \"pdfjs-editor-ink-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new InkDrawingOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return true;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map([[AnnotationEditorParamsType.INK_THICKNESS, \"stroke-width\"], [AnnotationEditorParamsType.INK_COLOR, \"stroke\"], [AnnotationEditorParamsType.INK_OPACITY, \"stroke-opacity\"]]));\n  }\n  static createDrawerInstance(x, y, parentWidth, parentHeight, rotation) {\n    return new InkDrawOutliner(x, y, parentWidth, parentHeight, rotation, this._defaultDrawingOptions[\"stroke-width\"]);\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    if (data instanceof InkAnnotationElement) {\n      const {\n        data: {\n          inkLists,\n          rect,\n          rotation,\n          id,\n          color,\n          opacity,\n          borderStyle: {\n            rawWidth: thickness\n          },\n          popupRef\n        },\n        parent: {\n          page: {\n            pageNumber\n          }\n        }\n      } = data;\n      initialData = data = {\n        annotationType: AnnotationEditorType.INK,\n        color: Array.from(color),\n        thickness,\n        opacity,\n        paths: {\n          points: inkLists\n        },\n        boxes: null,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor._initialData = initialData;\n    return editor;\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    super.onScaleChanging();\n    const {\n      _drawId,\n      _drawingOptions,\n      parent\n    } = this;\n    _drawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(_drawId, _drawingOptions.toSVGProperties());\n  }\n  static onScaleChangingWhenDrawing() {\n    const parent = this._currentParent;\n    if (!parent) {\n      return;\n    }\n    super.onScaleChangingWhenDrawing();\n    this._defaultDrawingOptions.updateSVGProperty(\"stroke-width\");\n    parent.drawLayer.updateProperties(this._currentDrawId, this._defaultDrawingOptions.toSVGProperties());\n  }\n  createDrawingOptions({\n    color,\n    thickness,\n    opacity\n  }) {\n    this._drawingOptions = InkEditor.getDefaultDrawingOptions({\n      stroke: Util.makeHexColor(...color),\n      \"stroke-width\": thickness,\n      \"stroke-opacity\": opacity\n    });\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        stroke,\n        \"stroke-opacity\": opacity,\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.INK,\n      color: AnnotationEditor._colorManager.convert(stroke),\n      opacity,\n      thickness,\n      paths: {\n        lines,\n        points\n      },\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.isCopy = true;\n      return serialized;\n    }\n    if (this.annotationElementId && !this.#hasElementChanged(serialized)) {\n      return null;\n    }\n    serialized.id = this.annotationElementId;\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      color,\n      thickness,\n      opacity,\n      pageIndex\n    } = this._initialData;\n    return this._hasBeenMoved || this._hasBeenResized || serialized.color.some((c, i) => c !== color[i]) || serialized.thickness !== thickness || serialized.opacity !== opacity || serialized.pageIndex !== pageIndex;\n  }\n  renderAnnotationElement(annotation) {\n    const {\n      points,\n      rect\n    } = this.serializeDraw(false);\n    annotation.updateEdited({\n      rect,\n      thickness: this._drawingOptions[\"stroke-width\"],\n      points\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/drawers/contour.js\n\nclass ContourDrawOutline extends InkDrawOutline {\n  toSVGPath() {\n    let path = super.toSVGPath();\n    if (!path.endsWith(\"Z\")) {\n      path += \"Z\";\n    }\n    return path;\n  }\n}\n\n;// ./src/display/editor/drawers/signaturedraw.js\n\n\n\n\nconst BASE_HEADER_LENGTH = 8;\nconst POINTS_PROPERTIES_NUMBER = 3;\nclass SignatureExtractor {\n  static #PARAMETERS = {\n    maxDim: 512,\n    sigmaSFactor: 0.02,\n    sigmaR: 25,\n    kernelSize: 16\n  };\n  static #neighborIndexToId(i0, j0, i, j) {\n    i -= i0;\n    j -= j0;\n    if (i === 0) {\n      return j > 0 ? 0 : 4;\n    }\n    if (i === 1) {\n      return j + 6;\n    }\n    return 2 - j;\n  }\n  static #neighborIdToIndex = new Int32Array([0, 1, -1, 1, -1, 0, -1, -1, 0, -1, 1, -1, 1, 0, 1, 1]);\n  static #clockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (-k + id - offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #counterClockwiseNonZero(buf, width, i0, j0, i, j, offset) {\n    const id = this.#neighborIndexToId(i0, j0, i, j);\n    for (let k = 0; k < 8; k++) {\n      const kk = (k + id + offset + 16) % 8;\n      const shiftI = this.#neighborIdToIndex[2 * kk];\n      const shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n      if (buf[(i0 + shiftI) * width + (j0 + shiftJ)] !== 0) {\n        return kk;\n      }\n    }\n    return -1;\n  }\n  static #findContours(buf, width, height, threshold) {\n    const N = buf.length;\n    const types = new Int32Array(N);\n    for (let i = 0; i < N; i++) {\n      types[i] = buf[i] <= threshold ? 1 : 0;\n    }\n    for (let i = 1; i < height - 1; i++) {\n      types[i * width] = types[i * width + width - 1] = 0;\n    }\n    for (let i = 0; i < width; i++) {\n      types[i] = types[width * height - 1 - i] = 0;\n    }\n    let nbd = 1;\n    let lnbd;\n    const contours = [];\n    for (let i = 1; i < height - 1; i++) {\n      lnbd = 1;\n      for (let j = 1; j < width - 1; j++) {\n        const ij = i * width + j;\n        const pix = types[ij];\n        if (pix === 0) {\n          continue;\n        }\n        let i2 = i;\n        let j2 = j;\n        if (pix === 1 && types[ij - 1] === 0) {\n          nbd += 1;\n          j2 -= 1;\n        } else if (pix >= 1 && types[ij + 1] === 0) {\n          nbd += 1;\n          j2 += 1;\n          if (pix > 1) {\n            lnbd = pix;\n          }\n        } else {\n          if (pix !== 1) {\n            lnbd = Math.abs(pix);\n          }\n          continue;\n        }\n        const points = [j, i];\n        const isHole = j2 === j + 1;\n        const contour = {\n          isHole,\n          points,\n          id: nbd,\n          parent: 0\n        };\n        contours.push(contour);\n        let contour0;\n        for (const c of contours) {\n          if (c.id === lnbd) {\n            contour0 = c;\n            break;\n          }\n        }\n        if (!contour0) {\n          contour.parent = isHole ? lnbd : 0;\n        } else if (contour0.isHole) {\n          contour.parent = isHole ? contour0.parent : lnbd;\n        } else {\n          contour.parent = isHole ? lnbd : contour0.parent;\n        }\n        const k = this.#clockwiseNonZero(types, width, i, j, i2, j2, 0);\n        if (k === -1) {\n          types[ij] = -nbd;\n          if (types[ij] !== 1) {\n            lnbd = Math.abs(types[ij]);\n          }\n          continue;\n        }\n        let shiftI = this.#neighborIdToIndex[2 * k];\n        let shiftJ = this.#neighborIdToIndex[2 * k + 1];\n        const i1 = i + shiftI;\n        const j1 = j + shiftJ;\n        i2 = i1;\n        j2 = j1;\n        let i3 = i;\n        let j3 = j;\n        while (true) {\n          const kk = this.#counterClockwiseNonZero(types, width, i3, j3, i2, j2, 1);\n          shiftI = this.#neighborIdToIndex[2 * kk];\n          shiftJ = this.#neighborIdToIndex[2 * kk + 1];\n          const i4 = i3 + shiftI;\n          const j4 = j3 + shiftJ;\n          points.push(j4, i4);\n          const ij3 = i3 * width + j3;\n          if (types[ij3 + 1] === 0) {\n            types[ij3] = -nbd;\n          } else if (types[ij3] === 1) {\n            types[ij3] = nbd;\n          }\n          if (i4 === i && j4 === j && i3 === i1 && j3 === j1) {\n            if (types[ij] !== 1) {\n              lnbd = Math.abs(types[ij]);\n            }\n            break;\n          } else {\n            i2 = i3;\n            j2 = j3;\n            i3 = i4;\n            j3 = j4;\n          }\n        }\n      }\n    }\n    return contours;\n  }\n  static #douglasPeuckerHelper(points, start, end, output) {\n    if (end - start <= 4) {\n      for (let i = start; i < end - 2; i += 2) {\n        output.push(points[i], points[i + 1]);\n      }\n      return;\n    }\n    const ax = points[start];\n    const ay = points[start + 1];\n    const abx = points[end - 4] - ax;\n    const aby = points[end - 3] - ay;\n    const dist = Math.hypot(abx, aby);\n    const nabx = abx / dist;\n    const naby = aby / dist;\n    const aa = nabx * ay - naby * ax;\n    const m = aby / abx;\n    const invS = 1 / dist;\n    const phi = Math.atan(m);\n    const cosPhi = Math.cos(phi);\n    const sinPhi = Math.sin(phi);\n    const tmax = invS * (Math.abs(cosPhi) + Math.abs(sinPhi));\n    const poly = invS * (1 - tmax + tmax ** 2);\n    const partialPhi = Math.max(Math.atan(Math.abs(sinPhi + cosPhi) * poly), Math.atan(Math.abs(sinPhi - cosPhi) * poly));\n    let dmax = 0;\n    let index = start;\n    for (let i = start + 2; i < end - 2; i += 2) {\n      const d = Math.abs(aa - nabx * points[i + 1] + naby * points[i]);\n      if (d > dmax) {\n        index = i;\n        dmax = d;\n      }\n    }\n    if (dmax > (dist * partialPhi) ** 2) {\n      this.#douglasPeuckerHelper(points, start, index + 2, output);\n      this.#douglasPeuckerHelper(points, index, end, output);\n    } else {\n      output.push(ax, ay);\n    }\n  }\n  static #douglasPeucker(points) {\n    const output = [];\n    const len = points.length;\n    this.#douglasPeuckerHelper(points, 0, len, output);\n    output.push(points[len - 2], points[len - 1]);\n    return output.length <= 4 ? null : output;\n  }\n  static #bilateralFilter(buf, width, height, sigmaS, sigmaR, kernelSize) {\n    const kernel = new Float32Array(kernelSize ** 2);\n    const sigmaS2 = -2 * sigmaS ** 2;\n    const halfSize = kernelSize >> 1;\n    for (let i = 0; i < kernelSize; i++) {\n      const x = (i - halfSize) ** 2;\n      for (let j = 0; j < kernelSize; j++) {\n        kernel[i * kernelSize + j] = Math.exp((x + (j - halfSize) ** 2) / sigmaS2);\n      }\n    }\n    const rangeValues = new Float32Array(256);\n    const sigmaR2 = -2 * sigmaR ** 2;\n    for (let i = 0; i < 256; i++) {\n      rangeValues[i] = Math.exp(i ** 2 / sigmaR2);\n    }\n    const N = buf.length;\n    const out = new Uint8Array(N);\n    const histogram = new Uint32Array(256);\n    for (let i = 0; i < height; i++) {\n      for (let j = 0; j < width; j++) {\n        const ij = i * width + j;\n        const center = buf[ij];\n        let sum = 0;\n        let norm = 0;\n        for (let k = 0; k < kernelSize; k++) {\n          const y = i + k - halfSize;\n          if (y < 0 || y >= height) {\n            continue;\n          }\n          for (let l = 0; l < kernelSize; l++) {\n            const x = j + l - halfSize;\n            if (x < 0 || x >= width) {\n              continue;\n            }\n            const neighbour = buf[y * width + x];\n            const w = kernel[k * kernelSize + l] * rangeValues[Math.abs(neighbour - center)];\n            sum += neighbour * w;\n            norm += w;\n          }\n        }\n        const pix = out[ij] = Math.round(sum / norm);\n        histogram[pix]++;\n      }\n    }\n    return [out, histogram];\n  }\n  static #getHistogram(buf) {\n    const histogram = new Uint32Array(256);\n    for (const g of buf) {\n      histogram[g]++;\n    }\n    return histogram;\n  }\n  static #toUint8(buf) {\n    const N = buf.length;\n    const out = new Uint8ClampedArray(N >> 2);\n    let max = -Infinity;\n    let min = Infinity;\n    for (let i = 0, ii = out.length; i < ii; i++) {\n      const A = buf[(i << 2) + 3];\n      if (A === 0) {\n        max = out[i] = 0xff;\n        continue;\n      }\n      const pix = out[i] = buf[i << 2];\n      if (pix > max) {\n        max = pix;\n      }\n      if (pix < min) {\n        min = pix;\n      }\n    }\n    const ratio = 255 / (max - min);\n    for (let i = 0; i < N; i++) {\n      out[i] = (out[i] - min) * ratio;\n    }\n    return out;\n  }\n  static #guessThreshold(histogram) {\n    let i;\n    let M = -Infinity;\n    let L = -Infinity;\n    const min = histogram.findIndex(v => v !== 0);\n    let pos = min;\n    let spos = min;\n    for (i = min; i < 256; i++) {\n      const v = histogram[i];\n      if (v > M) {\n        if (i - pos > L) {\n          L = i - pos;\n          spos = i - 1;\n        }\n        M = v;\n        pos = i;\n      }\n    }\n    for (i = spos - 1; i >= 0; i--) {\n      if (histogram[i] > histogram[i + 1]) {\n        break;\n      }\n    }\n    return i;\n  }\n  static #getGrayPixels(bitmap) {\n    const originalBitmap = bitmap;\n    const {\n      width,\n      height\n    } = bitmap;\n    const {\n      maxDim\n    } = this.#PARAMETERS;\n    let newWidth = width;\n    let newHeight = height;\n    if (width > maxDim || height > maxDim) {\n      let prevWidth = width;\n      let prevHeight = height;\n      let steps = Math.log2(Math.max(width, height) / maxDim);\n      const isteps = Math.floor(steps);\n      steps = steps === isteps ? isteps - 1 : isteps;\n      for (let i = 0; i < steps; i++) {\n        newWidth = Math.ceil(prevWidth / 2);\n        newHeight = Math.ceil(prevHeight / 2);\n        const offscreen = new OffscreenCanvas(newWidth, newHeight);\n        const ctx = offscreen.getContext(\"2d\");\n        ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n        prevWidth = newWidth;\n        prevHeight = newHeight;\n        if (bitmap !== originalBitmap) {\n          bitmap.close();\n        }\n        bitmap = offscreen.transferToImageBitmap();\n      }\n      const ratio = Math.min(maxDim / newWidth, maxDim / newHeight);\n      newWidth = Math.round(newWidth * ratio);\n      newHeight = Math.round(newHeight * ratio);\n    }\n    const offscreen = new OffscreenCanvas(newWidth, newHeight);\n    const ctx = offscreen.getContext(\"2d\", {\n      willReadFrequently: true\n    });\n    ctx.filter = \"grayscale(1)\";\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, newWidth, newHeight);\n    const grayImage = ctx.getImageData(0, 0, newWidth, newHeight).data;\n    const uint8Buf = this.#toUint8(grayImage);\n    return [uint8Buf, newWidth, newHeight];\n  }\n  static extractContoursFromText(text, {\n    fontFamily,\n    fontStyle,\n    fontWeight\n  }, pageWidth, pageHeight, rotation, innerMargin) {\n    let canvas = new OffscreenCanvas(1, 1);\n    let ctx = canvas.getContext(\"2d\", {\n      alpha: false\n    });\n    const fontSize = 200;\n    const font = ctx.font = `${fontStyle} ${fontWeight} ${fontSize}px ${fontFamily}`;\n    const {\n      actualBoundingBoxLeft,\n      actualBoundingBoxRight,\n      actualBoundingBoxAscent,\n      actualBoundingBoxDescent,\n      fontBoundingBoxAscent,\n      fontBoundingBoxDescent,\n      width\n    } = ctx.measureText(text);\n    const SCALE = 1.5;\n    const canvasWidth = Math.ceil(Math.max(Math.abs(actualBoundingBoxLeft) + Math.abs(actualBoundingBoxRight) || 0, width) * SCALE);\n    const canvasHeight = Math.ceil(Math.max(Math.abs(actualBoundingBoxAscent) + Math.abs(actualBoundingBoxDescent) || fontSize, Math.abs(fontBoundingBoxAscent) + Math.abs(fontBoundingBoxDescent) || fontSize) * SCALE);\n    canvas = new OffscreenCanvas(canvasWidth, canvasHeight);\n    ctx = canvas.getContext(\"2d\", {\n      alpha: true,\n      willReadFrequently: true\n    });\n    ctx.font = font;\n    ctx.filter = \"grayscale(1)\";\n    ctx.fillStyle = \"white\";\n    ctx.fillRect(0, 0, canvasWidth, canvasHeight);\n    ctx.fillStyle = \"black\";\n    ctx.fillText(text, canvasWidth * (SCALE - 1) / 2, canvasHeight * (3 - SCALE) / 2);\n    const uint8Buf = this.#toUint8(ctx.getImageData(0, 0, canvasWidth, canvasHeight).data);\n    const histogram = this.#getHistogram(uint8Buf);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(uint8Buf, canvasWidth, canvasHeight, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width: canvasWidth,\n        height: canvasHeight\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static process(bitmap, pageWidth, pageHeight, rotation, innerMargin) {\n    const [uint8Buf, width, height] = this.#getGrayPixels(bitmap);\n    const [buffer, histogram] = this.#bilateralFilter(uint8Buf, width, height, Math.hypot(width, height) * this.#PARAMETERS.sigmaSFactor, this.#PARAMETERS.sigmaR, this.#PARAMETERS.kernelSize);\n    const threshold = this.#guessThreshold(histogram);\n    const contourList = this.#findContours(buffer, width, height, threshold);\n    return this.processDrawnLines({\n      lines: {\n        curves: contourList,\n        width,\n        height\n      },\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin,\n      mustSmooth: true,\n      areContours: true\n    });\n  }\n  static processDrawnLines({\n    lines,\n    pageWidth,\n    pageHeight,\n    rotation,\n    innerMargin,\n    mustSmooth,\n    areContours\n  }) {\n    if (rotation % 180 !== 0) {\n      [pageWidth, pageHeight] = [pageHeight, pageWidth];\n    }\n    const {\n      curves,\n      width,\n      height\n    } = lines;\n    const thickness = lines.thickness ?? 0;\n    const linesAndPoints = [];\n    const ratio = Math.min(pageWidth / width, pageHeight / height);\n    const xScale = ratio / pageWidth;\n    const yScale = ratio / pageHeight;\n    const newCurves = [];\n    for (const {\n      points\n    } of curves) {\n      const reducedPoints = mustSmooth ? this.#douglasPeucker(points) : points;\n      if (!reducedPoints) {\n        continue;\n      }\n      newCurves.push(reducedPoints);\n      const len = reducedPoints.length;\n      const newPoints = new Float32Array(len);\n      const line = new Float32Array(3 * (len === 2 ? 2 : len - 2));\n      linesAndPoints.push({\n        line,\n        points: newPoints\n      });\n      if (len === 2) {\n        newPoints[0] = reducedPoints[0] * xScale;\n        newPoints[1] = reducedPoints[1] * yScale;\n        line.set([NaN, NaN, NaN, NaN, newPoints[0], newPoints[1]], 0);\n        continue;\n      }\n      let [x1, y1, x2, y2] = reducedPoints;\n      x1 *= xScale;\n      y1 *= yScale;\n      x2 *= xScale;\n      y2 *= yScale;\n      newPoints.set([x1, y1, x2, y2], 0);\n      line.set([NaN, NaN, NaN, NaN, x1, y1], 0);\n      for (let i = 4; i < len; i += 2) {\n        const x = newPoints[i] = reducedPoints[i] * xScale;\n        const y = newPoints[i + 1] = reducedPoints[i + 1] * yScale;\n        line.set(Outline.createBezierPoints(x1, y1, x2, y2, x, y), (i - 2) * 3);\n        [x1, y1, x2, y2] = [x2, y2, x, y];\n      }\n    }\n    if (linesAndPoints.length === 0) {\n      return null;\n    }\n    const outline = areContours ? new ContourDrawOutline() : new InkDrawOutline();\n    outline.build(linesAndPoints, pageWidth, pageHeight, 1, rotation, areContours ? 0 : thickness, innerMargin);\n    return {\n      outline,\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    };\n  }\n  static async compressSignature({\n    outlines,\n    areContours,\n    thickness,\n    width,\n    height\n  }) {\n    let minDiff = Infinity;\n    let maxDiff = -Infinity;\n    let outlinesLength = 0;\n    for (const points of outlines) {\n      outlinesLength += points.length;\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        const dx = points[i] - points[i - 2];\n        minDiff = Math.min(minDiff, dx);\n        maxDiff = Math.max(maxDiff, dx);\n      }\n    }\n    let bufferType;\n    if (minDiff >= -128 && maxDiff <= 127) {\n      bufferType = Int8Array;\n    } else if (minDiff >= -32768 && maxDiff <= 32767) {\n      bufferType = Int16Array;\n    } else {\n      bufferType = Int32Array;\n    }\n    const len = outlines.length;\n    const headerLength = BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * len;\n    const header = new Uint32Array(headerLength);\n    let offset = 0;\n    header[offset++] = headerLength * Uint32Array.BYTES_PER_ELEMENT + (outlinesLength - 2 * len) * bufferType.BYTES_PER_ELEMENT;\n    header[offset++] = 0;\n    header[offset++] = width;\n    header[offset++] = height;\n    header[offset++] = areContours ? 0 : 1;\n    header[offset++] = Math.max(0, Math.floor(thickness ?? 0));\n    header[offset++] = len;\n    header[offset++] = bufferType.BYTES_PER_ELEMENT;\n    for (const points of outlines) {\n      header[offset++] = points.length - 2;\n      header[offset++] = points[0];\n      header[offset++] = points[1];\n    }\n    const cs = new CompressionStream(\"deflate-raw\");\n    const writer = cs.writable.getWriter();\n    await writer.ready;\n    writer.write(header);\n    const BufferCtor = bufferType.prototype.constructor;\n    for (const points of outlines) {\n      const diffs = new BufferCtor(points.length - 2);\n      for (let i = 2, ii = points.length; i < ii; i++) {\n        diffs[i - 2] = points[i] - points[i - 2];\n      }\n      writer.write(diffs);\n    }\n    writer.close();\n    const buf = await new Response(cs.readable).arrayBuffer();\n    const bytes = new Uint8Array(buf);\n    return toBase64Util(bytes);\n  }\n  static async decompressSignature(signatureData) {\n    try {\n      const bytes = fromBase64Util(signatureData);\n      const {\n        readable,\n        writable\n      } = new DecompressionStream(\"deflate-raw\");\n      const writer = writable.getWriter();\n      await writer.ready;\n      writer.write(bytes).then(async () => {\n        await writer.ready;\n        await writer.close();\n      }).catch(() => {});\n      let data = null;\n      let offset = 0;\n      for await (const chunk of readable) {\n        data ||= new Uint8Array(new Uint32Array(chunk.buffer, 0, 4)[0]);\n        data.set(chunk, offset);\n        offset += chunk.length;\n      }\n      const header = new Uint32Array(data.buffer, 0, data.length >> 2);\n      const version = header[1];\n      if (version !== 0) {\n        throw new Error(`Invalid version: ${version}`);\n      }\n      const width = header[2];\n      const height = header[3];\n      const areContours = header[4] === 0;\n      const thickness = header[5];\n      const numberOfDrawings = header[6];\n      const bufferType = header[7];\n      const outlines = [];\n      const diffsOffset = (BASE_HEADER_LENGTH + POINTS_PROPERTIES_NUMBER * numberOfDrawings) * Uint32Array.BYTES_PER_ELEMENT;\n      let diffs;\n      switch (bufferType) {\n        case Int8Array.BYTES_PER_ELEMENT:\n          diffs = new Int8Array(data.buffer, diffsOffset);\n          break;\n        case Int16Array.BYTES_PER_ELEMENT:\n          diffs = new Int16Array(data.buffer, diffsOffset);\n          break;\n        case Int32Array.BYTES_PER_ELEMENT:\n          diffs = new Int32Array(data.buffer, diffsOffset);\n          break;\n      }\n      offset = 0;\n      for (let i = 0; i < numberOfDrawings; i++) {\n        const len = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH];\n        const points = new Float32Array(len + 2);\n        outlines.push(points);\n        for (let j = 0; j < POINTS_PROPERTIES_NUMBER - 1; j++) {\n          points[j] = header[POINTS_PROPERTIES_NUMBER * i + BASE_HEADER_LENGTH + j + 1];\n        }\n        for (let j = 0; j < len; j++) {\n          points[j + 2] = points[j] + diffs[offset++];\n        }\n      }\n      return {\n        areContours,\n        thickness,\n        outlines,\n        width,\n        height\n      };\n    } catch (e) {\n      warn(`decompressSignature: ${e}`);\n      return null;\n    }\n  }\n}\n\n;// ./src/display/editor/signature.js\n\n\n\n\n\n\n\nclass SignatureOptions extends DrawingOptions {\n  constructor() {\n    super();\n    super.updateProperties({\n      fill: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 0\n    });\n  }\n  clone() {\n    const clone = new SignatureOptions();\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass DrawnSignatureOptions extends InkDrawingOptions {\n  constructor(viewerParameters) {\n    super(viewerParameters);\n    super.updateProperties({\n      stroke: AnnotationEditor._defaultLineColor,\n      \"stroke-width\": 1\n    });\n  }\n  clone() {\n    const clone = new DrawnSignatureOptions(this._viewParameters);\n    clone.updateAll(this);\n    return clone;\n  }\n}\nclass SignatureEditor extends DrawingEditor {\n  #isExtracted = false;\n  #description = null;\n  #signatureData = null;\n  #signatureUUID = null;\n  static _type = \"signature\";\n  static _editorType = AnnotationEditorType.SIGNATURE;\n  static _defaultDrawingOptions = null;\n  constructor(params) {\n    super({\n      ...params,\n      mustBeCommitted: true,\n      name: \"signatureEditor\"\n    });\n    this._willKeepAspectRatio = true;\n    this.#signatureData = params.signatureData || null;\n    this.#description = null;\n    this.defaultL10nId = \"pdfjs-editor-signature-editor1\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n    this._defaultDrawingOptions = new SignatureOptions();\n    this._defaultDrawnSignatureOptions = new DrawnSignatureOptions(uiManager.viewParameters);\n  }\n  static getDefaultDrawingOptions(options) {\n    const clone = this._defaultDrawingOptions.clone();\n    clone.updateProperties(options);\n    return clone;\n  }\n  static get supportMultipleDrawings() {\n    return false;\n  }\n  static get typesMap() {\n    return shadow(this, \"typesMap\", new Map());\n  }\n  static get isDrawer() {\n    return false;\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"signature\",\n      hasDescription: !!this.#description\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasDescriptionStats = data.get(\"hasDescription\");\n    return {\n      hasAltText: hasDescriptionStats.get(true) ?? 0,\n      hasNoAltText: hasDescriptionStats.get(false) ?? 0\n    };\n  }\n  get isResizable() {\n    return true;\n  }\n  onScaleChanging() {\n    if (this._drawId === null) {\n      return;\n    }\n    super.onScaleChanging();\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    const {\n      _isCopy\n    } = this;\n    if (_isCopy) {\n      this._isCopy = false;\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    if (this._drawId === null) {\n      if (this.#signatureData) {\n        const {\n          lines,\n          mustSmooth,\n          areContours,\n          description,\n          uuid,\n          heightInPage\n        } = this.#signatureData;\n        const {\n          rawDims: {\n            pageWidth,\n            pageHeight\n          },\n          rotation\n        } = this.parent.viewport;\n        const outline = SignatureExtractor.processDrawnLines({\n          lines,\n          pageWidth,\n          pageHeight,\n          rotation,\n          innerMargin: SignatureEditor._INNER_MARGIN,\n          mustSmooth,\n          areContours\n        });\n        this.addSignature(outline, heightInPage, description, uuid);\n      } else {\n        this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n          description: \"\"\n        }));\n        this.div.hidden = true;\n        this._uiManager.getSignature(this);\n      }\n    }\n    if (_isCopy) {\n      this._isCopy = true;\n      this._moveAfterPaste(baseX, baseY);\n    }\n    return this.div;\n  }\n  setUuid(uuid) {\n    this.#signatureUUID = uuid;\n    this.addEditToolbar();\n  }\n  getUuid() {\n    return this.#signatureUUID;\n  }\n  get description() {\n    return this.#description;\n  }\n  set description(description) {\n    this.#description = description;\n    super.addEditToolbar().then(toolbar => {\n      toolbar?.updateEditSignatureButton(description);\n    });\n  }\n  getSignaturePreview() {\n    const {\n      newCurves,\n      areContours,\n      thickness,\n      width,\n      height\n    } = this.#signatureData;\n    const maxDim = Math.max(width, height);\n    const outlineData = SignatureExtractor.processDrawnLines({\n      lines: {\n        curves: newCurves.map(points => ({\n          points\n        })),\n        thickness,\n        width,\n        height\n      },\n      pageWidth: maxDim,\n      pageHeight: maxDim,\n      rotation: 0,\n      innerMargin: 0,\n      mustSmooth: false,\n      areContours\n    });\n    return {\n      areContours,\n      outline: outlineData.outline\n    };\n  }\n  get toolbarButtons() {\n    if (this._uiManager.signatureManager) {\n      return [[\"editSignature\", this._uiManager.signatureManager]];\n    }\n    return super.toolbarButtons;\n  }\n  addSignature(data, heightInPage, description, uuid) {\n    const {\n      x: savedX,\n      y: savedY\n    } = this;\n    const {\n      outline\n    } = this.#signatureData = data;\n    this.#isExtracted = outline instanceof ContourDrawOutline;\n    this.description = description;\n    this.div.setAttribute(\"data-l10n-args\", JSON.stringify({\n      description\n    }));\n    let drawingOptions;\n    if (this.#isExtracted) {\n      drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      drawingOptions.updateProperties({\n        \"stroke-width\": outline.thickness\n      });\n    }\n    this._addOutlines({\n      drawOutlines: outline,\n      drawingOptions\n    });\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const [, pageHeight] = this.pageDimensions;\n    let newHeight = heightInPage / pageHeight;\n    newHeight = newHeight >= 1 ? 0.5 : newHeight;\n    this.width *= newHeight / this.height;\n    if (this.width >= 1) {\n      newHeight *= 0.9 / this.width;\n      this.width = 0.9;\n    }\n    this.height = newHeight;\n    this.setDims(parentWidth * this.width, parentHeight * this.height);\n    this.x = savedX;\n    this.y = savedY;\n    this.center();\n    this._onResized();\n    this.onScaleChanging();\n    this.rotate();\n    this._uiManager.addToAnnotationStorage(this);\n    this.setUuid(uuid);\n    this._reportTelemetry({\n      action: \"pdfjs.signature.inserted\",\n      data: {\n        hasBeenSaved: !!uuid,\n        hasDescription: !!description\n      }\n    });\n    this.div.hidden = false;\n  }\n  getFromImage(bitmap) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.process(bitmap, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getFromText(text, fontInfo) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.extractContoursFromText(text, fontInfo, pageWidth, pageHeight, rotation, SignatureEditor._INNER_MARGIN);\n  }\n  getDrawnSignature(curves) {\n    const {\n      rawDims: {\n        pageWidth,\n        pageHeight\n      },\n      rotation\n    } = this.parent.viewport;\n    return SignatureExtractor.processDrawnLines({\n      lines: curves,\n      pageWidth,\n      pageHeight,\n      rotation,\n      innerMargin: SignatureEditor._INNER_MARGIN,\n      mustSmooth: false,\n      areContours: false\n    });\n  }\n  createDrawingOptions({\n    areContours,\n    thickness\n  }) {\n    if (areContours) {\n      this._drawingOptions = SignatureEditor.getDefaultDrawingOptions();\n    } else {\n      this._drawingOptions = SignatureEditor._defaultDrawnSignatureOptions.clone();\n      this._drawingOptions.updateProperties({\n        \"stroke-width\": thickness\n      });\n    }\n  }\n  serialize(isForCopying = false) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    const {\n      lines,\n      points,\n      rect\n    } = this.serializeDraw(isForCopying);\n    const {\n      _drawingOptions: {\n        \"stroke-width\": thickness\n      }\n    } = this;\n    const serialized = {\n      annotationType: AnnotationEditorType.SIGNATURE,\n      isSignature: true,\n      areContours: this.#isExtracted,\n      color: [0, 0, 0],\n      thickness: this.#isExtracted ? 0 : thickness,\n      pageIndex: this.pageIndex,\n      rect,\n      rotation: this.rotation,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.paths = {\n        lines,\n        points\n      };\n      serialized.uuid = this.#signatureUUID;\n      serialized.isCopy = true;\n    } else {\n      serialized.lines = lines;\n    }\n    if (this.#description) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: this.#description\n      };\n    }\n    return serialized;\n  }\n  static deserializeDraw(pageX, pageY, pageWidth, pageHeight, innerMargin, data) {\n    if (data.areContours) {\n      return ContourDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n    }\n    return InkDrawOutline.deserialize(pageX, pageY, pageWidth, pageHeight, innerMargin, data);\n  }\n  static async deserialize(data, parent, uiManager) {\n    const editor = await super.deserialize(data, parent, uiManager);\n    editor.#isExtracted = data.areContours;\n    editor.#description = data.accessibilityData?.alt || \"\";\n    editor.#signatureUUID = data.uuid;\n    return editor;\n  }\n}\n\n;// ./src/display/editor/stamp.js\n\n\n\n\nclass StampEditor extends AnnotationEditor {\n  #bitmap = null;\n  #bitmapId = null;\n  #bitmapPromise = null;\n  #bitmapUrl = null;\n  #bitmapFile = null;\n  #bitmapFileName = \"\";\n  #canvas = null;\n  #missingCanvas = false;\n  #resizeTimeoutId = null;\n  #isSvg = false;\n  #hasBeenAddedInUndoStack = false;\n  static _type = \"stamp\";\n  static _editorType = AnnotationEditorType.STAMP;\n  constructor(params) {\n    super({\n      ...params,\n      name: \"stampEditor\"\n    });\n    this.#bitmapUrl = params.bitmapUrl;\n    this.#bitmapFile = params.bitmapFile;\n    this.defaultL10nId = \"pdfjs-editor-stamp-editor\";\n  }\n  static initialize(l10n, uiManager) {\n    AnnotationEditor.initialize(l10n, uiManager);\n  }\n  static isHandlingMimeForPasting(mime) {\n    return SupportedImageMimeTypes.includes(mime);\n  }\n  static paste(item, parent) {\n    parent.pasteEditor({\n      mode: AnnotationEditorType.STAMP\n    }, {\n      bitmapFile: item.getAsFile()\n    });\n  }\n  altTextFinish() {\n    if (this._uiManager.useNewAltTextFlow) {\n      this.div.hidden = false;\n    }\n    super.altTextFinish();\n  }\n  get telemetryFinalData() {\n    return {\n      type: \"stamp\",\n      hasAltText: !!this.altTextData?.altText\n    };\n  }\n  static computeTelemetryFinalData(data) {\n    const hasAltTextStats = data.get(\"hasAltText\");\n    return {\n      hasAltText: hasAltTextStats.get(true) ?? 0,\n      hasNoAltText: hasAltTextStats.get(false) ?? 0\n    };\n  }\n  #getBitmapFetched(data, fromId = false) {\n    if (!data) {\n      this.remove();\n      return;\n    }\n    this.#bitmap = data.bitmap;\n    if (!fromId) {\n      this.#bitmapId = data.id;\n      this.#isSvg = data.isSvg;\n    }\n    if (data.file) {\n      this.#bitmapFileName = data.file.name;\n    }\n    this.#createCanvas();\n  }\n  #getBitmapDone() {\n    this.#bitmapPromise = null;\n    this._uiManager.enableWaiting(false);\n    if (!this.#canvas) {\n      return;\n    }\n    if (this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this.addEditToolbar().then(() => {\n        this._editToolbar.hide();\n        this._uiManager.editAltText(this, true);\n      });\n      return;\n    }\n    if (!this._uiManager.useNewAltTextWhenAddingImage && this._uiManager.useNewAltTextFlow && this.#bitmap) {\n      this._reportTelemetry({\n        action: \"pdfjs.image.image_added\",\n        data: {\n          alt_text_modal: false,\n          alt_text_type: \"empty\"\n        }\n      });\n      try {\n        this.mlGuessAltText();\n      } catch {}\n    }\n    this.div.focus();\n  }\n  async mlGuessAltText(imageData = null, updateAltTextData = true) {\n    if (this.hasAltTextData()) {\n      return null;\n    }\n    const {\n      mlManager\n    } = this._uiManager;\n    if (!mlManager) {\n      throw new Error(\"No ML.\");\n    }\n    if (!(await mlManager.isEnabledFor(\"altText\"))) {\n      throw new Error(\"ML isn't enabled for alt text.\");\n    }\n    const {\n      data,\n      width,\n      height\n    } = imageData || this.copyCanvas(null, null, true).imageData;\n    const response = await mlManager.guess({\n      name: \"altText\",\n      request: {\n        data,\n        width,\n        height,\n        channels: data.length / (width * height)\n      }\n    });\n    if (!response) {\n      throw new Error(\"No response from the AI service.\");\n    }\n    if (response.error) {\n      throw new Error(\"Error from the AI service.\");\n    }\n    if (response.cancel) {\n      return null;\n    }\n    if (!response.output) {\n      throw new Error(\"No valid response from the AI service.\");\n    }\n    const altText = response.output;\n    await this.setGuessedAltText(altText);\n    if (updateAltTextData && !this.hasAltTextData()) {\n      this.altTextData = {\n        alt: altText,\n        decorative: false\n      };\n    }\n    return altText;\n  }\n  #getBitmap() {\n    if (this.#bitmapId) {\n      this._uiManager.enableWaiting(true);\n      this._uiManager.imageManager.getFromId(this.#bitmapId).then(data => this.#getBitmapFetched(data, true)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapUrl) {\n      const url = this.#bitmapUrl;\n      this.#bitmapUrl = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromUrl(url).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    if (this.#bitmapFile) {\n      const file = this.#bitmapFile;\n      this.#bitmapFile = null;\n      this._uiManager.enableWaiting(true);\n      this.#bitmapPromise = this._uiManager.imageManager.getFromFile(file).then(data => this.#getBitmapFetched(data)).finally(() => this.#getBitmapDone());\n      return;\n    }\n    const input = document.createElement(\"input\");\n    input.type = \"file\";\n    input.accept = SupportedImageMimeTypes.join(\",\");\n    const signal = this._uiManager._signal;\n    this.#bitmapPromise = new Promise(resolve => {\n      input.addEventListener(\"change\", async () => {\n        if (!input.files || input.files.length === 0) {\n          this.remove();\n        } else {\n          this._uiManager.enableWaiting(true);\n          const data = await this._uiManager.imageManager.getFromFile(input.files[0]);\n          this._reportTelemetry({\n            action: \"pdfjs.image.image_selected\",\n            data: {\n              alt_text_modal: this._uiManager.useNewAltTextFlow\n            }\n          });\n          this.#getBitmapFetched(data);\n        }\n        resolve();\n      }, {\n        signal\n      });\n      input.addEventListener(\"cancel\", () => {\n        this.remove();\n        resolve();\n      }, {\n        signal\n      });\n    }).finally(() => this.#getBitmapDone());\n    input.click();\n  }\n  remove() {\n    if (this.#bitmapId) {\n      this.#bitmap = null;\n      this._uiManager.imageManager.deleteId(this.#bitmapId);\n      this.#canvas?.remove();\n      this.#canvas = null;\n      if (this.#resizeTimeoutId) {\n        clearTimeout(this.#resizeTimeoutId);\n        this.#resizeTimeoutId = null;\n      }\n    }\n    super.remove();\n  }\n  rebuild() {\n    if (!this.parent) {\n      if (this.#bitmapId) {\n        this.#getBitmap();\n      }\n      return;\n    }\n    super.rebuild();\n    if (this.div === null) {\n      return;\n    }\n    if (this.#bitmapId && this.#canvas === null) {\n      this.#getBitmap();\n    }\n    if (!this.isAttachedToDOM) {\n      this.parent.add(this);\n    }\n  }\n  onceAdded(focus) {\n    this._isDraggable = true;\n    if (focus) {\n      this.div.focus();\n    }\n  }\n  isEmpty() {\n    return !(this.#bitmapPromise || this.#bitmap || this.#bitmapUrl || this.#bitmapFile || this.#bitmapId || this.#missingCanvas);\n  }\n  get toolbarButtons() {\n    return [[\"altText\", this.createAltText()]];\n  }\n  get isResizable() {\n    return true;\n  }\n  render() {\n    if (this.div) {\n      return this.div;\n    }\n    let baseX, baseY;\n    if (this._isCopy) {\n      baseX = this.x;\n      baseY = this.y;\n    }\n    super.render();\n    this.div.hidden = true;\n    this.createAltText();\n    if (!this.#missingCanvas) {\n      if (this.#bitmap) {\n        this.#createCanvas();\n      } else {\n        this.#getBitmap();\n      }\n    }\n    if (this._isCopy) {\n      this._moveAfterPaste(baseX, baseY);\n    }\n    this._uiManager.addShouldRescale(this);\n    return this.div;\n  }\n  setCanvas(annotationElementId, canvas) {\n    const {\n      id: bitmapId,\n      bitmap\n    } = this._uiManager.imageManager.getFromCanvas(annotationElementId, canvas);\n    canvas.remove();\n    if (bitmapId && this._uiManager.imageManager.isValidId(bitmapId)) {\n      this.#bitmapId = bitmapId;\n      if (bitmap) {\n        this.#bitmap = bitmap;\n      }\n      this.#missingCanvas = false;\n      this.#createCanvas();\n    }\n  }\n  _onResized() {\n    this.onScaleChanging();\n  }\n  onScaleChanging() {\n    if (!this.parent) {\n      return;\n    }\n    if (this.#resizeTimeoutId !== null) {\n      clearTimeout(this.#resizeTimeoutId);\n    }\n    const TIME_TO_WAIT = 200;\n    this.#resizeTimeoutId = setTimeout(() => {\n      this.#resizeTimeoutId = null;\n      this.#drawBitmap();\n    }, TIME_TO_WAIT);\n  }\n  #createCanvas() {\n    const {\n      div\n    } = this;\n    let {\n      width,\n      height\n    } = this.#bitmap;\n    const [pageWidth, pageHeight] = this.pageDimensions;\n    const MAX_RATIO = 0.75;\n    if (this.width) {\n      width = this.width * pageWidth;\n      height = this.height * pageHeight;\n    } else if (width > MAX_RATIO * pageWidth || height > MAX_RATIO * pageHeight) {\n      const factor = Math.min(MAX_RATIO * pageWidth / width, MAX_RATIO * pageHeight / height);\n      width *= factor;\n      height *= factor;\n    }\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    this.setDims(width * parentWidth / pageWidth, height * parentHeight / pageHeight);\n    this._uiManager.enableWaiting(false);\n    const canvas = this.#canvas = document.createElement(\"canvas\");\n    canvas.setAttribute(\"role\", \"img\");\n    this.addContainer(canvas);\n    this.width = width / pageWidth;\n    this.height = height / pageHeight;\n    if (this._initialOptions?.isCentered) {\n      this.center();\n    } else {\n      this.fixAndSetPosition();\n    }\n    this._initialOptions = null;\n    if (!this._uiManager.useNewAltTextWhenAddingImage || !this._uiManager.useNewAltTextFlow || this.annotationElementId) {\n      div.hidden = false;\n    }\n    this.#drawBitmap();\n    if (!this.#hasBeenAddedInUndoStack) {\n      this.parent.addUndoableEditor(this);\n      this.#hasBeenAddedInUndoStack = true;\n    }\n    this._reportTelemetry({\n      action: \"inserted_image\"\n    });\n    if (this.#bitmapFileName) {\n      this.div.setAttribute(\"aria-description\", this.#bitmapFileName);\n    }\n    if (!this.annotationElementId) {\n      this._uiManager.a11yAlert(\"pdfjs-editor-stamp-added-alert\");\n    }\n  }\n  copyCanvas(maxDataDimension, maxPreviewDimension, createImageData = false) {\n    if (!maxDataDimension) {\n      maxDataDimension = 224;\n    }\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    const outputScale = new OutputScale();\n    let bitmap = this.#bitmap;\n    let width = bitmapWidth,\n      height = bitmapHeight;\n    let canvas = null;\n    if (maxPreviewDimension) {\n      if (bitmapWidth > maxPreviewDimension || bitmapHeight > maxPreviewDimension) {\n        const ratio = Math.min(maxPreviewDimension / bitmapWidth, maxPreviewDimension / bitmapHeight);\n        width = Math.floor(bitmapWidth * ratio);\n        height = Math.floor(bitmapHeight * ratio);\n      }\n      canvas = document.createElement(\"canvas\");\n      const scaledWidth = canvas.width = Math.ceil(width * outputScale.sx);\n      const scaledHeight = canvas.height = Math.ceil(height * outputScale.sy);\n      if (!this.#isSvg) {\n        bitmap = this.#scaleBitmap(scaledWidth, scaledHeight);\n      }\n      const ctx = canvas.getContext(\"2d\");\n      ctx.filter = this._uiManager.hcmFilter;\n      let white = \"white\",\n        black = \"#cfcfd8\";\n      if (this._uiManager.hcmFilter !== \"none\") {\n        black = \"black\";\n      } else if (window.matchMedia?.(\"(prefers-color-scheme: dark)\").matches) {\n        white = \"#8f8f9d\";\n        black = \"#42414d\";\n      }\n      const boxDim = 15;\n      const boxDimWidth = boxDim * outputScale.sx;\n      const boxDimHeight = boxDim * outputScale.sy;\n      const pattern = new OffscreenCanvas(boxDimWidth * 2, boxDimHeight * 2);\n      const patternCtx = pattern.getContext(\"2d\");\n      patternCtx.fillStyle = white;\n      patternCtx.fillRect(0, 0, boxDimWidth * 2, boxDimHeight * 2);\n      patternCtx.fillStyle = black;\n      patternCtx.fillRect(0, 0, boxDimWidth, boxDimHeight);\n      patternCtx.fillRect(boxDimWidth, boxDimHeight, boxDimWidth, boxDimHeight);\n      ctx.fillStyle = ctx.createPattern(pattern, \"repeat\");\n      ctx.fillRect(0, 0, scaledWidth, scaledHeight);\n      ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n    }\n    let imageData = null;\n    if (createImageData) {\n      let dataWidth, dataHeight;\n      if (outputScale.symmetric && bitmap.width < maxDataDimension && bitmap.height < maxDataDimension) {\n        dataWidth = bitmap.width;\n        dataHeight = bitmap.height;\n      } else {\n        bitmap = this.#bitmap;\n        if (bitmapWidth > maxDataDimension || bitmapHeight > maxDataDimension) {\n          const ratio = Math.min(maxDataDimension / bitmapWidth, maxDataDimension / bitmapHeight);\n          dataWidth = Math.floor(bitmapWidth * ratio);\n          dataHeight = Math.floor(bitmapHeight * ratio);\n          if (!this.#isSvg) {\n            bitmap = this.#scaleBitmap(dataWidth, dataHeight);\n          }\n        }\n      }\n      const offscreen = new OffscreenCanvas(dataWidth, dataHeight);\n      const offscreenCtx = offscreen.getContext(\"2d\", {\n        willReadFrequently: true\n      });\n      offscreenCtx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, dataWidth, dataHeight);\n      imageData = {\n        width: dataWidth,\n        height: dataHeight,\n        data: offscreenCtx.getImageData(0, 0, dataWidth, dataHeight).data\n      };\n    }\n    return {\n      canvas,\n      width,\n      height,\n      imageData\n    };\n  }\n  #scaleBitmap(width, height) {\n    const {\n      width: bitmapWidth,\n      height: bitmapHeight\n    } = this.#bitmap;\n    let newWidth = bitmapWidth;\n    let newHeight = bitmapHeight;\n    let bitmap = this.#bitmap;\n    while (newWidth > 2 * width || newHeight > 2 * height) {\n      const prevWidth = newWidth;\n      const prevHeight = newHeight;\n      if (newWidth > 2 * width) {\n        newWidth = newWidth >= 16384 ? Math.floor(newWidth / 2) - 1 : Math.ceil(newWidth / 2);\n      }\n      if (newHeight > 2 * height) {\n        newHeight = newHeight >= 16384 ? Math.floor(newHeight / 2) - 1 : Math.ceil(newHeight / 2);\n      }\n      const offscreen = new OffscreenCanvas(newWidth, newHeight);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(bitmap, 0, 0, prevWidth, prevHeight, 0, 0, newWidth, newHeight);\n      bitmap = offscreen.transferToImageBitmap();\n    }\n    return bitmap;\n  }\n  #drawBitmap() {\n    const [parentWidth, parentHeight] = this.parentDimensions;\n    const {\n      width,\n      height\n    } = this;\n    const outputScale = new OutputScale();\n    const scaledWidth = Math.ceil(width * parentWidth * outputScale.sx);\n    const scaledHeight = Math.ceil(height * parentHeight * outputScale.sy);\n    const canvas = this.#canvas;\n    if (!canvas || canvas.width === scaledWidth && canvas.height === scaledHeight) {\n      return;\n    }\n    canvas.width = scaledWidth;\n    canvas.height = scaledHeight;\n    const bitmap = this.#isSvg ? this.#bitmap : this.#scaleBitmap(scaledWidth, scaledHeight);\n    const ctx = canvas.getContext(\"2d\");\n    ctx.filter = this._uiManager.hcmFilter;\n    ctx.drawImage(bitmap, 0, 0, bitmap.width, bitmap.height, 0, 0, scaledWidth, scaledHeight);\n  }\n  #serializeBitmap(toUrl) {\n    if (toUrl) {\n      if (this.#isSvg) {\n        const url = this._uiManager.imageManager.getSvgUrl(this.#bitmapId);\n        if (url) {\n          return url;\n        }\n      }\n      const canvas = document.createElement(\"canvas\");\n      ({\n        width: canvas.width,\n        height: canvas.height\n      } = this.#bitmap);\n      const ctx = canvas.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0);\n      return canvas.toDataURL();\n    }\n    if (this.#isSvg) {\n      const [pageWidth, pageHeight] = this.pageDimensions;\n      const width = Math.round(this.width * pageWidth * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const height = Math.round(this.height * pageHeight * PixelsPerInch.PDF_TO_CSS_UNITS);\n      const offscreen = new OffscreenCanvas(width, height);\n      const ctx = offscreen.getContext(\"2d\");\n      ctx.drawImage(this.#bitmap, 0, 0, this.#bitmap.width, this.#bitmap.height, 0, 0, width, height);\n      return offscreen.transferToImageBitmap();\n    }\n    return structuredClone(this.#bitmap);\n  }\n  static async deserialize(data, parent, uiManager) {\n    let initialData = null;\n    let missingCanvas = false;\n    if (data instanceof StampAnnotationElement) {\n      const {\n        data: {\n          rect,\n          rotation,\n          id,\n          structParent,\n          popupRef\n        },\n        container,\n        parent: {\n          page: {\n            pageNumber\n          }\n        },\n        canvas\n      } = data;\n      let bitmapId, bitmap;\n      if (canvas) {\n        delete data.canvas;\n        ({\n          id: bitmapId,\n          bitmap\n        } = uiManager.imageManager.getFromCanvas(container.id, canvas));\n        canvas.remove();\n      } else {\n        missingCanvas = true;\n        data._hasNoCanvas = true;\n      }\n      const altText = (await parent._structTree.getAriaAttributes(`${AnnotationPrefix}${id}`))?.get(\"aria-label\") || \"\";\n      initialData = data = {\n        annotationType: AnnotationEditorType.STAMP,\n        bitmapId,\n        bitmap,\n        pageIndex: pageNumber - 1,\n        rect: rect.slice(0),\n        rotation,\n        annotationElementId: id,\n        id,\n        deleted: false,\n        accessibilityData: {\n          decorative: false,\n          altText\n        },\n        isSvg: false,\n        structParent,\n        popupRef\n      };\n    }\n    const editor = await super.deserialize(data, parent, uiManager);\n    const {\n      rect,\n      bitmap,\n      bitmapUrl,\n      bitmapId,\n      isSvg,\n      accessibilityData\n    } = data;\n    if (missingCanvas) {\n      uiManager.addMissingCanvas(data.id, editor);\n      editor.#missingCanvas = true;\n    } else if (bitmapId && uiManager.imageManager.isValidId(bitmapId)) {\n      editor.#bitmapId = bitmapId;\n      if (bitmap) {\n        editor.#bitmap = bitmap;\n      }\n    } else {\n      editor.#bitmapUrl = bitmapUrl;\n    }\n    editor.#isSvg = isSvg;\n    const [parentWidth, parentHeight] = editor.pageDimensions;\n    editor.width = (rect[2] - rect[0]) / parentWidth;\n    editor.height = (rect[3] - rect[1]) / parentHeight;\n    if (accessibilityData) {\n      editor.altTextData = accessibilityData;\n    }\n    editor._initialData = initialData;\n    editor.#hasBeenAddedInUndoStack = !!initialData;\n    return editor;\n  }\n  serialize(isForCopying = false, context = null) {\n    if (this.isEmpty()) {\n      return null;\n    }\n    if (this.deleted) {\n      return this.serializeDeleted();\n    }\n    const serialized = {\n      annotationType: AnnotationEditorType.STAMP,\n      bitmapId: this.#bitmapId,\n      pageIndex: this.pageIndex,\n      rect: this.getRect(0, 0),\n      rotation: this.rotation,\n      isSvg: this.#isSvg,\n      structTreeParentId: this._structTreeParentId\n    };\n    if (isForCopying) {\n      serialized.bitmapUrl = this.#serializeBitmap(true);\n      serialized.accessibilityData = this.serializeAltText(true);\n      serialized.isCopy = true;\n      return serialized;\n    }\n    const {\n      decorative,\n      altText\n    } = this.serializeAltText(false);\n    if (!decorative && altText) {\n      serialized.accessibilityData = {\n        type: \"Figure\",\n        alt: altText\n      };\n    }\n    if (this.annotationElementId) {\n      const changes = this.#hasElementChanged(serialized);\n      if (changes.isSame) {\n        return null;\n      }\n      if (changes.isSameAltText) {\n        delete serialized.accessibilityData;\n      } else {\n        serialized.accessibilityData.structParent = this._initialData.structParent ?? -1;\n      }\n    }\n    serialized.id = this.annotationElementId;\n    if (context === null) {\n      return serialized;\n    }\n    context.stamps ||= new Map();\n    const area = this.#isSvg ? (serialized.rect[2] - serialized.rect[0]) * (serialized.rect[3] - serialized.rect[1]) : null;\n    if (!context.stamps.has(this.#bitmapId)) {\n      context.stamps.set(this.#bitmapId, {\n        area,\n        serialized\n      });\n      serialized.bitmap = this.#serializeBitmap(false);\n    } else if (this.#isSvg) {\n      const prevData = context.stamps.get(this.#bitmapId);\n      if (area > prevData.area) {\n        prevData.area = area;\n        prevData.serialized.bitmap.close();\n        prevData.serialized.bitmap = this.#serializeBitmap(false);\n      }\n    }\n    return serialized;\n  }\n  #hasElementChanged(serialized) {\n    const {\n      pageIndex,\n      accessibilityData: {\n        altText\n      }\n    } = this._initialData;\n    const isSamePageIndex = serialized.pageIndex === pageIndex;\n    const isSameAltText = (serialized.accessibilityData?.alt || \"\") === altText;\n    return {\n      isSame: !this._hasBeenMoved && !this._hasBeenResized && isSamePageIndex && isSameAltText,\n      isSameAltText\n    };\n  }\n  renderAnnotationElement(annotation) {\n    annotation.updateEdited({\n      rect: this.getRect(0, 0)\n    });\n    return null;\n  }\n}\n\n;// ./src/display/editor/annotation_editor_layer.js\n\n\n\n\n\n\n\n\nclass AnnotationEditorLayer {\n  #accessibilityManager;\n  #allowClick = false;\n  #annotationLayer = null;\n  #clickAC = null;\n  #editorFocusTimeoutId = null;\n  #editors = new Map();\n  #hadPointerDown = false;\n  #isDisabling = false;\n  #isEnabling = false;\n  #drawingAC = null;\n  #focusedElement = null;\n  #textLayer = null;\n  #textSelectionAC = null;\n  #textLayerDblClickAC = null;\n  #lastPointerDownTimestamp = -1;\n  #uiManager;\n  static _initialized = false;\n  static #editorTypes = new Map([FreeTextEditor, InkEditor, StampEditor, HighlightEditor, SignatureEditor].map(type => [type._editorType, type]));\n  constructor({\n    uiManager,\n    pageIndex,\n    div,\n    structTreeLayer,\n    accessibilityManager,\n    annotationLayer,\n    drawLayer,\n    textLayer,\n    viewport,\n    l10n\n  }) {\n    const editorTypes = [...AnnotationEditorLayer.#editorTypes.values()];\n    if (!AnnotationEditorLayer._initialized) {\n      AnnotationEditorLayer._initialized = true;\n      for (const editorType of editorTypes) {\n        editorType.initialize(l10n, uiManager);\n      }\n    }\n    uiManager.registerEditorTypes(editorTypes);\n    this.#uiManager = uiManager;\n    this.pageIndex = pageIndex;\n    this.div = div;\n    this.#accessibilityManager = accessibilityManager;\n    this.#annotationLayer = annotationLayer;\n    this.viewport = viewport;\n    this.#textLayer = textLayer;\n    this.drawLayer = drawLayer;\n    this._structTree = structTreeLayer;\n    this.#uiManager.addLayer(this);\n  }\n  get isEmpty() {\n    return this.#editors.size === 0;\n  }\n  get isInvisible() {\n    return this.isEmpty && this.#uiManager.getMode() === AnnotationEditorType.NONE;\n  }\n  updateToolbar(options) {\n    this.#uiManager.updateToolbar(options);\n  }\n  updateMode(mode = this.#uiManager.getMode()) {\n    this.#cleanup();\n    switch (mode) {\n      case AnnotationEditorType.NONE:\n        this.disableTextSelection();\n        this.togglePointerEvents(false);\n        this.toggleAnnotationLayerPointerEvents(true);\n        this.disableClick();\n        return;\n      case AnnotationEditorType.INK:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n        break;\n      case AnnotationEditorType.HIGHLIGHT:\n        this.enableTextSelection();\n        this.togglePointerEvents(false);\n        this.disableClick();\n        break;\n      default:\n        this.disableTextSelection();\n        this.togglePointerEvents(true);\n        this.enableClick();\n    }\n    this.toggleAnnotationLayerPointerEvents(false);\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.toggle(`${editorType._type}Editing`, mode === editorType._editorType);\n    }\n    this.div.hidden = false;\n  }\n  hasTextLayer(textLayer) {\n    return textLayer === this.#textLayer?.div;\n  }\n  setEditingState(isEditing) {\n    this.#uiManager.setEditingState(isEditing);\n  }\n  addCommands(params) {\n    this.#uiManager.addCommands(params);\n  }\n  cleanUndoStack(type) {\n    this.#uiManager.cleanUndoStack(type);\n  }\n  toggleDrawing(enabled = false) {\n    this.div.classList.toggle(\"drawing\", !enabled);\n  }\n  togglePointerEvents(enabled = false) {\n    this.div.classList.toggle(\"disabled\", !enabled);\n  }\n  toggleAnnotationLayerPointerEvents(enabled = false) {\n    this.#annotationLayer?.div.classList.toggle(\"disabled\", !enabled);\n  }\n  async enable() {\n    this.#isEnabling = true;\n    this.div.tabIndex = 0;\n    this.togglePointerEvents(true);\n    this.#textLayerDblClickAC?.abort();\n    this.#textLayerDblClickAC = null;\n    const annotationElementIds = new Set();\n    for (const editor of this.#editors.values()) {\n      editor.enableEditing();\n      editor.show(true);\n      if (editor.annotationElementId) {\n        this.#uiManager.removeChangedExistingAnnotation(editor);\n        annotationElementIds.add(editor.annotationElementId);\n      }\n    }\n    if (!this.#annotationLayer) {\n      this.#isEnabling = false;\n      return;\n    }\n    const editables = this.#annotationLayer.getEditableAnnotations();\n    for (const editable of editables) {\n      editable.hide();\n      if (this.#uiManager.isDeletedAnnotationElement(editable.data.id)) {\n        continue;\n      }\n      if (annotationElementIds.has(editable.data.id)) {\n        continue;\n      }\n      const editor = await this.deserialize(editable);\n      if (!editor) {\n        continue;\n      }\n      this.addOrRebuild(editor);\n      editor.enableEditing();\n    }\n    this.#isEnabling = false;\n  }\n  disable() {\n    this.#isDisabling = true;\n    this.div.tabIndex = -1;\n    this.togglePointerEvents(false);\n    if (this.#textLayer && !this.#textLayerDblClickAC) {\n      this.#textLayerDblClickAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textLayerDblClickAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", e => {\n        const DBL_CLICK_THRESHOLD = 500;\n        const {\n          clientX,\n          clientY,\n          timeStamp\n        } = e;\n        const lastPointerDownTimestamp = this.#lastPointerDownTimestamp;\n        if (timeStamp - lastPointerDownTimestamp > DBL_CLICK_THRESHOLD) {\n          this.#lastPointerDownTimestamp = timeStamp;\n          return;\n        }\n        this.#lastPointerDownTimestamp = -1;\n        const {\n          classList\n        } = this.div;\n        classList.toggle(\"getElements\", true);\n        const elements = document.elementsFromPoint(clientX, clientY);\n        classList.toggle(\"getElements\", false);\n        if (!this.div.contains(elements[0])) {\n          return;\n        }\n        let id;\n        const regex = new RegExp(`^${AnnotationEditorPrefix}[0-9]+$`);\n        for (const element of elements) {\n          if (regex.test(element.id)) {\n            id = element.id;\n            break;\n          }\n        }\n        if (!id) {\n          return;\n        }\n        const editor = this.#editors.get(id);\n        if (editor?.annotationElementId === null) {\n          e.stopPropagation();\n          e.preventDefault();\n          editor.dblclick();\n        }\n      }, {\n        signal,\n        capture: true\n      });\n    }\n    const changedAnnotations = new Map();\n    const resetAnnotations = new Map();\n    for (const editor of this.#editors.values()) {\n      editor.disableEditing();\n      if (!editor.annotationElementId) {\n        continue;\n      }\n      if (editor.serialize() !== null) {\n        changedAnnotations.set(editor.annotationElementId, editor);\n        continue;\n      } else {\n        resetAnnotations.set(editor.annotationElementId, editor);\n      }\n      this.getEditableAnnotation(editor.annotationElementId)?.show();\n      editor.remove();\n    }\n    if (this.#annotationLayer) {\n      const editables = this.#annotationLayer.getEditableAnnotations();\n      for (const editable of editables) {\n        const {\n          id\n        } = editable.data;\n        if (this.#uiManager.isDeletedAnnotationElement(id)) {\n          continue;\n        }\n        let editor = resetAnnotations.get(id);\n        if (editor) {\n          editor.resetAnnotationElement(editable);\n          editor.show(false);\n          editable.show();\n          continue;\n        }\n        editor = changedAnnotations.get(id);\n        if (editor) {\n          this.#uiManager.addChangedExistingAnnotation(editor);\n          if (editor.renderAnnotationElement(editable)) {\n            editor.show(false);\n          }\n        }\n        editable.show();\n      }\n    }\n    this.#cleanup();\n    if (this.isEmpty) {\n      this.div.hidden = true;\n    }\n    const {\n      classList\n    } = this.div;\n    for (const editorType of AnnotationEditorLayer.#editorTypes.values()) {\n      classList.remove(`${editorType._type}Editing`);\n    }\n    this.disableTextSelection();\n    this.toggleAnnotationLayerPointerEvents(true);\n    this.#isDisabling = false;\n  }\n  getEditableAnnotation(id) {\n    return this.#annotationLayer?.getEditableAnnotation(id) || null;\n  }\n  setActiveEditor(editor) {\n    const currentActive = this.#uiManager.getActive();\n    if (currentActive === editor) {\n      return;\n    }\n    this.#uiManager.setActiveEditor(editor);\n  }\n  enableTextSelection() {\n    this.div.tabIndex = -1;\n    if (this.#textLayer?.div && !this.#textSelectionAC) {\n      this.#textSelectionAC = new AbortController();\n      const signal = this.#uiManager.combinedSignal(this.#textSelectionAC);\n      this.#textLayer.div.addEventListener(\"pointerdown\", this.#textLayerPointerDown.bind(this), {\n        signal\n      });\n      this.#textLayer.div.classList.add(\"highlighting\");\n    }\n  }\n  disableTextSelection() {\n    this.div.tabIndex = 0;\n    if (this.#textLayer?.div && this.#textSelectionAC) {\n      this.#textSelectionAC.abort();\n      this.#textSelectionAC = null;\n      this.#textLayer.div.classList.remove(\"highlighting\");\n    }\n  }\n  #textLayerPointerDown(event) {\n    this.#uiManager.unselectAll();\n    const {\n      target\n    } = event;\n    if (target === this.#textLayer.div || (target.getAttribute(\"role\") === \"img\" || target.classList.contains(\"endOfContent\")) && this.#textLayer.div.contains(target)) {\n      const {\n        isMac\n      } = util_FeatureTest.platform;\n      if (event.button !== 0 || event.ctrlKey && isMac) {\n        return;\n      }\n      this.#uiManager.showAllEditors(\"highlight\", true, true);\n      this.#textLayer.div.classList.add(\"free\");\n      this.toggleDrawing();\n      HighlightEditor.startHighlighting(this, this.#uiManager.direction === \"ltr\", {\n        target: this.#textLayer.div,\n        x: event.x,\n        y: event.y\n      });\n      this.#textLayer.div.addEventListener(\"pointerup\", () => {\n        this.#textLayer.div.classList.remove(\"free\");\n        this.toggleDrawing(true);\n      }, {\n        once: true,\n        signal: this.#uiManager._signal\n      });\n      event.preventDefault();\n    }\n  }\n  enableClick() {\n    if (this.#clickAC) {\n      return;\n    }\n    this.#clickAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#clickAC);\n    this.div.addEventListener(\"pointerdown\", this.pointerdown.bind(this), {\n      signal\n    });\n    const pointerup = this.pointerup.bind(this);\n    this.div.addEventListener(\"pointerup\", pointerup, {\n      signal\n    });\n    this.div.addEventListener(\"pointercancel\", pointerup, {\n      signal\n    });\n  }\n  disableClick() {\n    this.#clickAC?.abort();\n    this.#clickAC = null;\n  }\n  attach(editor) {\n    this.#editors.set(editor.id, editor);\n    const {\n      annotationElementId\n    } = editor;\n    if (annotationElementId && this.#uiManager.isDeletedAnnotationElement(annotationElementId)) {\n      this.#uiManager.removeDeletedAnnotationElement(editor);\n    }\n  }\n  detach(editor) {\n    this.#editors.delete(editor.id);\n    this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n    if (!this.#isDisabling && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor);\n    }\n  }\n  remove(editor) {\n    this.detach(editor);\n    this.#uiManager.removeEditor(editor);\n    editor.div.remove();\n    editor.isAttachedToDOM = false;\n  }\n  changeParent(editor) {\n    if (editor.parent === this) {\n      return;\n    }\n    if (editor.parent && editor.annotationElementId) {\n      this.#uiManager.addDeletedAnnotationElement(editor.annotationElementId);\n      AnnotationEditor.deleteAnnotationElement(editor);\n      editor.annotationElementId = null;\n    }\n    this.attach(editor);\n    editor.parent?.detach(editor);\n    editor.setParent(this);\n    if (editor.div && editor.isAttachedToDOM) {\n      editor.div.remove();\n      this.div.append(editor.div);\n    }\n  }\n  add(editor) {\n    if (editor.parent === this && editor.isAttachedToDOM) {\n      return;\n    }\n    this.changeParent(editor);\n    this.#uiManager.addEditor(editor);\n    this.attach(editor);\n    if (!editor.isAttachedToDOM) {\n      const div = editor.render();\n      this.div.append(div);\n      editor.isAttachedToDOM = true;\n    }\n    editor.fixAndSetPosition();\n    editor.onceAdded(!this.#isEnabling);\n    this.#uiManager.addToAnnotationStorage(editor);\n    editor._reportTelemetry(editor.telemetryInitialData);\n  }\n  moveEditorInDOM(editor) {\n    if (!editor.isAttachedToDOM) {\n      return;\n    }\n    const {\n      activeElement\n    } = document;\n    if (editor.div.contains(activeElement) && !this.#editorFocusTimeoutId) {\n      editor._focusEventsAllowed = false;\n      this.#editorFocusTimeoutId = setTimeout(() => {\n        this.#editorFocusTimeoutId = null;\n        if (!editor.div.contains(document.activeElement)) {\n          editor.div.addEventListener(\"focusin\", () => {\n            editor._focusEventsAllowed = true;\n          }, {\n            once: true,\n            signal: this.#uiManager._signal\n          });\n          activeElement.focus();\n        } else {\n          editor._focusEventsAllowed = true;\n        }\n      }, 0);\n    }\n    editor._structTreeParentId = this.#accessibilityManager?.moveElementInDOM(this.div, editor.div, editor.contentDiv, true);\n  }\n  addOrRebuild(editor) {\n    if (editor.needsToBeRebuilt()) {\n      editor.parent ||= this;\n      editor.rebuild();\n      editor.show();\n    } else {\n      this.add(editor);\n    }\n  }\n  addUndoableEditor(editor) {\n    const cmd = () => editor._uiManager.rebuild(editor);\n    const undo = () => {\n      editor.remove();\n    };\n    this.addCommands({\n      cmd,\n      undo,\n      mustExec: false\n    });\n  }\n  getNextId() {\n    return this.#uiManager.getId();\n  }\n  get #currentEditorType() {\n    return AnnotationEditorLayer.#editorTypes.get(this.#uiManager.getMode());\n  }\n  combinedSignal(ac) {\n    return this.#uiManager.combinedSignal(ac);\n  }\n  #createNewEditor(params) {\n    const editorType = this.#currentEditorType;\n    return editorType ? new editorType.prototype.constructor(params) : null;\n  }\n  canCreateNewEmptyEditor() {\n    return this.#currentEditorType?.canCreateNewEmptyEditor();\n  }\n  async pasteEditor(options, params) {\n    this.updateToolbar(options);\n    await this.#uiManager.updateMode(options.mode);\n    const {\n      offsetX,\n      offsetY\n    } = this.#getCenterPoint();\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: offsetX,\n      y: offsetY,\n      uiManager: this.#uiManager,\n      isCentered: true,\n      ...params\n    });\n    if (editor) {\n      this.add(editor);\n    }\n  }\n  async deserialize(data) {\n    return (await AnnotationEditorLayer.#editorTypes.get(data.annotationType ?? data.annotationEditorType)?.deserialize(data, this, this.#uiManager)) || null;\n  }\n  createAndAddNewEditor(event, isCentered, data = {}) {\n    const id = this.getNextId();\n    const editor = this.#createNewEditor({\n      parent: this,\n      id,\n      x: event.offsetX,\n      y: event.offsetY,\n      uiManager: this.#uiManager,\n      isCentered,\n      ...data\n    });\n    if (editor) {\n      this.add(editor);\n    }\n    return editor;\n  }\n  #getCenterPoint() {\n    const {\n      x,\n      y,\n      width,\n      height\n    } = this.div.getBoundingClientRect();\n    const tlX = Math.max(0, x);\n    const tlY = Math.max(0, y);\n    const brX = Math.min(window.innerWidth, x + width);\n    const brY = Math.min(window.innerHeight, y + height);\n    const centerX = (tlX + brX) / 2 - x;\n    const centerY = (tlY + brY) / 2 - y;\n    const [offsetX, offsetY] = this.viewport.rotation % 180 === 0 ? [centerX, centerY] : [centerY, centerX];\n    return {\n      offsetX,\n      offsetY\n    };\n  }\n  addNewEditor(data = {}) {\n    this.createAndAddNewEditor(this.#getCenterPoint(), true, data);\n  }\n  setSelected(editor) {\n    this.#uiManager.setSelected(editor);\n  }\n  toggleSelected(editor) {\n    this.#uiManager.toggleSelected(editor);\n  }\n  unselect(editor) {\n    this.#uiManager.unselect(editor);\n  }\n  pointerup(event) {\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    if (!this.#hadPointerDown) {\n      return;\n    }\n    this.#hadPointerDown = false;\n    if (this.#currentEditorType?.isDrawer && this.#currentEditorType.supportMultipleDrawings) {\n      return;\n    }\n    if (!this.#allowClick) {\n      this.#allowClick = true;\n      return;\n    }\n    const currentMode = this.#uiManager.getMode();\n    if (currentMode === AnnotationEditorType.STAMP || currentMode === AnnotationEditorType.SIGNATURE) {\n      this.#uiManager.unselectAll();\n      return;\n    }\n    this.createAndAddNewEditor(event, false);\n  }\n  pointerdown(event) {\n    if (this.#uiManager.getMode() === AnnotationEditorType.HIGHLIGHT) {\n      this.enableTextSelection();\n    }\n    if (this.#hadPointerDown) {\n      this.#hadPointerDown = false;\n      return;\n    }\n    const {\n      isMac\n    } = util_FeatureTest.platform;\n    if (event.button !== 0 || event.ctrlKey && isMac) {\n      return;\n    }\n    if (event.target !== this.div) {\n      return;\n    }\n    this.#hadPointerDown = true;\n    if (this.#currentEditorType?.isDrawer) {\n      this.startDrawingSession(event);\n      return;\n    }\n    const editor = this.#uiManager.getActive();\n    this.#allowClick = !editor || editor.isEmpty();\n  }\n  startDrawingSession(event) {\n    this.div.focus({\n      preventScroll: true\n    });\n    if (this.#drawingAC) {\n      this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n      return;\n    }\n    this.#uiManager.setCurrentDrawingSession(this);\n    this.#drawingAC = new AbortController();\n    const signal = this.#uiManager.combinedSignal(this.#drawingAC);\n    this.div.addEventListener(\"blur\", ({\n      relatedTarget\n    }) => {\n      if (relatedTarget && !this.div.contains(relatedTarget)) {\n        this.#focusedElement = null;\n        this.commitOrRemove();\n      }\n    }, {\n      signal\n    });\n    this.#currentEditorType.startDrawing(this, this.#uiManager, false, event);\n  }\n  pause(on) {\n    if (on) {\n      const {\n        activeElement\n      } = document;\n      if (this.div.contains(activeElement)) {\n        this.#focusedElement = activeElement;\n      }\n      return;\n    }\n    if (this.#focusedElement) {\n      setTimeout(() => {\n        this.#focusedElement?.focus();\n        this.#focusedElement = null;\n      }, 0);\n    }\n  }\n  endDrawingSession(isAborted = false) {\n    if (!this.#drawingAC) {\n      return null;\n    }\n    this.#uiManager.setCurrentDrawingSession(null);\n    this.#drawingAC.abort();\n    this.#drawingAC = null;\n    this.#focusedElement = null;\n    return this.#currentEditorType.endDrawing(isAborted);\n  }\n  findNewParent(editor, x, y) {\n    const layer = this.#uiManager.findParent(x, y);\n    if (layer === null || layer === this) {\n      return false;\n    }\n    layer.changeParent(editor);\n    return true;\n  }\n  commitOrRemove() {\n    if (this.#drawingAC) {\n      this.endDrawingSession();\n      return true;\n    }\n    return false;\n  }\n  onScaleChanging() {\n    if (!this.#drawingAC) {\n      return;\n    }\n    this.#currentEditorType.onScaleChangingWhenDrawing(this);\n  }\n  destroy() {\n    this.commitOrRemove();\n    if (this.#uiManager.getActive()?.parent === this) {\n      this.#uiManager.commitOrRemove();\n      this.#uiManager.setActiveEditor(null);\n    }\n    if (this.#editorFocusTimeoutId) {\n      clearTimeout(this.#editorFocusTimeoutId);\n      this.#editorFocusTimeoutId = null;\n    }\n    for (const editor of this.#editors.values()) {\n      this.#accessibilityManager?.removePointerInTextLayer(editor.contentDiv);\n      editor.setParent(null);\n      editor.isAttachedToDOM = false;\n      editor.div.remove();\n    }\n    this.div = null;\n    this.#editors.clear();\n    this.#uiManager.removeLayer(this);\n  }\n  #cleanup() {\n    for (const editor of this.#editors.values()) {\n      if (editor.isEmpty()) {\n        editor.remove();\n      }\n    }\n  }\n  render({\n    viewport\n  }) {\n    this.viewport = viewport;\n    setLayerDimensions(this.div, viewport);\n    for (const editor of this.#uiManager.getEditors(this.pageIndex)) {\n      this.add(editor);\n      editor.rebuild();\n    }\n    this.updateMode();\n  }\n  update({\n    viewport\n  }) {\n    this.#uiManager.commitOrRemove();\n    this.#cleanup();\n    const oldRotation = this.viewport.rotation;\n    const rotation = viewport.rotation;\n    this.viewport = viewport;\n    setLayerDimensions(this.div, {\n      rotation\n    });\n    if (oldRotation !== rotation) {\n      for (const editor of this.#editors.values()) {\n        editor.rotate(rotation);\n      }\n    }\n  }\n  get pageDimensions() {\n    const {\n      pageWidth,\n      pageHeight\n    } = this.viewport.rawDims;\n    return [pageWidth, pageHeight];\n  }\n  get scale() {\n    return this.#uiManager.viewParameters.realScale;\n  }\n}\n\n;// ./src/display/draw_layer.js\n\n\nclass DrawLayer {\n  #parent = null;\n  #mapping = new Map();\n  #toUpdate = new Map();\n  static #id = 0;\n  constructor({\n    pageIndex\n  }) {\n    this.pageIndex = pageIndex;\n  }\n  setParent(parent) {\n    if (!this.#parent) {\n      this.#parent = parent;\n      return;\n    }\n    if (this.#parent !== parent) {\n      if (this.#mapping.size > 0) {\n        for (const root of this.#mapping.values()) {\n          root.remove();\n          parent.append(root);\n        }\n      }\n      this.#parent = parent;\n    }\n  }\n  static get _svgFactory() {\n    return shadow(this, \"_svgFactory\", new DOMSVGFactory());\n  }\n  static #setBox(element, [x, y, width, height]) {\n    const {\n      style\n    } = element;\n    style.top = `${100 * y}%`;\n    style.left = `${100 * x}%`;\n    style.width = `${100 * width}%`;\n    style.height = `${100 * height}%`;\n  }\n  #createSVG() {\n    const svg = DrawLayer._svgFactory.create(1, 1, true);\n    this.#parent.append(svg);\n    svg.setAttribute(\"aria-hidden\", true);\n    return svg;\n  }\n  #createClipPath(defs, pathId) {\n    const clipPath = DrawLayer._svgFactory.createElement(\"clipPath\");\n    defs.append(clipPath);\n    const clipPathId = `clip_${pathId}`;\n    clipPath.setAttribute(\"id\", clipPathId);\n    clipPath.setAttribute(\"clipPathUnits\", \"objectBoundingBox\");\n    const clipPathUse = DrawLayer._svgFactory.createElement(\"use\");\n    clipPath.append(clipPathUse);\n    clipPathUse.setAttribute(\"href\", `#${pathId}`);\n    clipPathUse.classList.add(\"clip\");\n    return clipPathId;\n  }\n  #updateProperties(element, properties) {\n    for (const [key, value] of Object.entries(properties)) {\n      if (value === null) {\n        element.removeAttribute(key);\n      } else {\n        element.setAttribute(key, value);\n      }\n    }\n  }\n  draw(properties, isPathUpdatable = false, hasClip = false) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    if (isPathUpdatable) {\n      this.#toUpdate.set(id, path);\n    }\n    const clipPathId = hasClip ? this.#createClipPath(defs, pathId) : null;\n    const use = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use);\n    use.setAttribute(\"href\", `#${pathId}`);\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return {\n      id,\n      clipPathId: `url(#${clipPathId})`\n    };\n  }\n  drawOutline(properties, mustRemoveSelfIntersections) {\n    const id = DrawLayer.#id++;\n    const root = this.#createSVG();\n    const defs = DrawLayer._svgFactory.createElement(\"defs\");\n    root.append(defs);\n    const path = DrawLayer._svgFactory.createElement(\"path\");\n    defs.append(path);\n    const pathId = `path_p${this.pageIndex}_${id}`;\n    path.setAttribute(\"id\", pathId);\n    path.setAttribute(\"vector-effect\", \"non-scaling-stroke\");\n    let maskId;\n    if (mustRemoveSelfIntersections) {\n      const mask = DrawLayer._svgFactory.createElement(\"mask\");\n      defs.append(mask);\n      maskId = `mask_p${this.pageIndex}_${id}`;\n      mask.setAttribute(\"id\", maskId);\n      mask.setAttribute(\"maskUnits\", \"objectBoundingBox\");\n      const rect = DrawLayer._svgFactory.createElement(\"rect\");\n      mask.append(rect);\n      rect.setAttribute(\"width\", \"1\");\n      rect.setAttribute(\"height\", \"1\");\n      rect.setAttribute(\"fill\", \"white\");\n      const use = DrawLayer._svgFactory.createElement(\"use\");\n      mask.append(use);\n      use.setAttribute(\"href\", `#${pathId}`);\n      use.setAttribute(\"stroke\", \"none\");\n      use.setAttribute(\"fill\", \"black\");\n      use.setAttribute(\"fill-rule\", \"nonzero\");\n      use.classList.add(\"mask\");\n    }\n    const use1 = DrawLayer._svgFactory.createElement(\"use\");\n    root.append(use1);\n    use1.setAttribute(\"href\", `#${pathId}`);\n    if (maskId) {\n      use1.setAttribute(\"mask\", `url(#${maskId})`);\n    }\n    const use2 = use1.cloneNode();\n    root.append(use2);\n    use1.classList.add(\"mainOutline\");\n    use2.classList.add(\"secondaryOutline\");\n    this.updateProperties(root, properties);\n    this.#mapping.set(id, root);\n    return id;\n  }\n  finalizeDraw(id, properties) {\n    this.#toUpdate.delete(id);\n    this.updateProperties(id, properties);\n  }\n  updateProperties(elementOrId, properties) {\n    if (!properties) {\n      return;\n    }\n    const {\n      root,\n      bbox,\n      rootClass,\n      path\n    } = properties;\n    const element = typeof elementOrId === \"number\" ? this.#mapping.get(elementOrId) : elementOrId;\n    if (!element) {\n      return;\n    }\n    if (root) {\n      this.#updateProperties(element, root);\n    }\n    if (bbox) {\n      DrawLayer.#setBox(element, bbox);\n    }\n    if (rootClass) {\n      const {\n        classList\n      } = element;\n      for (const [className, value] of Object.entries(rootClass)) {\n        classList.toggle(className, value);\n      }\n    }\n    if (path) {\n      const defs = element.firstChild;\n      const pathElement = defs.firstChild;\n      this.#updateProperties(pathElement, path);\n    }\n  }\n  updateParent(id, layer) {\n    if (layer === this) {\n      return;\n    }\n    const root = this.#mapping.get(id);\n    if (!root) {\n      return;\n    }\n    layer.#parent.append(root);\n    this.#mapping.delete(id);\n    layer.#mapping.set(id, root);\n  }\n  remove(id) {\n    this.#toUpdate.delete(id);\n    if (this.#parent === null) {\n      return;\n    }\n    this.#mapping.get(id).remove();\n    this.#mapping.delete(id);\n  }\n  destroy() {\n    this.#parent = null;\n    for (const root of this.#mapping.values()) {\n      root.remove();\n    }\n    this.#mapping.clear();\n    this.#toUpdate.clear();\n  }\n}\n\n;// ./src/pdf.js\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n{\n  globalThis._pdfjsTestingUtils = {\n    HighlightOutliner: HighlightOutliner\n  };\n}\nglobalThis.pdfjsLib = {\n  AbortException: AbortException,\n  AnnotationEditorLayer: AnnotationEditorLayer,\n  AnnotationEditorParamsType: AnnotationEditorParamsType,\n  AnnotationEditorType: AnnotationEditorType,\n  AnnotationEditorUIManager: AnnotationEditorUIManager,\n  AnnotationLayer: AnnotationLayer,\n  AnnotationMode: AnnotationMode,\n  AnnotationType: AnnotationType,\n  build: build,\n  ColorPicker: ColorPicker,\n  createValidAbsoluteUrl: createValidAbsoluteUrl,\n  DOMSVGFactory: DOMSVGFactory,\n  DrawLayer: DrawLayer,\n  FeatureTest: util_FeatureTest,\n  fetchData: fetchData,\n  getDocument: getDocument,\n  getFilenameFromUrl: getFilenameFromUrl,\n  getPdfFilenameFromUrl: getPdfFilenameFromUrl,\n  getUuid: getUuid,\n  getXfaPageViewport: getXfaPageViewport,\n  GlobalWorkerOptions: GlobalWorkerOptions,\n  ImageKind: util_ImageKind,\n  InvalidPDFException: InvalidPDFException,\n  isDataScheme: isDataScheme,\n  isPdfFile: isPdfFile,\n  isValidExplicitDest: isValidExplicitDest,\n  MathClamp: MathClamp,\n  noContextMenu: noContextMenu,\n  normalizeUnicode: normalizeUnicode,\n  OPS: OPS,\n  OutputScale: OutputScale,\n  PasswordResponses: PasswordResponses,\n  PDFDataRangeTransport: PDFDataRangeTransport,\n  PDFDateString: PDFDateString,\n  PDFWorker: PDFWorker,\n  PermissionFlag: PermissionFlag,\n  PixelsPerInch: PixelsPerInch,\n  RenderingCancelledException: RenderingCancelledException,\n  ResponseException: ResponseException,\n  setLayerDimensions: setLayerDimensions,\n  shadow: shadow,\n  SignatureExtractor: SignatureExtractor,\n  stopEvent: stopEvent,\n  SupportedImageMimeTypes: SupportedImageMimeTypes,\n  TextLayer: TextLayer,\n  TouchManager: TouchManager,\n  updateUrlHash: updateUrlHash,\n  Util: Util,\n  VerbosityLevel: VerbosityLevel,\n  version: version,\n  XfaLayer: XfaLayer\n};\n\nexport { AbortException, AnnotationEditorLayer, AnnotationEditorParamsType, AnnotationEditorType, AnnotationEditorUIManager, AnnotationLayer, AnnotationMode, AnnotationType, ColorPicker, DOMSVGFactory, DrawLayer, util_FeatureTest as FeatureTest, GlobalWorkerOptions, util_ImageKind as ImageKind, InvalidPDFException, MathClamp, OPS, OutputScale, PDFDataRangeTransport, PDFDateString, PDFWorker, PasswordResponses, PermissionFlag, PixelsPerInch, RenderingCancelledException, ResponseException, SignatureExtractor, SupportedImageMimeTypes, TextLayer, TouchManager, Util, VerbosityLevel, XfaLayer, build, createValidAbsoluteUrl, fetchData, getDocument, getFilenameFromUrl, getPdfFilenameFromUrl, getUuid, getXfaPageViewport, isDataScheme, isPdfFile, isValidExplicitDest, noContextMenu, normalizeUnicode, setLayerDimensions, shadow, stopEvent, updateUrlHash, version };\n\n//# sourceMappingURL=pdf.mjs.map","import * as pdfjsLib from 'pdfjs-dist/build/pdf';\nimport 'pdfjs-dist/build/pdf.worker.js';\n\n// Set worker path\nif (typeof window !== 'undefined' && 'Worker' in window) {\n  pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.4.120/pdf.worker.min.js';\n}\n\nclass VNX_PDFJS {\n  constructor(options = {}) {\n    this.container = options.container || document.body;\n    this.scale = options.scale || 1.5;\n  }\n\n  async loadDocument(url) {\n    try {\n      this.pdfDoc = await pdfjsLib.getDocument(url).promise;\n      console.log('PDF loaded');\n      return this.pdfDoc;\n    } catch (error) {\n      console.error('Error loading PDF:', error);\n      throw error;\n    }\n  }\n\n  async renderPage(pageNum, container) {\n    if (!this.pdfDoc) {\n      throw new Error('PDF document not loaded. Call loadDocument first.');\n    }\n\n    const page = await this.pdfDoc.getPage(pageNum);\n    const viewport = page.getViewport({ scale: this.scale });\n    \n    // Create canvas element\n    const canvas = document.createElement('canvas');\n    const context = canvas.getContext('2d');\n    canvas.height = viewport.height;\n    canvas.width = viewport.width;\n    \n    // Append canvas to container\n    container = container || this.container;\n    container.appendChild(canvas);\n    \n    // Render PDF page into canvas context\n    const renderContext = {\n      canvasContext: context,\n      viewport: viewport\n    };\n    \n    await page.render(renderContext).promise;\n    return { page, viewport };\n  }\n}\n\n// Export for browser\nif (typeof window !== 'undefined') {\n  window.VNX_PDFJS = VNX_PDFJS;\n}\n\nexport default VNX_PDFJS;\n"],"names":["isNodeJS","process","versions","nw","electron","type","FONT_IDENTITY_MATRIX","LINE_FACTOR","RenderingIntentFlag","AnnotationMode","DISABLE","ENABLE","ENABLE_FORMS","ENABLE_STORAGE","AnnotationEditorPrefix","AnnotationEditorType","NONE","FREETEXT","HIGHLIGHT","STAMP","INK","SIGNATURE","AnnotationEditorParamsType","RESIZE","CREATE","FREETEXT_SIZE","FREETEXT_COLOR","FREETEXT_OPACITY","INK_COLOR","INK_THICKNESS","INK_OPACITY","HIGHLIGHT_COLOR","HIGHLIGHT_DEFAULT_COLOR","HIGHLIGHT_THICKNESS","HIGHLIGHT_FREE","HIGHLIGHT_SHOW_ALL","DRAW_STEP","TextRenderingMode","util_ImageKind","GRAYSCALE_1BPP","RGB_24BPP","RGBA_32BPP","AnnotationType","TEXT","LINK","LINE","SQUARE","CIRCLE","POLYGON","POLYLINE","UNDERLINE","SQUIGGLY","STRIKEOUT","CARET","POPUP","FILEATTACHMENT","SOUND","MOVIE","WIDGET","SCREEN","PRINTERMARK","TRAPNET","WATERMARK","THREED","REDACT","AnnotationBorderStyleType","VerbosityLevel","ERRORS","WARNINGS","INFOS","OPS","dependency","setLineWidth","setLineCap","setLineJoin","setMiterLimit","setDash","setRenderingIntent","setFlatness","setGState","save","restore","transform","moveTo","lineTo","curveTo","curveTo2","curveTo3","closePath","rectangle","stroke","closeStroke","fill","eoFill","fillStroke","eoFillStroke","closeFillStroke","closeEOFillStroke","endPath","clip","eoClip","beginText","endText","setCharSpacing","setWordSpacing","setHScale","setLeading","setFont","setTextRenderingMode","setTextRise","moveText","setLeadingMoveText","setTextMatrix","nextLine","showText","showSpacedText","nextLineShowText","nextLineSetSpacingShowText","setCharWidth","setCharWidthAndBounds","setStrokeColorSpace","setFillColorSpace","setStrokeColor","setStrokeColorN","setFillColor","setFillColorN","setStrokeGray","setFillGray","setStrokeRGBColor","setFillRGBColor","setStrokeCMYKColor","setFillCMYKColor","shadingFill","beginInlineImage","beginImageData","endInlineImage","paintXObject","markPoint","markPointProps","beginMarkedContent","beginMarkedContentProps","endMarkedContent","beginCompat","endCompat","paintFormXObjectBegin","paintFormXObjectEnd","beginGroup","endGroup","beginAnnotation","endAnnotation","paintImageMaskXObject","paintImageMaskXObjectGroup","paintImageXObject","paintInlineImageXObject","paintInlineImageXObjectGroup","paintImageXObjectRepeat","paintImageMaskXObjectRepeat","paintSolidColorImageMask","constructPath","setStrokeTransparent","setFillTransparent","rawFillPath","DrawOPS","verbosity","setVerbosityLevel","level","Number","isInteger","getVerbosityLevel","info","msg","console","log","warn","unreachable","Error","assert","cond","createValidAbsoluteUrl","url","baseUrl","options","addDefaultProtocol","startsWith","dots","match","length","tryConvertEncoding","decodeURIComponent","escape","absoluteUrl","URL","parse","protocol","_isValidProtocol","updateUrlHash","hash","allowRel","res","href","split","shadow","obj","prop","value","nonSerializable","Object","defineProperty","enumerable","configurable","writable","BaseException","message","name","this","prototype","constructor","PasswordException","code","super","UnknownErrorException","details","InvalidPDFException","ResponseException","status","missing","FormatError","AbortException","bytesToString","bytes","undefined","MAX_ARGUMENT_COUNT","String","fromCharCode","apply","strBuf","i","chunkEnd","Math","min","chunk","subarray","push","join","stringToBytes","str","Uint8Array","charCodeAt","util_FeatureTest","isLittleEndian","buffer8","Uint32Array","buffer","isEvalSupported","Function","isOffscreenCanvasSupported","OffscreenCanvas","isImageDecoderSupported","ImageDecoder","platform","userAgent","navigator","isAndroid","includes","isLinux","isMac","isWindows","isFirefox","isCSSRoundSupported","globalThis","CSS","supports","hexNumbers","Array","from","keys","n","toString","padStart","Util","makeHexColor","r","g","b","scaleMinMax","minMax","temp","m1","m2","applyTransform","p","m","pos","p0","p1","applyTransformToBezier","m0","m3","m4","m5","pI","pI1","applyInverseTransform","d","axialAlignedBoundingBox","rect","output","r0","r1","r2","r3","a0","a2","a1","a3","b0","b2","b1","b3","m1r0","m1r2","m2r1","m2r3","max","inverseTransform","singularValueDecompose2dScale","matrix","a","c","first","second","sqrt","normalizeRect","slice","intersect","rect1","rect2","xLow","xHigh","yLow","yHigh","pointBoundingBox","x","y","rectBoundingBox","x0","y0","x1","y1","getExtremumOnCurve","x2","x3","y2","y3","t","mt","tt","ttt","getExtremum","abs","delta","sqrtDelta","bezierBoundingBox","NormalizeRegex","NormalizationMap","getUuid","crypto","randomUUID","buf","getRandomValues","AnnotationPrefix","MathClamp","v","toBase64Util","arr","toBase64","btoa","Promise","try","fn","args","resolve","sumPrecise","numbers","reduce","SVG_NS","PixelsPerInch","static","PDF","async","fetchData","isValidFetchUrl","document","baseURI","response","fetch","ok","statusText","arrayBuffer","blob","json","text","reject","request","XMLHttpRequest","open","responseType","onreadystatechange","readyState","DONE","responseText","send","PageViewport","viewBox","userUnit","scale","rotation","offsetX","offsetY","dontFlip","centerX","centerY","rotateA","rotateB","rotateC","rotateD","offsetCanvasX","offsetCanvasY","width","height","rawDims","dims","pageWidth","pageHeight","pageX","pageY","clone","convertToViewportPoint","convertToViewportRectangle","topLeft","bottomRight","convertToPdfPoint","RenderingCancelledException","extraDelay","isDataScheme","ii","trim","substring","toLowerCase","isPdfFile","filename","test","StatTimer","started","create","times","time","Date","now","timeEnd","start","end","outBuf","longest","padEnd","noContextMenu","e","preventDefault","stopEvent","stopPropagation","PDFDateString","toDateObject","input","regex","RegExp","matches","exec","year","parseInt","month","day","hour","minute","universalTimeRelation","offsetHour","offsetMinute","UTC","getRGB","color","colorRGB","map","getCurrentTransform","ctx","f","getTransform","getCurrentTransformInverse","invertSelf","setLayerDimensions","div","viewport","mustFlip","mustRotate","style","useRound","w","h","widthStr","heightStr","setAttribute","OutputScale","pixelRatio","sx","sy","scaled","symmetric","limitCanvas","maxPixels","maxDim","capAreaFactor","maxAreaScale","Infinity","maxWidthScale","maxHeightScale","capPixels","maxScale","devicePixelRatio","winPixels","ceil","window","screen","availWidth","availHeight","SupportedImageMimeTypes","EditorToolbar","toolbar","colorPicker","editor","buttons","altText","signatureDescriptionButton","l10nRemove","freeze","freetext","highlight","ink","stamp","signature","render","editToolbar","createElement","classList","add","signal","_uiManager","_signal","addEventListener","pointerDown","className","append","position","toolbarPosition","direction","insetInlineEnd","top","focusIn","_focusEventsAllowed","focusOut","addListenersToElement","element","bind","capture","hide","hideDropdown","show","remove","shown","addDeleteButton","editorType","button","tabIndex","delete","divider","addAltText","addColorPicker","renderButton","addEditSignatureButton","signatureManager","renderEditButton","addButton","tool","updateEditSignatureButton","description","title","destroy","HighlightToolbar","uiManager","addHighlightButton","getLastPoint","boxes","isLTR","lastY","lastX","box","parent","span","highlightSelection","bindEvents","names","IdManager","id","ImageManager","baseId","cache","_isSVGFittingCanvas","getContext","willReadFrequently","image","Image","src","decode","then","drawImage","getImageData","data","get","key","rawData","Map","bitmap","refCounter","isSvg","File","file","Blob","mustRemoveAspectRatioPromise","fileReader","FileReader","imageElement","imagePromise","onload","svgUrl","result","onerror","readAsDataURL","createImageBitmap","set","getFromFile","lastModified","size","getFromUrl","getFromBlob","blobPromise","getFromId","getFromCanvas","canvas","offscreen","transferToImageBitmap","getSvgUrl","deleteId","transferFromImageBitmap","convertToBlob","close","isValidId","CommandManager","commands","locked","maxSize","cmd","undo","post","mustExec","NaN","overwriteIfSameType","keepUndo","next","splice","redo","hasSomethingToUndo","hasSomethingToRedo","cleanType","KeyboardManager","callbacks","allKeys","Set","callback","isMacKey","at","serialize","event","altKey","ctrlKey","metaKey","shiftKey","self","has","bubbles","checker","ColorManager","_colors","colors","visibility","colorScheme","body","computedColor","getComputedStyle","getColorValues","convert","rgb","matchMedia","RGB","every","_colorsMapping","getHexCode","AnnotationEditorUIManager","abortController","AbortController","activeEditor","allEditors","allLayers","altTextManager","annotationStorage","changedExistingAnnotations","commandManager","copyPasteAC","currentDrawingSession","currentPageIndex","deletedAnnotationsElementIds","draggingEditors","editorTypes","editorsToRescale","_editorUndoBar","enableHighlightFloatingButton","enableUpdatedAddImage","enableNewAltTextWhenAddingImage","filterFactory","focusMainContainerTimeoutId","focusManagerAC","highlightColors","highlightWhenShiftUp","highlightToolbar","idManager","isEnabled","isWaiting","keyboardManagerAC","lastActiveElement","mainHighlightColorPicker","missingCanvases","mlManager","mode","selectedEditors","selectedTextNode","pageColors","showAllStates","previousStates","isEditing","isEmpty","hasSelectedEditor","hasSelectedText","translation","translationTimeoutId","container","viewer","viewerAlert","updateModeCapability","_keyboardManager","proto","arrowChecker","contains","activeElement","tagName","hasSomethingToControl","textInputChecker","_self","target","el","HTMLInputElement","small","TRANSLATE_SMALL","big","TRANSLATE_BIG","selectAll","addNewEditorFromKeyboard","HTMLButtonElement","isEnterHandled","unselectAll","translateSelectedEditors","eventBus","pdfDocument","editorUndoBar","supportsPinchToZoom","_eventBus","_on","onEditingAction","onPageChanging","onScaleChanging","onRotationChanging","onSetPreference","evt","updateParams","addSelectionListener","addDragAndDropListeners","addKeyboardManager","viewParameters","realScale","PDF_TO_CSS_UNITS","isShiftKeyDown","_supportsPinchToZoom","abort","layer","values","clear","clearTimeout","combinedSignal","ac","AbortSignal","any","useNewAltTextFlow","useNewAltTextWhenAddingImage","hcmFilter","addHCMFilter","foreground","background","pair","toUpperCase","highlightColorNames","reverse","setCurrentDrawingSession","disableUserSelect","setMainHighlightColorPicker","editAltText","firstTime","getSignature","switchToMode","on","once","dispatch","source","setPreference","pageNumber","focusMainContainer","focus","findParent","layerX","layerY","getBoundingClientRect","toggle","addShouldRescale","removeShouldRescale","commitOrRemove","pagesRotation","getAnchorElementForSelection","anchorNode","nodeType","Node","TEXT_NODE","parentElement","getLayerForTextLayer","textLayer","currentLayer","hasTextLayer","methodOfCreation","selection","getSelection","isCollapsed","anchorOffset","focusNode","focusOffset","closest","getSelectionBoxes","empty","isNoneMode","createAndAddNewEditor","showAllEditors","displayHighlightToolbar","addToAnnotationStorage","setValue","a11yAlert","messageId","JSON","stringify","removeAttribute","selectionChange","dispatchUpdateStates","activeLayer","toggleDrawing","pointerup","onSelectEnd","addFocusManager","blur","removeFocusManager","hasSelection","lastEditor","keydown","keyup","removeKeyboardManager","addCopyPasteListeners","copy","cut","paste","removeCopyPasteListeners","dragOver","drop","addEditListeners","removeEditListeners","dataTransfer","items","isHandlingMimeForPasting","dropEffect","item","editors","serialized","clipboardData","setData","getData","ex","isArray","newEditors","deserializedEditor","deserialize","addEditorToLayer","selectEditors","addCommands","isEditorHandlingKeyboard","entries","some","assign","dispatchUpdateUI","setEditingState","registerEditorTypes","types","defaultPropertiesToUpdate","getId","getLayer","pageIndex","addLayer","enable","disable","removeLayer","updateMode","editId","isFromKeyboard","mustEnterInEditMode","promise","withResolvers","disableAll","loadSignatures","enableAll","annotationElementId","setSelected","enterInEditMode","unselect","canCreateNewEmptyEditor","addNewEditor","updateToolbar","updateColor","action","updateDefaultParams","visible","updateButton","enableWaiting","mustWait","disableClick","enableClick","promises","all","getEditors","getEditor","addEditor","removeEditor","setTimeout","addDeletedAnnotationElement","addChangedExistingAnnotation","deleted","isDeletedAnnotationElement","removeDeletedAnnotationElement","removeChangedExistingAnnotation","addOrRebuild","setActiveEditor","propertiesToUpdate","lastSelectedEditor","ed","updateUI","updateUIForDefaultProperties","toggleSelected","select","isSelected","firstSelectedEditor","params","cleanUndoStack","drawingEditor","endDrawingSession","commit","noCommit","totalX","totalY","translateInPage","translationDone","setUpDragSession","savedX","savedY","savedPageIndex","newX","newY","newPageIndex","endDragSession","mustBeAddedInUndoStack","move","_setParentAndPosition","dragSelectedEditors","tx","ty","drag","rebuild","changeParent","getActive","shouldGetKeyboardEvents","isActive","getMode","imageManager","rangeCount","getRangeAt","commonAncestorContainer","parentWidth","parentHeight","rotator","getAttribute","range","collapsed","getClientRects","renderAnnotationElement","annotation","editorId","getRawValue","hasBeenModified","setMissingCanvas","annotationId","setCanvas","addMissingCanvas","AltText","altTextDecorative","altTextButton","altTextButtonLabel","altTextTooltip","altTextTooltipTimeout","altTextWasFromKeyBoard","badge","guessedText","textWithDisclaimer","l10nNewButton","added","review","initialize","l10n","_l10n","label","onClick","_reportTelemetry","setState","finish","focusVisible","hasData","setGuessedText","generatedAltText","toggleAltTextBadge","isForCopying","decorative","cancel","enabled","disabled","tooltip","DELAY_TO_SHOW_TOOLTIP","textContent","parentNode","getElementForAltText","TouchManager","isPinching","isPinchingStopped","isPinchingDisabled","onPinchStart","onPinching","onPinchEnd","pointerDownAC","touchInfo","touchManagerAC","touchMoveAC","onTouchStart","passive","MIN_TOUCH_DISTANCE_TO_PINCH","touches","opts","cancelPointerDown","pointerType","opt","onTouchMove","onTouchEnd","touch0","touch1","identifier","touch0X","screenX","touch0Y","screenY","touch1X","touch1Y","screen0X","screen0Y","screen1X","screen1Y","pTouch0X","pTouch0Y","pTouch1X","pTouch1Y","prevGapX","prevGapY","currGapX","currGapY","distance","hypot","pDistance","origin","AnnotationEditor","accessibilityData","allResizerDivs","dragPointerId","dragPointerType","keepAspectRatio","resizersDiv","lastPointerCoords","savedDimensions","focusAC","focusedResizerName","hasBeenClicked","initialRect","isInEditMode","isResizerEnabledForKeyboard","moveInDOMTimeout","prevDragX","prevDragY","telemetryTimeouts","touchManager","_isCopy","_editToolbar","_initialOptions","_initialData","_isVisible","isDraggable","zIndex","_zIndex","_resizerKeyboardManager","resize","_resizeWithKeyboard","_stopResizingWithKeyboard","parameters","_willKeepAspectRatio","isCentered","_structTreeParentId","pageRotation","pageDimensions","pageTranslation","parentDimensions","isAttachedToDOM","getPrototypeOf","_type","_editorType","isDrawer","_defaultLineColor","_colorManager","deleteAnnotationElement","fakeEditor","FakeEditor","getNextId","_l10nResizer","topMiddle","topRight","middleRight","bottomMiddle","bottomLeft","middleLeft","_borderLineWidth","documentElement","parseFloat","getPropertyValue","_value","mime","_isDraggable","center","parentRotation","fixAndSetPosition","setInBackground","setInForeground","setParent","stopResizing","focusin","focusout","relatedTarget","isMultipleSelection","setAt","screenToPageTranslation","_moveAfterPaste","baseX","baseY","_onTranslated","translate","_onTranslating","scrollIntoView","block","findNewParent","floor","bx","by","getBaseTranslation","left","toFixed","_hasBeenMoved","_hasBeenResized","_mustFixPosition","moveInDOM","rotatePoint","angle","pageTranslationToScreen","getRotationMatrix","parentScale","setDims","fixDims","widthPercent","endsWith","heightPercent","getInitialTranslation","createResizers","classes","resizerPointerdown","prepend","savedDraggable","togglePointerEvents","resizerPointermove","savedWidth","savedHeight","savedParentCursor","cursor","savedCursor","pointerUpCallback","addResizeToUndoStack","_onResized","newWidth","newHeight","_round","round","minWidth","MIN_SIZE","minHeight","rotationMatrix","transf","invRotationMatrix","getPoint","getOpposite","isDiagonal","isHorizontal","point","oppositePoint","transfOppositePoint","oppositeX","oppositeY","deltaX","deltaY","ratioX","ratioY","fromKeyboard","lastScreenX","lastScreenY","oldDiag","_onResizing","altTextFinish","toolbarButtons","addEditToolbar","removeEditToolbar","addContainer","editToolbarDiv","before","getClientDimensions","createAltText","altTextData","guessedAltText","setGuessedAltText","serializeAltText","hasAltText","hasAltTextData","defaultL10nId","addFocusListeners","maxWidth","maxHeight","isResizable","touchPinchStartCallback","touchPinchCallback","touchPinchEndCallback","_origin","prevDistance","factor","transfCenterPoint","newTransfCenterPoint","pointerdown","selectOnPointerEvent","hasDraggingStarted","cancelDrag","_onStopDragging","clientX","clientY","pointerId","_onStartDragging","isPrimary","moveEditorInDOM","getRect","shiftX","shiftY","getRectInCurrentCoords","onceAdded","enableEditMode","disableEditMode","needsToBeRebuilt","isOnScreen","bottom","right","innerHeight","innerWidth","rotate","_angle","serializeDeleted","popupRef","context","isCopy","timeout","makeResizable","children","boundResizerKeydown","resizerKeydown","boundResizerBlur","resizerBlur","resizerFocus","firstPosition","nextFirstPosition","firstChild","lastChild","child","setResizerTabIndex","stopImmediatePropagation","preventScroll","disableEditing","enableEditing","canChangeContent","dblclick","contentDiv","setAspectRatio","aspectRatio","telemetryInitialData","telemetryFinalData","_telemetryTimeout","content","querySelector","nodeName","resetAnnotationElement","SEED","MASK_HIGH","MASK_LOW","MurmurHash3_64","seed","h1","h2","update","ArrayBuffer","isView","byteLength","blockCounts","tailLength","dataUint32","k1","k2","C1","C2","C1_LOW","C2_LOW","hexdigest","SerializableEmpty","transfer","AnnotationStorage","modified","modifiedIds","storage","onSetModified","onResetModified","onAnnotationEditor","getValue","defaultValue","resetModified","entry","val","setModified","print","PrintAnnotationStorage","serializable","hasBitmap","editorStats","stats","typeToEditor","counters","count","computeTelemetryFinalData","resetModifiedIds","ids","Symbol","iterator","structuredClone","FontLoader","systemFonts","ownerDocument","styleElement","_document","nativeFontFaces","loadingRequests","loadTestFontId","addNativeFontFace","nativeFontFace","fonts","removeNativeFontFace","insertRule","rule","getElementsByTagName","styleSheet","sheet","cssRules","loadSystemFont","systemFontInfo","disableFontFace","_inspectFont","loadedName","isFontLoadingAPISupported","fontFace","FontFace","load","baseFontName","font","attached","missingFile","createNativeFontFace","loaded","family","createFontFaceRule","isSyncFontLoadingSupported","_queueLoadingCallback","_prepareFontLoadEvent","done","complete","otherRequest","shift","_loadTestFont","atob","int32","offset","spliceString","s","insert","called","XXXX_VALUE","checksum","fontFamily","isFontReady","fillText","FontFaceObject","translatedData","inspectFont","compiledGlyphs","cssFontInfo","css","weight","fontWeight","italicAngle","mimetype","getPathGenerator","objs","character","objId","cmds","path","Path2D","fontExtraProperties","getFactoryUrlProp","isRefProxy","num","gen","isValidExplicitDest","validRef","validName","dest","page","zoom","argsLen","allowNull","arg","LoopbackPort","listeners","deferred","postMessage","listener","call","rmAbort","aborted","onAbort","removeEventListener","terminate","CallbackKind","StreamKind","onFn","wrapReason","MessageHandler","messageAC","sourceName","targetName","comObj","callbackId","streamId","streamSinks","streamControllers","callbackCapabilities","actionHandler","onMessage","stream","processStreamMessage","capability","reason","createStreamSink","actionName","handler","ah","transfers","sendWithPromise","sendWithStream","queueingStrategy","ReadableStream","controller","startCapability","startCall","pullCall","cancelCall","isClosed","desiredSize","pull","pullCapability","cancelCapability","streamSink","enqueue","isCancelled","lastDesiredSize","sinkCapability","ready","error","onPull","onCancel","success","streamController","deleteStreamController","dataReason","allSettled","BaseCanvasFactory","enableHWA","_createCanvas","reset","canvasAndContext","DOMCanvasFactory","BaseCMapReaderFactory","isCompressed","_fetch","cMapData","catch","DOMCMapReaderFactory","BaseFilterFactory","addFilter","maps","fgColor","bgColor","addAlphaFilter","addLuminosityFilter","addHighlightHCMFilter","filterName","newFgColor","newBgColor","keepHCM","DOMFilterFactory","_cache","_defs","docId","_hcmCache","hcmCache","defs","contain","svg","createElementNS","createTables","mapR","table","mapG","mapB","bufferR","bufferG","bufferB","createUrl","tableR","tableG","tableB","filter","createFilter","addTransferMapConversion","fgRGB","bgRGB","addGrayConversion","getSteps","tableA","addTransferMapAlphaConversion","addLuminosityConversion","fgGray","bgGray","newFgRGB","newBgRGB","fg","bg","step","newStart","newStep","prev","k","j","feColorMatrix","appendFeFunc","feComponentTransfer","func","feFunc","rTable","gTable","bTable","aTable","BaseStandardFontDataFactory","DOMStandardFontDataFactory","BaseWasmFactory","DOMWasmFactory","node_utils_fetchData","fs","getBuiltinModule","readFile","NodeFilterFactory","NodeCanvasFactory","createRequire","require","createCanvas","NodeCMapReaderFactory","NodeStandardFontDataFactory","NodeWasmFactory","PathType","applyBoundingBox","bbox","region","BaseShadingPattern","isModifyingCurrentTransform","getPattern","RadialAxialShadingPattern","IR","_bbox","_colorStops","_p0","_p1","_r0","_r1","_createGradient","grad","createLinearGradient","createRadialGradient","colorStop","addColorStop","owner","inverse","pathType","pattern","ownerBBox","current","getClippedPathBoundingBox","tmpCanvas","cachedCanvases","getCanvas","tmpCtx","clearRect","beginPath","baseTransform","fillStyle","createPattern","domMatrix","DOMMatrix","setTransform","drawTriangle","p2","p3","c1","c2","c3","coords","rowSize","tmp","scaleX","scaleY","c1r","c1g","c1b","c2r","c2g","c2b","c3r","c3g","c3b","minY","maxY","xa","car","cag","cab","xb","cbr","cbg","cbb","x1_","x2_","drawFigure","figure","ps","cs","verticesPerRow","rows","cols","q","MeshShadingPattern","_coords","_figures","_bounds","_background","_createMeshCanvas","combinedScale","backgroundColor","boundsWidth","boundsHeight","paddedWidth","BORDER_SIZE","paddedHeight","createImageData","putImageData","Float32Array","matrixScaleX","matrixScaleY","temporaryPatternCanvas","DummyShadingPattern","PaintType","TilingPattern","canvasGraphicsFactory","operatorList","xstep","ystep","paintType","tilingType","createPatternCanvas","combinedScaleX","combinedScaleY","canvasWidth","canvasHeight","redrawHorizontally","redrawVertically","xScaledStep","yScaledStep","dimx","getSizeAndScale","dimy","graphics","createCanvasGraphics","groupLevel","setFillAndStrokeStyleToContext","clipBbox","executeOperatorList","endDrawing","dimx2","dimy2","xSize","ySize","tmpCanvas2","tmpCtx2","jj","realOutputSize","MAX_PATTERN_SIZE","bboxWidth","bboxHeight","strokeStyle","fillColor","strokeColor","convertBlackAndWhiteToRGBA","srcPos","nonBlackColor","inverseDecode","black","zeroMapping","oneMapping","widthInSource","widthRemainder","srcLength","destPos","elem","FULL_CHUNK_HEIGHT","SCALE_MATRIX","XY","MIN_MAX_INIT","CachedCanvases","canvasFactory","canvasEntry","drawImageAtIntegerCoords","srcImg","srcX","srcY","srcW","srcH","destX","destY","destW","destH","tlX","rTlX","tlY","rTlY","brX","rWidth","brY","rHeight","sign","CanvasExtraState","alphaIsShape","fontSize","fontSizeScale","textMatrix","textMatrixScale","fontMatrix","leading","lineX","lineY","charSpacing","wordSpacing","textHScale","textRenderingMode","textRise","patternFill","patternStroke","fillAlpha","strokeAlpha","lineWidth","activeSMask","transferMaps","clipBox","getPathBoundingBox","xStrokePad","yStrokePad","updateClipFromPath","startNewPathAndClipBox","isEmptyClip","putBinaryImageData","imgData","ImageData","partialChunkHeight","fullChunks","totalChunks","chunkImgData","thisChunkHeight","elemsInThisChunk","kind","dest32","dest32DataLength","fullSrcDiff","white","srcDiff","kEnd","kEndUnrolled","mask","srcByte","putBinaryImageMask","copyCtxState","sourceCtx","destCtx","properties","property","setLineDash","getLineDash","lineDashOffset","resetCtxToDefault","fillRule","globalAlpha","lineCap","lineJoin","miterLimit","globalCompositeOperation","getImageSmoothingEnabled","interpolate","actualScale","fround","LINE_CAP_STYLES","LINE_JOIN_STYLES","NORMAL_CLIP","EO_CLIP","CanvasGraphics","canvasCtx","commonObjs","optionalContentConfig","markedContentStack","annotationCanvasMap","stateStack","pendingClip","pendingEOFill","xobjs","groupStack","baseTransformStack","smaskStack","smaskCounter","tempSMask","suspendedCtx","contentVisible","cachedPatterns","viewportScale","outputScaleX","outputScaleY","_cachedScaleForStroking","_cachedGetSinglePixelWidth","_cachedBitmapsMap","getObject","fallback","beginDrawing","transparency","savedFillStyle","fillRect","transparentCanvas","compositeCtx","executionStartIdx","continueCallback","stepper","argsArray","fnArray","argsArrayLen","chunkOperations","endTime","steps","fnId","nextBreakPoint","breakIt","depObjId","objsPool","restoreInitialState","inSMaskMode","HTMLCanvasElement","drawFilter","hcmFilterId","savedFilter","_scaleImage","img","displayWidth","displayHeight","widthScale","heightScale","paintWidth","paintHeight","tmpCanvasId","_createMaskCanvas","isPatternFill","currentTransform","cacheKey","maskCanvas","mainKey","cachedImage","maskToCanvas","minX","maxX","drawnWidth","drawnHeight","fillCanvas","fillCtx","imageSmoothingEnabled","limit","dashArray","dashPhase","intent","flatness","states","checkSMaskState","beginSMaskMode","endSMaskMode","cacheId","scratchCanvas","_removeMirroring","__originalSave","__originalRestore","__originalRotate","__originalScale","__originalTranslate","__originalTransform","__originalSetTransform","__originalResetTransform","resetTransform","__originalClip","__originalMoveTo","__originalLineTo","__originalBezierCurveTo","bezierCurveTo","__originalRect","__originalClosePath","__originalBeginPath","cp1x","cp1y","cp2x","cp2y","mirrorContextOperations","compose","dirtyBox","smask","composeSMask","layerCtx","layerBox","layerOffsetX","layerOffsetY","layerWidth","layerHeight","genericComposeSMask","subtype","backdrop","transferMap","maskCtx","maskOffsetX","maskOffsetY","maskX","maskY","old","pop","op","path2d","consumePath","newPath","addPath","multiplySelf","rescaleAndStroke","needRestore","paths","pendingTextPaths","invTransf","preMultiplySelf","spacing","fontRefName","fontObj","fontDirection","isType3Font","typeface","fallbackName","bold","italic","browserFontSize","rise","getScaledPath","paintChar","patternFillTransform","patternStrokeTransform","fillStrokeMode","isAddToPathSet","invPatternTransform","strokeText","isFontSubpixelAAEnabled","glyphs","showType3Text","glyphsLength","vertical","spacingDir","defaultVMetrics","widthAdvanceScale","simpleFillText","getSinglePixelWidth","isInvalidPDFjsFont","chars","glyph","unicode","restoreNeeded","isSpace","fontChar","accent","scaledX","scaledY","vmetric","vx","vy","remeasure","measuredWidth","measureText","characterScaleX","isInFont","scaledAccentX","scaledAccentY","spacingLength","charProcOperatorList","operatorListId","xWidth","yWidth","llx","lly","urx","ury","getColorN_Pattern","_getPattern","arguments","getShadingPattern","inv","group","currentCtx","isolated","knockout","bounds","canvasBounds","groupCtx","startTransformInverse","currentMtx","hasOwnCanvas","annotationCanvas","savedCtx","skewX","skewY","positions","trans","images","applyTransferMapsToCanvas","applyTransferMapsToBitmap","imgToPaint","HTMLElement","tag","isVisible","isContentVisible","absDet","normX","normY","getScaleForStroking","scaledLineWidth","scaledXLineWidth","scaledYLineWidth","baseArea","saveRestore","dashes","GlobalWorkerOptions","workerPort","port","Worker","workerSrc","Metadata","parsedData","getRaw","INTERNAL","OptionalContentGroup","isDisplay","isPrint","userSet","renderingIntent","usage","rbGroups","view","viewState","printState","_setVisible","internal","OptionalContentConfig","cachedGetHash","groups","initialHash","order","creator","baseState","off","getHash","evaluateVisibilityExpression","array","operator","state","expression","policy","setVisibility","preserveRB","rbGroup","otherId","setOCGState","hasInitialVisibility","getOrder","getGroup","PDFDataTransportStream","pdfDataRangeTransport","disableRange","disableStream","initialData","progressiveDone","contentDispositionFilename","_queuedChunks","_progressiveDone","_contentDispositionFilename","_pdfDataRangeTransport","_isStreamingSupported","_isRangeSupported","_contentLength","_fullRequestReader","_rangeReaders","addRangeListener","begin","_onReceiveData","addProgressListener","total","_onProgress","addProgressiveReadListener","addProgressiveDoneListener","_onProgressiveDone","transportReady","_enqueue","rangeReader","_begin","_progressiveDataLength","_loaded","onProgress","_removeRangeReader","reader","indexOf","getFullReader","queuedChunks","PDFDataTransportStreamReader","getRangeReader","PDFDataTransportStreamRangeReader","requestDataRange","cancelAllRequests","_stream","_done","_filename","_requests","_headersReady","headersReady","isRangeSupported","isStreamingSupported","contentLength","read","requestCapability","_end","_queuedChunk","createHeaders","isHttp","httpHeaders","headers","Headers","getResponseOrigin","validateRangeRequestCapabilities","responseHeaders","rangeChunkSize","returnValues","allowRangeRequests","suggestedLength","extractFilenameFromHeader","contentDisposition","needsEncodingFixup","toParamRegExp","rfc2616unquote","unescape","rfc5987decode","rfc2047decode","fixupEncoding","contentDispositionStr","iter","quot","part","parts","rfc2231getparam","attributePattern","flags","textdecode","encoding","decoder","TextDecoder","fatal","quotindex","replaceAll","extvalue","encodingend","replace","charset","hex","getFilenameFromContentDispositionHeader","createResponseError","validateResponseStatus","createFetchOptions","withCredentials","method","credentials","redirect","getArrayBuffer","PDFFetchStream","_responseOrigin","_rangeRequestReaders","PDFFetchStreamReader","PDFFetchStreamRangeReader","_reader","_withCredentials","_headersCapability","_disableRange","_rangeChunkSize","_abortController","getReader","_readCapability","responseOrigin","NetworkManager","currXhrId","pendingRequests","xhr","xhrId","pendingRequest","setRequestHeader","expectedStatus","onError","onStateChange","onprogress","onHeadersReceived","onDone","xhrStatus","network_getArrayBuffer","rangeHeader","getResponseHeader","getRequestXhr","isPendingRequest","abortRequest","PDFNetworkStream","_source","_manager","_onRangeRequestReaderClosed","PDFNetworkStreamFullRequestReader","PDFNetworkStreamRangeRequestReader","onClosed","manager","_url","_fullRequestId","_onHeadersReceived","_onDone","_onError","_cachedChunks","_storedError","fullRequestXhrId","fullRequestXhr","responseURL","rawResponseHeaders","getAllResponseHeaders","trimStart","lengthComputable","_requestId","_close","urlRegex","PDFNodeStream","sourceUrl","pathToFileURL","parseUrlOrPath","PDFNodeStreamFsFullReader","PDFNodeStreamFsRangeReader","_readableStream","lstat","stat","_setReadableStream","createReadStream","_error","readableStream","INITIAL_DATA","PDFObjects","ensureObj","TextLayer","disableProcessItems","fontInspectorEnabled","FontInspector","lang","layoutTextParams","rootContainer","styleCache","textContentItemsStr","textContentSource","textDivs","textDivProperties","WeakMap","ensureMinFontSizeComputed","finally","pendingTextLayers","fontFamilyMap","pump","styles","processItems","onBefore","getCtx","layout","abortEx","appendText","geom","textDiv","hasText","hasEOL","atan2","fontName","PI","fontSubstitution","fontHeight","fontAscent","getAscent","sin","cos","scaleFactorStr","divStyle","minFontSize","dir","dataset","fontSubstitutionLoadedName","shouldScaleText","absScaleX","absScaleY","br","ensureCtxFont","cleanup","ascentCache","canvasContexts","alpha","canvasCtxFonts","cached","opacity","lineHeight","cachedAscent","metrics","ascent","fontBoundingBoxAscent","descent","fontBoundingBoxDescent","ratio","XfaText","xfa","walk","node","shouldBuildText","attributes","getDocument","task","PDFDocumentLoadingTask","location","getUrlProp","Buffer","isNaN","getDataProp","password","rangeTransport","PDFDataRangeTransport","worker","PDFWorker","docBaseUrl","cMapUrl","cMapPacked","CMapReaderFactory","iccUrl","standardFontDataUrl","StandardFontDataFactory","wasmUrl","WasmFactory","ignoreErrors","stopAtErrors","maxImageSize","chrome","canvasMaxAreaInBytes","enableXfa","disableAutoFetch","pdfBug","CanvasFactory","FilterFactory","useWasm","useSystemFonts","useWorkerFetch","transportFactory","cMapReaderFactory","standardFontDataFactory","wasmFactory","_worker","docParams","apiVersion","evaluatorOptions","transportParams","loadingParams","destroyed","workerIdPromise","messageHandler","networkStream","NetworkStream","workerId","transport","WorkerTransport","_transport","_capability","onPassword","_pendingDestroy","progressiveDoneListeners","progressiveReadListeners","progressListeners","rangeListeners","onDataRange","onDataProgress","onDataProgressiveRead","onDataProgressiveDone","PDFDocumentProxy","pdfInfo","_pdfInfo","numPages","fingerprints","isPureXfa","_htmlForXfa","allXfaHtml","getPage","getPageIndex","ref","getDestinations","getDestination","getPageLabels","getPageLayout","getPageMode","getViewerPreferences","getOpenAction","getAttachments","getJSActions","getDocJSActions","getOutline","getOptionalContentConfig","getRenderingIntent","getPermissions","getMetadata","getMarkInfo","saveDocument","getDownloadInfo","downloadInfoCapability","keepLoadedFonts","startCleanup","loadingTask","cachedPageNumber","getFieldObjects","hasJSActions","getCalculationOrderIds","PDFPageProxy","pendingCleanup","pageInfo","_pageIndex","_pageInfo","_stats","_pdfBug","_intentStates","getViewport","getAnnotations","getPageJSActions","getXfa","canvasContext","annotationMode","optionalContentConfigPromise","printAnnotationStorage","intentArgs","intentState","streamReaderCancelTimeout","intentPrint","displayReadyCapability","lastChunk","separateAnnots","_pumpOperatorList","renderTasks","internalRenderTask","tryCleanup","_abortOperatorList","Stats","InternalRenderTask","useRequestAnimationFrame","renderTask","initializeGraphics","operatorListChanged","getOperatorList","opListTask","opListReadCapability","streamTextContent","includeMarkedContent","disableNormalization","highWaterMark","getTextContent","getStructTree","_destroy","waitOn","force","completed","resetStats","_startRenderPage","_renderPageChunk","operatorListChunk","annotationStorageSerializable","streamReader","delay","curCacheKey","curIntentState","webWorker","isWorkerDisabled","_isSameOrigin","otherUrl","base","other","_createCDNWrapper","wrapper","createObjectURL","fromPort","workerPorts","initializeFromPort","mainThreadWorkerMessageHandler","setupFakeWorker","terminateEarly","sendTest","testObj","_setupFakeWorkerGlobal","WorkerMessageHandler","fakeWorkerId","workerHandler","setup","cachedPort","pdfjsWorker","import","loader","methodPromises","pageCache","pagePromises","pageRefCache","passwordCapability","factory","fontLoader","_params","destroyCapability","_networkStream","_fullReader","_lastProgress","setupMessageHandler","cacheSimpleMethod","cachedPromise","isOpList","modifiedIdsHash","hasOwnProperty","terminated","sink","readyReason","_numPages","htmlForXfa","updatePassword","err","exportedData","exportedError","fontAdded","imageRef","pageProxy","dataLen","imageData","refStr","results","metadata","RenderTask","onContinue","form","rAF","WeakSet","operatorListIdx","running","graphicsReadyCallback","graphicsReady","_useRequestAnimationFrame","cancelled","_cancelBound","_continueBound","_continue","_scheduleNextBound","_scheduleNext","_nextBound","_next","_canvas","canvasInUse","StepperManager","init","getNextBreakPoint","gfx","cancelAnimationFrame","updateOperatorList","requestAnimationFrame","makeColorComp","scaleAndClamp","ColorConverters","CMYK_G","G_CMYK","G_RGB","G_rgb","G_HTML","G","RGB_G","RGB_rgb","RGB_HTML","T_HTML","T_rgb","CMYK_RGB","CMYK_rgb","CMYK_HTML","components","RGB_CMYK","BaseSVGFactory","skipDimensions","_createSVG","DOMSVGFactory","XfaLayer","setupStorage","html","storedData","xfaOn","xfaOff","checked","option","selected","selectedIndex","setAttributes","linkService","isHTMLAnchorElement","HTMLAnchorElement","addLinkAttributes","newWindow","dataId","root","xfaHtml","rootHtml","isNotForRichText","rootDiv","createTextNode","stack","childHtml","xmlns","querySelectorAll","hidden","GetElementsByNameSet","AnnotationElementFactory","annotationType","LinkAnnotationElement","TextAnnotationElement","fieldType","TextWidgetAnnotationElement","radioButton","RadioButtonWidgetAnnotationElement","checkBox","CheckboxWidgetAnnotationElement","PushButtonWidgetAnnotationElement","ChoiceWidgetAnnotationElement","SignatureWidgetAnnotationElement","WidgetAnnotationElement","PopupAnnotationElement","FreeTextAnnotationElement","LineAnnotationElement","SquareAnnotationElement","CircleAnnotationElement","PolylineAnnotationElement","CaretAnnotationElement","InkAnnotationElement","PolygonAnnotationElement","HighlightAnnotationElement","UnderlineAnnotationElement","SquigglyAnnotationElement","StrikeOutAnnotationElement","StampAnnotationElement","FileAttachmentAnnotationElement","AnnotationElement","updates","hasBorder","popupElement","isRenderable","ignoreBorder","createQuadrilaterals","downloadManager","imageResourcesPath","renderForms","svgFactory","enableScripting","_fieldObjects","fieldObjects","_createContainer","_createQuadrilaterals","_hasPopupData","contentsObj","richText","_isEditable","isEditable","hasPopupData","updateEdited","setRectEdited","popup","resetEdited","currentRect","setRotation","alternativeText","noRotate","borderStyle","borderWidth","horizontalRadius","horizontalCornerRadius","verticalRadius","verticalCornerRadius","radius","borderRadius","borderBottomStyle","borderColor","_commonActions","setColor","jsName","styleName","detail","colorType","colorArray","display","noView","noPrint","userName","readonly","required","_setRequired","textColor","_dispatchEventFromSandbox","actions","jsEvent","commonActions","_setDefaultPropertiesFromJS","quadPoints","rectBlX","rectBlY","rectTrX","rectTrY","trX","trY","blX","blY","svgBuffer","role","clipPath","rectWidth","rectHeight","backgroundImage","_createPopup","titleObj","modificationDate","parentRect","elements","_getElementsByName","skipId","fields","fieldObj","exportValues","exportValue","domElement","getElementsByName","maybeShow","forceHide","getElementsToTriggerPopup","addHighlightArea","triggers","_editOnDoubleClick","annotationEditorType","isTooltipOnly","link","isBound","_bindNamedAction","attachment","bindAttachment","attachmentDest","bindSetOCGState","_bindLink","Action","_bindJSAction","resetForm","_bindResetFormAction","setInternalLink","destination","getDestinationHash","onclick","goToDestination","getAnchorUrl","executeNamedAction","openOrDownloadData","executeSetOCGState","otherClickAction","resetFormFields","refs","resetFormRefs","include","allFields","fieldIds","fieldName","field","allIds","dispatchEvent","Event","showElementAndHideCanvas","previousSibling","_getKeyModifier","_setEventListener","elementData","baseName","eventName","valueGetter","modifier","focused","_setEventListeners","getter","Blur","Focus","_setBackgroundColor","_setTextStyle","TEXT_ALIGNMENT","fontColor","defaultAppearanceData","computedFontSize","roundToOneDecimal","multiLine","textAlignment","textAlign","isRequired","hasAppearance","fieldValue","setPropertyOnSiblings","keyInStorage","maxLen","charLimit","fieldFormattedValues","formattedValue","comb","userValue","lastCommittedValue","commitKey","doNotScroll","overflowY","overflowX","readOnly","format","dateFormat","timeFormat","maxLength","defaultFieldValue","blurListener","scrollLeft","selRange","setSelectionRange","willCommit","selStart","selectionStart","selEnd","selectionEnd","_blurListener","Keystroke","inputType","change","combWidth","letterSpacing","verticalAlign","checkbox","curChecked","buttonValue","radio","pdfButtonValue","linkElement","selectElement","addAnEmptyEntry","combo","multiSelect","multiple","optionElement","displayValue","removeEmptyEntry","noneOptionElement","isExport","selectedValues","getItems","multipleSelection","index","findIndex","selectChild","indices","editable","changeEx","keyDown","PopupElement","elementIds","ariaHasPopup","boundKeyDown","boundHide","boundShow","boundToggle","dateObj","pinned","wasVisible","trigger","flatMap","baseColor","outlineColor","header","valueOf","dateTime","toISOString","contents","_formatContents","makePopupContent","popupLines","popupContent","lineAttributes","line","lines","setPosition","useParentRect","normalizedRect","popupLeft","popupTop","textPosition","lineSpan","lineCoordinates","square","circle","polyline","containerClassName","svgElementName","vertices","points","polylinesGroupElement","polylines","it","inkLists","thickness","overlaidText","mark","underline","strikeout","download","AnnotationLayer","accessibilityManager","editableAnnotations","structTreeLayer","annotationEditorUIManager","_annotationEditorUIManager","hasEditableAnnotations","appendElement","popupElements","contentElement","ariaAttributes","getAriaAttributes","after","moveElementInDOM","annotations","popupToElements","elementParams","noHTML","isPopupAnnotation","rendered","setAnnotationCanvasMap","addLinkAnnotations","_defaultBorderStyle","replaceWith","editableAnnotation","_hasNoCanvas","getEditableAnnotations","getEditableAnnotation","rawWidth","EOL_PATTERN","FreeTextEditor","editorDivId","editModeAC","_translateEmpty","_defaultColor","_defaultFontSize","_internalPadding","updateFontSize","setFontsize","editorDiv","setEditorDimensions","savedFontsize","col","savedColor","overlayDiv","contentEditable","editorDivKeydown","editorDivFocus","editorDivBlur","editorDivInput","editorDivPaste","innerText","extractText","normalize","prevChild","childNodes","getNodeContent","savedDisplay","savedVisibility","savedText","newText","trimEnd","setText","setContent","posX","posY","nodeValue","deserializeContent","deleteFromDocument","insertNode","collapseToStart","startContainer","startOffset","bufferBefore","bufferAfter","newRange","Range","beforeLength","setStart","setEnd","removeAllRanges","addRange","replaceChildren","serializeContent","padding","structTreeParentId","hasElementChanged","Outline","toSVGPath","_rotation","_rescale","_rescaleAndSwap","_translate","svgRound","_normalizePoint","_normalizePagePoint","createBezierPoints","FreeDrawOutliner","innerMargin","last","min_dist","scaleFactor","MIN_DIST","MIN_DIFF","MIN","getLastCoords","lastTop","lastBottom","diffX","diffY","diffD","K","nY","thX","thY","toSVGPathTwoPoints","toSVGPathEnd","toSVGPathStart","lastTopX","lastTopY","lastBottomX","lastBottomY","newFreeDrawOutline","outline","FreeDrawOutline","getOutlines","getOutlineTwoPoints","N","getOutlineEnd","getOutlineStart","lastPoint","computeMinMax","lastPointX","lastPointY","ltrCallback","newOutliner","getNewOutline","outliner","HighlightOutliner","verticalEdges","intervals","EPSILON","shiftedMinX","shiftedMinY","lastEdge","edge","sort","outlineVerticalEdges","breakEdge","edges","allEdges","edge1","edge2","outlines","HighlightOutline","binarySearch","middle","y4","polygon","prevX","prevY","classNamesForOutlining","FreeHighlightOutliner","FreeHighlightOutline","ColorPicker","buttonSwatch","defaultColor","dropdown","dropdownWasFromKeyboard","isMainColorPicker","openDropdownAC","_hideDropdownFromKeyboard","_colorSelectFromKeyboard","_moveToNext","_moveToPrevious","_moveToBeginning","_moveToEnd","l10nColor","blue","green","pink","red","yellow","ariaControls","openDropdown","swatch","ariaHidden","renderMainDropdown","getDropdownRoot","ariaOrientation","ariaLabelledBy","ariaMultiSelectable","ariaSelected","colorSelect","isDropdownVisible","nextSibling","ariaExpanded","HighlightEditor","clipPathId","focusOutlines","highlightDiv","highlightOutlines","isFreeHighlight","outlineId","_moveCaret","_defaultThickness","_defaultOpacity","highlightId","createFreeOutlines","addToDrawLayer","createOutlines","numberOfColors","outlinerForOutline","drawLayer","finalizeDraw","drawOutline","rootClass","highlightOutline","free","updateProperties","rotateBbox","updateThickness","setColorAndOpacity","opa","savedOpacity","savedThickness","setThickness","th","changeThickness","getRotation","addUndoableEditor","cleanDrawLayer","mustBeSelected","draw","pointerover","hovered","pointerleave","setCaret","serializeBoxes","serializeOutlines","startHighlighting","endHighlight","highlightMove","_freeHighlight","_freeHighlightId","_freeHighlightClipId","DrawingOptions","svgProperties","updateProperty","updateSVGProperty","toSVGProperties","updateAll","DrawingEditor","drawOutlines","mustBeCommitted","_drawId","_addOutlines","createDrawOutlines","drawId","drawingOptions","_drawingOptions","defaultProperties","createDrawing","updateBbox","_mergeSVGProperties","defaultSVGProperties","p1Keys","getDefaultDrawingOptions","_options","typesMap","supportMultipleDrawings","propertyName","_defaultDrawingOptions","_currentParent","currentDraw","_currentDrawId","_updateProperty","savedValue","setter","getPathResizingSVGProperties","convertToDrawSpace","rotateBox","getPathResizedSVGProperties","_x","_y","getPathTranslatedSVGProperties","moving","updateParent","convertToParentSpace","pW","pH","updateRotation","updateParentDimensions","onScaleChangingWhenDrawing","drawDiv","createDrawerInstance","_parentWidth","_parentHeight","startDrawing","_isLTR","currentPointerType","currentDrawingAC","currentPointerId","_endDraw","currentPointerIds","isCancellable","removeLastElement","_drawMove","timeStamp","currentMoveTimestamp","startNew","currentDrawingOptions","_cleanup","lastElement","getLastElement","setLastElement","isAborted","_INNER_MARGIN","createDrawingOptions","_data","deserializeDraw","_pageX","_pageY","_pageWidth","_pageHeight","_innerWidth","serializeDraw","InkDrawOutliner","Float64Array","lastSVGPath","lastIndex","InkDrawOutline","normalizePoint","firstX","firstY","lastIndexOf","secondX","secondY","c1x","c1y","c2x","c2y","build","currentRotation","computeBbox","serializedLines","serializedPoints","getBBoxWithNoMargin","rescaleFn","newLines","len","getMarginComponents","margin","marginX","marginY","oldMarginX","oldMarginY","newMarginX","newMarginY","diffMarginX","diffMarginY","rotationTransform","PRECISION","s1x","s1y","s2x","s2y","newParentWidth","newParentHeight","InkDrawingOptions","viewerParameters","_viewParameters","InkEditor","ContourDrawOutline","SignatureExtractor","sigmaSFactor","sigmaR","kernelSize","neighborIndexToId","i0","j0","Int32Array","clockwiseNonZero","kk","neighborIdToIndex","counterClockwiseNonZero","findContours","threshold","lnbd","nbd","contours","ij","pix","i2","j2","isHole","contour","contour0","shiftI","shiftJ","i1","j1","i3","j3","i4","j4","ij3","douglasPeuckerHelper","ax","ay","abx","aby","dist","nabx","naby","aa","invS","phi","atan","cosPhi","sinPhi","tmax","poly","partialPhi","dmax","douglasPeucker","bilateralFilter","sigmaS","kernel","sigmaS2","halfSize","exp","rangeValues","sigmaR2","out","histogram","sum","norm","l","neighbour","getHistogram","toUint8","Uint8ClampedArray","guessThreshold","M","L","spos","getGrayPixels","originalBitmap","PARAMETERS","prevWidth","prevHeight","log2","isteps","grayImage","extractContoursFromText","fontStyle","actualBoundingBoxLeft","actualBoundingBoxRight","actualBoundingBoxAscent","actualBoundingBoxDescent","SCALE","uint8Buf","contourList","processDrawnLines","curves","mustSmooth","areContours","linesAndPoints","xScale","yScale","newCurves","reducedPoints","newPoints","compressSignature","bufferType","minDiff","maxDiff","outlinesLength","dx","Int8Array","Int16Array","headerLength","BYTES_PER_ELEMENT","CompressionStream","writer","getWriter","write","BufferCtor","diffs","Response","readable","decompressSignature","signatureData","fromBase64","DecompressionStream","version","numberOfDrawings","diffsOffset","POINTS_PROPERTIES_NUMBER","SignatureOptions","DrawnSignatureOptions","SignatureEditor","isExtracted","signatureUUID","_defaultDrawnSignatureOptions","hasDescription","hasDescriptionStats","hasNoAltText","uuid","heightInPage","addSignature","setUuid","getSignaturePreview","hasBeenSaved","getFromImage","getFromText","fontInfo","getDrawnSignature","isSignature","alt","StampEditor","bitmapId","bitmapPromise","bitmapUrl","bitmapFile","bitmapFileName","missingCanvas","resizeTimeoutId","hasBeenAddedInUndoStack","pasteEditor","getAsFile","hasAltTextStats","getBitmapFetched","fromId","getBitmapDone","alt_text_modal","alt_text_type","mlGuessAltText","updateAltTextData","isEnabledFor","copyCanvas","guess","channels","getBitmap","accept","files","click","drawBitmap","MAX_RATIO","maxDataDimension","maxPreviewDimension","bitmapWidth","bitmapHeight","outputScale","scaledWidth","scaledHeight","scaleBitmap","boxDim","boxDimWidth","boxDimHeight","patternCtx","dataWidth","dataHeight","offscreenCtx","serializeBitmap","toUrl","toDataURL","structParent","_structTree","changes","isSame","isSameAltText","stamps","area","prevData","isSamePageIndex","AnnotationEditorLayer","allowClick","annotationLayer","clickAC","editorFocusTimeoutId","hadPointerDown","isDisabling","isEnabling","drawingAC","focusedElement","textSelectionAC","textLayerDblClickAC","lastPointerDownTimestamp","_initialized","isInvisible","disableTextSelection","toggleAnnotationLayerPointerEvents","enableTextSelection","annotationElementIds","editables","elementsFromPoint","changedAnnotations","resetAnnotations","textLayerPointerDown","attach","detach","removePointerInTextLayer","currentEditorType","createNewEditor","getCenterPoint","currentMode","startDrawingSession","pause","oldRotation","DrawLayer","mapping","toUpdate","_svgFactory","setBox","createSVG","createClipPath","pathId","clipPathUse","isPathUpdatable","hasClip","use","mustRemoveSelfIntersections","maskId","use1","use2","cloneNode","elementOrId","pathElement","_pdfjsTestingUtils","pdfjsLib","FeatureTest","getFilenameFromUrl","getPdfFilenameFromUrl","defaultFilename","newURL","urlString","getURL","decoded","pdfRegex","pathname","searchParams","hashFilename","getXfaPageViewport","xfaPage","ImageKind","normalizeUnicode","_","PasswordResponses","NEED_PASSWORD","INCORRECT_PASSWORD","PermissionFlag","PRINT","MODIFY_CONTENTS","COPY","MODIFY_ANNOTATIONS","FILL_INTERACTIVE_FORMS","COPY_FOR_ACCESSIBILITY","ASSEMBLE","PRINT_HIGH_QUALITY","pdfjsLib.GlobalWorkerOptions","VNX_PDFJS","loadDocument","pdfDoc","pdfjsLib.getDocument","renderPage","pageNum","appendChild","renderContext"],"mappings":"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","x_google_ignoreList":[0]}